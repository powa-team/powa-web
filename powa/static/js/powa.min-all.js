(function(){(function(e,t){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(p,e){var t=[];var c=t.slice;var g=t.concat;var o=t.push;var r=t.indexOf;var n={};var i=n.toString;var m=n.hasOwnProperty;var v={};var y=p.document,a="2.1.4",x=function(e,t){return new x.fn.init(e,t)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=/^-ms-/,u=/-([\da-z])/gi,f=function(e,t){return t.toUpperCase()};x.fn=x.prototype={jquery:a,constructor:x,selector:"",length:0,toArray:function(){return c.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:c.call(this)},pushStack:function(e){var t=x.merge(this.constructor(),e);t.prevObject=this;t.context=this.context;return t},each:function(e,t){return x.each(this,e,t)},map:function(n){return this.pushStack(x.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:t.sort,splice:t.splice};x.extend=x.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=false;if(typeof s==="boolean"){u=s;s=arguments[o]||{};o++}if(typeof s!=="object"&&!x.isFunction(s)){s={}}if(o===l){s=this;o--}for(;o<l;o++){if((e=arguments[o])!=null){for(t in e){n=s[t];i=e[t];if(s===i){continue}if(u&&i&&(x.isPlainObject(i)||(r=x.isArray(i)))){if(r){r=false;a=n&&x.isArray(n)?n:[]}else{a=n&&x.isPlainObject(n)?n:{}}s[t]=x.extend(u,a,i)}else if(i!==undefined){s[t]=i}}}}return s};x.extend({expando:"jQuery"+(a+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return x.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){return!x.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){if(x.type(e)!=="object"||e.nodeType||x.isWindow(e)){return false}if(e.constructor&&!m.call(e.constructor.prototype,"isPrototypeOf")){return false}return true},isEmptyObject:function(e){var t;for(t in e){return false}return true},type:function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?n[i.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=x.trim(e);if(e){if(e.indexOf("use strict")===1){t=y.createElement("script");t.text=e;y.head.appendChild(t).parentNode.removeChild(t)}else{n(e)}}},camelCase:function(e){return e.replace(l,"ms-").replace(u,f)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i,r=0,a=e.length,s=h(e);if(n){if(s){for(;r<a;r++){i=t.apply(e[r],n);if(i===false){break}}}else{for(r in e){i=t.apply(e[r],n);if(i===false){break}}}}else{if(s){for(;r<a;r++){i=t.call(e[r],r,e[r]);if(i===false){break}}}else{for(r in e){i=t.call(e[r],r,e[r]);if(i===false){break}}}}return e},trim:function(e){return e==null?"":(e+"").replace(s,"")},makeArray:function(e,t){var n=t||[];if(e!=null){if(h(Object(e))){x.merge(n,typeof e==="string"?[e]:e)}else{o.call(n,e)}}return n},inArray:function(e,t,n){return t==null?-1:r.call(t,e,n)},merge:function(e,t){var n=+t.length,i=0,r=e.length;for(;i<n;i++){e[r++]=t[i]}e.length=r;return e},grep:function(e,t,n){var i,r=[],a=0,s=e.length,o=!n;for(;a<s;a++){i=!t(e[a],a);if(i!==o){r.push(e[a])}}return r},map:function(e,t,n){var i,r=0,a=e.length,s=h(e),o=[];if(s){for(;r<a;r++){i=t(e[r],r,n);if(i!=null){o.push(i)}}}else{for(r in e){i=t(e[r],r,n);if(i!=null){o.push(i)}}}return g.apply([],o)},guid:1,proxy:function(e,t){var n,i,r;if(typeof t==="string"){n=e[t];t=e;e=n}if(!x.isFunction(e)){return undefined}i=c.call(arguments,2);r=function(){return e.apply(t||this,i.concat(c.call(arguments)))};r.guid=e.guid=e.guid||x.guid++;return r},now:Date.now,support:v});x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});function h(e){var t="length"in e&&e.length,n=x.type(e);if(n==="function"||x.isWindow(e)){return false}if(e.nodeType===1&&t){return true}return n==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var d=function(n){var e,p,w,a,i,g,f,m,b,u,c,v,E,r,y,_,s,o,x,T="sizzle"+1*new Date,N=n.document,S=0,h=0,l=se(),d=se(),C=se(),A=function(e,t){if(e===t){c=true}return 0},k=1<<31,M={}.hasOwnProperty,t=[],R=t.pop,O=t.push,I=t.push,D=t.slice,L=function(e,t){var n=0,i=e.length;for(;n<i;n++){if(e[n]===t){return n}}return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",H=U.replace("w","w#"),G="\\["+F+"*("+U+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+F+"*\\]",Y=":("+U+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|"+".*"+")\\)|)",j=new RegExp(F+"+","g"),z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),B=new RegExp("^"+F+"*,"+F+"*"),q=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),W=new RegExp(Y),$=new RegExp("^"+H+"$"),X={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U.replace("w","w*")+")"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+Y),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ie=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},re=function(){v()};try{I.apply(t=D.call(N.childNodes),N.childNodes);t[N.childNodes.length].nodeType}catch(e){I={apply:t.length?function(e,t){O.apply(e,D.call(t))}:function(e,t){var n=e.length,i=0;while(e[n++]=t[i++]){}e.length=n-1}}}function ae(e,t,n,i){var r,a,s,o,l,u,c,f,h,d;if((t?t.ownerDocument||t:N)!==E){v(t)}t=t||E;n=n||[];o=t.nodeType;if(typeof e!=="string"||!e||o!==1&&o!==9&&o!==11){return n}if(!i&&y){if(o!==11&&(r=Q.exec(e))){if(s=r[1]){if(o===9){a=t.getElementById(s);if(a&&a.parentNode){if(a.id===s){n.push(a);return n}}else{return n}}else{if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&x(t,a)&&a.id===s){n.push(a);return n}}}else if(r[2]){I.apply(n,t.getElementsByTagName(e));return n}else if((s=r[3])&&p.getElementsByClassName){I.apply(n,t.getElementsByClassName(s));return n}}if(p.qsa&&(!_||!_.test(e))){f=c=T;h=t;d=o!==1&&e;if(o===1&&t.nodeName.toLowerCase()!=="object"){u=g(e);if(c=t.getAttribute("id")){f=c.replace(te,"\\$&")}else{t.setAttribute("id",f)}f="[id='"+f+"'] ";l=u.length;while(l--){u[l]=f+me(u[l])}h=ee.test(e)&&pe(t.parentNode)||t;d=u.join(",")}if(d){try{I.apply(n,h.querySelectorAll(d));return n}catch(e){}finally{if(!c){t.removeAttribute("id")}}}}}return m(e.replace(z,"$1"),t,n,i)}function se(){var n=[];function i(e,t){if(n.push(e+" ")>w.cacheLength){delete i[n.shift()]}return i[e+" "]=t}return i}function oe(e){e[T]=true;return e}function le(e){var t=E.createElement("div");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ue(e,t){var n=e.split("|"),i=e.length;while(i--){w.attrHandle[n[i]]=t}}function ce(e,t){var n=t&&e,i=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(i){return i}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function fe(n){return function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type===n}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&e.type===n}}function de(s){return oe(function(a){a=+a;return oe(function(e,t){var n,i=s([],e.length,a),r=i.length;while(r--){if(e[n=i[r]]){e[n]=!(t[n]=e[n])}}})})}function pe(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}p=ae.support={};i=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};v=ae.setDocument=function(e){var t,n,l=e?e.ownerDocument||e:N;if(l===E||l.nodeType!==9||!l.documentElement){return E}E=l;r=l.documentElement;n=l.defaultView;if(n&&n!==n.top){if(n.addEventListener){n.addEventListener("unload",re,false)}else if(n.attachEvent){n.attachEvent("onunload",re)}}y=!i(l);p.attributes=le(function(e){e.className="i";return!e.getAttribute("className")});p.getElementsByTagName=le(function(e){e.appendChild(l.createComment(""));return!e.getElementsByTagName("*").length});p.getElementsByClassName=Z.test(l.getElementsByClassName);p.getById=le(function(e){r.appendChild(e).id=T;return!l.getElementsByName||!l.getElementsByName(T).length});if(p.getById){w.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&y){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}};w.filter["ID"]=function(e){var t=e.replace(ne,ie);return function(e){return e.getAttribute("id")===t}}}else{delete w.find["ID"];w.filter["ID"]=function(e){var n=e.replace(ne,ie);return function(e){var t=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return t&&t.value===n}}}w.find["TAG"]=p.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(p.qsa){return t.querySelectorAll(e)}}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if(e==="*"){while(n=a[r++]){if(n.nodeType===1){i.push(n)}}return i}return a};w.find["CLASS"]=p.getElementsByClassName&&function(e,t){if(y){return t.getElementsByClassName(e)}};s=[];_=[];if(p.qsa=Z.test(l.querySelectorAll)){le(function(e){r.appendChild(e).innerHTML="<a id='"+T+"'></a>"+"<select id='"+T+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){_.push("[*^$]="+F+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){_.push("\\["+F+"*(?:value|"+P+")")}if(!e.querySelectorAll("[id~="+T+"-]").length){_.push("~=")}if(!e.querySelectorAll(":checked").length){_.push(":checked")}if(!e.querySelectorAll("a#"+T+"+*").length){_.push(".#.+[+~]")}});le(function(e){var t=l.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){_.push("name"+F+"*[*^$|!~]?=")}if(!e.querySelectorAll(":enabled").length){_.push(":enabled",":disabled")}e.querySelectorAll("*,:x");_.push(",.*:")})}if(p.matchesSelector=Z.test(o=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector)){le(function(e){p.disconnectedMatch=o.call(e,"div");o.call(e,"[s!='']:x");s.push("!=",Y)})}_=_.length&&new RegExp(_.join("|"));s=s.length&&new RegExp(s.join("|"));t=Z.test(r.compareDocumentPosition);x=t||Z.test(r.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&i.nodeType===1&&(n.contains?n.contains(i):e.compareDocumentPosition&&e.compareDocumentPosition(i)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};A=t?function(e,t){if(e===t){c=true;return 0}var n=!e.compareDocumentPosition-!t.compareDocumentPosition;if(n){return n}n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(n&1||!p.sortDetached&&t.compareDocumentPosition(e)===n){if(e===l||e.ownerDocument===N&&x(N,e)){return-1}if(t===l||t.ownerDocument===N&&x(N,t)){return 1}return u?L(u,e)-L(u,t):0}return n&4?-1:1}:function(e,t){if(e===t){c=true;return 0}var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a){return e===l?-1:t===l?1:r?-1:a?1:u?L(u,e)-L(u,t):0}else if(r===a){return ce(e,t)}n=e;while(n=n.parentNode){s.unshift(n)}n=t;while(n=n.parentNode){o.unshift(n)}while(s[i]===o[i]){i++}return i?ce(s[i],o[i]):s[i]===N?-1:o[i]===N?1:0};return l};ae.matches=function(e,t){return ae(e,null,null,t)};ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==E){v(e)}t=t.replace(V,"='$1']");if(p.matchesSelector&&y&&(!s||!s.test(t))&&(!_||!_.test(t))){try{var n=o.call(e,t);if(n||p.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){}}return ae(t,E,null,[e]).length>0};ae.contains=function(e,t){if((e.ownerDocument||e)!==E){v(e)}return x(e,t)};ae.attr=function(e,t){if((e.ownerDocument||e)!==E){v(e)}var n=w.attrHandle[t.toLowerCase()],i=n&&M.call(w.attrHandle,t.toLowerCase())?n(e,t,!y):undefined;return i!==undefined?i:p.attributes||!y?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null};ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};ae.uniqueSort=function(e){var t,n=[],i=0,r=0;c=!p.detectDuplicates;u=!p.sortStable&&e.slice(0);e.sort(A);if(c){while(t=e[r++]){if(t===e[r]){i=n.push(r)}}while(i--){e.splice(n[i],1)}}u=null;return e};a=ae.getText=function(e){var t,n="",i=0,r=e.nodeType;if(!r){while(t=e[i++]){n+=a(t)}}else if(r===1||r===9||r===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=a(e)}}}else if(r===3||r===4){return e.nodeValue}return n};w=ae.selectors={cacheLength:50,createPseudo:oe,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(ne,ie);e[3]=(e[3]||e[4]||e[5]||"").replace(ne,ie);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){ae.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){ae.error(e[0])}return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(X["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(n&&W.test(n)&&(t=g(n,true))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(ne,ie).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=l[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&l(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=ae.attr(e,n);if(t==null){return i==="!="}if(!i){return true}t+="";return i==="="?t===r:i==="!="?t!==r:i==="^="?r&&t.indexOf(r)===0:i==="*="?r&&t.indexOf(r)>-1:i==="$="?r&&t.slice(-r.length)===r:i==="~="?(" "+t.replace(j," ")+" ").indexOf(r)>-1:i==="|="?t===r||t.slice(0,r.length+1)===r+"-":false}},CHILD:function(d,e,t,p,g){var m=d.slice(0,3)!=="nth",v=d.slice(-4)!=="last",y=e==="of-type";return p===1&&g===0?function(e){return!!e.parentNode}:function(e,t,n){var i,r,a,s,o,l,u=m!==v?"nextSibling":"previousSibling",c=e.parentNode,f=y&&e.nodeName.toLowerCase(),h=!n&&!y;if(c){if(m){while(u){a=e;while(a=a[u]){if(y?a.nodeName.toLowerCase()===f:a.nodeType===1){return false}}l=u=d==="only"&&!l&&"nextSibling"}return true}l=[v?c.firstChild:c.lastChild];if(v&&h){r=c[T]||(c[T]={});i=r[d]||[];o=i[0]===S&&i[1];s=i[0]===S&&i[2];a=o&&c.childNodes[o];while(a=++o&&a&&a[u]||(s=o=0)||l.pop()){if(a.nodeType===1&&++s&&a===e){r[d]=[S,o,s];break}}}else if(h&&(i=(e[T]||(e[T]={}))[d])&&i[0]===S){s=i[1]}else{while(a=++o&&a&&a[u]||(s=o=0)||l.pop()){if((y?a.nodeName.toLowerCase()===f:a.nodeType===1)&&++s){if(h){(a[T]||(a[T]={}))[d]=[S,s]}if(a===e){break}}}}s-=g;return s===p||s%p===0&&s/p>=0}}},PSEUDO:function(e,a){var t,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);if(s[T]){return s(a)}if(s.length>1){t=[e,e,"",a];return w.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){var n,i=s(e,a),r=i.length;while(r--){n=L(e,i[r]);e[n]=!(t[n]=i[r])}}):function(e){return s(e,0,t)}}return s}},pseudos:{not:oe(function(e){var i=[],r=[],o=f(e.replace(z,"$1"));return o[T]?oe(function(e,t,n,i){var r,a=o(e,null,i,[]),s=e.length;while(s--){if(r=a[s]){e[s]=!(t[s]=r)}}}):function(e,t,n){i[0]=e;o(i,null,n,r);i[0]=null;return!r.pop()}}),has:oe(function(t){return function(e){return ae(t,e).length>0}}),contains:oe(function(t){t=t.replace(ne,ie);return function(e){return(e.textContent||e.innerText||a(e)).indexOf(t)>-1}}),lang:oe(function(n){if(!$.test(n||"")){ae.error("unsupported lang: "+n)}n=n.replace(ne,ie).toLowerCase();return function(e){var t;do{if(t=y?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){t=t.toLowerCase();return t===n||t.indexOf(n+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!w.pseudos["empty"](e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,n){return[n<0?n+t:n]}),even:de(function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e}),odd:de(function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e}),lt:de(function(e,t,n){var i=n<0?n+t:n;for(;--i>=0;){e.push(i)}return e}),gt:de(function(e,t,n){var i=n<0?n+t:n;for(;++i<t;){e.push(i)}return e})}};w.pseudos["nth"]=w.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){w.pseudos[e]=fe(e)}for(e in{submit:true,reset:true}){w.pseudos[e]=he(e)}function ge(){}ge.prototype=w.filters=w.pseudos;w.setFilters=new ge;g=ae.tokenize=function(e,t){var n,i,r,a,s,o,l,u=d[e+" "];if(u){return t?0:u.slice(0)}s=e;o=[];l=w.preFilter;while(s){if(!n||(i=B.exec(s))){if(i){s=s.slice(i[0].length)||s}o.push(r=[])}n=false;if(i=q.exec(s)){n=i.shift();r.push({value:n,type:i[0].replace(z," ")});s=s.slice(n.length)}for(a in w.filter){if((i=X[a].exec(s))&&(!l[a]||(i=l[a](i)))){n=i.shift();r.push({value:n,type:a,matches:i});s=s.slice(n.length)}}if(!n){break}}return t?s.length:s?ae.error(e):d(e,o).slice(0)};function me(e){var t=0,n=e.length,i="";for(;t<n;t++){i+=e[t].value}return i}function ve(s,e,t){var o=e.dir,l=t&&o==="parentNode",u=h++;return e.first?function(e,t,n){while(e=e[o]){if(e.nodeType===1||l){return s(e,t,n)}}}:function(e,t,n){var i,r,a=[S,u];if(n){while(e=e[o]){if(e.nodeType===1||l){if(s(e,t,n)){return true}}}}else{while(e=e[o]){if(e.nodeType===1||l){r=e[T]||(e[T]={});if((i=r[o])&&i[0]===S&&i[1]===u){return a[2]=i[2]}else{r[o]=a;if(a[2]=s(e,t,n)){return true}}}}}}}function ye(r){return r.length>1?function(e,t,n){var i=r.length;while(i--){if(!r[i](e,t,n)){return false}}return true}:r[0]}function _e(e,t,n){var i=0,r=t.length;for(;i<r;i++){ae(e,t[i],n)}return n}function we(e,t,n,i,r){var a,s=[],o=0,l=e.length,u=t!=null;for(;o<l;o++){if(a=e[o]){if(!n||n(a,i,r)){s.push(a);if(u){t.push(o)}}}}return s}function be(d,p,g,m,v,e){if(m&&!m[T]){m=be(m)}if(v&&!v[T]){v=be(v,e)}return oe(function(e,t,n,i){var r,a,s,o=[],l=[],u=t.length,c=e||_e(p||"*",n.nodeType?[n]:n,[]),f=d&&(e||!p)?we(c,o,d,n,i):c,h=g?v||(e?d:u||m)?[]:t:f;if(g){g(f,h,n,i)}if(m){r=we(h,l);m(r,[],n,i);a=r.length;while(a--){if(s=r[a]){h[l[a]]=!(f[l[a]]=s)}}}if(e){if(v||d){if(v){r=[];a=h.length;while(a--){if(s=h[a]){r.push(f[a]=s)}}v(null,h=[],r,i)}a=h.length;while(a--){if((s=h[a])&&(r=v?L(e,s):o[a])>-1){e[r]=!(t[r]=s)}}}}else{h=we(h===t?h.splice(u,h.length):h);if(v){v(null,t,h,i)}else{I.apply(t,h)}}})}function Ee(e){var r,t,n,i=e.length,a=w.relative[e[0].type],s=a||w.relative[" "],o=a?1:0,l=ve(function(e){return e===r},s,true),u=ve(function(e){return L(r,e)>-1},s,true),c=[function(e,t,n){var i=!a&&(n||t!==b)||((r=t).nodeType?l(e,t,n):u(e,t,n));r=null;return i}];for(;o<i;o++){if(t=w.relative[e[o].type]){c=[ve(ye(c),t)]}else{t=w.filter[e[o].type].apply(null,e[o].matches);if(t[T]){n=++o;for(;n<i;n++){if(w.relative[e[n].type]){break}}return be(o>1&&ye(c),o>1&&me(e.slice(0,o-1).concat({value:e[o-2].type===" "?"*":""})).replace(z,"$1"),t,o<n&&Ee(e.slice(o,n)),n<i&&Ee(e=e.slice(n)),n<i&&me(e))}c.push(t)}}return ye(c)}function xe(m,v){var y=v.length>0,_=m.length>0,e=function(e,t,n,i,r){var a,s,o,l=0,u="0",c=e&&[],f=[],h=b,d=e||_&&w.find["TAG"]("*",r),p=S+=h==null?1:Math.random()||.1,g=d.length;if(r){b=t!==E&&t}for(;u!==g&&(a=d[u])!=null;u++){if(_&&a){s=0;while(o=m[s++]){if(o(a,t,n)){i.push(a);break}}if(r){S=p}}if(y){if(a=!o&&a){l--}if(e){c.push(a)}}}l+=u;if(y&&u!==l){s=0;while(o=v[s++]){o(c,f,t,n)}if(e){if(l>0){while(u--){if(!(c[u]||f[u])){f[u]=R.call(i)}}}f=we(f)}I.apply(i,f);if(r&&!e&&f.length>0&&l+v.length>1){ae.uniqueSort(i)}}if(r){S=p;b=h}return c};return y?oe(e):e}f=ae.compile=function(e,t){var n,i=[],r=[],a=C[e+" "];if(!a){if(!t){t=g(e)}n=t.length;while(n--){a=Ee(t[n]);if(a[T]){i.push(a)}else{r.push(a)}}a=C(e,xe(r,i));a.selector=e}return a};m=ae.select=function(e,t,n,i){var r,a,s,o,l,u=typeof e==="function"&&e,c=!i&&g(e=u.selector||e);n=n||[];if(c.length===1){a=c[0]=c[0].slice(0);if(a.length>2&&(s=a[0]).type==="ID"&&p.getById&&t.nodeType===9&&y&&w.relative[a[1].type]){t=(w.find["ID"](s.matches[0].replace(ne,ie),t)||[])[0];if(!t){return n}else if(u){t=t.parentNode}e=e.slice(a.shift().value.length)}r=X["needsContext"].test(e)?0:a.length;while(r--){s=a[r];if(w.relative[o=s.type]){break}if(l=w.find[o]){if(i=l(s.matches[0].replace(ne,ie),ee.test(a[0].type)&&pe(t.parentNode)||t)){a.splice(r,1);e=i.length&&me(a);if(!e){I.apply(n,i);return n}break}}}}(u||f(e,c))(i,t,!y,n,ee.test(e)&&pe(t.parentNode)||t);return n};p.sortStable=T.split("").sort(A).join("")===T;p.detectDuplicates=!!c;v();p.sortDetached=le(function(e){return e.compareDocumentPosition(E.createElement("div"))&1});if(!le(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){ue("type|href|height|width",function(e,t,n){if(!n){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!p.attributes||!le(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){ue("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!le(function(e){return e.getAttribute("disabled")==null})){ue(P,function(e,t,n){var i;if(!n){return e[t]===true?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}})}return ae}(p);x.find=d;x.expr=d.selectors;x.expr[":"]=x.expr.pseudos;x.unique=d.uniqueSort;x.text=d.getText;x.isXMLDoc=d.isXML;x.contains=d.contains;var _=x.expr.match.needsContext;var w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var b=/^.[^:#\[\.,]*$/;function E(e,n,i){if(x.isFunction(n)){return x.grep(e,function(e,t){return!!n.call(e,t,e)!==i})}if(n.nodeType){return x.grep(e,function(e){return e===n!==i})}if(typeof n==="string"){if(b.test(n)){return x.filter(n,e,i)}n=x.filter(n,e)}return x.grep(e,function(e){return r.call(n,e)>=0!==i})}x.filter=function(e,t,n){var i=t[0];if(n){e=":not("+e+")"}return t.length===1&&i.nodeType===1?x.find.matchesSelector(i,e)?[i]:[]:x.find.matches(e,x.grep(t,function(e){return e.nodeType===1}))};x.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if(typeof e!=="string"){return this.pushStack(x(e).filter(function(){for(t=0;t<n;t++){if(x.contains(r[t],this)){return true}}}))}for(t=0;t<n;t++){x.find(e,r[t],i)}i=this.pushStack(n>1?x.unique(i):i);i.selector=this.selector?this.selector+" "+e:e;return i},filter:function(e){return this.pushStack(E(this,e||[],false))},not:function(e){return this.pushStack(E(this,e||[],true))},is:function(e){return!!E(this,typeof e==="string"&&_.test(e)?x(e):e||[],false).length}});var T,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,S=x.fn.init=function(e,t){var n,i;if(!e){return this}if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){n=[null,e,null]}else{n=N.exec(e)}if(n&&(n[1]||!t)){if(n[1]){t=t instanceof x?t[0]:t;x.merge(this,x.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:y,true));if(w.test(n[1])&&x.isPlainObject(t)){for(n in t){if(x.isFunction(this[n])){this[n](t[n])}else{this.attr(n,t[n])}}}return this}else{i=y.getElementById(n[2]);if(i&&i.parentNode){this.length=1;this[0]=i}this.context=y;this.selector=e;return this}}else if(!t||t.jquery){return(t||T).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else if(x.isFunction(e)){return typeof T.ready!=="undefined"?T.ready(e):e(x)}if(e.selector!==undefined){this.selector=e.selector;this.context=e.context}return x.makeArray(e,this)};S.prototype=x.fn;T=x(y);var C=/^(?:parents|prev(?:Until|All))/,A={children:true,contents:true,next:true,prev:true};x.extend({dir:function(e,t,n){var i=[],r=n!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(r&&x(e).is(n)){break}i.push(e)}}return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){n.push(e)}}return n}});x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++){if(x.contains(this,t[e])){return true}}})},closest:function(e,t){var n,i=0,r=this.length,a=[],s=_.test(e)||typeof e!=="string"?x(e,t||this.context):0;for(;i<r;i++){for(n=this[i];n&&n!==t;n=n.parentNode){if(n.nodeType<11&&(s?s.index(n)>-1:n.nodeType===1&&x.find.matchesSelector(n,e))){a.push(n);break}}}return this.pushStack(a.length>1?x.unique(a):a)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return r.call(x(e),this[0])}return r.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(x.unique(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function k(e,t){while((e=e[t])&&e.nodeType!==1){}return e}x.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return k(e,"nextSibling")},prev:function(e){return k(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(i,r){x.fn[i]=function(e,t){var n=x.map(this,r,e);if(i.slice(-5)!=="Until"){t=e}if(t&&typeof t==="string"){n=x.filter(t,n)}if(this.length>1){if(!A[i]){x.unique(n)}if(C.test(i)){n.reverse()}}return this.pushStack(n)}});var M=/\S+/g;var R={};function O(e){var n=R[e]={};x.each(e.match(M)||[],function(e,t){n[t]=true});return n}x.Callbacks=function(r){r=typeof r==="string"?R[r]||O(r):x.extend({},r);var t,n,i,a,s,o,l=[],u=!r.once&&[],c=function(e){t=r.memory&&e;n=true;o=a||0;a=0;s=l.length;i=true;for(;l&&o<s;o++){if(l[o].apply(e[0],e[1])===false&&r.stopOnFalse){t=false;break}}i=false;if(l){if(u){if(u.length){c(u.shift())}}else if(t){l=[]}else{f.disable()}}},f={add:function(){if(l){var e=l.length;(function i(e){x.each(e,function(e,t){var n=x.type(t);if(n==="function"){if(!r.unique||!f.has(t)){l.push(t)}}else if(t&&t.length&&n!=="string"){i(t)}})})(arguments);if(i){s=l.length}else if(t){a=e;c(t)}}return this},remove:function(){if(l){x.each(arguments,function(e,t){var n;while((n=x.inArray(t,l,n))>-1){l.splice(n,1);if(i){if(n<=s){s--}if(n<=o){o--}}}})}return this},has:function(e){return e?x.inArray(e,l)>-1:!!(l&&l.length)},empty:function(){l=[];s=0;return this},disable:function(){l=u=t=undefined;return this},disabled:function(){return!l},lock:function(){u=undefined;if(!t){f.disable()}return this},locked:function(){return!u},fireWith:function(e,t){if(l&&(!n||u)){t=t||[];t=[e,t.slice?t.slice():t];if(i){u.push(t)}else{c(t)}}return this},fire:function(){f.fireWith(this,arguments);return this},fired:function(){return!!n}};return f};x.extend({Deferred:function(e){var a=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],r="pending",s={state:function(){return r},always:function(){o.done(arguments).fail(arguments);return this},then:function(){var r=arguments;return x.Deferred(function(i){x.each(a,function(e,t){var n=x.isFunction(r[e])&&r[e];o[t[1]](function(){var e=n&&n.apply(this,arguments);if(e&&x.isFunction(e.promise)){e.promise().done(i.resolve).fail(i.reject).progress(i.notify)}else{i[t[0]+"With"](this===s?i.promise():this,n?[e]:arguments)}})});r=null}).promise()},promise:function(e){return e!=null?x.extend(e,s):s}},o={};s.pipe=s.then;x.each(a,function(e,t){var n=t[2],i=t[3];s[t[1]]=n.add;if(i){n.add(function(){r=i},a[e^1][2].disable,a[2][2].lock)}o[t[0]]=function(){o[t[0]+"With"](this===o?s:this,arguments);return this};o[t[0]+"With"]=n.fireWith});s.promise(o);if(e){e.call(o,o)}return o},when:function(e){var t=0,n=c.call(arguments),i=n.length,r=i!==1||e&&x.isFunction(e.promise)?i:0,a=r===1?e:x.Deferred(),s=function(t,n,i){return function(e){n[t]=this;i[t]=arguments.length>1?c.call(arguments):e;if(i===o){a.notifyWith(n,i)}else if(!--r){a.resolveWith(n,i)}}},o,l,u;if(i>1){o=new Array(i);l=new Array(i);u=new Array(i);for(;t<i;t++){if(n[t]&&x.isFunction(n[t].promise)){n[t].promise().done(s(t,u,n)).fail(a.reject).progress(s(t,l,o))}else{--r}}}if(!r){a.resolveWith(u,n)}return a.promise()}});var I;x.fn.ready=function(e){x.ready.promise().done(e);return this};x.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){x.readyWait++}else{x.ready(true)}},ready:function(e){if(e===true?--x.readyWait:x.isReady){return}x.isReady=true;if(e!==true&&--x.readyWait>0){return}I.resolveWith(y,[x]);if(x.fn.triggerHandler){x(y).triggerHandler("ready");x(y).off("ready")}}});function D(){y.removeEventListener("DOMContentLoaded",D,false);p.removeEventListener("load",D,false);x.ready()}x.ready.promise=function(e){if(!I){I=x.Deferred();if(y.readyState==="complete"){setTimeout(x.ready)}else{y.addEventListener("DOMContentLoaded",D,false);p.addEventListener("load",D,false)}}return I.promise(e)};x.ready.promise();var L=x.access=function(e,t,n,i,r,a,s){var o=0,l=e.length,u=n==null;if(x.type(n)==="object"){r=true;for(o in n){x.access(e,t,o,n[o],true,a,s)}}else if(i!==undefined){r=true;if(!x.isFunction(i)){s=true}if(u){if(s){t.call(e,i);t=null}else{u=t;t=function(e,t,n){return u.call(x(e),n)}}}if(t){for(;o<l;o++){t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)))}}}return r?e:u?t.call(e):l?t(e[0],n):a};x.acceptData=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function P(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=x.expando+P.uid++}P.uid=1;P.accepts=x.acceptData;P.prototype={key:function(t){if(!P.accepts(t)){return 0}var n={},i=t[this.expando];if(!i){i=P.uid++;try{n[this.expando]={value:i};Object.defineProperties(t,n)}catch(e){n[this.expando]=i;x.extend(t,n)}}if(!this.cache[i]){this.cache[i]={}}return i},set:function(e,t,n){var i,r=this.key(e),a=this.cache[r];if(typeof t==="string"){a[t]=n}else{if(x.isEmptyObject(a)){x.extend(this.cache[r],t)}else{for(i in t){a[i]=t[i]}}}return a},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var i;if(t===undefined||t&&typeof t==="string"&&n===undefined){i=this.get(e,t);return i!==undefined?i:this.get(e,x.camelCase(t))}this.set(e,t,n);return n!==undefined?n:t},remove:function(e,t){var n,i,r,a=this.key(e),s=this.cache[a];if(t===undefined){this.cache[a]={}}else{if(x.isArray(t)){i=t.concat(t.map(x.camelCase))}else{r=x.camelCase(t);if(t in s){i=[t,r]}else{i=r;i=i in s?[i]:i.match(M)||[]}}n=i.length;while(n--){delete s[i[n]]}}},hasData:function(e){return!x.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){if(e[this.expando]){delete this.cache[e[this.expando]]}}};var F=new P;var U=new P;var H=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,G=/([A-Z])/g;function Y(e,t,n){var i;if(n===undefined&&e.nodeType===1){i="data-"+t.replace(G,"-$1").toLowerCase();n=e.getAttribute(i);if(typeof n==="string"){try{n=n==="true"?true:n==="false"?false:n==="null"?null:+n+""===n?+n:H.test(n)?x.parseJSON(n):n}catch(e){}U.set(e,t,n)}else{n=undefined}}return n}x.extend({hasData:function(e){return U.hasData(e)||F.hasData(e)},data:function(e,t,n){return U.access(e,t,n)},removeData:function(e,t){U.remove(e,t)},_data:function(e,t,n){return F.access(e,t,n)},_removeData:function(e,t){F.remove(e,t)}});x.fn.extend({data:function(i,e){var t,n,r,a=this[0],s=a&&a.attributes;if(i===undefined){if(this.length){r=U.get(a);if(a.nodeType===1&&!F.get(a,"hasDataAttrs")){t=s.length;while(t--){if(s[t]){n=s[t].name;if(n.indexOf("data-")===0){n=x.camelCase(n.slice(5));Y(a,n,r[n])}}}F.set(a,"hasDataAttrs",true)}}return r}if(typeof i==="object"){return this.each(function(){U.set(this,i)})}return L(this,function(t){var e,n=x.camelCase(i);if(a&&t===undefined){e=U.get(a,i);if(e!==undefined){return e}e=U.get(a,n);if(e!==undefined){return e}e=Y(a,n,undefined);if(e!==undefined){return e}return}this.each(function(){var e=U.get(this,n);U.set(this,n,t);if(i.indexOf("-")!==-1&&e!==undefined){U.set(this,i,t)}})},null,e,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){U.remove(this,e)})}});x.extend({queue:function(e,t,n){var i;if(e){t=(t||"fx")+"queue";i=F.get(e,t);if(n){if(!i||x.isArray(n)){i=F.access(e,t,x.makeArray(n))}else{i.push(n)}}return i||[]}},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),i=n.length,r=n.shift(),a=x._queueHooks(e,t),s=function(){x.dequeue(e,t)};if(r==="inprogress"){r=n.shift();i--}if(r){if(t==="fx"){n.unshift("inprogress")}delete a.stop;r.call(e,s,a)}if(!i&&a){a.empty.fire()}},_queueHooks:function(e,t){var n=t+"queueHooks";return F.get(e,n)||F.access(e,n,{empty:x.Callbacks("once memory").add(function(){F.remove(e,[t+"queue",n])})})}});x.fn.extend({queue:function(t,n){var e=2;if(typeof t!=="string"){n=t;t="fx";e--}if(arguments.length<e){return x.queue(this[0],t)}return n===undefined?this:this.each(function(){var e=x.queue(this,t,n);x._queueHooks(this,t);if(t==="fx"&&e[0]!=="inprogress"){x.dequeue(this,t)}})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=x.Deferred(),a=this,s=this.length,o=function(){if(!--i){r.resolveWith(a,[a])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(s--){n=F.get(a[s],e+"queueHooks");if(n&&n.empty){i++;n.empty.add(o)}}o();return r.promise(t)}});var j=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var z=["Top","Right","Bottom","Left"];var B=function(e,t){e=t||e;return x.css(e,"display")==="none"||!x.contains(e.ownerDocument,e)};var q=/^(?:checkbox|radio)$/i;(function(){var e=y.createDocumentFragment(),t=e.appendChild(y.createElement("div")),n=y.createElement("input");n.setAttribute("type","radio");n.setAttribute("checked","checked");n.setAttribute("name","t");t.appendChild(n);v.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";v.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var V=typeof undefined;v.focusinBubbles="onfocusin"in p;var W=/^key/,$=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,J=/^([^.]*)(?:\.(.+)|)$/;function K(){return true}function Z(){return false}function Q(){try{return y.activeElement}catch(e){}}x.event={global:{},add:function(t,e,n,i,r){var a,s,o,l,u,c,f,h,d,p,g,m=F.get(t);if(!m){return}if(n.handler){a=n;n=a.handler;r=a.selector}if(!n.guid){n.guid=x.guid++}if(!(l=m.events)){l=m.events={}}if(!(s=m.handle)){s=m.handle=function(e){return typeof x!==V&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(M)||[""];u=e.length;while(u--){o=J.exec(e[u])||[];d=g=o[1];p=(o[2]||"").split(".").sort();if(!d){continue}f=x.event.special[d]||{};d=(r?f.delegateType:f.bindType)||d;f=x.event.special[d]||{};c=x.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:p.join(".")},a);if(!(h=l[d])){h=l[d]=[];h.delegateCount=0;if(!f.setup||f.setup.call(t,i,p,s)===false){if(t.addEventListener){t.addEventListener(d,s,false)}}}if(f.add){f.add.call(t,c);if(!c.handler.guid){c.handler.guid=n.guid}}if(r){h.splice(h.delegateCount++,0,c)}else{h.push(c)}x.event.global[d]=true}},remove:function(e,t,n,i,r){var a,s,o,l,u,c,f,h,d,p,g,m=F.hasData(e)&&F.get(e);if(!m||!(l=m.events)){return}t=(t||"").match(M)||[""];u=t.length;while(u--){o=J.exec(t[u])||[];d=g=o[1];p=(o[2]||"").split(".").sort();if(!d){for(d in l){x.event.remove(e,d+t[u],n,i,true)}continue}f=x.event.special[d]||{};d=(i?f.delegateType:f.bindType)||d;h=l[d]||[];o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");s=a=h.length;while(a--){c=h[a];if((r||g===c.origType)&&(!n||n.guid===c.guid)&&(!o||o.test(c.namespace))&&(!i||i===c.selector||i==="**"&&c.selector)){h.splice(a,1);if(c.selector){h.delegateCount--}if(f.remove){f.remove.call(e,c)}}}if(s&&!h.length){if(!f.teardown||f.teardown.call(e,p,m.handle)===false){x.removeEvent(e,d,m.handle)}delete l[d]}}if(x.isEmptyObject(l)){delete m.handle;F.remove(e,"events")}},trigger:function(e,t,n,i){var r,a,s,o,l,u,c,f=[n||y],h=m.call(e,"type")?e.type:e,d=m.call(e,"namespace")?e.namespace.split("."):[];a=s=n=n||y;if(n.nodeType===3||n.nodeType===8){return}if(X.test(h+x.event.triggered)){return}if(h.indexOf(".")>=0){d=h.split(".");h=d.shift();d.sort()}l=h.indexOf(":")<0&&"on"+h;e=e[x.expando]?e:new x.Event(h,typeof e==="object"&&e);e.isTrigger=i?2:3;e.namespace=d.join(".");e.namespace_re=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=n}t=t==null?[e]:x.makeArray(t,[e]);c=x.event.special[h]||{};if(!i&&c.trigger&&c.trigger.apply(n,t)===false){return}if(!i&&!c.noBubble&&!x.isWindow(n)){o=c.delegateType||h;if(!X.test(o+h)){a=a.parentNode}for(;a;a=a.parentNode){f.push(a);s=a}if(s===(n.ownerDocument||y)){f.push(s.defaultView||s.parentWindow||p)}}r=0;while((a=f[r++])&&!e.isPropagationStopped()){e.type=r>1?o:c.bindType||h;u=(F.get(a,"events")||{})[e.type]&&F.get(a,"handle");if(u){u.apply(a,t)}u=l&&a[l];if(u&&u.apply&&x.acceptData(a)){e.result=u.apply(a,t);if(e.result===false){e.preventDefault()}}}e.type=h;if(!i&&!e.isDefaultPrevented()){if((!c._default||c._default.apply(f.pop(),t)===false)&&x.acceptData(n)){if(l&&x.isFunction(n[h])&&!x.isWindow(n)){s=n[l];if(s){n[l]=null}x.event.triggered=h;n[h]();x.event.triggered=undefined;if(s){n[l]=s}}}}return e.result},dispatch:function(e){e=x.event.fix(e);var t,n,i,r,a,s=[],o=c.call(arguments),l=(F.get(this,"events")||{})[e.type]||[],u=x.event.special[e.type]||{};o[0]=e;e.delegateTarget=this;if(u.preDispatch&&u.preDispatch.call(this,e)===false){return}s=x.event.handlers.call(this,e,l);t=0;while((r=s[t++])&&!e.isPropagationStopped()){e.currentTarget=r.elem;n=0;while((a=r.handlers[n++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(a.namespace)){e.handleObj=a;e.data=a.data;i=((x.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o);if(i!==undefined){if((e.result=i)===false){e.preventDefault();e.stopPropagation()}}}}}if(u.postDispatch){u.postDispatch.call(this,e)}return e.result},handlers:function(e,t){var n,i,r,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||e.type!=="click")){for(;l!==this;l=l.parentNode||this){if(l.disabled!==true||e.type!=="click"){i=[];for(n=0;n<o;n++){a=t[n];r=a.selector+" ";if(i[r]===undefined){i[r]=a.needsContext?x(r,this).index(l)>=0:x.find(r,this,null,[l]).length}if(i[r]){i.push(a)}}if(i.length){s.push({elem:l,handlers:i})}}}}if(o<t.length){s.push({elem:this,handlers:t.slice(o)})}return s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}return e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,a=t.button;if(e.pageX==null&&t.clientX!=null){n=e.target.ownerDocument||y;i=n.documentElement;r=n.body;e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0);e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)}if(!e.which&&a!==undefined){e.which=a&1?1:a&2?3:a&4?2:0}return e}},fix:function(e){if(e[x.expando]){return e}var t,n,i,r=e.type,a=e,s=this.fixHooks[r];if(!s){this.fixHooks[r]=s=$.test(r)?this.mouseHooks:W.test(r)?this.keyHooks:{}}i=s.props?this.props.concat(s.props):this.props;e=new x.Event(a);t=i.length;while(t--){n=i[t];e[n]=a[n]}if(!e.target){e.target=y}if(e.target.nodeType===3){e.target=e.target.parentNode}return s.filter?s.filter(e,a):e},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==Q()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===Q()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&x.nodeName(this,"input")){this.click();return false}},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}},simulate:function(e,t,n,i){var r=x.extend(new x.Event,n,{type:e,isSimulated:true,originalEvent:{}});if(i){x.event.trigger(r,null,t)}else{x.event.dispatch.call(t,r)}if(r.isDefaultPrevented()){n.preventDefault()}}};x.removeEvent=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}};x.Event=function(e,t){if(!(this instanceof x.Event)){return new x.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?K:Z}else{this.type=e}if(t){x.extend(this,t)}this.timeStamp=e&&e.timeStamp||x.now();this[x.expando]=true};x.Event.prototype={isDefaultPrevented:Z,isPropagationStopped:Z,isImmediatePropagationStopped:Z,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=K;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=K;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=K;if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation()}this.stopPropagation()}};x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,a){x.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,n=this,i=e.relatedTarget,r=e.handleObj;if(!i||i!==n&&!x.contains(n,i)){e.type=r.origType;t=r.handler.apply(this,arguments);e.type=a}return t}}});if(!v.focusinBubbles){x.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(e){x.event.simulate(i,e.target,x.event.fix(e),true)};x.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=F.access(e,i);if(!t){e.addEventListener(n,r,true)}F.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=F.access(e,i)-1;if(!t){e.removeEventListener(n,r,true);F.remove(e,i)}else{F.access(e,i,t)}}}})}x.fn.extend({on:function(e,t,n,i,r){var a,s;if(typeof e==="object"){if(typeof t!=="string"){n=n||t;t=undefined}for(s in e){this.on(s,t,n,e[s],r)}return this}if(n==null&&i==null){i=t;n=t=undefined}else if(i==null){if(typeof t==="string"){i=n;n=undefined}else{i=n;n=t;t=undefined}}if(i===false){i=Z}else if(!i){return this}if(r===1){a=i;i=function(e){x().off(e);return a.apply(this,arguments)};i.guid=a.guid||(a.guid=x.guid++)}return this.each(function(){x.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj){i=e.handleObj;x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof e==="object"){for(r in e){this.off(r,t,e[r])}return this}if(t===false||typeof t==="function"){n=t;t=undefined}if(n===false){n=Z}return this.each(function(){x.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n){return x.event.trigger(e,t,n,true)}}});var ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,te=/<([\w:]+)/,ne=/<|&#?\w+;/,ie=/<(?:script|style|link)/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,ae=/^$|\/(?:java|ecma)script/i,se=/^true\/(.*)/,oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};le.optgroup=le.option;le.tbody=le.tfoot=le.colgroup=le.caption=le.thead;le.th=le.td;function ue(e,t){return x.nodeName(e,"table")&&x.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ce(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function fe(e){var t=se.exec(e.type);if(t){e.type=t[1]}else{e.removeAttribute("type")}return e}function he(e,t){var n=0,i=e.length;for(;n<i;n++){F.set(e[n],"globalEval",!t||F.get(t[n],"globalEval"))}}function de(e,t){var n,i,r,a,s,o,l,u;if(t.nodeType!==1){return}if(F.hasData(e)){a=F.access(e);s=F.set(t,a);u=a.events;if(u){delete s.handle;s.events={};for(r in u){for(n=0,i=u[r].length;n<i;n++){x.event.add(t,r,u[r][n])}}}}if(U.hasData(e)){o=U.access(e);l=x.extend({},o);U.set(t,l)}}function pe(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&x.nodeName(e,t)?x.merge([e],n):n}function ge(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&q.test(e.type)){t.checked=e.checked}else if(n==="input"||n==="textarea"){t.defaultValue=e.defaultValue}}x.extend({clone:function(e,t,n){var i,r,a,s,o=e.cloneNode(true),l=x.contains(e.ownerDocument,e);if(!v.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!x.isXMLDoc(e)){s=pe(o);a=pe(e);for(i=0,r=a.length;i<r;i++){ge(a[i],s[i])}}if(t){if(n){a=a||pe(e);s=s||pe(o);for(i=0,r=a.length;i<r;i++){de(a[i],s[i])}}else{de(e,o)}}s=pe(o,"script");if(s.length>0){he(s,!l&&pe(e,"script"))}return o},buildFragment:function(e,t,n,i){var r,a,s,o,l,u,c=t.createDocumentFragment(),f=[],h=0,d=e.length;for(;h<d;h++){r=e[h];if(r||r===0){if(x.type(r)==="object"){x.merge(f,r.nodeType?[r]:r)}else if(!ne.test(r)){f.push(t.createTextNode(r))}else{a=a||c.appendChild(t.createElement("div"));s=(te.exec(r)||["",""])[1].toLowerCase();o=le[s]||le._default;a.innerHTML=o[1]+r.replace(ee,"<$1></$2>")+o[2];u=o[0];while(u--){a=a.lastChild}x.merge(f,a.childNodes);a=c.firstChild;a.textContent=""}}}c.textContent="";h=0;while(r=f[h++]){if(i&&x.inArray(r,i)!==-1){continue}l=x.contains(r.ownerDocument,r);a=pe(c.appendChild(r),"script");if(l){he(a)}if(n){u=0;while(r=a[u++]){if(ae.test(r.type||"")){n.push(r)}}}}return c},cleanData:function(e){var t,n,i,r,a=x.event.special,s=0;for(;(n=e[s])!==undefined;s++){if(x.acceptData(n)){r=n[F.expando];if(r&&(t=F.cache[r])){if(t.events){for(i in t.events){if(a[i]){x.event.remove(n,i)}else{x.removeEvent(n,i,t.handle)}}}if(F.cache[r]){delete F.cache[r]}}}delete U.cache[n[U.expando]]}}});x.fn.extend({text:function(e){return L(this,function(e){return e===undefined?x.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=ue(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=ue(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},remove:function(e,t){var n,i=e?x.filter(e,this):this,r=0;for(;(n=i[r])!=null;r++){if(!t&&n.nodeType===1){x.cleanData(pe(n))}if(n.parentNode){if(t&&x.contains(n.ownerDocument,n)){he(pe(n,"script"))}n.parentNode.removeChild(n)}}return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){x.cleanData(pe(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return x.clone(this,e,t)})},html:function(e){return L(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!ie.test(e)&&!le[(te.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ee,"<$1></$2>");try{for(;n<i;n++){t=this[n]||{};if(t.nodeType===1){x.cleanData(pe(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var t=arguments[0];this.domManip(arguments,function(e){t=this.parentNode;x.cleanData(pe(this));if(t){t.replaceChild(e,this)}});return t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,true)},domManip:function(n,i){n=g.apply([],n);var e,t,r,a,s,o,l=0,u=this.length,c=this,f=u-1,h=n[0],d=x.isFunction(h);if(d||u>1&&typeof h==="string"&&!v.checkClone&&re.test(h)){return this.each(function(e){var t=c.eq(e);if(d){n[0]=h.call(this,e,t.html())}t.domManip(n,i)})}if(u){e=x.buildFragment(n,this[0].ownerDocument,false,this);t=e.firstChild;if(e.childNodes.length===1){e=t}if(t){r=x.map(pe(e,"script"),ce);a=r.length;for(;l<u;l++){s=e;if(l!==f){s=x.clone(s,true,true);if(a){x.merge(r,pe(s,"script"))}}i.call(this[l],s,l)}if(a){o=r[r.length-1].ownerDocument;x.map(r,fe);for(l=0;l<a;l++){s=r[l];if(ae.test(s.type||"")&&!F.access(s,"globalEval")&&x.contains(o,s)){if(s.src){if(x._evalUrl){x._evalUrl(s.src)}}else{x.globalEval(s.textContent.replace(oe,""))}}}}}}return this}});x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){x.fn[e]=function(e){var t,n=[],i=x(e),r=i.length-1,a=0;for(;a<=r;a++){t=a===r?this:this.clone(true);x(i[a])[s](t);o.apply(n,t.get())}return this.pushStack(n)}});var me,ve={};function ye(e,t){var n,i=x(t.createElement(e)).appendTo(t.body),r=p.getDefaultComputedStyle&&(n=p.getDefaultComputedStyle(i[0]))?n.display:x.css(i[0],"display");i.detach();return r}function _e(e){var t=y,n=ve[e];if(!n){n=ye(e,t);if(n==="none"||!n){me=(me||x("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement);t=me[0].contentDocument;t.write();t.close();n=ye(e,t);me.detach()}ve[e]=n}return n}var we=/^margin/;var be=new RegExp("^("+j+")(?!px)[a-z%]+$","i");var Ee=function(e){if(e.ownerDocument.defaultView.opener){return e.ownerDocument.defaultView.getComputedStyle(e,null)}return p.getComputedStyle(e,null)};function xe(e,t,n){var i,r,a,s,o=e.style;n=n||Ee(e);if(n){s=n.getPropertyValue(t)||n[t]}if(n){if(s===""&&!x.contains(e.ownerDocument,e)){s=x.style(e,t)}if(be.test(s)&&we.test(t)){i=o.width;r=o.minWidth;a=o.maxWidth;o.minWidth=o.maxWidth=o.width=s;s=n.width;o.width=i;o.minWidth=r;o.maxWidth=a}}return s!==undefined?s+"":s}function Te(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}(function(){var t,n,i=y.documentElement,r=y.createElement("div"),a=y.createElement("div");if(!a.style){return}a.style.backgroundClip="content-box";a.cloneNode(true).style.backgroundClip="";v.clearCloneStyle=a.style.backgroundClip==="content-box";r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;"+"position:absolute";r.appendChild(a);function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";a.innerHTML="";i.appendChild(r);var e=p.getComputedStyle(a,null);t=e.top!=="1%";n=e.width==="4px";i.removeChild(r)}if(p.getComputedStyle){x.extend(v,{pixelPosition:function(){e();return t},boxSizingReliable:function(){if(n==null){e()}return n},reliableMarginRight:function(){var e,t=a.appendChild(y.createElement("div"));t.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";t.style.marginRight=t.style.width="0";a.style.width="1px";i.appendChild(r);e=!parseFloat(p.getComputedStyle(t,null).marginRight);i.removeChild(r);a.removeChild(t);return e}})}})();x.swap=function(e,t,n,i){var r,a,s={};for(a in t){s[a]=e.style[a];e.style[a]=t[a]}r=n.apply(e,i||[]);for(a in t){e.style[a]=s[a]}return r};var Ne=/^(none|table(?!-c[ea]).+)/,Se=new RegExp("^("+j+")(.*)$","i"),Ce=new RegExp("^([+-])=("+j+")","i"),Ae={position:"absolute",visibility:"hidden",display:"block"},ke={letterSpacing:"0",fontWeight:"400"},Me=["Webkit","O","Moz","ms"];function Re(e,t){if(t in e){return t}var n=t[0].toUpperCase()+t.slice(1),i=t,r=Me.length;while(r--){t=Me[r]+n;if(t in e){return t}}return i}function Oe(e,t,n){var i=Se.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function Ie(e,t,n,i,r){var a=n===(i?"border":"content")?4:t==="width"?1:0,s=0;for(;a<4;a+=2){if(n==="margin"){s+=x.css(e,n+z[a],true,r)}if(i){if(n==="content"){s-=x.css(e,"padding"+z[a],true,r)}if(n!=="margin"){s-=x.css(e,"border"+z[a]+"Width",true,r)}}else{s+=x.css(e,"padding"+z[a],true,r);if(n!=="padding"){s+=x.css(e,"border"+z[a]+"Width",true,r)}}}return s}function De(e,t,n){var i=true,r=t==="width"?e.offsetWidth:e.offsetHeight,a=Ee(e),s=x.css(e,"boxSizing",false,a)==="border-box";if(r<=0||r==null){r=xe(e,t,a);if(r<0||r==null){r=e.style[t]}if(be.test(r)){return r}i=s&&(v.boxSizingReliable()||r===e.style[t]);r=parseFloat(r)||0}return r+Ie(e,t,n||(s?"border":"content"),i,a)+"px"}function Le(e,t){var n,i,r,a=[],s=0,o=e.length;for(;s<o;s++){i=e[s];if(!i.style){continue}a[s]=F.get(i,"olddisplay");n=i.style.display;if(t){if(!a[s]&&n==="none"){i.style.display=""}if(i.style.display===""&&B(i)){a[s]=F.access(i,"olddisplay",_e(i.nodeName))}}else{r=B(i);if(n!=="none"||!r){F.set(i,"olddisplay",r?n:x.css(i,"display"))}}}for(s=0;s<o;s++){i=e[s];if(!i.style){continue}if(!t||i.style.display==="none"||i.style.display===""){i.style.display=t?a[s]||"":"none"}}return e}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xe(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var r,a,s,o=x.camelCase(t),l=e.style;t=x.cssProps[o]||(x.cssProps[o]=Re(l,o));s=x.cssHooks[t]||x.cssHooks[o];if(n!==undefined){a=typeof n;if(a==="string"&&(r=Ce.exec(n))){n=(r[1]+1)*r[2]+parseFloat(x.css(e,t));a="number"}if(n==null||n!==n){return}if(a==="number"&&!x.cssNumber[o]){n+="px"}if(!v.clearCloneStyle&&n===""&&t.indexOf("background")===0){l[t]="inherit"}if(!s||!("set"in s)||(n=s.set(e,n,i))!==undefined){l[t]=n}}else{if(s&&"get"in s&&(r=s.get(e,false,i))!==undefined){return r}return l[t]}},css:function(e,t,n,i){var r,a,s,o=x.camelCase(t);t=x.cssProps[o]||(x.cssProps[o]=Re(e.style,o));s=x.cssHooks[t]||x.cssHooks[o];if(s&&"get"in s){r=s.get(e,true,n)}if(r===undefined){r=xe(e,t,i)}if(r==="normal"&&t in ke){r=ke[t]}if(n===""||n){a=parseFloat(r);return n===true||x.isNumeric(a)?a||0:r}return r}});x.each(["height","width"],function(e,r){x.cssHooks[r]={get:function(e,t,n){if(t){return Ne.test(x.css(e,"display"))&&e.offsetWidth===0?x.swap(e,Ae,function(){return De(e,r,n)}):De(e,r,n)}},set:function(e,t,n){var i=n&&Ee(e);return Oe(e,t,n?Ie(e,r,n,x.css(e,"boxSizing",false,i)==="border-box",i):0)}}});x.cssHooks.marginRight=Te(v.reliableMarginRight,function(e,t){if(t){return x.swap(e,{display:"inline-block"},xe,[e,"marginRight"])}});x.each({margin:"",padding:"",border:"Width"},function(r,a){x.cssHooks[r+a]={expand:function(e){var t=0,n={},i=typeof e==="string"?e.split(" "):[e];for(;t<4;t++){n[r+z[t]+a]=i[t]||i[t-2]||i[0]}return n}};if(!we.test(r)){x.cssHooks[r+a].set=Oe}});x.fn.extend({css:function(e,t){return L(this,function(e,t,n){var i,r,a={},s=0;if(x.isArray(t)){i=Ee(e);r=t.length;for(;s<r;s++){a[t[s]]=x.css(e,t[s],false,i)}return a}return n!==undefined?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)},show:function(){return Le(this,true)},hide:function(){return Le(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(B(this)){x(this).show()}else{x(this).hide()}})}});function Pe(e,t,n,i,r){return new Pe.prototype.init(e,t,n,i,r)}x.Tween=Pe;Pe.prototype={constructor:Pe,init:function(e,t,n,i,r,a){this.elem=e;this.prop=n;this.easing=r||"swing";this.options=t;this.start=this.now=this.cur();this.end=i;this.unit=a||(x.cssNumber[n]?"":"px")},cur:function(){var e=Pe.propHooks[this.prop];return e&&e.get?e.get(this):Pe.propHooks._default.get(this)},run:function(e){var t,n=Pe.propHooks[this.prop];if(this.options.duration){this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{Pe.propHooks._default.set(this)}return this}};Pe.prototype.init.prototype=Pe.prototype;Pe.propHooks={_default:{get:function(e){var t;if(e.elem[e.prop]!=null&&(!e.elem.style||e.elem.style[e.prop]==null)){return e.elem[e.prop]}t=x.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(x.fx.step[e.prop]){x.fx.step[e.prop](e)}else if(e.elem.style&&(e.elem.style[x.cssProps[e.prop]]!=null||x.cssHooks[e.prop])){x.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};Pe.propHooks.scrollTop=Pe.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}};x.fx=Pe.prototype.init;x.fx.step={};var Fe,Ue,He=/^(?:toggle|show|hide)$/,Ge=new RegExp("^(?:([+-])=|)("+j+")([a-z%]*)$","i"),Ye=/queueHooks$/,je=[We],ze={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Ge.exec(t),a=r&&r[3]||(x.cssNumber[e]?"":"px"),s=(x.cssNumber[e]||a!=="px"&&+i)&&Ge.exec(x.css(n.elem,e)),o=1,l=20;if(s&&s[3]!==a){a=a||s[3];r=r||[];s=+i||1;do{o=o||".5";s=s/o;x.style(n.elem,e,s+a)}while(o!==(o=n.cur()/i)&&o!==1&&--l)}if(r){s=n.start=+s||+i||0;n.unit=a;n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]}return n}]};function Be(){setTimeout(function(){Fe=undefined});return Fe=x.now()}function qe(e,t){var n,i=0,r={height:e};t=t?1:0;for(;i<4;i+=2-t){n=z[i];r["margin"+n]=r["padding"+n]=e}if(t){r.opacity=r.width=e}return r}function Ve(e,t,n){var i,r=(ze[t]||[]).concat(ze["*"]),a=0,s=r.length;for(;a<s;a++){if(i=r[a].call(n,t,e)){return i}}}function We(t,e,n){var i,r,a,s,o,l,u,c,f=this,h={},d=t.style,p=t.nodeType&&B(t),g=F.get(t,"fxshow");if(!n.queue){o=x._queueHooks(t,"fx");if(o.unqueued==null){o.unqueued=0;l=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){l()}}}o.unqueued++;f.always(function(){f.always(function(){o.unqueued--;if(!x.queue(t,"fx").length){o.empty.fire()}})})}if(t.nodeType===1&&("height"in e||"width"in e)){n.overflow=[d.overflow,d.overflowX,d.overflowY];u=x.css(t,"display");c=u==="none"?F.get(t,"olddisplay")||_e(t.nodeName):u;if(c==="inline"&&x.css(t,"float")==="none"){d.display="inline-block"}}if(n.overflow){d.overflow="hidden";f.always(function(){d.overflow=n.overflow[0];d.overflowX=n.overflow[1];d.overflowY=n.overflow[2]})}for(i in e){r=e[i];if(He.exec(r)){delete e[i];a=a||r==="toggle";if(r===(p?"hide":"show")){if(r==="show"&&g&&g[i]!==undefined){p=true}else{continue}}h[i]=g&&g[i]||x.style(t,i)}else{u=undefined}}if(!x.isEmptyObject(h)){if(g){if("hidden"in g){p=g.hidden}}else{g=F.access(t,"fxshow",{})}if(a){g.hidden=!p}if(p){x(t).show()}else{f.done(function(){x(t).hide()})}f.done(function(){var e;F.remove(t,"fxshow");for(e in h){x.style(t,e,h[e])}});for(i in h){s=Ve(p?g[i]:0,i,f);if(!(i in g)){g[i]=s.start;if(p){s.end=s.start;s.start=i==="width"||i==="height"?1:0}}}}else if((u==="none"?_e(t.nodeName):u)==="inline"){d.display=u}}function $e(e,t){var n,i,r,a,s;for(n in e){i=x.camelCase(n);r=t[i];a=e[n];if(x.isArray(a)){r=a[1];a=e[n]=a[0]}if(n!==i){e[i]=a;delete e[n]}s=x.cssHooks[i];if(s&&"expand"in s){a=s.expand(a);delete e[i];for(n in a){if(!(n in e)){e[n]=a[n];t[n]=r}}}else{t[i]=r}}}function Xe(s,e,t){var n,o,i=0,r=je.length,l=x.Deferred().always(function(){delete a.elem}),a=function(){if(o){return false}var e=Fe||Be(),t=Math.max(0,u.startTime+u.duration-e),n=t/u.duration||0,i=1-n,r=0,a=u.tweens.length;for(;r<a;r++){u.tweens[r].run(i)}l.notifyWith(s,[u,i,t]);if(i<1&&a){return t}else{l.resolveWith(s,[u]);return false}},u=l.promise({elem:s,props:x.extend({},e),opts:x.extend(true,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:Fe||Be(),duration:t.duration,tweens:[],createTween:function(e,t){var n=x.Tween(s,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);u.tweens.push(n);return n},stop:function(e){var t=0,n=e?u.tweens.length:0;if(o){return this}o=true;for(;t<n;t++){u.tweens[t].run(1)}if(e){l.resolveWith(s,[u,e])}else{l.rejectWith(s,[u,e])}return this}}),c=u.props;$e(c,u.opts.specialEasing);for(;i<r;i++){n=je[i].call(u,s,c,u.opts);if(n){return n}}x.map(c,Ve,u);if(x.isFunction(u.opts.start)){u.opts.start.call(s,u)}x.fx.timer(x.extend(a,{elem:s,anim:u,queue:u.opts.queue}));return u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}x.Animation=x.extend(Xe,{tweener:function(e,t){if(x.isFunction(e)){t=e;e=["*"]}else{e=e.split(" ")}var n,i=0,r=e.length;for(;i<r;i++){n=e[i];ze[n]=ze[n]||[];ze[n].unshift(t)}},prefilter:function(e,t){if(t){je.unshift(e)}else{je.push(e)}}});x.speed=function(e,t,n){var i=e&&typeof e==="object"?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};i.duration=x.fx.off?0:typeof i.duration==="number"?i.duration:i.duration in x.fx.speeds?x.fx.speeds[i.duration]:x.fx.speeds._default;if(i.queue==null||i.queue===true){i.queue="fx"}i.old=i.complete;i.complete=function(){if(x.isFunction(i.old)){i.old.call(this)}if(i.queue){x.dequeue(this,i.queue)}};return i};x.fn.extend({fadeTo:function(e,t,n,i){return this.filter(B).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var r=x.isEmptyObject(t),a=x.speed(e,n,i),s=function(){var e=Xe(this,x.extend({},t),a);if(r||F.get(this,"finish")){e.stop(true)}};s.finish=s;return r||a.queue===false?this.each(s):this.queue(a.queue,s)},stop:function(r,e,a){var s=function(e){var t=e.stop;delete e.stop;t(a)};if(typeof r!=="string"){a=e;e=r;r=undefined}if(e&&r!==false){this.queue(r||"fx",[])}return this.each(function(){var e=true,t=r!=null&&r+"queueHooks",n=x.timers,i=F.get(this);if(t){if(i[t]&&i[t].stop){s(i[t])}}else{for(t in i){if(i[t]&&i[t].stop&&Ye.test(t)){s(i[t])}}}for(t=n.length;t--;){if(n[t].elem===this&&(r==null||n[t].queue===r)){n[t].anim.stop(a);e=false;n.splice(t,1)}}if(e||!a){x.dequeue(this,r)}})},finish:function(s){if(s!==false){s=s||"fx"}return this.each(function(){var e,t=F.get(this),n=t[s+"queue"],i=t[s+"queueHooks"],r=x.timers,a=n?n.length:0;t.finish=true;x.queue(this,s,[]);if(i&&i.stop){i.stop.call(this,true)}for(e=r.length;e--;){if(r[e].elem===this&&r[e].queue===s){r[e].anim.stop(true);r.splice(e,1)}}for(e=0;e<a;e++){if(n[e]&&n[e].finish){n[e].finish.call(this)}}delete t.finish})}});x.each(["toggle","show","hide"],function(e,i){var r=x.fn[i];x.fn[i]=function(e,t,n){return e==null||typeof e==="boolean"?r.apply(this,arguments):this.animate(qe(i,true),e,t,n)}});x.each({slideDown:qe("show"),slideUp:qe("hide"),slideToggle:qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){x.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}});x.timers=[];x.fx.tick=function(){var e,t=0,n=x.timers;Fe=x.now();for(;t<n.length;t++){e=n[t];if(!e()&&n[t]===e){n.splice(t--,1)}}if(!n.length){x.fx.stop()}Fe=undefined};x.fx.timer=function(e){x.timers.push(e);if(e()){x.fx.start()}else{x.timers.pop()}};x.fx.interval=13;x.fx.start=function(){if(!Ue){Ue=setInterval(x.fx.tick,x.fx.interval)}};x.fx.stop=function(){clearInterval(Ue);Ue=null};x.fx.speeds={slow:600,fast:200,_default:400};x.fn.delay=function(i,e){i=x.fx?x.fx.speeds[i]||i:i;e=e||"fx";return this.queue(e,function(e,t){var n=setTimeout(e,i);t.stop=function(){clearTimeout(n)}})};(function(){var e=y.createElement("input"),t=y.createElement("select"),n=t.appendChild(y.createElement("option"));e.type="checkbox";v.checkOn=e.value!=="";v.optSelected=n.selected;t.disabled=true;v.optDisabled=!n.disabled;e=y.createElement("input");e.value="t";e.type="radio";v.radioValue=e.value==="t"})();var Je,Ke,Ze=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return L(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}});x.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(!e||a===3||a===8||a===2){return}if(typeof e.getAttribute===V){return x.prop(e,t,n)}if(a!==1||!x.isXMLDoc(e)){t=t.toLowerCase();i=x.attrHooks[t]||(x.expr.match.bool.test(t)?Ke:Je)}if(n!==undefined){if(n===null){x.removeAttr(e,t)}else if(i&&"set"in i&&(r=i.set(e,n,t))!==undefined){return r}else{e.setAttribute(t,n+"");return n}}else if(i&&"get"in i&&(r=i.get(e,t))!==null){return r}else{r=x.find.attr(e,t);return r==null?undefined:r}},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(M);if(a&&e.nodeType===1){while(n=a[r++]){i=x.propFix[n]||n;if(x.expr.match.bool.test(n)){e[i]=false}e.removeAttribute(n)}}},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&t==="radio"&&x.nodeName(e,"input")){var n=e.value;e.setAttribute("type",t);if(n){e.value=n}return t}}}}});Ke={set:function(e,t,n){if(t===false){x.removeAttr(e,n)}else{e.setAttribute(n,n)}return n}};x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var a=Ze[t]||x.find.attr;Ze[t]=function(e,t,n){var i,r;if(!n){r=Ze[t];Ze[t]=i;i=a(e,t,n)!=null?t.toLowerCase():null;Ze[t]=r}return i}});var Qe=/^(?:input|select|textarea|button)$/i;x.fn.extend({prop:function(e,t){return L(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}});x.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,r,a,s=e.nodeType;if(!e||s===3||s===8||s===2){return}a=s!==1||!x.isXMLDoc(e);if(a){t=x.propFix[t]||t;r=x.propHooks[t]}if(n!==undefined){return r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:e[t]=n}else{return r&&"get"in r&&(i=r.get(e,t))!==null?i:e[t]}},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Qe.test(e.nodeName)||e.href?e.tabIndex:-1}}}});if(!v.optSelected){x.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null}}}x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this});var et=/[\t\r\n\f]/g;x.fn.extend({addClass:function(t){var e,n,i,r,a,s,o=typeof t==="string"&&t,l=0,u=this.length;if(x.isFunction(t)){return this.each(function(e){x(this).addClass(t.call(this,e,this.className))})}if(o){e=(t||"").match(M)||[];for(;l<u;l++){n=this[l];i=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(et," "):" ");if(i){a=0;while(r=e[a++]){if(i.indexOf(" "+r+" ")<0){i+=r+" "}}s=x.trim(i);if(n.className!==s){n.className=s}}}}return this},removeClass:function(t){var e,n,i,r,a,s,o=arguments.length===0||typeof t==="string"&&t,l=0,u=this.length;if(x.isFunction(t)){return this.each(function(e){x(this).removeClass(t.call(this,e,this.className))})}if(o){e=(t||"").match(M)||[];for(;l<u;l++){n=this[l];i=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(et," "):"");if(i){a=0;while(r=e[a++]){while(i.indexOf(" "+r+" ")>=0){i=i.replace(" "+r+" "," ")}}s=t?x.trim(i):"";if(n.className!==s){n.className=s}}}}return this},toggleClass:function(r,t){var a=typeof r;if(typeof t==="boolean"&&a==="string"){return t?this.addClass(r):this.removeClass(r)}if(x.isFunction(r)){return this.each(function(e){x(this).toggleClass(r.call(this,e,this.className,t),t)})}return this.each(function(){if(a==="string"){var e,t=0,n=x(this),i=r.match(M)||[];while(e=i[t++]){if(n.hasClass(e)){n.removeClass(e)}else{n.addClass(e)}}}else if(a===V||a==="boolean"){if(this.className){F.set(this,"__className__",this.className)}this.className=this.className||r===false?"":F.get(this,"__className__")||""}})},hasClass:function(e){var t=" "+e+" ",n=0,i=this.length;for(;n<i;n++){if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(et," ").indexOf(t)>=0){return true}}return false}});var tt=/\r/g;x.fn.extend({val:function(n){var i,e,r,t=this[0];if(!arguments.length){if(t){i=x.valHooks[t.type]||x.valHooks[t.nodeName.toLowerCase()];if(i&&"get"in i&&(e=i.get(t,"value"))!==undefined){return e}e=t.value;return typeof e==="string"?e.replace(tt,""):e==null?"":e}return}r=x.isFunction(n);return this.each(function(e){var t;if(this.nodeType!==1){return}if(r){t=n.call(this,e,x(this).val())}else{t=n}if(t==null){t=""}else if(typeof t==="number"){t+=""}else if(x.isArray(t)){t=x.map(t,function(e){return e==null?"":e+""})}i=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()];if(!i||!("set"in i)||i.set(this,t,"value")===undefined){this.value=t}})}});x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return t!=null?t:x.trim(x.text(e))}},select:{get:function(e){var t,n,i=e.options,r=e.selectedIndex,a=e.type==="select-one"||r<0,s=a?null:[],o=a?r+1:i.length,l=r<0?o:a?r:0;for(;l<o;l++){n=i[l];if((n.selected||l===r)&&(v.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!x.nodeName(n.parentNode,"optgroup"))){t=x(n).val();if(a){return t}s.push(t)}}return s},set:function(e,t){var n,i,r=e.options,a=x.makeArray(t),s=r.length;while(s--){i=r[s];if(i.selected=x.inArray(i.value,a)>=0){n=true}}if(!n){e.selectedIndex=-1}return a}}}});x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(x.isArray(t)){return e.checked=x.inArray(x(e).val(),t)>=0}}};if(!v.checkOn){x.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});x.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(e,n){x.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}});x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var nt=x.now();var it=/\?/;x.parseJSON=function(e){return JSON.parse(e+"")};x.parseXML=function(e){var t,n;if(!e||typeof e!=="string"){return null}try{n=new DOMParser;t=n.parseFromString(e,"text/xml")}catch(e){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){x.error("Invalid XML: "+e)}return t};var rt=/#.*$/,at=/([?&])_=[^&]*/,st=/^(.*?):[ \t]*([^\r\n]*)$/gm,ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,lt=/^(?:GET|HEAD)$/,ut=/^\/\//,ct=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ft={},ht={},dt="*/".concat("*"),pt=p.location.href,gt=ct.exec(pt.toLowerCase())||[];function mt(a){return function(e,t){if(typeof e!=="string"){t=e;e="*"}var n,i=0,r=e.toLowerCase().match(M)||[];if(x.isFunction(t)){while(n=r[i++]){if(n[0]==="+"){n=n.slice(1)||"*";(a[n]=a[n]||[]).unshift(t)}else{(a[n]=a[n]||[]).push(t)}}}}}function vt(t,r,a,s){var o={},l=t===ht;function u(e){var i;o[e]=true;x.each(t[e]||[],function(e,t){var n=t(r,a,s);if(typeof n==="string"&&!l&&!o[n]){r.dataTypes.unshift(n);u(n);return false}else if(l){return!(i=n)}});return i}return u(r.dataTypes[0])||!o["*"]&&u("*")}function yt(e,t){var n,i,r=x.ajaxSettings.flatOptions||{};for(n in t){if(t[n]!==undefined){(r[n]?e:i||(i={}))[n]=t[n]}}if(i){x.extend(true,e,i)}return e}function _t(e,t,n){var i,r,a,s,o=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(i===undefined){i=e.mimeType||t.getResponseHeader("Content-Type")}}if(i){for(r in o){if(o[r]&&o[r].test(i)){l.unshift(r);break}}}if(l[0]in n){a=l[0]}else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}if(!s){s=r}}a=a||s}if(a){if(a!==l[0]){l.unshift(a)}return n[a]}}function wt(e,t,n,i){var r,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1]){for(s in e.converters){u[s.toLowerCase()]=e.converters[s]}}a=c.shift();while(a){if(e.responseFields[a]){n[e.responseFields[a]]=t}if(!l&&i&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=a;a=c.shift();if(a){if(a==="*"){a=l}else if(l!=="*"&&l!==a){s=u[l+" "+a]||u["* "+a];if(!s){for(r in u){o=r.split(" ");if(o[1]===a){s=u[l+" "+o[0]]||u["* "+o[0]];if(s){if(s===true){s=u[r]}else if(u[r]!==true){a=o[0];c.unshift(o[1])}break}}}}if(s!==true){if(s&&e["throws"]){t=s(t)}else{try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}}}}}return{state:"success",data:t}}x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt,type:"GET",isLocal:ot.test(gt[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?yt(yt(e,x.ajaxSettings),t):yt(x.ajaxSettings,e)},ajaxPrefilter:mt(ft),ajaxTransport:mt(ht),ajax:function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var c,f,h,n,d,i,p,r,g=x.ajaxSetup({},t),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?x(m):x.event,y=x.Deferred(),_=x.Callbacks("once memory"),w=g.statusCode||{},a={},s={},b=0,o="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!n){n={};while(t=st.exec(h)){n[t[1].toLowerCase()]=t[2]}}t=n[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?h:null},setRequestHeader:function(e,t){var n=e.toLowerCase();if(!b){e=s[n]=s[n]||e;a[e]=t}return this},overrideMimeType:function(e){if(!b){g.mimeType=e}return this},statusCode:function(e){var t;if(e){if(b<2){for(t in e){w[t]=[w[t],e[t]]}}else{E.always(e[E.status])}}return this},abort:function(e){var t=e||o;if(c){c.abort(t)}l(0,t);return this}};y.promise(E).complete=_.add;E.success=E.done;E.error=E.fail;g.url=((e||g.url||pt)+"").replace(rt,"").replace(ut,gt[1]+"//");g.type=t.method||t.type||g.method||g.type;g.dataTypes=x.trim(g.dataType||"*").toLowerCase().match(M)||[""];if(g.crossDomain==null){i=ct.exec(g.url.toLowerCase());g.crossDomain=!!(i&&(i[1]!==gt[1]||i[2]!==gt[2]||(i[3]||(i[1]==="http:"?"80":"443"))!==(gt[3]||(gt[1]==="http:"?"80":"443"))))}if(g.data&&g.processData&&typeof g.data!=="string"){g.data=x.param(g.data,g.traditional)}vt(ft,g,t,E);if(b===2){return E}p=x.event&&g.global;if(p&&x.active++===0){x.event.trigger("ajaxStart")}g.type=g.type.toUpperCase();g.hasContent=!lt.test(g.type);f=g.url;if(!g.hasContent){if(g.data){f=g.url+=(it.test(f)?"&":"?")+g.data;delete g.data}if(g.cache===false){g.url=at.test(f)?f.replace(at,"$1_="+nt++):f+(it.test(f)?"&":"?")+"_="+nt++}}if(g.ifModified){if(x.lastModified[f]){E.setRequestHeader("If-Modified-Since",x.lastModified[f])}if(x.etag[f]){E.setRequestHeader("If-None-Match",x.etag[f])}}if(g.data&&g.hasContent&&g.contentType!==false||t.contentType){E.setRequestHeader("Content-Type",g.contentType)}E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+(g.dataTypes[0]!=="*"?", "+dt+"; q=0.01":""):g.accepts["*"]);for(r in g.headers){E.setRequestHeader(r,g.headers[r])}if(g.beforeSend&&(g.beforeSend.call(m,E,g)===false||b===2)){return E.abort()}o="abort";for(r in{success:1,error:1,complete:1}){E[r](g[r])}c=vt(ht,g,t,E);if(!c){l(-1,"No Transport")}else{E.readyState=1;if(p){v.trigger("ajaxSend",[E,g])}if(g.async&&g.timeout>0){d=setTimeout(function(){E.abort("timeout")},g.timeout)}try{b=1;c.send(a,l)}catch(e){if(b<2){l(-1,e)}else{throw e}}}function l(e,t,n,i){var r,a,s,o,l,u=t;if(b===2){return}b=2;if(d){clearTimeout(d)}c=undefined;h=i||"";E.readyState=e>0?4:0;r=e>=200&&e<300||e===304;if(n){o=_t(g,E,n)}o=wt(g,o,E,r);if(r){if(g.ifModified){l=E.getResponseHeader("Last-Modified");if(l){x.lastModified[f]=l}l=E.getResponseHeader("etag");if(l){x.etag[f]=l}}if(e===204||g.type==="HEAD"){u="nocontent"}else if(e===304){u="notmodified"}else{u=o.state;a=o.data;s=o.error;r=!s}}else{s=u;if(e||!u){u="error";if(e<0){e=0}}}E.status=e;E.statusText=(t||u)+"";if(r){y.resolveWith(m,[a,u,E])}else{y.rejectWith(m,[E,u,s])}E.statusCode(w);w=undefined;if(p){v.trigger(r?"ajaxSuccess":"ajaxError",[E,g,r?a:s])}_.fireWith(m,[E,u]);if(p){v.trigger("ajaxComplete",[E,g]);if(!--x.active){x.event.trigger("ajaxStop")}}}return E},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}});x.each(["get","post"],function(e,r){x[r]=function(e,t,n,i){if(x.isFunction(t)){i=i||n;n=t;t=undefined}return x.ajax({url:e,type:r,dataType:i,data:t,success:n})}});x._evalUrl=function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:false,global:false,throws:true})};x.fn.extend({wrapAll:function(t){var e;if(x.isFunction(t)){return this.each(function(e){x(this).wrapAll(t.call(this,e))})}if(this[0]){e=x(t,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){e.insertBefore(this[0])}e.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(n){if(x.isFunction(n)){return this.each(function(e){x(this).wrapInner(n.call(this,e))})}return this.each(function(){var e=x(this),t=e.contents();if(t.length){t.wrapAll(n)}else{e.append(n)}})},wrap:function(t){var n=x.isFunction(t);return this.each(function(e){x(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){if(!x.nodeName(this,"body")){x(this).replaceWith(this.childNodes)}}).end()}});x.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0};x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)};var bt=/%20/g,Et=/\[\]$/,xt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function St(n,e,i,r){var t;if(x.isArray(e)){x.each(e,function(e,t){if(i||Et.test(n)){r(n,t)}else{St(n+"["+(typeof t==="object"?e:"")+"]",t,i,r)}})}else if(!i&&x.type(e)==="object"){for(t in e){St(n+"["+t+"]",e[t],i,r)}}else{r(n,e)}}x.param=function(e,t){var n,i=[],r=function(e,t){t=x.isFunction(t)?t():t==null?"":t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined){t=x.ajaxSettings&&x.ajaxSettings.traditional}if(x.isArray(e)||e.jquery&&!x.isPlainObject(e)){x.each(e,function(){r(this.name,this.value)})}else{for(n in e){St(n,e[n],t,r)}}return i.join("&").replace(bt,"+")};x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&Nt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!q.test(e))}).map(function(e,t){var n=x(this).val();return n==null?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:n.replace(xt,"\r\n")}}).get()}});x.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ct=0,At={},kt={0:200,1223:204},Mt=x.ajaxSettings.xhr();if(p.attachEvent){p.attachEvent("onunload",function(){for(var e in At){At[e]()}})}v.cors=!!Mt&&"withCredentials"in Mt;v.ajax=Mt=!!Mt;x.ajaxTransport(function(a){var s;if(v.cors||Mt&&!a.crossDomain){return{send:function(e,t){var n,i=a.xhr(),r=++Ct;i.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields){for(n in a.xhrFields){i[n]=a.xhrFields[n]}}if(a.mimeType&&i.overrideMimeType){i.overrideMimeType(a.mimeType)}if(!a.crossDomain&&!e["X-Requested-With"]){e["X-Requested-With"]="XMLHttpRequest"}for(n in e){i.setRequestHeader(n,e[n])}s=function(e){return function(){if(s){delete At[r];s=i.onload=i.onerror=null;if(e==="abort"){i.abort()}else if(e==="error"){t(i.status,i.statusText)}else{t(kt[i.status]||i.status,i.statusText,typeof i.responseText==="string"?{text:i.responseText}:undefined,i.getAllResponseHeaders())}}}};i.onload=s();i.onerror=s("error");s=At[r]=s("abort");try{i.send(a.hasContent&&a.data||null)}catch(e){if(s){throw e}}},abort:function(){if(s){s()}}}}});x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){x.globalEval(e);return e}}});x.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});x.ajaxTransport("script",function(n){if(n.crossDomain){var i,r;return{send:function(e,t){i=x("<script>").prop({async:true,charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove();r=null;if(e){t(e.type==="error"?404:200,e.type)}});y.head.appendChild(i[0])},abort:function(){if(r){r()}}}}});var Rt=[],Ot=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rt.pop()||x.expando+"_"+nt++;this[e]=true;return e}});x.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,a,s=e.jsonp!==false&&(Ot.test(e.url)?"url":typeof e.data==="string"&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(e.data)&&"data");if(s||e.dataTypes[0]==="jsonp"){i=e.jsonpCallback=x.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(s){e[s]=e[s].replace(Ot,"$1"+i)}else if(e.jsonp!==false){e.url+=(it.test(e.url)?"&":"?")+e.jsonp+"="+i}e.converters["script json"]=function(){if(!a){x.error(i+" was not called")}return a[0]};e.dataTypes[0]="json";r=p[i];p[i]=function(){a=arguments};n.always(function(){p[i]=r;if(e[i]){e.jsonpCallback=t.jsonpCallback;Rt.push(i)}if(a&&x.isFunction(r)){r(a[0])}a=r=undefined});return"script"}});x.parseHTML=function(e,t,n){if(!e||typeof e!=="string"){return null}if(typeof t==="boolean"){n=t;t=false}t=t||y;var i=w.exec(e),r=!n&&[];if(i){return[t.createElement(i[1])]}i=x.buildFragment([e],t,r);if(r&&r.length){x(r).remove()}return x.merge([],i.childNodes)};var It=x.fn.load;x.fn.load=function(e,t,n){if(typeof e!=="string"&&It){return It.apply(this,arguments)}var i,r,a,s=this,o=e.indexOf(" ");if(o>=0){i=x.trim(e.slice(o));e=e.slice(0,o)}if(x.isFunction(t)){n=t;t=undefined}else if(t&&typeof t==="object"){r="POST"}if(s.length>0){x.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments;s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,a||[e.responseText,t,e])})}return this};x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}});x.expr.filters.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length};var Dt=p.document.documentElement;function Lt(e){return x.isWindow(e)?e:e.nodeType===9&&e.defaultView}x.offset={setOffset:function(e,t,n){var i,r,a,s,o,l,u,c=x.css(e,"position"),f=x(e),h={};if(c==="static"){e.style.position="relative"}o=f.offset();a=x.css(e,"top");l=x.css(e,"left");u=(c==="absolute"||c==="fixed")&&(a+l).indexOf("auto")>-1;if(u){i=f.position();s=i.top;r=i.left}else{s=parseFloat(a)||0;r=parseFloat(l)||0}if(x.isFunction(t)){t=t.call(e,n,o)}if(t.top!=null){h.top=t.top-o.top+s}if(t.left!=null){h.left=t.left-o.left+r}if("using"in t){t.using.call(e,h)}else{f.css(h)}}};x.fn.extend({offset:function(t){if(arguments.length){return t===undefined?this:this.each(function(e){x.offset.setOffset(this,t,e)})}var e,n,i=this[0],r={top:0,left:0},a=i&&i.ownerDocument;if(!a){return}e=a.documentElement;if(!x.contains(e,i)){return r}if(typeof i.getBoundingClientRect!==V){r=i.getBoundingClientRect()}n=Lt(a);return{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}},position:function(){if(!this[0]){return}var e,t,n=this[0],i={top:0,left:0};if(x.css(n,"position")==="fixed"){t=n.getBoundingClientRect()}else{e=this.offsetParent();t=this.offset();if(!x.nodeName(e[0],"html")){i=e.offset()}i.top+=x.css(e[0],"borderTopWidth",true);i.left+=x.css(e[0],"borderLeftWidth",true)}return{top:t.top-i.top-x.css(n,"marginTop",true),left:t.left-i.left-x.css(n,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Dt;while(e&&(!x.nodeName(e,"html")&&x.css(e,"position")==="static")){e=e.offsetParent}return e||Dt})}});x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var a="pageYOffset"===r;x.fn[t]=function(e){return L(this,function(e,t,n){var i=Lt(e);if(n===undefined){return i?i[r]:e[t]}if(i){i.scrollTo(!a?n:p.pageXOffset,a?n:p.pageYOffset)}else{e[t]=n}},t,e,arguments.length,null)}});x.each(["top","left"],function(e,n){x.cssHooks[n]=Te(v.pixelPosition,function(e,t){if(t){t=xe(e,n);return be.test(t)?x(e).position()[n]+"px":t}})});x.each({Height:"height",Width:"width"},function(a,s){x.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,e){x.fn[e]=function(e,t){var n=arguments.length&&(i||typeof e!=="boolean"),r=i||(e===true||t===true?"margin":"border");return L(this,function(e,t,n){var i;if(x.isWindow(e)){return e.document.documentElement["client"+a]}if(e.nodeType===9){i=e.documentElement;return Math.max(e.body["scroll"+a],i["scroll"+a],e.body["offset"+a],i["offset"+a],i["client"+a])}return n===undefined?x.css(e,t,r):x.style(e,t,n,r)},s,n?e:undefined,n,null)}})});x.fn.size=function(){return this.length};x.fn.andSelf=x.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return x})}var Pt=p.jQuery,Ft=p.$;x.noConflict=function(e){if(p.$===x){p.$=Ft}if(e&&p.jQuery===x){p.jQuery=Pt}return x};if(typeof e===V){p.jQuery=p.$=x}return x});(function(e){define("foundation/foundation",["jquery"],function(){return function(){(function(c,l,r,a){"use strict";var e=function(e){var t=c("head");t.prepend(c.map(e,function(e){if(t.has("."+e).length===0){return'<meta class="'+e+'" />'}}))};e(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]);c(function(){if(typeof FastClick!=="undefined"){if(typeof r.body!=="undefined"){FastClick.attach(r.body)}}});var u=function(e,t){if(typeof e==="string"){if(t){var n;if(t.jquery){n=t[0];if(!n){return t}}else{n=t}return c(n.querySelectorAll(e))}return c(r.querySelectorAll(e))}return c(e,t)};var t=function(e){var t=[];if(!e){t.push("data")}if(this.namespace.length>0){t.push(this.namespace)}t.push(this.name);return t.join("-")};var n=function(e){var t=e.split("-"),n=t.length,i=[];while(n--){if(n!==0){i.push(t[n])}else{if(this.namespace.length>0){i.push(this.namespace,t[n])}else{i.push(t[n])}}}return i.reverse().join("-")};var i=function(n,i){var r=this,e=function(){var e=u(this),t=!e.data(r.attr_name(true)+"-init");e.data(r.attr_name(true)+"-init",c.extend({},r.settings,i||n,r.data_options(e)));if(t){r.events(this)}};if(u(this.scope).is("["+this.attr_name()+"]")){e.call(this.scope)}else{u("["+this.attr_name()+"]",this.scope).each(e)}if(typeof n==="string"){return this[n].call(this,i)}};var s=function(e,t){function n(){t(e[0])}function i(){this.one("load",n);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var e=this.attr("src"),t=e.match(/\?/)?"&":"?";t+="random="+(new Date).getTime();this.attr("src",e+t)}}if(!e.attr("src")){n();return}if(e[0].complete||e[0].readyState===4){n()}else{i.call(e)}};l.matchMedia||(l.matchMedia=function(){"use strict";var t=l.styleMedia||l.media;if(!t){var n=r.createElement("style"),e=r.getElementsByTagName("script")[0],i=null;n.type="text/css";n.id="matchmediajs-test";e.parentNode.insertBefore(n,e);i="getComputedStyle"in l&&l.getComputedStyle(n,null)||n.currentStyle;t={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";if(n.styleSheet){n.styleSheet.cssText=t}else{n.textContent=t}return i.width==="1px"}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}());(function(t){var n,r=0,e=["webkit","moz"],i=l.requestAnimationFrame,a=l.cancelAnimationFrame,s="undefined"!==typeof t.fx;for(;r<e.length&&!i;r++){i=l[e[r]+"RequestAnimationFrame"];a=a||l[e[r]+"CancelAnimationFrame"]||l[e[r]+"CancelRequestAnimationFrame"]}function o(){if(n){i(o);if(s){t.fx.tick()}}}if(i){l.requestAnimationFrame=i;l.cancelAnimationFrame=a;if(s){t.fx.timer=function(e){if(e()&&t.timers.push(e)&&!n){n=true;o()}};t.fx.stop=function(){n=false}}}else{l.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=l.setTimeout(function(){e(t+n)},n);r=t+n;return i};l.cancelAnimationFrame=function(e){clearTimeout(e)}}})(c);function o(e){if(typeof e==="string"||e instanceof String){e=e.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")}return e}function f(e){this.selector=e;this.query=""}f.prototype.toString=function(){return this.query||(this.query=u(this.selector).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""))};l.Foundation={name:"Foundation",version:"5.5.3",media_queries:{small:new f(".foundation-mq-small"),"small-only":new f(".foundation-mq-small-only"),medium:new f(".foundation-mq-medium"),"medium-only":new f(".foundation-mq-medium-only"),large:new f(".foundation-mq-large"),"large-only":new f(".foundation-mq-large-only"),xlarge:new f(".foundation-mq-xlarge"),"xlarge-only":new f(".foundation-mq-xlarge-only"),xxlarge:new f(".foundation-mq-xxlarge")},stylesheet:c("<style></style>").appendTo("head")[0].sheet,global:{namespace:a},init:function(e,t,n,i,r){var a=[e,n,i,r],s=[];this.rtl=/rtl/i.test(u("html").attr("dir"));this.scope=e||this.scope;this.set_namespace();if(t&&typeof t==="string"&&!/reflow/i.test(t)){if(this.libs.hasOwnProperty(t)){s.push(this.init_lib(t,a))}}else{for(var o in this.libs){s.push(this.init_lib(o,t))}}u(l).load(function(){u(l).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")});return e},init_lib:function(e,t){if(this.libs.hasOwnProperty(e)){this.patch(this.libs[e]);if(t&&t.hasOwnProperty(e)){if(typeof this.libs[e].settings!=="undefined"){c.extend(true,this.libs[e].settings,t[e])}else if(typeof this.libs[e].defaults!=="undefined"){c.extend(true,this.libs[e].defaults,t[e])}return this.libs[e].init.apply(this.libs[e],[this.scope,t[e]])}t=t instanceof Array?t:new Array(t);return this.libs[e].init.apply(this.libs[e],t)}return function(){}},patch:function(e){e.scope=this.scope;e.namespace=this.global.namespace;e.rtl=this.rtl;e["data_options"]=this.utils.data_options;e["attr_name"]=t;e["add_namespace"]=n;e["bindings"]=i;e["S"]=this.utils.S},inherit:function(e,t){var n=t.split(" "),i=n.length;while(i--){if(this.utils.hasOwnProperty(n[i])){e[n[i]]=this.utils[n[i]]}}},set_namespace:function(){var e=this.global.namespace===a?c(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===a||/false/i.test(e)?"":e},libs:{},utils:{S:u,throttle:function(n,i){var r=null;return function(){var e=this,t=arguments;if(r==null){r=setTimeout(function(){n.apply(e,t);r=null},i)}}},debounce:function(r,a,s){var o,l;return function(){var e=this,t=arguments;var n=function(){o=null;if(!s){l=r.apply(e,t)}};var i=s&&!o;clearTimeout(o);o=setTimeout(n,a);if(i){l=r.apply(e,t)}return l}},data_options:function(e,n){n=n||"options";var t={},i,r,a,s=function(e){var t=Foundation.global.namespace;if(t.length>0){return e.data(t+"-"+n)}return e.data(n)};var o=s(e);if(typeof o==="object"){return o}a=(o||":").split(";");i=a.length;function l(e){return!isNaN(e-0)&&e!==null&&e!==""&&e!==false&&e!==true}function u(e){if(typeof e==="string"){return c.trim(e)}return e}while(i--){r=a[i].split(":");r=[r[0],r.slice(1).join(":")];if(/true/i.test(r[1])){r[1]=true}if(/false/i.test(r[1])){r[1]=false}if(l(r[1])){if(r[1].indexOf(".")===-1){r[1]=parseInt(r[1],10)}else{r[1]=parseFloat(r[1])}}if(r.length===2&&r[0].length>0){t[u(r[0])]=u(r[1])}}return t},register_media:function(e,t){if(Foundation.media_queries[e]===a){c("head").append('<meta class="'+t+'"/>');Foundation.media_queries[e]=o(c("."+t).css("font-family"))}},add_custom_rule:function(e,t){if(t===a&&Foundation.stylesheet){Foundation.stylesheet.insertRule(e,Foundation.stylesheet.cssRules.length)}else{var n=Foundation.media_queries[t];if(n!==a){Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[t]+"{ "+e+" }",Foundation.stylesheet.cssRules.length)}}},image_loaded:function(e,t){var n=this,i=e.length;function r(e){var t=e.length;for(var n=t-1;n>=0;n--){if(e.attr("height")===a){return false}}return true}if(i===0||r(e)){t(e)}e.each(function(){s(n.S(this),function(){i-=1;if(i===0){t(e)}})})},random_str:function(){if(!this.fidx){this.fidx=0}this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-");return this.prefix+(this.fidx++).toString(36)},match:function(e){return l.matchMedia(e).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}};c.fn.foundation=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){Foundation.init.apply(Foundation,[this].concat(e));return this})}})(jQuery,window,window.document)}.apply(e,arguments)})})(this);(function(){var e=this;var t=e._;var i=Array.prototype,s=Object.prototype,n=Function.prototype;var r=i.push,l=i.slice,f=s.toString,a=s.hasOwnProperty;var o=Array.isArray,u=Object.keys,c=n.bind,h=Object.create;var d=function(){};var p=function(e){if(e instanceof p)return e;if(!(this instanceof p))return new p(e);this._wrapped=e};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=p}exports._=p}else{e._=p}p.VERSION="1.8.3";var g=function(r,a,e){if(a===void 0)return r;switch(e==null?3:e){case 1:return function(e){return r.call(a,e)};case 2:return function(e,t){return r.call(a,e,t)};case 3:return function(e,t,n){return r.call(a,e,t,n)};case 4:return function(e,t,n,i){return r.call(a,e,t,n,i)}}return function(){return r.apply(a,arguments)}};var m=function(e,t,n){if(e==null)return p.identity;if(p.isFunction(e))return g(e,t,n);if(p.isObject(e))return p.matcher(e);return p.property(e)};p.iteratee=function(e,t){return m(e,t,Infinity)};var v=function(l,u){return function(e){var t=arguments.length;if(t<2||e==null)return e;for(var n=1;n<t;n++){var i=arguments[n],r=l(i),a=r.length;for(var s=0;s<a;s++){var o=r[s];if(!u||e[o]===void 0)e[o]=i[o]}}return e}};var y=function(e){if(!p.isObject(e))return{};if(h)return h(e);d.prototype=e;var t=new d;d.prototype=null;return t};var _=function(t){return function(e){return e==null?void 0:e[t]}};var w=Math.pow(2,53)-1;var b=_("length");var E=function(e){var t=b(e);return typeof t=="number"&&t>=0&&t<=w};p.each=p.forEach=function(e,t,n){t=g(t,n);var i,r;if(E(e)){for(i=0,r=e.length;i<r;i++){t(e[i],i,e)}}else{var a=p.keys(e);for(i=0,r=a.length;i<r;i++){t(e[a[i]],a[i],e)}}return e};p.map=p.collect=function(e,t,n){t=m(t,n);var i=!E(e)&&p.keys(e),r=(i||e).length,a=Array(r);for(var s=0;s<r;s++){var o=i?i[s]:s;a[s]=t(e[o],o,e)}return a};function x(o){function l(e,t,n,i,r,a){for(;r>=0&&r<a;r+=o){var s=i?i[r]:r;n=t(n,e[s],s,e)}return n}return function(e,t,n,i){t=g(t,i,4);var r=!E(e)&&p.keys(e),a=(r||e).length,s=o>0?0:a-1;if(arguments.length<3){n=e[r?r[s]:s];s+=o}return l(e,t,n,r,s,a)}}p.reduce=p.foldl=p.inject=x(1);p.reduceRight=p.foldr=x(-1);p.find=p.detect=function(e,t,n){var i;if(E(e)){i=p.findIndex(e,t,n)}else{i=p.findKey(e,t,n)}if(i!==void 0&&i!==-1)return e[i]};p.filter=p.select=function(e,i,t){var r=[];i=m(i,t);p.each(e,function(e,t,n){if(i(e,t,n))r.push(e)});return r};p.reject=function(e,t,n){return p.filter(e,p.negate(m(t)),n)};p.every=p.all=function(e,t,n){t=m(t,n);var i=!E(e)&&p.keys(e),r=(i||e).length;for(var a=0;a<r;a++){var s=i?i[a]:a;if(!t(e[s],s,e))return false}return true};p.some=p.any=function(e,t,n){t=m(t,n);var i=!E(e)&&p.keys(e),r=(i||e).length;for(var a=0;a<r;a++){var s=i?i[a]:a;if(t(e[s],s,e))return true}return false};p.contains=p.includes=p.include=function(e,t,n,i){if(!E(e))e=p.values(e);if(typeof n!="number"||i)n=0;return p.indexOf(e,t,n)>=0};p.invoke=function(e,n){var i=l.call(arguments,2);var r=p.isFunction(n);return p.map(e,function(e){var t=r?n:e[n];return t==null?t:t.apply(e,i)})};p.pluck=function(e,t){return p.map(e,p.property(t))};p.where=function(e,t){return p.filter(e,p.matcher(t))};p.findWhere=function(e,t){return p.find(e,p.matcher(t))};p.max=function(e,i,t){var r=-Infinity,a=-Infinity,n,s;if(i==null&&e!=null){e=E(e)?e:p.values(e);for(var o=0,l=e.length;o<l;o++){n=e[o];if(n>r){r=n}}}else{i=m(i,t);p.each(e,function(e,t,n){s=i(e,t,n);if(s>a||s===-Infinity&&r===-Infinity){r=e;a=s}})}return r};p.min=function(e,i,t){var r=Infinity,a=Infinity,n,s;if(i==null&&e!=null){e=E(e)?e:p.values(e);for(var o=0,l=e.length;o<l;o++){n=e[o];if(n<r){r=n}}}else{i=m(i,t);p.each(e,function(e,t,n){s=i(e,t,n);if(s<a||s===Infinity&&r===Infinity){r=e;a=s}})}return r};p.shuffle=function(e){var t=E(e)?e:p.values(e);var n=t.length;var i=Array(n);for(var r=0,a;r<n;r++){a=p.random(0,r);if(a!==r)i[r]=i[a];i[a]=t[r]}return i};p.sample=function(e,t,n){if(t==null||n){if(!E(e))e=p.values(e);return e[p.random(e.length-1)]}return p.shuffle(e).slice(0,Math.max(0,t))};p.sortBy=function(e,i,t){i=m(i,t);return p.pluck(p.map(e,function(e,t,n){return{value:e,index:t,criteria:i(e,t,n)}}).sort(function(e,t){var n=e.criteria;var i=t.criteria;if(n!==i){if(n>i||n===void 0)return 1;if(n<i||i===void 0)return-1}return e.index-t.index}),"value")};var T=function(s){return function(i,r,e){var a={};r=m(r,e);p.each(i,function(e,t){var n=r(e,t,i);s(a,e,n)});return a}};p.groupBy=T(function(e,t,n){if(p.has(e,n))e[n].push(t);else e[n]=[t]});p.indexBy=T(function(e,t,n){e[n]=t});p.countBy=T(function(e,t,n){if(p.has(e,n))e[n]++;else e[n]=1});p.toArray=function(e){if(!e)return[];if(p.isArray(e))return l.call(e);if(E(e))return p.map(e,p.identity);return p.values(e)};p.size=function(e){if(e==null)return 0;return E(e)?e.length:p.keys(e).length};p.partition=function(e,i,t){i=m(i,t);var r=[],a=[];p.each(e,function(e,t,n){(i(e,t,n)?r:a).push(e)});return[r,a]};p.first=p.head=p.take=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[0];return p.initial(e,e.length-t)};p.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))};p.last=function(e,t,n){if(e==null)return void 0;if(t==null||n)return e[e.length-1];return p.rest(e,Math.max(0,e.length-t))};p.rest=p.tail=p.drop=function(e,t,n){return l.call(e,t==null||n?1:t)};p.compact=function(e){return p.filter(e,p.identity)};var N=function(e,t,n,i){var r=[],a=0;for(var s=i||0,o=b(e);s<o;s++){var l=e[s];if(E(l)&&(p.isArray(l)||p.isArguments(l))){if(!t)l=N(l,t,n);var u=0,c=l.length;r.length+=c;while(u<c){r[a++]=l[u++]}}else if(!n){r[a++]=l}}return r};p.flatten=function(e,t){return N(e,t,false)};p.without=function(e){return p.difference(e,l.call(arguments,1))};p.uniq=p.unique=function(e,t,n,i){if(!p.isBoolean(t)){i=n;n=t;t=false}if(n!=null)n=m(n,i);var r=[];var a=[];for(var s=0,o=b(e);s<o;s++){var l=e[s],u=n?n(l,s,e):l;if(t){if(!s||a!==u)r.push(l);a=u}else if(n){if(!p.contains(a,u)){a.push(u);r.push(l)}}else if(!p.contains(r,l)){r.push(l)}}return r};p.union=function(){return p.uniq(N(arguments,true,true))};p.intersection=function(e){var t=[];var n=arguments.length;for(var i=0,r=b(e);i<r;i++){var a=e[i];if(p.contains(t,a))continue;for(var s=1;s<n;s++){if(!p.contains(arguments[s],a))break}if(s===n)t.push(a)}return t};p.difference=function(e){var t=N(arguments,true,true,1);return p.filter(e,function(e){return!p.contains(t,e)})};p.zip=function(){return p.unzip(arguments)};p.unzip=function(e){var t=e&&p.max(e,b).length||0;var n=Array(t);for(var i=0;i<t;i++){n[i]=p.pluck(e,i)}return n};p.object=function(e,t){var n={};for(var i=0,r=b(e);i<r;i++){if(t){n[e[i]]=t[i]}else{n[e[i][0]]=e[i][1]}}return n};function S(a){return function(e,t,n){t=m(t,n);var i=b(e);var r=a>0?0:i-1;for(;r>=0&&r<i;r+=a){if(t(e[r],r,e))return r}return-1}}p.findIndex=S(1);p.findLastIndex=S(-1);p.sortedIndex=function(e,t,n,i){n=m(n,i,1);var r=n(t);var a=0,s=b(e);while(a<s){var o=Math.floor((a+s)/2);if(n(e[o])<r)a=o+1;else s=o}return a};function C(a,s,o){return function(e,t,n){var i=0,r=b(e);if(typeof n=="number"){if(a>0){i=n>=0?n:Math.max(n+r,i)}else{r=n>=0?Math.min(n+1,r):n+r+1}}else if(o&&n&&r){n=o(e,t);return e[n]===t?n:-1}if(t!==t){n=s(l.call(e,i,r),p.isNaN);return n>=0?n+i:-1}for(n=a>0?i:r-1;n>=0&&n<r;n+=a){if(e[n]===t)return n}return-1}}p.indexOf=C(1,p.findIndex,p.sortedIndex);p.lastIndexOf=C(-1,p.findLastIndex);p.range=function(e,t,n){if(t==null){t=e||0;e=0}n=n||1;var i=Math.max(Math.ceil((t-e)/n),0);var r=Array(i);for(var a=0;a<i;a++,e+=n){r[a]=e}return r};var A=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var a=y(e.prototype);var s=e.apply(a,r);if(p.isObject(s))return s;return a};p.bind=function(e,t){if(c&&e.bind===c)return c.apply(e,l.call(arguments,1));if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2);var i=function(){return A(e,i,t,this,n.concat(l.call(arguments)))};return i};p.partial=function(r){var a=l.call(arguments,1);var s=function(){var e=0,t=a.length;var n=Array(t);for(var i=0;i<t;i++){n[i]=a[i]===p?arguments[e++]:a[i]}while(e<arguments.length)n.push(arguments[e++]);return A(r,s,this,this,n)};return s};p.bindAll=function(e){var t,n=arguments.length,i;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++){i=arguments[t];e[i]=p.bind(e[i],e)}return e};p.memoize=function(i,r){var a=function(e){var t=a.cache;var n=""+(r?r.apply(this,arguments):e);if(!p.has(t,n))t[n]=i.apply(this,arguments);return t[n]};a.cache={};return a};p.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};p.defer=p.partial(p.delay,p,1);p.throttle=function(n,i,r){var a,s,o;var l=null;var u=0;if(!r)r={};var c=function(){u=r.leading===false?0:p.now();l=null;o=n.apply(a,s);if(!l)a=s=null};return function(){var e=p.now();if(!u&&r.leading===false)u=e;var t=i-(e-u);a=this;s=arguments;if(t<=0||t>i){if(l){clearTimeout(l);l=null}u=e;o=n.apply(a,s);if(!l)a=s=null}else if(!l&&r.trailing!==false){l=setTimeout(c,t)}return o}};p.debounce=function(t,n,i){var r,a,s,o,l;var u=function(){var e=p.now()-o;if(e<n&&e>=0){r=setTimeout(u,n-e)}else{r=null;if(!i){l=t.apply(s,a);if(!r)s=a=null}}};return function(){s=this;a=arguments;o=p.now();var e=i&&!r;if(!r)r=setTimeout(u,n);if(e){l=t.apply(s,a);s=a=null}return l}};p.wrap=function(e,t){return p.partial(t,e)};p.negate=function(e){return function(){return!e.apply(this,arguments)}};p.compose=function(){var n=arguments;var i=n.length-1;return function(){var e=i;var t=n[i].apply(this,arguments);while(e--)t=n[e].call(this,t);return t}};p.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};p.before=function(e,t){var n;return function(){if(--e>0){n=t.apply(this,arguments)}if(e<=1)t=null;return n}};p.once=p.partial(p.before,2);var k=!{toString:null}.propertyIsEnumerable("toString");var M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function R(e,t){var n=M.length;var i=e.constructor;var r=p.isFunction(i)&&i.prototype||s;var a="constructor";if(p.has(e,a)&&!p.contains(t,a))t.push(a);while(n--){a=M[n];if(a in e&&e[a]!==r[a]&&!p.contains(t,a)){t.push(a)}}}p.keys=function(e){if(!p.isObject(e))return[];if(u)return u(e);var t=[];for(var n in e)if(p.has(e,n))t.push(n);if(k)R(e,t);return t};p.allKeys=function(e){if(!p.isObject(e))return[];var t=[];for(var n in e)t.push(n);if(k)R(e,t);return t};p.values=function(e){var t=p.keys(e);var n=t.length;var i=Array(n);for(var r=0;r<n;r++){i[r]=e[t[r]]}return i};p.mapObject=function(e,t,n){t=m(t,n);var i=p.keys(e),r=i.length,a={},s;for(var o=0;o<r;o++){s=i[o];a[s]=t(e[s],s,e)}return a};p.pairs=function(e){var t=p.keys(e);var n=t.length;var i=Array(n);for(var r=0;r<n;r++){i[r]=[t[r],e[t[r]]]}return i};p.invert=function(e){var t={};var n=p.keys(e);for(var i=0,r=n.length;i<r;i++){t[e[n[i]]]=n[i]}return t};p.functions=p.methods=function(e){var t=[];for(var n in e){if(p.isFunction(e[n]))t.push(n)}return t.sort()};p.extend=v(p.allKeys);p.extendOwn=p.assign=v(p.keys);p.findKey=function(e,t,n){t=m(t,n);var i=p.keys(e),r;for(var a=0,s=i.length;a<s;a++){r=i[a];if(t(e[r],r,e))return r}};p.pick=function(e,t,n){var i={},r=e,a,s;if(r==null)return i;if(p.isFunction(t)){s=p.allKeys(r);a=g(t,n)}else{s=N(arguments,false,false,1);a=function(e,t,n){return t in n};r=Object(r)}for(var o=0,l=s.length;o<l;o++){var u=s[o];var c=r[u];if(a(c,u,r))i[u]=c}return i};p.omit=function(e,t,n){if(p.isFunction(t)){t=p.negate(t)}else{var i=p.map(N(arguments,false,false,1),String);t=function(e,t){return!p.contains(i,t)}}return p.pick(e,t,n)};p.defaults=v(p.allKeys,true);p.create=function(e,t){var n=y(e);if(t)p.extendOwn(n,t);return n};p.clone=function(e){if(!p.isObject(e))return e;return p.isArray(e)?e.slice():p.extend({},e)};p.tap=function(e,t){t(e);return e};p.isMatch=function(e,t){var n=p.keys(t),i=n.length;if(e==null)return!i;var r=Object(e);for(var a=0;a<i;a++){var s=n[a];if(t[s]!==r[s]||!(s in r))return false}return true};var O=function(e,t,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;if(e instanceof p)e=e._wrapped;if(t instanceof p)t=t._wrapped;var r=f.call(e);if(r!==f.call(t))return false;switch(r){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a=r==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return false;var s=e.constructor,o=t.constructor;if(s!==o&&!(p.isFunction(s)&&s instanceof s&&p.isFunction(o)&&o instanceof o)&&("constructor"in e&&"constructor"in t)){return false}}n=n||[];i=i||[];var l=n.length;while(l--){if(n[l]===e)return i[l]===t}n.push(e);i.push(t);if(a){l=e.length;if(l!==t.length)return false;while(l--){if(!O(e[l],t[l],n,i))return false}}else{var u=p.keys(e),c;l=u.length;if(p.keys(t).length!==l)return false;while(l--){c=u[l];if(!(p.has(t,c)&&O(e[c],t[c],n,i)))return false}}n.pop();i.pop();return true};p.isEqual=function(e,t){return O(e,t)};p.isEmpty=function(e){if(e==null)return true;if(E(e)&&(p.isArray(e)||p.isString(e)||p.isArguments(e)))return e.length===0;return p.keys(e).length===0};p.isElement=function(e){return!!(e&&e.nodeType===1)};p.isArray=o||function(e){return f.call(e)==="[object Array]"};p.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};p.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){p["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}});if(!p.isArguments(arguments)){p.isArguments=function(e){return p.has(e,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){p.isFunction=function(e){return typeof e=="function"||false}}p.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};p.isNaN=function(e){return p.isNumber(e)&&e!==+e};p.isBoolean=function(e){return e===true||e===false||f.call(e)==="[object Boolean]"};p.isNull=function(e){return e===null};p.isUndefined=function(e){return e===void 0};p.has=function(e,t){return e!=null&&a.call(e,t)};p.noConflict=function(){e._=t;return this};p.identity=function(e){return e};p.constant=function(e){return function(){return e}};p.noop=function(){};p.property=_;p.propertyOf=function(t){return t==null?function(){}:function(e){return t[e]}};p.matcher=p.matches=function(t){t=p.extendOwn({},t);return function(e){return p.isMatch(e,t)}};p.times=function(e,t,n){var i=Array(Math.max(0,e));t=g(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i};p.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};p.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var D=p.invert(I);var L=function(t){var n=function(e){return t[e]};var e="(?:"+p.keys(t).join("|")+")";var i=RegExp(e);var r=RegExp(e,"g");return function(e){e=e==null?"":""+e;return i.test(e)?e.replace(r,n):e}};p.escape=L(I);p.unescape=L(D);p.result=function(e,t,n){var i=e==null?void 0:e[t];if(i===void 0){i=n}return p.isFunction(i)?i.call(e):i};var P=0;p.uniqueId=function(e){var t=++P+"";return e?e+t:t};p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/;var U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var H=/\\|'|\r|\n|\u2028|\u2029/g;var G=function(e){return"\\"+U[e]};p.template=function(a,e,t){if(!e&&t)e=t;e=p.defaults({},e,p.templateSettings);var n=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g");var s=0;var o="__p+='";a.replace(n,function(e,t,n,i,r){o+=a.slice(s,r).replace(H,G);s=r+e.length;if(t){o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"}else if(n){o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"}else if(i){o+="';\n"+i+"\n__p+='"}return e});o+="';\n";if(!e.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var i=new Function(e.variable||"obj","_",o)}catch(e){e.source=o;throw e}var r=function(e){return i.call(this,e,p)};var l=e.variable||"obj";r.source="function("+l+"){\n"+o+"}";return r};p.chain=function(e){var t=p(e);t._chain=true;return t};var Y=function(e,t){return e._chain?p(t).chain():t};p.mixin=function(n){p.each(p.functions(n),function(e){var t=p[e]=n[e];p.prototype[e]=function(){var e=[this._wrapped];r.apply(e,arguments);return Y(this,t.apply(p,e))}})};p.mixin(p);p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];p.prototype[t]=function(){var e=this._wrapped;n.apply(e,arguments);if((t==="shift"||t==="splice")&&e.length===0)delete e[0];return Y(this,e)}});p.each(["concat","join","slice"],function(e){var t=i[e];p.prototype[e]=function(){return Y(this,t.apply(this._wrapped,arguments))}});p.prototype.value=function(){return this._wrapped};p.prototype.valueOf=p.prototype.toJSON=p.prototype.value;p.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return p})}}).call(this);(function(i,r){if(typeof define==="function"&&define.amd){define("backbone",["underscore","jquery","exports"],function(e,t,n){i.Backbone=r(i,n,e,t)})}else if(typeof exports!=="undefined"){var e=require("underscore");r(i,exports,e)}else{i.Backbone=r(i,{},i._,i.jQuery||i.Zepto||i.ender||i.$)}})(this,function(e,o,E,t){var n=e.Backbone;var i=[];var r=i.push;var a=i.slice;var s=i.splice;o.VERSION="1.1.2";o.$=t;o.noConflict=function(){e.Backbone=n;return this};o.emulateHTTP=false;o.emulateJSON=false;var l=o.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);i.push({callback:t,context:n,ctx:n||this});return this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var i=this;var r=E.once(function(){i.off(e,r);t.apply(this,arguments)});r._callback=t;return this.on(e,r,n)},off:function(e,t,n){var i,r,a,s,o,l,u,c;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n){this._events=void 0;return this}s=e?[e]:E.keys(this._events);for(o=0,l=s.length;o<l;o++){e=s[o];if(a=this._events[e]){this._events[e]=i=[];if(t||n){for(u=0,c=a.length;u<c;u++){r=a[u];if(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context){i.push(r)}}}if(!i.length)delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e];var i=this._events.all;if(n)c(n,t);if(i)c(i,arguments);return this},stopListening:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;if(!n&&typeof t==="object")n=this;if(e)(i={})[e._listenId]=e;for(var a in i){e=i[a];e.off(t,n,this);if(r||E.isEmpty(e._events))delete this._listeningTo[a]}return this}};var u=/\s+/;var f=function(e,t,n,i){if(!n)return true;if(typeof n==="object"){for(var r in n){e[t].apply(e,[r,n[r]].concat(i))}return false}if(u.test(n)){var a=n.split(u);for(var s=0,o=a.length;s<o;s++){e[t].apply(e,[a[s]].concat(i))}return false}return true};var c=function(e,t){var n,i=-1,r=e.length,a=t[0],s=t[1],o=t[2];switch(t.length){case 0:while(++i<r)(n=e[i]).callback.call(n.ctx);return;case 1:while(++i<r)(n=e[i]).callback.call(n.ctx,a);return;case 2:while(++i<r)(n=e[i]).callback.call(n.ctx,a,s);return;case 3:while(++i<r)(n=e[i]).callback.call(n.ctx,a,s,o);return;default:while(++i<r)(n=e[i]).callback.apply(n.ctx,t);return}};var h={listenTo:"on",listenToOnce:"once"};E.each(h,function(a,e){l[e]=function(e,t,n){var i=this._listeningTo||(this._listeningTo={});var r=e._listenId||(e._listenId=E.uniqueId("l"));i[r]=e;if(!n&&typeof t==="object")n=this;e[a](t,n,this);return this}});l.bind=l.on;l.unbind=l.off;E.extend(o,l);var x=o.Model=function(e,t){var n=e||{};t||(t={});this.cid=E.uniqueId("c");this.attributes={};if(t.collection)this.collection=t.collection;if(t.parse)n=this.parse(n,t)||{};n=E.defaults({},n,E.result(this,"defaults"));this.set(n,t);this.changed={};this.initialize.apply(this,arguments)};E.extend(x.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return E.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return E.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var i,r,a,s,o,l,u,c;if(e==null)return this;if(typeof e==="object"){r=e;n=t}else{(r={})[e]=t}n||(n={});if(!this._validate(r,n))return false;a=n.unset;o=n.silent;s=[];l=this._changing;this._changing=true;if(!l){this._previousAttributes=E.clone(this.attributes);this.changed={}}c=this.attributes,u=this._previousAttributes;if(this.idAttribute in r)this.id=r[this.idAttribute];for(i in r){t=r[i];if(!E.isEqual(c[i],t))s.push(i);if(!E.isEqual(u[i],t)){this.changed[i]=t}else{delete this.changed[i]}a?delete c[i]:c[i]=t}if(!o){if(s.length)this._pending=n;for(var f=0,h=s.length;f<h;f++){this.trigger("change:"+s[f],this,c[s[f]],n)}}if(l)return this;if(!o){while(this._pending){n=this._pending;this._pending=false;this.trigger("change",this,n)}}this._pending=false;this._changing=false;return this},unset:function(e,t){return this.set(e,void 0,E.extend({},t,{unset:true}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,E.extend({},e,{unset:true}))},hasChanged:function(e){if(e==null)return!E.isEmpty(this.changed);return E.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?E.clone(this.changed):false;var t,n=false;var i=this._changing?this._previousAttributes:this.attributes;for(var r in e){if(E.isEqual(i[r],t=e[r]))continue;(n||(n={}))[r]=t}return n},previous:function(e){if(e==null||!this._previousAttributes)return null;return this._previousAttributes[e]},previousAttributes:function(){return E.clone(this._previousAttributes)},fetch:function(t){t=t?E.clone(t):{};if(t.parse===void 0)t.parse=true;var n=this;var i=t.success;t.success=function(e){if(!n.set(n.parse(e,t),t))return false;if(i)i(n,e,t);n.trigger("sync",n,e,t)};H(this,t);return this.sync("read",this,t)},save:function(e,t,n){var i,r,a,s=this.attributes;if(e==null||typeof e==="object"){i=e;n=t}else{(i={})[e]=t}n=E.extend({validate:true},n);if(i&&!n.wait){if(!this.set(i,n))return false}else{if(!this._validate(i,n))return false}if(i&&n.wait){this.attributes=E.extend({},s,i)}if(n.parse===void 0)n.parse=true;var o=this;var l=n.success;n.success=function(e){o.attributes=s;var t=o.parse(e,n);if(n.wait)t=E.extend(i||{},t);if(E.isObject(t)&&!o.set(t,n)){return false}if(l)l(o,e,n);o.trigger("sync",o,e,n)};H(this,n);r=this.isNew()?"create":n.patch?"patch":"update";if(r==="patch")n.attrs=i;a=this.sync(r,this,n);if(i&&n.wait)this.attributes=s;return a},destroy:function(t){t=t?E.clone(t):{};var n=this;var i=t.success;var r=function(){n.trigger("destroy",n,n.collection,t)};t.success=function(e){if(t.wait||n.isNew())r();if(i)i(n,e,t);if(!n.isNew())n.trigger("sync",n,e,t)};if(this.isNew()){t.success();return false}H(this,t);var e=this.sync("delete",this,t);if(!t.wait)r();return e},url:function(){var e=E.result(this,"urlRoot")||E.result(this.collection,"url")||U();if(this.isNew())return e;return e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},E.extend(e||{},{validate:true}))},_validate:function(e,t){if(!t.validate||!this.validate)return true;e=E.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;if(!n)return true;this.trigger("invalid",this,n,E.extend(t,{validationError:n}));return false}});var d=["keys","values","pairs","invert","pick","omit"];E.each(d,function(t){x.prototype[t]=function(){var e=a.call(arguments);e.unshift(this.attributes);return E[t].apply(E,e)}});var p=o.Collection=function(e,t){t||(t={});if(t.model)this.model=t.model;if(t.comparator!==void 0)this.comparator=t.comparator;this._reset();this.initialize.apply(this,arguments);if(e)this.reset(e,E.extend({silent:true},t))};var T={add:true,remove:true,merge:true};var g={add:true,remove:false};E.extend(p.prototype,l,{model:x,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,E.extend({merge:false},t,g))},remove:function(e,t){var n=!E.isArray(e);e=n?[e]:E.clone(e);t||(t={});var i,r,a,s;for(i=0,r=e.length;i<r;i++){s=e[i]=this.get(e[i]);if(!s)continue;delete this._byId[s.id];delete this._byId[s.cid];a=this.indexOf(s);this.models.splice(a,1);this.length--;if(!t.silent){t.index=a;s.trigger("remove",s,this,t)}this._removeReference(s,t)}return n?e[0]:e},set:function(e,t){t=E.defaults({},t,T);if(t.parse)e=this.parse(e,t);var n=!E.isArray(e);e=n?e?[e]:[]:E.clone(e);var i,r,a,s,o,l,u;var c=t.at;var f=this.model;var h=this.comparator&&c==null&&t.sort!==false;var d=E.isString(this.comparator)?this.comparator:null;var p=[],g=[],m={};var v=t.add,y=t.merge,_=t.remove;var w=!h&&v&&_?[]:false;for(i=0,r=e.length;i<r;i++){o=e[i]||{};if(o instanceof x){a=s=o}else{a=o[f.prototype.idAttribute||"id"]}if(l=this.get(a)){if(_)m[l.cid]=true;if(y){o=o===s?s.attributes:o;if(t.parse)o=l.parse(o,t);l.set(o,t);if(h&&!u&&l.hasChanged(d))u=true}e[i]=l}else if(v){s=e[i]=this._prepareModel(o,t);if(!s)continue;p.push(s);this._addReference(s,t)}s=l||s;if(w&&(s.isNew()||!m[s.id]))w.push(s);m[s.id]=true}if(_){for(i=0,r=this.length;i<r;++i){if(!m[(s=this.models[i]).cid])g.push(s)}if(g.length)this.remove(g,t)}if(p.length||w&&w.length){if(h)u=true;this.length+=p.length;if(c!=null){for(i=0,r=p.length;i<r;i++){this.models.splice(c+i,0,p[i])}}else{if(w)this.models.length=0;var b=w||p;for(i=0,r=b.length;i<r;i++){this.models.push(b[i])}}}if(u)this.sort({silent:true});if(!t.silent){for(i=0,r=p.length;i<r;i++){(s=p[i]).trigger("add",s,this,t)}if(u||w&&w.length)this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;n<i;n++){this._removeReference(this.models[n],t)}t.previousModels=this.models;this._reset();e=this.add(e,E.extend({silent:true},t));if(!t.silent)this.trigger("reset",this,t);return e},push:function(e,t){return this.add(e,E.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);this.remove(t,e);return t},unshift:function(e,t){return this.add(e,E.extend({at:0},t))},shift:function(e){var t=this.at(0);this.remove(t,e);return t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(e==null)return void 0;return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(n,e){if(E.isEmpty(n))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var t in n){if(n[t]!==e.get(t))return false}return true})},findWhere:function(e){return this.where(e,true)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");e||(e={});if(E.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(E.bind(this.comparator,this))}if(!e.silent)this.trigger("sort",this,e);return this},pluck:function(e){return E.invoke(this.models,"get",e)},fetch:function(n){n=n?E.clone(n):{};if(n.parse===void 0)n.parse=true;var i=n.success;var r=this;n.success=function(e){var t=n.reset?"reset":"set";r[t](e,n);if(i)i(r,e,n);r.trigger("sync",r,e,n)};H(this,n);return this.sync("read",this,n)},create:function(e,n){n=n?E.clone(n):{};if(!(e=this._prepareModel(e,n)))return false;if(!n.wait)this.add(e,n);var i=this;var r=n.success;n.success=function(e,t){if(n.wait)i.add(e,n);if(r)r(e,t,n)};e.save(null,n);return e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(e,t){if(e instanceof x)return e;t=t?E.clone(t):{};t.collection=this;var n=new this.model(e,t);if(!n.validationError)return n;this.trigger("invalid",this,n.validationError,t);return false},_addReference:function(e,t){this._byId[e.cid]=e;if(e.id!=null)this._byId[e.id]=e;if(!e.collection)e.collection=this;e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){if(this===e.collection)delete e.collection;e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if((e==="add"||e==="remove")&&n!==this)return;if(e==="destroy")this.remove(t,i);if(t&&e==="change:"+t.idAttribute){delete this._byId[t.previous(t.idAttribute)];if(t.id!=null)this._byId[t.id]=t}this.trigger.apply(this,arguments)}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];E.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);e.unshift(this.models);return E[t].apply(E,e)}});var v=["groupBy","countBy","sortBy","indexBy"];E.each(v,function(i){p.prototype[i]=function(t,e){var n=E.isFunction(t)?t:function(e){return e.get(t)};return E[i](this.models,n,e)}});var y=o.View=function(e){this.cid=E.uniqueId("view");e||(e={});E.extend(this,E.pick(e,w));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var _=/^(\S+)\s*(.*)$/;var w=["model","collection","el","id","attributes","className","tagName","events"];E.extend(y.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(e,t){if(this.$el)this.undelegateEvents();this.$el=e instanceof o.$?e:o.$(e);this.el=this.$el[0];if(t!==false)this.delegateEvents();return this},delegateEvents:function(e){if(!(e||(e=E.result(this,"events"))))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(!E.isFunction(n))n=this[e[t]];if(!n)continue;var i=t.match(_);var r=i[1],a=i[2];n=E.bind(n,this);r+=".delegateEvents"+this.cid;if(a===""){this.$el.on(r,n)}else{this.$el.on(r,a,n)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var e=E.extend({},E.result(this,"attributes"));if(this.id)e.id=E.result(this,"id");if(this.className)e["class"]=E.result(this,"className");var t=o.$("<"+E.result(this,"tagName")+">").attr(e);this.setElement(t,false)}else{this.setElement(E.result(this,"el"),false)}}});o.sync=function(e,t,n){var i=N[e];E.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var r={type:i,dataType:"json"};if(!n.url){r.url=E.result(t,"url")||U()}if(n.data==null&&t&&(e==="create"||e==="update"||e==="patch")){r.contentType="application/json";r.data=JSON.stringify(n.attrs||t.toJSON(n))}if(n.emulateJSON){r.contentType="application/x-www-form-urlencoded";r.data=r.data?{model:r.data}:{}}if(n.emulateHTTP&&(i==="PUT"||i==="DELETE"||i==="PATCH")){r.type="POST";if(n.emulateJSON)r.data._method=i;var a=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",i);if(a)return a.apply(this,arguments)}}if(r.type!=="GET"&&!n.emulateJSON){r.processData=false}if(r.type==="PATCH"&&b){r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var s=n.xhr=o.ajax(E.extend(r,n));t.trigger("request",t,s,n);return s};var b=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var N={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var S=o.Router=function(e){e||(e={});if(e.routes)this.routes=e.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var C=/\((.*?)\)/g;var A=/(\(\?)?:\w+/g;var k=/\*\w+/g;var M=/[\-{}\[\]+?.,\\\^$|#\s]/g;E.extend(S.prototype,l,{initialize:function(){},route:function(n,i,r){if(!E.isRegExp(n))n=this._routeToRegExp(n);if(E.isFunction(i)){r=i;i=""}if(!r)r=this[i];var a=this;o.history.route(n,function(e){var t=a._extractParameters(n,e);a.execute(r,t);a.trigger.apply(a,["route:"+i].concat(t));a.trigger("route",i,t);o.history.trigger("route",a,i,t)});return this},execute:function(e,t){if(e)e.apply(this,t)},navigate:function(e,t){o.history.navigate(e,t);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=E.result(this,"routes");var e,t=E.keys(this.routes);while((e=t.pop())!=null){this.route(e,this.routes[e])}},_routeToRegExp:function(e){e=e.replace(M,"\\$&").replace(C,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/?]+)"}).replace(k,"([^?]*?)");return new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return E.map(n,function(e,t){if(t===n.length-1)return e||null;return e?decodeURIComponent(e):null})}});var R=o.History=function(){this.handlers=[];E.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var O=/^[#\/]|\s+$/g;var I=/^\/+|\/+$/g;var D=/msie [\w.]+/;var L=/\/$/;var P=/#.*$/;R.started=false;E.extend(R.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null){if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(L,"");if(!e.indexOf(n))e=e.slice(n.length)}else{e=this.getHash()}}return e.replace(O,"")},start:function(e){if(R.started)throw new Error("Backbone.history has already been started");R.started=true;this.options=E.extend({root:"/"},this.options,e);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment();var n=document.documentMode;var i=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(I,"/");if(i&&this._wantsHashChange){var r=o.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow;this.navigate(t)}if(this._hasPushState){o.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!i){o.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=t;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&a.hash){this.fragment=this.getHash().replace(O,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);R.started=false},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe){t=this.getFragment(this.getHash(this.iframe))}if(t===this.fragment)return false;if(this.iframe)this.navigate(t);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return E.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(e,t){if(!R.started)return false;if(!t||t===true)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(P,"");if(this.fragment===e)return;this.fragment=e;if(e===""&&n!=="/")n=n.slice(0,-1);if(this._hasPushState){this.history[t.replace?"replaceState":"pushState"]({},document.title,n)}else if(this._wantsHashChange){this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getFragment(this.getHash(this.iframe))){if(!t.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,e,t.replace)}}else{return this.location.assign(n)}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else{e.hash="#"+t}}});o.history=new R;var F=function(e,t){var n=this;var i;if(e&&E.has(e,"constructor")){i=e.constructor}else{i=function(){return n.apply(this,arguments)}}E.extend(i,n,t);var r=function(){this.constructor=i};r.prototype=n.prototype;i.prototype=new r;if(e)E.extend(i.prototype,e);i.__super__=n.prototype;return i};x.extend=p.extend=S.extend=y.extend=R.extend=F;var U=function(){throw new Error('A "url" property or function must be specified')};var H=function(t,n){var i=n.error;n.error=function(e){if(i)i(t,e,n);t.trigger("error",t,e,n)}};return o});(function(e){define("foundation/foundation.equalizer",["foundation/foundation"],function(){return function(){(function(u,e,t,n){"use strict";Foundation.libs.equalizer={name:"equalizer",version:"5.5.3",settings:{use_tallest:true,before_height_change:u.noop,after_height_change:u.noop,equalize_on_stack:false,act_on_hidden_el:false},init:function(e,t,n){Foundation.inherit(this,"image_loaded");this.bindings(t,n);this.reflow()},events:function(){this.S(e).off(".equalizer").on("resize.fndtn.equalizer",function(e){this.reflow()}.bind(this))},equalize:function(e){var t=false,n=e.data("equalizer"),i=e.data(this.attr_name(true)+"-init")||this.settings,r,a;if(i.act_on_hidden_el){r=n?e.find("["+this.attr_name()+'-watch="'+n+'"]'):e.find("["+this.attr_name()+"-watch]")}else{r=n?e.find("["+this.attr_name()+'-watch="'+n+'"]:visible'):e.find("["+this.attr_name()+"-watch]:visible")}if(r.length===0){return}i.before_height_change();e.trigger("before-height-change.fndth.equalizer");r.height("inherit");if(i.equalize_on_stack===false){a=r.first().offset().top;r.each(function(){if(u(this).offset().top!==a){t=true;return false}});if(t){return}}var s=r.map(function(){return u(this).outerHeight(false)}).get();if(i.use_tallest){var o=Math.max.apply(null,s);r.css("height",o)}else{var l=Math.min.apply(null,s);r.css("height",l)}i.after_height_change();e.trigger("after-height-change.fndtn.equalizer")},reflow:function(){var r=this;this.S("["+this.attr_name()+"]",this.scope).each(function(){var t=u(this),n=t.data("equalizer-mq"),i=true;if(n){n="is_"+n.replace(/-/g,"_");if(Foundation.utils.hasOwnProperty(n)){i=false}}r.image_loaded(r.S("img",this),function(){if(i||Foundation.utils[n]()){r.equalize(t)}else{var e=t.find("["+r.attr_name()+"-watch]:visible");e.css("height","auto")}})})}}})(jQuery,window,window.document)}.apply(e,arguments)})})(this);(function(e,t){if(typeof module=="object"&&module.exports)module.exports=t();else if(typeof define=="function"&&define.amd)define("spin",t);else e.Spinner=t()})(this,function(){"use strict";var a=["webkit","Moz","ms","O"],u={},h,c;function d(e,t){var n=document.createElement(e||"div"),i;for(i in t)n[i]=t[i];return n}function f(e){for(var t=1,n=arguments.length;t<n;t++){e.appendChild(arguments[t])}return e}function s(e,t,n,i){var r=["opacity",t,~~(e*100),n,i].join("-"),a=.01+n/i*100,s=Math.max(1-(1-e)/t*(100-a),e),o=h.substring(0,h.indexOf("Animation")).toLowerCase(),l=o&&"-"+o+"-"||"";if(!u[r]){c.insertRule("@"+l+"keyframes "+r+"{"+"0%{opacity:"+s+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+s+"}"+"}",c.cssRules.length);u[r]=1}return r}function i(e,t){var n=e.style,i,r;t=t.charAt(0).toUpperCase()+t.slice(1);if(n[t]!==undefined)return t;for(r=0;r<a.length;r++){i=a[r]+t;if(n[i]!==undefined)return i}}function p(e,t){for(var n in t){e.style[i(e,n)||n]=t[n]}return e}function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(e[i]===undefined)e[i]=n[i]}}return e}function g(e,t){return typeof e=="string"?e:e[t%e.length]}var n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function r(e){this.opts=t(e||{},r.defaults,n)}r.defaults={};t(r.prototype,{spin:function(e){this.stop();var n=this,i=n.opts,r=n.el=d(null,{className:i.className});p(r,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top});if(e){e.insertBefore(r,e.firstChild||null)}r.setAttribute("role","progressbar");n.lines(r,n.opts);if(!h){var a=0,s=(i.lines-1)*(1-i.direction)/2,o,l=i.fps,u=l/i.speed,c=(1-i.opacity)/(u*i.trail/100),f=u/i.lines;(function e(){a++;for(var t=0;t<i.lines;t++){o=Math.max(1-(a+(i.lines-t)*f)%u*c,i.opacity);n.opacity(r,t*i.direction+s,o,i)}n.timeout=n.el&&setTimeout(e,~~(1e3/l))})()}return n},stop:function(){var e=this.el;if(e){clearTimeout(this.timeout);if(e.parentNode)e.parentNode.removeChild(e);this.el=undefined}return this},lines:function(e,n){var i=0,t=(n.lines-1)*(1-n.direction)/2,r;function a(e,t){return p(d(),{position:"absolute",width:n.scale*(n.length+n.width)+"px",height:n.scale*n.width+"px",background:e,boxShadow:t,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*i+n.rotate)+"deg) translate("+n.scale*n.radius+"px"+",0)",borderRadius:(n.corners*n.scale*n.width>>1)+"px"})}for(;i<n.lines;i++){r=p(d(),{position:"absolute",top:1+~(n.scale*n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:h&&s(n.opacity,n.trail,t+i*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"});if(n.shadow)f(r,p(a("#000","0 0 4px #000"),{top:"2px"}));f(e,f(r,a(g(n.color,i),"0 0 1px rgba(0,0,0,.1)")))}return e},opacity:function(e,t,n){if(t<e.childNodes.length)e.childNodes[t].style.opacity=n}});function e(){function u(e,t){return d("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}c.addRule(".spin-vml","behavior:url(#default#VML)");r.prototype.lines=function(e,i){var r=i.scale*(i.length+i.width),t=i.scale*2*r;function a(){return p(u("group",{coordsize:t+" "+t,coordorigin:-r+" "+-r}),{width:t,height:t})}var n=-(i.width+i.length)*i.scale*2+"px",s=p(a(),{position:"absolute",top:n,left:n}),o;function l(e,t,n){f(s,f(p(a(),{rotation:360/i.lines*e+"deg",left:~~t}),f(p(u("roundrect",{arcsize:i.corners}),{width:r,height:i.scale*i.width,left:i.scale*i.radius,top:-i.scale*i.width>>1,filter:n}),u("fill",{color:g(i.color,e),opacity:i.opacity}),u("stroke",{opacity:0}))))}if(i.shadow)for(o=1;o<=i.lines;o++){l(o,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}for(o=1;o<=i.lines;o++)l(o);return f(e,s)};r.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0;if(r&&t+i<r.childNodes.length){r=r.childNodes[t+i];r=r&&r.firstChild;r=r&&r.firstChild;if(r)r.opacity=n}}}if(typeof document!=="undefined"){c=function(){var e=d("style",{type:"text/css"});f(document.getElementsByTagName("head")[0],e);return e.sheet||e.styleSheet}();var o=p(d("group"),{behavior:"url(#default#VML)"});if(!i(o,"transform")&&o.adj)e();else h=i(o,"animation")}return r});define("powa/views/WidgetView",["backbone","spin"],function(e,t){var i={};var r=function(e){return new this(e)};return Backbone.View.extend({spinner_opts:{},showload:function(){this.loading=true;if(this.spinner===undefined){this.spinner=new t(this.spinner_opts)}this.spinner.spin(this.el)},fail:function(e){this.hideload();this.$el.html('<div class="alert-box info">An error occured while loading this widget <br/>'+e+"</div>")},hideload:function(){if(this.spinner){this.spinner.stop()}},updatePeriod:function(e,t){this.from_date=e;this.to_date=t;this.showload()},zoomIn:function(e,t){this.showload()},show:function(){}},{extend:function(e,t){var n=Backbone.View.extend.apply(this,[e,t]);i[n.prototype.typname]=n;if(!n.makeInstance){n.makeInstance=r}return n},makeView:function(e){return i[e.typname].makeInstance({model:e})}})});(function(e){define("foundation-daterangepicker",["foundation/foundation"],function(){return function(){!function(m){var i=function(e,n,t){var i=typeof n=="object";var r;this.startDate=moment().startOf("day");this.endDate=moment().startOf("day");this.minDate=false;this.maxDate=false;this.dateLimit=false;this.showDropdowns=false;this.showWeekNumbers=false;this.timePicker=false;this.timePickerIncrement=30;this.timePicker12Hour=true;this.ranges={};this.opens="right";this.buttonClasses=["button","small"];this.applyClass="";this.cancelClass="alert";this.format="MM/DD/YYYY";this.separator=" - ";this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment()._lang._weekdaysMin.slice(),monthNames:moment()._lang._monthsShort.slice(),firstDay:0};this.cb=function(){};this.parentEl="body";this.element=m(e);if(this.element.hasClass("pull-right"))this.opens="left";if(this.element.is("input")){this.element.on({click:m.proxy(this.show,this),focus:m.proxy(this.show,this)})}else{this.element.on("click",m.proxy(this.show,this))}r=this.locale;if(i){if(typeof n.locale=="object"){m.each(r,function(e,t){r[e]=n.locale[e]||t})}if(n.applyClass){this.applyClass=n.applyClass}if(n.cancelClass){this.cancelClass=n.cancelClass}}var a='<div class="daterangepicker panel">'+'<div class="calendars left">'+'<div class="calendar left"></div>'+'<div class="calendar right"></div>'+"</div>"+'<div class="ranges left">'+'<button class="'+this.applyClass+' applyBtn radius tiny button" disabled="disabled">'+this.locale.applyLabel+"</button>&nbsp;"+"</div>"+"</div>";this.parentEl=i&&n.parentEl&&m(n.parentEl)||m(this.parentEl);this.container=m(a).appendTo(this.parentEl);if(i){if(typeof n.format=="string")this.format=n.format;if(typeof n.separator=="string")this.separator=n.separator;if(typeof n.startDate=="string")this.startDate=moment(n.startDate,this.format);if(typeof n.endDate=="string")this.endDate=moment(n.endDate,this.format);if(typeof n.minDate=="string")this.minDate=moment(n.minDate,this.format);if(typeof n.maxDate=="string")this.maxDate=moment(n.maxDate,this.format);if(typeof n.startDate=="object")this.startDate=moment(n.startDate);if(typeof n.endDate=="object")this.endDate=moment(n.endDate);if(typeof n.minDate=="object")this.minDate=moment(n.minDate);if(typeof n.maxDate=="object")this.maxDate=moment(n.maxDate);if(typeof n.ranges=="object"){for(var s in n.ranges){var o=moment(n.ranges[s][0]);var l=moment(n.ranges[s][1]);if(this.minDate&&o.isBefore(this.minDate))o=moment(this.minDate);if(this.maxDate&&l.isAfter(this.maxDate))l=moment(this.maxDate);if(this.minDate&&l.isBefore(this.minDate)||this.maxDate&&o.isAfter(this.maxDate)){continue}this.ranges[s]=[o,l]}var u="<ul>";for(var s in this.ranges){u+="<li>"+s+"</li>"}u+="</ul>";this.container.find(".ranges").prepend(u)}if(typeof n.dateLimit=="object")this.dateLimit=n.dateLimit;if(typeof n.locale=="object"){if(typeof n.locale.firstDay=="number"){this.locale.firstDay=n.locale.firstDay;var c=n.locale.firstDay;while(c>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());c--}}}if(typeof n.opens=="string")this.opens=n.opens;if(typeof n.showWeekNumbers=="boolean"){this.showWeekNumbers=n.showWeekNumbers}if(typeof n.buttonClasses=="string"){this.buttonClasses=[n.buttonClasses]}if(typeof n.buttonClasses=="object"){this.buttonClasses=n.buttonClasses}if(typeof n.showDropdowns=="boolean"){this.showDropdowns=n.showDropdowns}if(typeof n.timePicker=="boolean"){this.timePicker=n.timePicker}if(typeof n.timePickerIncrement=="number"){this.timePickerIncrement=n.timePickerIncrement}if(typeof n.timePicker12Hour=="boolean"){this.timePicker12Hour=n.timePicker12Hour}}if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.startOf("day")}var f=this.container;m.each(this.buttonClasses,function(e,t){f.find("button").addClass(t)});if(this.opens=="right"){var h=this.container.find(".calendar.left");var d=this.container.find(".calendar.right");h.removeClass("left").addClass("right");d.removeClass("right").addClass("left")}if(typeof n=="undefined"||typeof n.ranges=="undefined"){this.container.find(".calendar").show();this.move()}if(typeof t=="function")this.cb=t;this.container.addClass("opens"+this.opens);if(!i||typeof n.startDate=="undefined"&&typeof n.endDate=="undefined"){if(m(this.element).is("input[type=text]")){var p=m(this.element).val();var g=p.split(this.separator);var o,l;if(g.length==2){o=moment(g[0],this.format);l=moment(g[1],this.format)}if(o!=null&&l!=null){this.startDate=o;this.endDate=l}}}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]};this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]};this.container.on("mousedown",m.proxy(this.mousedown,this));this.container.find(".calendar").on("click",".prev",m.proxy(this.clickPrev,this));this.container.find(".calendar").on("click",".next",m.proxy(this.clickNext,this));this.container.find(".ranges").on("click","button.applyBtn",m.proxy(this.clickApply,this));this.container.find(".ranges").on("click","button.cancelBtn",m.proxy(this.clickCancel,this));this.container.find(".ranges").on("click",".daterangepicker_start_input",m.proxy(this.showCalendars,this));this.container.find(".ranges").on("click",".daterangepicker_end_input",m.proxy(this.showCalendars,this));this.container.find(".calendar").on("click","td.available",m.proxy(this.clickDate,this));this.container.find(".calendar").on("mouseenter","td.available",m.proxy(this.enterDate,this));this.container.find(".calendar").on("mouseleave","td.available",m.proxy(this.updateView,this));this.container.find(".ranges").on("click","li",m.proxy(this.clickRange,this));this.container.find(".ranges").on("mouseenter","li",m.proxy(this.enterRange,this));this.container.find(".ranges").on("mouseleave","li",m.proxy(this.updateView,this));this.container.find(".calendar").on("change","select.yearselect",m.proxy(this.updateMonthYear,this));this.container.find(".calendar").on("change","select.monthselect",m.proxy(this.updateMonthYear,this));this.container.find(".calendar").on("change","select.hourselect",m.proxy(this.updateTime,this));this.container.find(".calendar").on("change","select.minuteselect",m.proxy(this.updateTime,this));this.container.find(".calendar").on("change","select.ampmselect",m.proxy(this.updateTime,this));this.element.on("keyup",m.proxy(this.updateFromControl,this));this.updateView();this.updateCalendars()};i.prototype={constructor:i,mousedown:function(e){e.stopPropagation()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year());this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format));if(this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button.applyBtn").removeAttr("disabled")}else{this.container.find("button.applyBtn").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input"))return;if(!this.element.val().length)return;var e=this.element.val().split(this.separator);var t=moment(e[0],this.format);var n=moment(e[1],this.format);if(t==null||n==null)return;if(n.isBefore(t))return;this.startDate=t;this.endDate=n;this.notify();this.updateCalendars()},notify:function(){this.updateView();this.cb(this.startDate,this.endDate)},move:function(){var e={top:this.parentEl.offset().top-(this.parentEl.is("body")?0:this.parentEl.scrollTop()),left:this.parentEl.offset().left-(this.parentEl.is("body")?0:this.parentEl.scrollLeft())};if(this.opens=="left"){this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,right:m(window).width()-this.element.offset().left-this.element.outerWidth()-e.left,left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else{this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,left:this.element.offset().left-e.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>m(window).width()){this.container.css({left:"auto",right:0})}}},show:function(e){this.container.show();this.move();if(e){e.stopPropagation();e.preventDefault()}m(document).on("mousedown",m.proxy(this.hide,this));this.element.trigger("shown",{target:e.target,picker:this})},hide:function(e){this.container.hide();if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))this.notify();this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();m(document).off("mousedown",this.hide);this.element.trigger("hidden",{picker:this})},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel){this.updateView()}else{var n=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.format));this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.format))}},showCalendars:function(){this.container.find(".calendar").show();this.move()},updateInputText:function(){if(this.element.is("input"))this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))},clickRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel){this.showCalendars()}else{var n=this.ranges[t];this.startDate=n[0];this.endDate=n[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.startOf("day")}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateCalendars();this.updateInputText()}},clickPrev:function(e){var t=m(e.target).parents(".calendar");if(t.hasClass("left")){this.leftCalendar.month.subtract("month",1)}else{this.rightCalendar.month.subtract("month",1)}this.updateCalendars()},clickNext:function(e){var t=m(e.target).parents(".calendar");if(t.hasClass("left")){this.leftCalendar.month.add("month",1)}else{this.rightCalendar.month.add("month",1)}this.updateCalendars()},enterDate:function(e){var t=m(e.target).attr("data-title");var n=t.substr(1,1);var i=t.substr(3,1);var r=m(e.target).parents(".calendar");if(r.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[n][i].format(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[n][i].format(this.format))}},clickDate:function(e){var t=m(e.target).attr("data-title");var n=t.substr(1,1);var i=t.substr(3,1);var r=m(e.target).parents(".calendar");if(r.hasClass("left")){var a=this.leftCalendar.calendar[n][i];var s=this.endDate;if(typeof this.dateLimit=="object"){var o=moment(a).add(this.dateLimit).startOf("day");if(s.isAfter(o)){s=o}}}else{var a=this.startDate;var s=this.rightCalendar.calendar[n][i];if(typeof this.dateLimit=="object"){var l=moment(s).subtract(this.dateLimit).startOf("day");if(a.isBefore(l)){a=l}}}r.find("td").removeClass("active");if(a.isSame(s)||a.isBefore(s)){m(e.target).addClass("active");this.startDate=a;this.endDate=s}else if(a.isAfter(s)){m(e.target).addClass("active");this.startDate=a;this.endDate=moment(a).add("day",1).startOf("day")}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year());this.updateCalendars()},clickApply:function(e){this.updateInputText();this.hide()},clickCancel:function(e){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.updateView();this.updateCalendars();this.hide()},updateMonthYear:function(e){var t=m(e.target).closest(".calendar").hasClass("left");var n=this.container.find(".calendar.left");if(!t)n=this.container.find(".calendar.right");var i=parseInt(n.find(".monthselect").val());var r=n.find(".yearselect").val();if(t){this.leftCalendar.month.month(i).year(r)}else{this.rightCalendar.month.month(i).year(r)}this.updateCalendars()},updateTime:function(e){var t=m(e.target).closest(".calendar").hasClass("left");var n=this.container.find(".calendar.left");if(!t)n=this.container.find(".calendar.right");var i=parseInt(n.find(".hourselect").val());var r=parseInt(n.find(".minuteselect").val());if(this.timePicker12Hour){var a=n.find(".ampmselect").val();if(a=="PM"&&i<12)i+=12;if(a=="AM"&&i==12)i=0}if(t){var s=this.startDate;s.hour(i);s.minute(r);this.startDate=s;this.leftCalendar.month.hour(i).minute(r)}else{var o=this.endDate;o.hour(i);o.minute(r);this.endDate=o;this.rightCalendar.month.hour(i).minute(r)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left");this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right");this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate));this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate));this.container.find(".ranges li").removeClass("active");var e=true;var t=0;for(var n in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[n][0])&&this.endDate.isSame(this.ranges[n][1])){e=false;this.container.find(".ranges li:eq("+t+")").addClass("active")}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")){e=false;this.container.find(".ranges li:eq("+t+")").addClass("active")}}t++}},buildCalendar:function(e,t,n,i,r){var a=moment([t,e,1]);var s=moment(a).subtract("month",1).month();var o=moment(a).subtract("month",1).year();var l=moment([o,s]).daysInMonth();var u=a.day();var c=[];for(var f=0;f<6;f++){c[f]=[]}var h=l-u+this.locale.firstDay+1;if(h>l)h-=7;if(u==this.locale.firstDay)h=l-6;var d=moment([o,s,h,n,i]);for(var f=0,p=0,g=0;f<42;f++,p++,d=moment(d).add("day",1)){if(f>0&&p%7==0){p=0;g++}c[g][p]=d}return c},renderDropdowns:function(e,t,n){var i=e.month();var r='<select class="monthselect">';var a=false;var s=false;for(var o=0;o<12;o++){if((!a||o>=t.month())&&(!s||o<=n.month())){r+="<option value='"+o+"'"+(o===i?" selected='selected'":"")+">"+this.locale.monthNames[o]+"</option>"}}r+="</select>";var l=e.year();var u=n&&n.year()||l+5;var c=t&&t.year()||l-50;var f='<select class="yearselect">';for(var h=c;h<=u;h++){f+='<option value="'+h+'"'+(h===l?' selected="selected"':"")+">"+h+"</option>"}f+="</select>";return r+f},renderCalendar:function(e,t,n,i){var r='<div class="calendar-date">';r+='<table class="table-condensed">';r+="<thead>";r+="<tr>";if(this.showWeekNumbers)r+="<th></th>";if(!n||n.isBefore(e[1][1])){r+='<th class="prev available">&larr;</th>'}else{r+="<th></th>"}var a=this.locale.monthNames[e[1][1].month()]+e[1][1].format(" YYYY");if(this.showDropdowns){a=this.renderDropdowns(e[1][1],n,i)}r+='<th colspan="5" style="width: auto">'+a+"</th>";if(!i||i.isAfter(e[1][1])){r+='<th class="next available">&rarr;</th>'}else{r+="<th></th>"}r+="</tr>";r+="<tr>";if(this.showWeekNumbers)r+='<th class="week">'+this.locale.weekLabel+"</th>";m.each(this.locale.daysOfWeek,function(e,t){r+="<th>"+t+"</th>"});r+="</tr>";r+="</thead>";r+="<tbody>";for(var s=0;s<6;s++){r+="<tr>";if(this.showWeekNumbers)r+='<td class="week">'+e[s][0].week()+"</td>";for(var o=0;o<7;o++){var l="available ";l+=e[s][o].month()==e[1][1].month()?"":"off";if(n&&e[s][o].isBefore(n)||i&&e[s][o].isAfter(i)){l=" off disabled "}else if(e[s][o].format("YYYY-MM-DD")==t.format("YYYY-MM-DD")){l+=" active ";if(e[s][o].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")){l+=" start-date "}if(e[s][o].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")){l+=" end-date "}}else if(e[s][o]>=this.startDate&&e[s][o]<=this.endDate){l+=" in-range ";if(e[s][o].isSame(this.startDate)){l+=" start-date "}if(e[s][o].isSame(this.endDate)){l+=" end-date "}}var u="r"+s+"c"+o;r+='<td class="'+l.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+u+'">'+e[s][o].date()+"</td>"}r+="</tr>"}r+="</tbody>";r+="</table>";r+="</div>";if(this.timePicker){r+='<div class="calendar-time">';r+='<select class="hourselect">';var c=0;var f=23;var h=t.hour();if(this.timePicker12Hour){c=1;f=12;if(h>=12)h-=12;if(h==0)h=12}for(var d=c;d<=f;d++){if(d==h){r+='<option value="'+d+'" selected="selected">'+d+"</option>"}else{r+='<option value="'+d+'">'+d+"</option>"}}r+="</select> : ";r+='<select class="minuteselect">';for(var d=0;d<60;d+=this.timePickerIncrement){var p=d;if(p<10)p="0"+p;if(d==t.minute()){r+='<option value="'+d+'" selected="selected">'+p+"</option>"}else{r+='<option value="'+d+'">'+p+"</option>"}}r+="</select> ";if(this.timePicker12Hour){r+='<select class="ampmselect">';if(t.hour()>=12){r+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>'}else{r+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>'}r+="</select>"}r+="</div>"}return r}};m.fn.daterangepicker=function(t,n){this.each(function(){var e=m(this);if(!e.data("daterangepicker"))e.data("daterangepicker",new i(e,t,n))});return this}}(window.jQuery)}.apply(e,arguments)})})(this);(function(u){var h,e="2.5.1",i=this,c=Math.round,t,d=0,p=1,g=2,m=3,v=4,o=5,l=6,f={},r={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},y=typeof module!=="undefined"&&module.exports&&typeof require!=="undefined",a=/^\/?Date\((\-?\d+)/i,_=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,w=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,b=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,s=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,E=/\d\d?/,x=/\d{1,3}/,T=/\d{1,4}/,N=/[+\-]?\d{1,6}/,S=/\d+/,C=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,A=/Z|[\+\-]\d\d:?\d\d/gi,k=/T/i,M=/[\+\-]?\d+(\.\d{1,3})?/,R=/\d/,O=/\d\d/,I=/\d{3}/,D=/\d{4}/,L=/[+-]?\d{6}/,P=/[+-]?\d+/,F=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,n="YYYY-MM-DDTHH:mm:ssZ",U=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],H=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],G=/([\+\-]|\d\d)/gi,Y="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),j={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},z={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},B={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},q={},V="DDD w W M D d".split(" "),W="M D H h m s w W".split(" "),$={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return ae(this.year()%100,2)},YYYY:function(){return ae(this.year(),4)},YYYYY:function(){return ae(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+ae(Math.abs(e),6)},gg:function(){return ae(this.weekYear()%100,2)},gggg:function(){return ae(this.weekYear(),4)},ggggg:function(){return ae(this.weekYear(),5)},GG:function(){return ae(this.isoWeekYear()%100,2)},GGGG:function(){return ae(this.isoWeekYear(),4)},GGGGG:function(){return ae(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return de(this.milliseconds()/100)},SS:function(){return ae(de(this.milliseconds()/10),2)},SSS:function(){return ae(this.milliseconds(),3)},SSSS:function(){return ae(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";if(e<0){e=-e;t="-"}return t+ae(de(e/60),2)+":"+ae(de(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";if(e<0){e=-e;t="-"}return t+ae(de(e/60),2)+ae(de(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},X=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function J(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function K(t,n){return function(e){return ae(t.call(this,e),n)}}function Z(t,n){return function(e){return this.lang().ordinal(t.call(this,e),n)}}while(V.length){t=V.pop();$[t+"o"]=Z($[t],t)}while(W.length){t=W.pop();$[t+t]=K($[t],2)}$.DDDD=K($.DDD,3);function Q(){}function ee(e){ve(e);ne(this,e)}function te(e){var t=fe(e),n=t.year||0,i=t.month||0,r=t.week||0,a=t.day||0,s=t.hour||0,o=t.minute||0,l=t.second||0,u=t.millisecond||0;this._milliseconds=+u+l*1e3+o*6e4+s*36e5;this._days=+a+r*7;this._months=+i+n*12;this._data={};this._bubble()}function ne(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}if(t.hasOwnProperty("toString")){e.toString=t.toString}if(t.hasOwnProperty("valueOf")){e.valueOf=t.valueOf}return e}function ie(e){var t={},n;for(n in e){if(e.hasOwnProperty(n)&&r.hasOwnProperty(n)){t[n]=e[n]}}return t}function re(e){if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}function ae(e,t,n){var i=""+Math.abs(e),r=e>=0;while(i.length<t){i="0"+i}return(r?n?"+":"":"-")+i}function se(e,t,n,i){var r=t._milliseconds,a=t._days,s=t._months,o,l;if(r){e._d.setTime(+e._d+r*n)}if(a||s){o=e.minute();l=e.hour()}if(a){e.date(e.date()+a*n)}if(s){e.month(e.month()+s*n)}if(r&&!i){h.updateOffset(e)}if(a||s){e.minute(o);e.hour(l)}}function oe(e){return Object.prototype.toString.call(e)==="[object Array]"}function le(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function ue(e,t,n){var i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0,s;for(s=0;s<i;s++){if(n&&e[s]!==t[s]||!n&&de(e[s])!==de(t[s])){a++}}return a+r}function ce(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=z[e]||B[t]||t}return e}function fe(e){var t={},n,i;for(i in e){if(e.hasOwnProperty(i)){n=ce(i);if(n){t[n]=e[i]}}}return t}function he(s){var o,l;if(s.indexOf("week")===0){o=7;l="day"}else if(s.indexOf("month")===0){o=12;l="month"}else{return}h[s]=function(n,e){var t,i,r=h.fn._lang[s],a=[];if(typeof n==="number"){e=n;n=u}i=function(e){var t=h().utc().set(l,e);return r.call(h.fn._lang,t,n||"")};if(e!=null){return i(e)}else{for(t=0;t<o;t++){a.push(i(t))}return a}}}function de(e){var t=+e,n=0;if(t!==0&&isFinite(t)){if(t>=0){n=Math.floor(t)}else{n=Math.ceil(t)}}return n}function pe(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ge(e){return me(e)?366:365}function me(e){return e%4===0&&e%100!==0||e%400===0}function ve(e){var t;if(e._a&&e._pf.overflow===-2){t=e._a[p]<0||e._a[p]>11?p:e._a[g]<1||e._a[g]>pe(e._a[d],e._a[p])?g:e._a[m]<0||e._a[m]>23?m:e._a[v]<0||e._a[v]>59?v:e._a[o]<0||e._a[o]>59?o:e._a[l]<0||e._a[l]>999?l:-1;if(e._pf._overflowDayOfYear&&(t<d||t>g)){t=g}e._pf.overflow=t}}function ye(e){if(e._isValid==null){e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated;if(e._strict){e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0}}return e._isValid}function _e(e){return e?e.toLowerCase().replace("_","-"):e}function we(e,t){return t._isUTC?h(e).zone(t._offset||0):h(e).local()}ne(Q.prototype,{set:function(e){var t,n;for(n in e){t=e[n];if(typeof t==="function"){this[n]=t}else{this["_"+n]=t}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;if(!this._monthsParse){this._monthsParse=[]}for(t=0;t<12;t++){if(!this._monthsParse[t]){n=h.utc([2e3,t]);i="^"+this.months(n,"")+"|^"+this.monthsShort(n,"");this._monthsParse[t]=new RegExp(i.replace(".",""),"i")}if(this._monthsParse[t].test(e)){return t}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;if(!this._weekdaysParse){this._weekdaysParse=[]}for(t=0;t<7;t++){if(!this._weekdaysParse[t]){n=h([2e3,1]).day(t);i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,"");this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")}if(this._weekdaysParse[t].test(e)){return t}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];if(!t&&this._longDateFormat[e.toUpperCase()]){t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});this._longDateFormat[e]=t}return t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n==="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return typeof r==="function"?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n==="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return qe(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function be(e,t){t.abbr=e;if(!f[e]){f[e]=new Q}f[e].set(t);return f[e]}function Ee(e){delete f[e]}function xe(e){var t=0,n,i,r,a,s=function(e){if(!f[e]&&y){try{require("./lang/"+e)}catch(e){}}return f[e]};if(!e){return h.fn._lang}if(!oe(e)){i=s(e);if(i){return i}e=[e]}while(t<e.length){a=_e(e[t]).split("-");n=a.length;r=_e(e[t+1]);r=r?r.split("-"):null;while(n>0){i=s(a.slice(0,n).join("-"));if(i){return i}if(r&&r.length>=n&&ue(a,r,true)>=n-1){break}n--}t++}return h.fn._lang}function Te(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function Ne(n){var i=n.match(b),r,a;for(r=0,a=i.length;r<a;r++){if($[i[r]]){i[r]=$[i[r]]}else{i[r]=Te(i[r])}}return function(e){var t="";for(r=0;r<a;r++){t+=i[r]instanceof Function?i[r].call(e,n):i[r]}return t}}function Se(e,t){if(!e.isValid()){return e.lang().invalidDate()}t=Ce(t,e.lang());if(!q[t]){q[t]=Ne(t)}return q[t](e)}function Ce(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}s.lastIndex=0;while(n>=0&&s.test(e)){e=e.replace(s,i);s.lastIndex=0;n-=1}return e}function Ae(e,t){var n,i=t._strict;switch(e){case"DDDD":return I;case"YYYY":case"GGGG":case"gggg":return i?D:T;case"Y":case"G":case"g":return P;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?L:N;case"S":if(i){return R}case"SS":if(i){return O}case"SSS":if(i){return I}case"DDD":return x;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return C;case"a":case"A":return xe(t._l)._meridiemParse;case"X":return M;case"Z":case"ZZ":return A;case"T":return k;case"SSSS":return S;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?O:E;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return E;default:n=new RegExp(Pe(Le(e.replace("\\","")),"i"));return n}}function ke(e){e=e||"";var t=e.match(A)||[],n=t[t.length-1]||[],i=(n+"").match(G)||["-",0,0],r=+(i[1]*60)+de(i[2]);return i[0]==="+"?-r:r}function Me(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":if(t!=null){r[p]=de(t)-1}break;case"MMM":case"MMMM":i=xe(n._l).monthsParse(t);if(i!=null){r[p]=i}else{n._pf.invalidMonth=t}break;case"D":case"DD":if(t!=null){r[g]=de(t)}break;case"DDD":case"DDDD":if(t!=null){n._dayOfYear=de(t)}break;case"YY":r[d]=de(t)+(de(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":r[d]=de(t);break;case"a":case"A":n._isPm=xe(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[m]=de(t);break;case"m":case"mm":r[v]=de(t);break;case"s":case"ss":r[o]=de(t);break;case"S":case"SS":case"SSS":case"SSSS":r[l]=de(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=true;n._tzm=ke(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2);if(t){n._w=n._w||{};n._w[e]=t}break}}function Re(n){var e,t,i=[],r,a,s,o,l,u,c,f;if(n._d){return}r=Ie(n);if(n._w&&n._a[g]==null&&n._a[p]==null){s=function(e){var t=parseInt(e,10);return e?e.length<3?t>68?1900+t:2e3+t:t:n._a[d]==null?h().weekYear():n._a[d]};o=n._w;if(o.GG!=null||o.W!=null||o.E!=null){l=Ve(s(o.GG),o.W||1,o.E,4,1)}else{u=xe(n._l);c=o.d!=null?je(o.d,u):o.e!=null?parseInt(o.e,10)+u._week.dow:0;f=parseInt(o.w,10)||1;if(o.d!=null&&c<u._week.dow){f++}l=Ve(s(o.gg),f,c,u._week.doy,u._week.dow)}n._a[d]=l.year;n._dayOfYear=l.dayOfYear}if(n._dayOfYear){a=n._a[d]==null?r[d]:n._a[d];if(n._dayOfYear>ge(a)){n._pf._overflowDayOfYear=true}t=Ye(a,0,n._dayOfYear);n._a[p]=t.getUTCMonth();n._a[g]=t.getUTCDate()}for(e=0;e<3&&n._a[e]==null;++e){n._a[e]=i[e]=r[e]}for(;e<7;e++){n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e]}i[m]+=de((n._tzm||0)/60);i[v]+=de((n._tzm||0)%60);n._d=(n._useUTC?Ye:Ge).apply(null,i)}function Oe(e){var t;if(e._d){return}t=fe(e._i);e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond];Re(e)}function Ie(e){var t=new Date;if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}else{return[t.getFullYear(),t.getMonth(),t.getDate()]}}function De(e){e._a=[];e._pf.empty=true;var t=xe(e._l),n=""+e._i,i,r,a,s,o,l=n.length,u=0;a=Ce(e._f,t).match(b)||[];for(i=0;i<a.length;i++){s=a[i];r=(n.match(Ae(s,e))||[])[0];if(r){o=n.substr(0,n.indexOf(r));if(o.length>0){e._pf.unusedInput.push(o)}n=n.slice(n.indexOf(r)+r.length);u+=r.length}if($[s]){if(r){e._pf.empty=false}else{e._pf.unusedTokens.push(s)}Me(s,r,e)}else if(e._strict&&!r){e._pf.unusedTokens.push(s)}}e._pf.charsLeftOver=l-u;if(n.length>0){e._pf.unusedInput.push(n)}if(e._isPm&&e._a[m]<12){e._a[m]+=12}if(e._isPm===false&&e._a[m]===12){e._a[m]=0}Re(e);ve(e)}function Le(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function Pe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Fe(e){var t,n,i,r,a;if(e._f.length===0){e._pf.invalidFormat=true;e._d=new Date(NaN);return}for(r=0;r<e._f.length;r++){a=0;t=ne({},e);t._pf=J();t._f=e._f[r];De(t);if(!ye(t)){continue}a+=t._pf.charsLeftOver;a+=t._pf.unusedTokens.length*10;t._pf.score=a;if(i==null||a<i){i=a;n=t}}ne(e,n||t)}function Ue(e){var t,n,i=e._i,r=F.exec(i);if(r){e._pf.iso=true;for(t=0,n=U.length;t<n;t++){if(U[t][1].exec(i)){e._f=U[t][0]+(r[6]||" ");break}}for(t=0,n=H.length;t<n;t++){if(H[t][1].exec(i)){e._f+=H[t][0];break}}if(i.match(A)){e._f+="Z"}De(e)}else{e._d=new Date(i)}}function He(e){var t=e._i,n=a.exec(t);if(t===u){e._d=new Date}else if(n){e._d=new Date(+n[1])}else if(typeof t==="string"){Ue(e)}else if(oe(t)){e._a=t.slice(0);Re(e)}else if(le(t)){e._d=new Date(+t)}else if(typeof t==="object"){Oe(e)}else{e._d=new Date(t)}}function Ge(e,t,n,i,r,a,s){var o=new Date(e,t,n,i,r,a,s);if(e<1970){o.setFullYear(e)}return o}function Ye(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<1970){t.setUTCFullYear(e)}return t}function je(e,t){if(typeof e==="string"){if(!isNaN(e)){e=parseInt(e,10)}else{e=t.weekdaysParse(e);if(typeof e!=="number"){return null}}}return e}function ze(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function Be(e,t,n){var i=c(Math.abs(e)/1e3),r=c(i/60),a=c(r/60),s=c(a/24),o=c(s/365),l=i<45&&["s",i]||r===1&&["m"]||r<45&&["mm",r]||a===1&&["h"]||a<22&&["hh",a]||s===1&&["d"]||s<=25&&["dd",s]||s<=45&&["M"]||s<345&&["MM",c(s/30)]||o===1&&["y"]||["yy",o];l[2]=t;l[3]=e>0;l[4]=n;return ze.apply({},l)}function qe(e,t,n){var i=n-t,r=n-e.day(),a;if(r>i){r-=7}if(r<i-7){r+=7}a=h(e).add("d",r);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function Ve(e,t,n,i,r){var a=Ye(e,0,1).getUTCDay(),s,o;n=n!=null?n:r;s=r-a+(a>i?7:0)-(a<r?7:0);o=7*(t-1)+(n-r)+s+1;return{year:o>0?e:e-1,dayOfYear:o>0?o:ge(e-1)+o}}function We(e){var t=e._i,n=e._f;if(t===null){return h.invalid({nullInput:true})}if(typeof t==="string"){e._i=t=xe().preparse(t)}if(h.isMoment(t)){e=ie(t);e._d=new Date(+t._d)}else if(n){if(oe(n)){Fe(e)}else{De(e)}}else{He(e)}return new ee(e)}h=function(e,t,n,i){var r;if(typeof n==="boolean"){i=n;n=u}r={};r._isAMomentObject=true;r._i=e;r._f=t;r._l=n;r._strict=i;r._isUTC=false;r._pf=J();return We(r)};h.utc=function(e,t,n,i){var r;if(typeof n==="boolean"){i=n;n=u}r={};r._isAMomentObject=true;r._useUTC=true;r._isUTC=true;r._l=n;r._i=e;r._f=t;r._strict=i;r._pf=J();return We(r).utc()};h.unix=function(e){return h(e*1e3)};h.duration=function(e,t){var n=e,i=null,r,a,s;if(h.isDuration(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(typeof e==="number"){n={};if(t){n[t]=e}else{n.milliseconds=e}}else if(!!(i=_.exec(e))){r=i[1]==="-"?-1:1;n={y:0,d:de(i[g])*r,h:de(i[m])*r,m:de(i[v])*r,s:de(i[o])*r,ms:de(i[l])*r}}else if(!!(i=w.exec(e))){r=i[1]==="-"?-1:1;s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r};n={y:s(i[2]),M:s(i[3]),d:s(i[4]),h:s(i[5]),m:s(i[6]),s:s(i[7]),w:s(i[8])}}a=new te(n);if(h.isDuration(e)&&e.hasOwnProperty("_lang")){a._lang=e._lang}return a};h.version=e;h.defaultFormat=n;h.updateOffset=function(){};h.lang=function(e,t){var n;if(!e){return h.fn._lang._abbr}if(t){be(_e(e),t)}else if(t===null){Ee(e);e="en"}else if(!f[e]){xe(e)}n=h.duration.fn._lang=h.fn._lang=xe(e);return n._abbr};h.langData=function(e){if(e&&e._lang&&e._lang._abbr){e=e._lang._abbr}return xe(e)};h.isMoment=function(e){return e instanceof ee||e!=null&&e.hasOwnProperty("_isAMomentObject")};h.isDuration=function(e){return e instanceof te};for(t=X.length-1;t>=0;--t){he(X[t])}h.normalizeUnits=function(e){return ce(e)};h.invalid=function(e){var t=h.utc(NaN);if(e!=null){ne(t._pf,e)}else{t._pf.userInvalidated=true}return t};h.parseZone=function(e){return h(e).parseZone()};ne(h.fn=ee.prototype,{clone:function(){return h(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=h(this).utc();if(0<e.year()&&e.year()<=9999){return Se(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}else{return Se(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return ye(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&ue(this._a,(this._isUTC?h.utc(this._a):h(this._a)).toArray())>0}return false},parsingFlags:function(){return ne({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(e){var t=Se(this,e||h.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;if(typeof e==="string"){n=h.duration(+t,e)}else{n=h.duration(e,t)}se(this,n,1);return this},subtract:function(e,t){var n;if(typeof e==="string"){n=h.duration(+t,e)}else{n=h.duration(e,t)}se(this,n,-1);return this},diff:function(e,t,n){var i=we(e,this),r=(this.zone()-i.zone())*6e4,a,s;t=ce(t);if(t==="year"||t==="month"){a=(this.daysInMonth()+i.daysInMonth())*432e5;s=(this.year()-i.year())*12+(this.month()-i.month());s+=(this-h(this).startOf("month")-(i-h(i).startOf("month")))/a;s-=(this.zone()-h(this).startOf("month").zone()-(i.zone()-h(i).startOf("month").zone()))*6e4/a;if(t==="year"){s=s/12}}else{a=this-i;s=t==="second"?a/1e3:t==="minute"?a/6e4:t==="hour"?a/36e5:t==="day"?(a-r)/864e5:t==="week"?(a-r)/6048e5:a}return n?s:re(s)},from:function(e,t){return h.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(h(),e)},calendar:function(){var e=we(h(),this).startOf("day"),t=this.diff(e,"days",true),n=t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return me(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=je(e,this.lang());return this.add({d:e-t})}else{return t}},month:function(e){var t=this._isUTC?"UTC":"",n;if(e!=null){if(typeof e==="string"){e=this.lang().monthsParse(e);if(typeof e!=="number"){return this}}n=this.date();this.date(1);this._d["set"+t+"Month"](e);this.date(Math.min(n,this.daysInMonth()));h.updateOffset(this);return this}else{return this._d["get"+t+"Month"]()}},startOf:function(e){e=ce(e);switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}else if(e==="isoWeek"){this.isoWeekday(1)}return this},endOf:function(e){e=ce(e);return this.startOf(e).add(e==="isoWeek"?"week":e,1).subtract("ms",1)},isAfter:function(e,t){t=typeof t!=="undefined"?t:"millisecond";return+this.clone().startOf(t)>+h(e).startOf(t)},isBefore:function(e,t){t=typeof t!=="undefined"?t:"millisecond";return+this.clone().startOf(t)<+h(e).startOf(t)},isSame:function(e,t){t=t||"ms";return+this.clone().startOf(t)===+we(e,this).startOf(t)},min:function(e){e=h.apply(null,arguments);return e<this?this:e},max:function(e){e=h.apply(null,arguments);return e>this?this:e},zone:function(e){var t=this._offset||0;if(e!=null){if(typeof e==="string"){e=ke(e)}if(Math.abs(e)<16){e=e*60}this._offset=e;this._isUTC=true;if(t!==e){se(this,h.duration(t-e,"m"),1,true)}}else{return this._isUTC?t:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else if(typeof this._i==="string"){this.zone(this._i)}return this},hasAlignedHourOffset:function(e){if(!e){e=0}else{e=h(e).zone()}return(this.zone()-e)%60===0},daysInMonth:function(){return pe(this.year(),this.month())},dayOfYear:function(e){var t=c((h(this).startOf("day")-h(this).startOf("year"))/864e5)+1;return e==null?t:this.add("d",e-t)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=qe(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=qe(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=qe(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){e=ce(e);return this[e]()},set:function(e,t){e=ce(e);if(typeof this[e]==="function"){this[e](t)}return this},lang:function(e){if(e===u){return this._lang}else{this._lang=xe(e);return this}}});function $e(e,n){h.fn[e]=h.fn[e+"s"]=function(e){var t=this._isUTC?"UTC":"";if(e!=null){this._d["set"+t+n](e);h.updateOffset(this);return this}else{return this._d["get"+t+n]()}}}for(t=0;t<Y.length;t++){$e(Y[t].toLowerCase().replace(/s$/,""),Y[t])}$e("year","FullYear");h.fn.days=h.fn.day;h.fn.months=h.fn.month;h.fn.weeks=h.fn.week;h.fn.isoWeeks=h.fn.isoWeek;h.fn.toJSON=h.fn.toISOString;ne(h.duration.fn=te.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,i=this._data,r,a,s,o;i.milliseconds=e%1e3;r=re(e/1e3);i.seconds=r%60;a=re(r/60);i.minutes=a%60;s=re(a/60);i.hours=s%24;t+=re(s/24);i.days=t%30;n+=re(t/30);i.months=n%12;o=re(n/12);i.years=o},weeks:function(){return re(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+de(this._months/12)*31536e6},humanize:function(e){var t=+this,n=Be(t,!e,this.lang());if(e){n=this.lang().pastFuture(t,n)}return this.lang().postformat(n)},add:function(e,t){var n=h.duration(e,t);this._milliseconds+=n._milliseconds;this._days+=n._days;this._months+=n._months;this._bubble();return this},subtract:function(e,t){var n=h.duration(e,t);this._milliseconds-=n._milliseconds;this._days-=n._days;this._months-=n._months;this._bubble();return this},get:function(e){e=ce(e);return this[e.toLowerCase()+"s"]()},as:function(e){e=ce(e);return this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:h.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||a?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(a?a+"S":"")}});function Xe(e){h.duration.fn[e]=function(){return this._data[e]}}function Je(e,t){h.duration.fn["as"+e]=function(){return+this/t}}for(t in j){if(j.hasOwnProperty(t)){Je(t,j[t]);Xe(t.toLowerCase())}}Je("Weeks",6048e5);h.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12};h.lang("en",{ordinal:function(e){var t=e%10,n=de(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});function Ke(e){var t=false,n=h;if(typeof ender!=="undefined"){return}if(e){i.moment=function(){if(!t&&console&&console.warn){t=true;console.warn("Accessing Moment through the global scope is "+"deprecated, and will be removed in an upcoming "+"release.")}return n.apply(null,arguments)};ne(i.moment,n)}else{i["moment"]=h}}if(y){module.exports=h;Ke(true)}else if(typeof define==="function"&&define.amd){define("moment",["require","exports","module"],function(e,t,n){if(n.config&&n.config()&&n.config().noGlobal!==true){Ke(n.config().noGlobal===u)}return h})}else{Ke()}}).call(this);define("powa/utils/timeurls",["jquery","foundation-daterangepicker"],function(a){var s=Backbone.View.extend({events:{'change [data-role="start_date"]':"inputChange",'change [data-role="end_date"]':"inputChange"},initialize:function(e){var t=this.now=moment(),n=this,i=s.parseUrl(window.location.search);this.format="YYYY-MM-DD HH:mm:ss";this.$el=e.$el;this.$el.daterangepicker({timePicker:true,timePicker12Hour:false,timePickerIncrement:1,opens:"left",ranges:{hour:[t.clone().subtract("hour",1),t],day:[t.clone().subtract("day",1),t],week:[t.clone().subtract("week",1),t],month:[t.clone().subtract("month",1),t]}},function(e,t){n.pickerChanged(e,t)});this.daterangepicker=this.$el.data("daterangepicker");this.daterangepicker.hide();this.daterangepicker.container.removeClass("hide");this.daterangepicker.startDate=i["from"]?moment(i["from"]):t.clone().subtract("hour",1);this.daterangepicker.endDate=i["to"]?moment(i["to"]):t;this.start_date=this.daterangepicker.startDate;this.end_date=this.daterangepicker.endDate;this.startInput=this.$el.find('[data-role="start_date"]');this.endInput=this.$el.find('[data-role="end_date"]');this.daterangepicker.notify();this.daterangepicker.updateCalendars()},updateUrls:function(t,n){var e=s.parseUrl(window.location.search),i=this,r=this.daterangepicker.ranges["hour"];this.startInput.val(t.format(this.format));this.endInput.val(n.format(this.format));if(t.isSame(r[0])&&n.isSame(r[1])){a("[data-url-has-params]").each(function(){this.search=a.param([],true)});history.pushState({},"",window.location.pathname);return}if(!(e["from"]==t.format()&&e["to"]==n.format())){e["from"]=t.format();e["to"]=n.format();history.pushState({},"",window.location.pathname+"?"+a.param(e,true))}a("[data-url-has-params]").each(function(){var e=s.parseUrl(this.search);e["from"]=t.format();e["to"]=n.format();i.startInput.val(t.format(i.format));i.endInput.val(n.format(i.format));this.search=a.param(e,true)})},inputChange:function(){var e=moment(this.startInput.val()),t=moment(this.endInput.val());this.daterangepicker.hide();if(e.isValid()&&t.isValid()){this.start_date=this.daterangepicker.startDate=e;this.end_date=this.daterangepicker.endDate=t;this.daterangepicker.updateView();this.daterangepicker.updateCalendars();this.pickerChanged(e,t)}},pickerChanged:function(e,t){this.start_date=this.daterangepicker.startDate;this.end_date=this.daterangepicker.endDate;if(moment.isMoment(this.start_date)&&moment.isMoment(this.end_date)&&this.start_date.isValid()&&this.end_date.isValid()){this.updateUrls(e,t);this.trigger("pickerChanged",e,t)}}},{parseUrl:function(e){var i={},t=e.replace(/^\?/,"").split("&");a.each(t,function(){var e=this.split("="),t=e[0],n=e[1];if(t.length==0){return}n=n.replace("+"," ");n=decodeURIComponent(n);if(i[t]){if(!a.isArray(i[t])){i[t]=[i[t]]}i[t].push(n)}else{i[t]=n}});return i}});return s});define("powa/views/DashboardView",["jquery","foundation/foundation.equalizer","backbone","powa/views/WidgetView","foundation-daterangepicker","moment","powa/utils/timeurls"],function(e,t,n,i,r,a,s){return i.extend({tagName:"div",typname:"dashboard",initialize:function(e){var t=this;this.dashboard=e.model;this.data_sources=e.data_sources;this.views=[];this.render()},render:function(){var e=this.$el;e.html("");var t=this.dashboard.get("widgets");var n=t.max(function(e){return e.get("y")});this.views=[];for(var i=0;i<=n.get("y");i++){var r=$("<div>").addClass("row"),a=t.where({y:i});if(a.length>1){r.attr("data-equalizer","")}e.append(r);var s=12/a.length;_.each(a,function(t){var e=$("<div>").addClass("widget columns large-"+s),n=$("<div>").addClass("widget panel").attr("data-equalizer-watch",""),i;r.append(e);e.append(n);t.set({from_date:this.from_date,to_date:this.to_date});try{i=this.makeView(t);i.from_date=this.from_date;i.to_date=this.to_date;this.listenTo(i,"widget:update",this.postRender,this);this.listenTo(i,"widget:zoomin",this.zoomIn,this);this.listenTo(i,"widget:updateperiod",this.updatePeriod,this);n.append(i.render().el);this.views.push(i)}catch(e){console.error("Could not instantiate widget "+t.get("title"),e);return}},this)}return this},show:function(){_.each(this.views,function(e){e.show()})},postRender:function(){this.$el.foundation()},makeView:function(e){return i.makeView(e)},addWidget:function(e){this.layout()},refreshSources:function(t,n){var e=this;this.dashboard.data_sources.each(function(e){if(e.get("enabled")!=false){e.update(t,n)}});raw=$('script[type="text/datasource_timeline"]').first();url=JSON.parse($(raw).text());if(url!==undefined&&url!==null){var i={from:t.format("YYYY-MM-DD HH:mm:ssZZ"),to:n.format("YYYY-MM-DD HH:mm:ssZZ")};url+="?"+jQuery.param(i);$.ajax({url:url,type:"GET"}).done(function(t){e.dashboard.data_sources.each(function(e){if(e.get("enabled")!=false){e.update_timeline(t["data"])}})})}this.updatePeriod(t,n)},zoomIn:function(t,n){_.each(this.views,function(e){e.zoomIn(t,n)},this);this.refreshSources(t,n);this.trigger("dashboard:updatePeriod",t,n)},updatePeriod:function(e,t){var n=this;if(e.isValid()){this.from_date=e}if(t.isValid()){this.to_date=t}_.each(this.views,function(e){e.updatePeriod(this.from_date,this.to_date)},this)}})});define("powa/models/Widget",["backbone"],function(i){var r={};return i.Model.extend({initialize:function(){this.listenTo(this.get("contentsource"),"contentsource:dataload",this.update);this.listenTo(this.get("contentsource"),"contentsource:dataload-failed",function(e){this.trigger("widget:dataload-failed",e)})},update:function(e){this.trigger("widget:needrefresh",e)}},{extend:function(e,t){var n=i.Model.extend.apply(this,[e,t]);r[n.prototype.typname]=n;return n},fromJSON:function(e){var t=r[e.type];if(t==undefined){throw"Unknown widget type: "+e.type}return t.fromJSON(e)}})});define("powa/models/DataSource",["backbone"],function(e,t,n){return e.Model.extend({initialize:function(){},getUrl:function(e,t){var n=this.get("data_url"),i={from:e.format("YYYY-MM-DD HH:mm:ssZZ"),to:t.format("YYYY-MM-DD HH:mm:ssZZ")};return n+"?"+jQuery.param(i)}},{fromJSON:function(e){return new this(e)}})});define("powa/models/DataSourceCollection",["backbone","powa/models/DataSource"],function(e,t){return e.Collection.extend({model:t,update:function(t,n){this.each(function(e){e.update(t,n)})}},{get_instance:function(){if(this._instance===undefined){this._instance=new this}return this._instance}})});define("powa/models/Content",["backbone","powa/models/Widget","powa/models/DataSourceCollection"],function(e,t,n){return t.extend({typname:"content",initialize:function(){this.listenTo(this.get("contentsource"),"contentsource:dataload",this.update);this.listenTo(this.get("contentsource"),"contentsource:dataload-failed",function(e){this.trigger("widget:dataload-failed",e)})},update:function(e){this.trigger("widget:needrefresh",e)}},{fromJSON:function(e){var t=n.get_instance();e.contentsource=t.findWhere({name:e.content});if(e.contentsource===undefined){throw"The content source could not be found."}return new this(e)}})});define("powa/models/Metric",["backbone"],function(e){return e.Model.extend({initialize:function(){this.label_template=_.template(this.get("label"));var e=this.get("type");if(e===undefined){this.set("type","number")}}},{fromJSON:function(e){return new this(e)}})});define("powa/models/MetricCollection",["backbone","powa/models/Metric"],function(e,t){return e.Collection.extend({model:t,initialize:function(){}})});(function(e){if(typeof exports=="object"){module.exports=e(require("underscore"),require("backbone"))}else if(typeof define=="function"&&define.amd){define("backbone-pageable",["underscore","backbone"],e)}else if(typeof _!=="undefined"&&typeof Backbone!=="undefined"){var t=Backbone.PageableCollection;var n=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){Backbone.PageableCollection=t;return n}}})(function(d,u){"use strict";var T=d.extend;var v=d.omit;var N=d.clone;var S=d.each;var y=d.pick;var p=d.contains;var h=d.isEmpty;var _=d.pairs;var s=d.invert;var f=d.isArray;var w=d.isFunction;var o=d.isObject;var C=d.keys;var A=d.isUndefined;var b=d.result;var k=Math.ceil;var a=Math.floor;var g=Math.max;var E=u.Collection.prototype;function m(e,t){if(!d.isNumber(e)||d.isNaN(e)||!d.isFinite(e)||~~e!==e){throw new TypeError("`"+t+"` must be a finite integer")}return e}function x(e){var t,n,i,r,a={},s=decodeURIComponent;var o=e.split("&");for(var l=0,u=o.length;l<u;l++){var c=o[l];t=c.split("="),n=t[0],i=t[1]||true;n=s(n),i=s(i),r=a[n];if(f(r))r.push(i);else if(r)a[n]=[r,i];else a[n]=i}return a}function M(e,t,n){var i=e._events[t];if(i&&i.length){var r=i[i.length-1];var a=r.callback;r.callback=function(){try{a.apply(this,arguments);n()}catch(e){throw e}finally{r.callback=a}}}else n()}var l=/[\s'"]/g;var i=/[<>\s'"]/g;var e=u.PageableCollection=u.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){E.constructor.apply(this,arguments);t=t||{};var n=this.mode=t.mode||this.mode||R.mode;var i=T({},R.queryParams,this.queryParams,t.queryParams||{});i.directions=T({},R.queryParams.directions,this.queryParams.directions,i.directions||{});this.queryParams=i;var r=this.state=T({},R.state,this.state,t.state||{});r.currentPage=r.currentPage==null?r.firstPage:r.currentPage;if(!f(e))e=e?[e]:[];e=e.slice();if(n!="server"&&r.totalRecords==null&&!h(e)){r.totalRecords=e.length}this.switchMode(n,T({fetch:false,resetState:false,models:e},t));var a=t.comparator;if(r.sortKey&&!a){this.setSorting(r.sortKey,r.order,t)}if(n!="server"){var s=this.fullCollection;if(a&&t.full){this.comparator=null;s.comparator=a}if(t.full)s.sort();if(e&&!h(e)){this.reset(e,T({silent:true},t));this.getPage(r.currentPage);e.splice.apply(e,[0,e.length].concat(this.models))}}this._initState=N(this.state)},_makeFullCollection:function(e,t){var n=["url","model","sync","comparator"];var i=this.constructor.prototype;var r,a,s;var o={};for(r=0,a=n.length;r<a;r++){s=n[r];if(!A(i[s])){o[s]=i[s]}}var l=new(u.Collection.extend(o))(e,t);for(r=0,a=n.length;r<a;r++){s=n[r];if(this[s]!==i[s]){l[s]=this[s]}}return l},_makeCollectionEventHandler:function(E,x){return function e(t,n,i,r){var a=E._handlers;S(C(a),function(e){var t=a[e];E.off(e,t);x.off(e,t)});var s=N(E.state);var o=s.firstPage;var l=o===0?s.currentPage:s.currentPage-1;var u=s.pageSize;var c=l*u,f=c+u;if(t=="add"){var h,d,p,g,r=r||{};if(i==x){d=x.indexOf(n);if(d>=c&&d<f){g=E;h=p=d-c}}else{h=E.indexOf(n);d=c+h;g=x;var p=!A(r.at)?r.at+c:d}if(!r.onRemove){++s.totalRecords;delete r.onRemove}E.state=E._checkState(s);if(g){g.add(n,T({},r||{},{at:p}));var m=h>=u?n:!A(r.at)&&p<f&&E.length>u?E.at(u):null;if(m){M(i,t,function(){E.remove(m,{onAdd:true})})}}}if(t=="remove"){if(!r.onAdd){if(!--s.totalRecords){s.totalRecords=null;s.totalPages=null}else{var v=s.totalPages=k(s.totalRecords/u);s.lastPage=o===0?v-1:v||o;if(s.currentPage>v)s.currentPage=s.lastPage}E.state=E._checkState(s);var y,_=r.index;if(i==E){if(y=x.at(f)){M(E,t,function(){E.push(y,{onRemove:true})})}x.remove(n)}else if(_>=c&&_<f){if(y=x.at(f-1)){M(E,t,function(){E.push(y,{onRemove:true})})}E.remove(n)}}else delete r.onAdd}if(t=="reset"){r=i;i=n;if(i==E&&r.from==null&&r.to==null){var w=x.models.slice(0,c);var b=x.models.slice(c+E.models.length);x.reset(w.concat(E.models).concat(b),r)}else if(i==x){if(!(s.totalRecords=x.models.length)){s.totalRecords=null;s.totalPages=null}if(E.mode=="client"){s.lastPage=s.currentPage=s.firstPage}E.state=E._checkState(s);E.reset(x.models.slice(c,f),T({},r,{parse:false}))}}if(t=="sort"){r=i;i=n;if(i===x){E.reset(x.models.slice(c,f),T({},r,{parse:false}))}}S(C(a),function(n){var i=a[n];S([E,x],function(e){e.on(n,i);var t=e._events[n]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode;var n=this.links;var i=e.totalRecords;var r=e.pageSize;var a=e.currentPage;var s=e.firstPage;var o=e.totalPages;if(i!=null&&r!=null&&a!=null&&s!=null&&(t=="infinite"?n:true)){i=m(i,"totalRecords");r=m(r,"pageSize");a=m(a,"currentPage");s=m(s,"firstPage");if(r<1){throw new RangeError("`pageSize` must be >= 1")}o=e.totalPages=k(i/r);if(s<0||s>1){throw new RangeError("`firstPage must be 0 or 1`")}e.lastPage=s===0?g(0,o-1):o||s;if(t=="infinite"){if(!n[a+""]){throw new RangeError("No link found for page "+a)}}else if(a<s||o>0&&(s?a>o:a>=o)){throw new RangeError("`currentPage` must be firstPage <= currentPage "+(s?">":">=")+" totalPages if "+s+"-based. Got "+a+".")}}return e},setPageSize:function(e,t){e=m(e,"pageSize");t=t||{first:false};var n=this.state;var i=k(n.totalRecords/e);var r=i?g(n.firstPage,a(i*n.currentPage/n.totalPages)):n.firstPage;n=this.state=this._checkState(T({},n,{pageSize:e,currentPage:t.first?n.firstPage:r,totalPages:i}));return this.getPage(n.currentPage,v(t,["first"]))},switchMode:function(e,t){if(!p(["server","client","infinite"],e)){throw new TypeError('`mode` must be one of "server", "client" or "infinite"')}t=t||{fetch:true,resetState:true};var n=this.state=t.resetState?N(this._initState):this._checkState(T({},this.state));this.mode=e;var i=this;var r=this.fullCollection;var a=this._handlers=this._handlers||{},s;if(e!="server"&&!r){r=this._makeFullCollection(t.models||[],t);r.pageableCollection=this;this.fullCollection=r;var o=this._makeCollectionEventHandler(this,r);S(["add","remove","reset","sort"],function(e){a[e]=s=d.bind(o,{},e);i.on(e,s);r.on(e,s)});r.comparator=this._fullComparator}else if(e=="server"&&r){S(C(a),function(e){s=a[e];i.off(e,s);r.off(e,s)});delete this._handlers;this._fullComparator=r.comparator;delete this.fullCollection}if(e=="infinite"){var l=this.links={};var u=n.firstPage;var c=k(n.totalRecords/n.pageSize);var f=u===0?g(0,c-1):c||u;for(var h=n.firstPage;h<=f;h++){l[h]=this.url}}else if(this.links)delete this.links;return t.fetch?this.fetch(v(t,"fetch","resetState")):this},hasPreviousPage:function(){var e=this.state;var t=e.currentPage;if(this.mode!="infinite")return t>e.firstPage;return!!this.links[t-1]},hasPrevious:function(){var e="hasPrevious has been deprecated, use hasPreviousPage instead";typeof console!="undefined"&&console.warn&&console.warn(e);return this.hasPreviousPage()},hasNextPage:function(){var e=this.state;var t=this.state.currentPage;if(this.mode!="infinite")return t<e.lastPage;return!!this.links[t+1]},hasNext:function(){var e="hasNext has been deprecated, use hasNextPage instead";typeof console!="undefined"&&console.warn&&console.warn(e);return this.hasNextPage()},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var n=this.mode,i=this.fullCollection;t=t||{fetch:false};var r=this.state,a=r.firstPage,s=r.currentPage,o=r.lastPage,l=r.pageSize;var u=e;switch(e){case"first":u=a;break;case"prev":u=s-1;break;case"next":u=s+1;break;case"last":u=o;break;default:u=m(e,"index")}this.state=this._checkState(T({},r,{currentPage:u}));t.from=s,t.to=u;var c=(a===0?u:u-1)*l;var f=i&&i.length?i.models.slice(c,c+l):[];if((n=="client"||n=="infinite"&&!h(f))&&!t.fetch){this.reset(f,v(t,"fetch"));return this}if(n=="infinite")t.url=this.links[u];return this.fetch(v(t,"fetch"))},getPageByOffset:function(e,t){if(e<0){throw new RangeError("`offset must be > 0`")}e=m(e);var n=a(e/this.state.pageSize);if(this.state.firstPage!==0)n++;if(n>this.state.lastPage)n=this.state.lastPage;return this.getPage(n,t)},sync:function(e,t,a){var s=this;if(s.mode=="infinite"){var o=a.success;var l=s.state.currentPage;a.success=function(e,t,n){var i=s.links;var r=s.parseLinks(e,T({xhr:n},a));if(r.first)i[s.state.firstPage]=r.first;if(r.prev)i[l-1]=r.prev;if(r.next)i[l+1]=r.next;if(o)o(e,t,n)}}return(E.sync||u.sync).call(s,e,t,a)},parseLinks:function(e,t){var a={};var n=t.xhr.getResponseHeader("Link");if(n){var s=["first","prev","next"];S(n.split(","),function(e){var t=e.split(";");var r=t[0].replace(i,"");var n=t.slice(1);S(n,function(e){var t=e.split("=");var n=t[0].replace(l,"");var i=t[1].replace(l,"");if(n=="rel"&&p(s,i))a[i]=r})})}return a},parse:function(e,t){var n=this.parseState(e,N(this.queryParams),N(this.state),t);if(n)this.state=this._checkState(T({},this.state,n));return this.parseRecords(e,t)},parseState:function(e,t,n,i){if(e&&e.length===2&&o(e[0])&&f(e[1])){var r=N(n);var a=e[0];S(_(v(t,"directions")),function(e){var t=e[0],n=e[1];var i=a[n];if(!A(i)&&!d.isNull(i))r[t]=a[n]});if(a.order){r.order=s(t.directions)[a.order]*1}return r}},parseRecords:function(e,t){if(e&&e.length===2&&o(e[0])&&f(e[1])){return e[1]}return e},fetch:function(r){r=r||{};var e=this._checkState(this.state);var a=this.mode;if(a=="infinite"&&!r.url){r.url=this.links[e.currentPage]}var t=r.data||{};var n=b(r,"url")||b(this,"url")||"";var i=n.indexOf("?");if(i!=-1){T(t,x(n.slice(i+1)));n=n.slice(0,i)}r.url=n;r.data=t;var s=this.mode=="client"?y(this.queryParams,"sortKey","order"):v(y(this.queryParams,C(R.queryParams)),"directions");var o,l,u,c,f=_(s),h=N(this);for(o=0;o<f.length;o++){l=f[o],u=l[0],c=l[1];c=w(c)?c.call(h):c;if(e[u]!=null&&c!=null){t[c]=e[u]}}if(e.sortKey&&e.order){t[s.order]=this.queryParams.directions[e.order+""]}else if(!e.sortKey)delete t[s.order];var d=_(v(this.queryParams,C(R.queryParams)));for(o=0;o<d.length;o++){l=d[o];c=l[1];c=w(c)?c.call(h):c;if(c!=null)t[l[0]]=c}if(a!="server"){var p=this,g=this.fullCollection;var m=r.success;r.success=function(e,t,n){n=n||{};if(A(r.silent))delete n.silent;else n.silent=r.silent;var i=e.models;if(a=="client")g.reset(i,n);else{g.add(i,T({at:g.length},T(n,{parse:false})));p.trigger("reset",p,n)}if(m)m(e,t,n)};return E.fetch.call(this,T({},r,{silent:true}))}return E.fetch.call(this,r)},_makeComparator:function(a,s,o){var e=this.state;a=a||e.sortKey;s=s||e.order;if(!a||!s)return;if(!o)o=function(e,t){return e.get(t)};return function(e,t){var n=o(e,a),i=o(t,a),r;if(s===1)r=n,n=i,i=r;if(n===i)return 0;else if(n<i)return-1;return 1}},setSorting:function(e,t,n){var i=this.state;i.sortKey=e;i.order=t=t||i.order;var r=this.fullCollection;var a=false,s=false;if(!e)a=s=true;var o=this.mode;n=T({side:o=="client"?o:"server",full:true},n);var l=this._makeComparator(e,t,n.sortValue);var u=n.full,c=n.side;if(c=="client"){if(u){if(r)r.comparator=l;a=true}else{this.comparator=l;s=true}}else if(c=="server"&&!u){this.comparator=l}if(a)this.comparator=null;if(s&&r)r.comparator=null;return this}});var R=e.prototype;return e});define("powa/models/Grid",["backbone","powa/models/DataSourceCollection","powa/models/MetricCollection","backbone-pageable","powa/models/Widget"],function(t,n,a,e,i){return i.extend({typname:"grid",initialize:function(){var e=this;this.set("collection",new(t.PageableCollection.extend({mode:"client",state:{pageSize:25}})));this.listenTo(this.get("common_group"),"metricgroup:dataload",this.update);this.listenTo(this.get("common_group"),"metricgroup:dataload-failed",function(e){this.trigger("widget:dataload-failed",e)})},update:function(e){var t=this.get("collection"),n=t.state;t.fullCollection.reset(e);n.lastPage=Math.ceil(e.length/n.pageSize);this.get("collection").getFirstPage({reset:true});this.trigger("widget:needrefresh")}},{fromJSON:function(i){var r=n.get_instance(),e=i.metrics.map(function(e){var t=e.split(".");var n=r.findWhere({name:t[0]});if(n===undefined){throw"The metric group "+t[0]+" could not be found. "+" Did you forget to include it in the dashboardpage ? "}var e=n.get("metrics").findWhere({name:t[1]});if(e===undefined){throw"The metric "+t[1]+" could not be found in metric group "+t[0]}i.common_group=n;return e});i.metrics=new a(e);return new this(i)}})});(function(e){define("foundation/foundation.tooltip",["foundation/foundation"],function(){return function(){(function(h,s,e,t){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.5.3",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:false,hover_delay:200,fade_in_duration:150,fade_out_duration:150,show_on:"all",tip_template:function(e,t){return'<span data-selector="'+e+'" id="'+e+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'" role="tooltip">'+t+'<span class="nub"></span></span>'}},cache:{},init:function(e,t,n){Foundation.inherit(this,"random_str");this.bindings(t,n)},should_show:function(e,t){var n=h.extend({},this.settings,this.data_options(e));if(n.show_on==="all"){return true}else if(this.small()&&n.show_on==="small"){return true}else if(this.medium()&&n.show_on==="medium"){return true}else if(this.large()&&n.show_on==="large"){return true}return false},medium:function(){return matchMedia(Foundation.media_queries["medium"]).matches},large:function(){return matchMedia(Foundation.media_queries["large"]).matches},events:function(e){var a=this,s=a.S;a.create(this.S(e));function o(e,t,n){if(e.timer){return}if(n){e.timer=null;a.showTip(t)}else{e.timer=setTimeout(function(){e.timer=null;a.showTip(t)}.bind(e),a.settings.hover_delay)}}function l(e,t){if(e.timer){clearTimeout(e.timer);e.timer=null}a.hide(t)}h(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(e){var t=s(this),n=h.extend({},a.settings,a.data_options(t)),i=false;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&s(e.target).is("a")){return false}if(/mouse/i.test(e.type)&&a.ie_touch(e)){return false}if(t.hasClass("open")){if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)){e.preventDefault()}a.hide(t)}else{if(n.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)){return}else if(!n.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)){e.preventDefault();s(n.tooltip_class+".open").hide();i=true;if(h(".open["+a.attr_name()+"]").length>0){var r=s(h(".open["+a.attr_name()+"]")[0]);a.hide(r)}}if(/enter|over/i.test(e.type)){o(this,t)}else if(e.type==="mouseout"||e.type==="mouseleave"){l(this,t)}else{o(this,t,true)}}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(e){if(/mouse/i.test(e.type)&&a.ie_touch(e)){return false}if(h(this).data("tooltip-open-event-type")=="touch"&&e.type=="mouseleave"){return}else if(h(this).data("tooltip-open-event-type")=="mouse"&&/MSPointerDown|touchstart/i.test(e.type)){a.convert_to_touch(h(this))}else{l(this,h(this))}}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(e){l(this,s(this))})},ie_touch:function(e){return false},showTip:function(e){var t=this.getTip(e);if(this.should_show(e,t)){return this.show(e)}return},getTip:function(e){var t=this.selector(e),n=h.extend({},this.settings,this.data_options(e)),i=null;if(t){i=this.S('span[data-selector="'+t+'"]'+n.tooltip_class)}return typeof i==="object"?i:false},selector:function(e){var t=e.attr(this.attr_name())||e.attr("data-selector");if(typeof t!="string"){t=this.random_str(6);e.attr("data-selector",t).attr("aria-describedby",t)}return t},create:function(t){var n=this,e=h.extend({},this.settings,this.data_options(t)),i=this.settings.tip_template;if(typeof e.tip_template==="string"&&s.hasOwnProperty(e.tip_template)){i=s[e.tip_template]}var r=h(i(this.selector(t),h("<div></div>").html(t.attr("title")).html())),a=this.inheritable_classes(t);r.addClass(a).appendTo(e.append_to);if(Modernizr.touch){r.append('<span class="tap-to-close">'+e.touch_close_text+"</span>");r.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(e){n.hide(t)})}t.removeAttr("title").attr("title","")},reposition:function(e,t,n){var i,r,a,s,o;t.css("visibility","hidden").show();i=e.data("width");r=t.children(".nub");a=r.outerHeight();s=r.outerWidth();if(this.small()){t.css({width:"100%"})}else{t.css({width:i?i:"auto"})}o=function(e,t,n,i,r,a){return e.css({top:t?t:"auto",bottom:i?i:"auto",left:r?r:"auto",right:n?n:"auto"}).end()};var l=e.offset().top;var u=e.offset().left;var c=e.outerHeight();o(t,l+c+10,"auto","auto",u);if(this.small()){o(t,l+c+10,"auto","auto",12.5,h(this.scope).width());t.addClass("tip-override");o(r,-a,"auto","auto",u)}else{if(Foundation.rtl){r.addClass("rtl");u=u+e.outerWidth()-t.outerWidth()}o(t,l+c+10,"auto","auto",u);if(r.attr("style")){r.removeAttr("style")}t.removeClass("tip-override");var f=t.outerHeight();if(n&&n.indexOf("tip-top")>-1){if(Foundation.rtl){r.addClass("rtl")}o(t,l-f,"auto","auto",u).removeClass("tip-override")}else if(n&&n.indexOf("tip-left")>-1){o(t,l+c/2-f/2,"auto","auto",u-t.outerWidth()-a).removeClass("tip-override");r.removeClass("rtl")}else if(n&&n.indexOf("tip-right")>-1){o(t,l+c/2-f/2,"auto","auto",u+e.outerWidth()+a).removeClass("tip-override");r.removeClass("rtl")}}t.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function(e){var t=h.extend({},this.settings,this.data_options(e)),n=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(t.additional_inheritable_classes),i=e.attr("class"),r=i?h.map(i.split(" "),function(e,t){if(h.inArray(e,n)!==-1){return e}}).join(" "):"";return h.trim(r)},convert_to_touch:function(t){var n=this,e=n.getTip(t),i=h.extend({},n.settings,n.data_options(t));if(e.find(".tap-to-close").length===0){e.append('<span class="tap-to-close">'+i.touch_close_text+"</span>");e.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(e){n.hide(t)})}t.data("tooltip-open-event-type","touch")},show:function(e){var t=this.getTip(e);if(e.data("tooltip-open-event-type")=="touch"){this.convert_to_touch(e)}this.reposition(e,t,e.attr("class"));e.addClass("open");t.fadeIn(this.settings.fade_in_duration)},hide:function(e){var t=this.getTip(e);t.fadeOut(this.settings.fade_out_duration,function(){t.find(".tap-to-close").remove();t.off("click.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose");e.removeClass("open")})},off:function(){var t=this;this.S(this.scope).off(".fndtn.tooltip");this.S(this.settings.tooltip_class).each(function(e){h("["+t.attr_name()+"]").eq(e).attr("title",h(this).text())}).remove()},reflow:function(){}}})(jQuery,window,window.document)}.apply(e,arguments)})})(this);(function(e){define("backgrid",["jquery","underscore","backbone"],function(){return function(){(function(e){if(typeof exports=="object"){module.exports=e(module.exports,require("underscore"),require("backbone"))}else e(this,this._,this.Backbone)})(function(e,h,l){"use strict";var t="\t\n\v\f\r "+"\u2028"+"\u2029\ufeff";if(!String.prototype.trim||t.trim()){t="["+t+"]";var n=new RegExp("^"+t+t+"*"),i=new RegExp(t+t+"*$");String.prototype.trim=function e(){if(this===undefined||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(n,"").replace(i,"")}}function u(e,t,n){var i=t-(e+"").length;i=i<0?0:i;var r="";for(var a=0;a<i;a++){r=r+n}return r+e}var c=l.$;var g=e.Backgrid={Extension:{},resolveNameToClass:function(e,t){if(h.isString(e)){var n=h.map(e.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+t;var i=g[n]||g.Extension[n];if(h.isUndefined(i)){throw new ReferenceError("Class '"+n+"' not found")}return i}return e},callByNeed:function(){var e=arguments[0];if(!h.isFunction(e))return e;var t=arguments[1];var n=[].slice.call(arguments,2);return e.apply(t,!!(n+"")?n:[])}};h.extend(g,l.Events);var f=g.Command=function(e){h.extend(this,{altKey:!!e.altKey,char:e["char"],charCode:e.charCode,ctrlKey:!!e.ctrlKey,key:e.key,keyCode:e.keyCode,locale:e.locale,location:e.location,metaKey:!!e.metaKey,repeat:!!e.repeat,shiftKey:!!e.shiftKey,which:e.which})};h.extend(f.prototype,{moveUp:function(){return this.keyCode==38},moveDown:function(){return this.keyCode===40},moveLeft:function(){return this.shiftKey&&this.keyCode===9},moveRight:function(){return!this.shiftKey&&this.keyCode===9},save:function(){return this.keyCode===13},cancel:function(){return this.keyCode===27},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var r=g.CellFormatter=function(){};h.extend(r.prototype,{fromRaw:function(e,t){return e},toRaw:function(e,t){return e}});var a=g.NumberFormatter=function(e){h.extend(this,this.defaults,e||{});if(this.decimals<0||this.decimals>20){throw new RangeError("decimals must be between 0 and 20")}};a.prototype=new r;h.extend(a.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(e,t){if(h.isNull(e)||h.isUndefined(e))return"";e=e.toFixed(~~this.decimals);var n=e.split(".");var i=n[0];var r=n[1]?(this.decimalSeparator||".")+n[1]:"";return i.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+r},toRaw:function(e,t){e=e.trim();if(e==="")return null;var n="";var i=e.split(this.orderSeparator);for(var r=0;r<i.length;r++){n+=i[r]}var a=n.split(this.decimalSeparator);n="";for(var r=0;r<a.length;r++){n=n+a[r]+"."}if(n[n.length-1]==="."){n=n.slice(0,n.length-1)}var s=(n*1).toFixed(~~this.decimals)*1;if(h.isNumber(s)&&!h.isNaN(s))return s}});var s=g.PercentFormatter=function(){g.NumberFormatter.apply(this,arguments)};s.prototype=new g.NumberFormatter,h.extend(s.prototype,{defaults:h.extend({},a.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(e,t){var n=[].slice.call(arguments,1);n.unshift(e*this.multiplier);return(a.prototype.fromRaw.apply(this,n)||"0")+this.symbol},toRaw:function(e,t){var n=e.split(this.symbol);if(n&&n[0]&&n[1]===""||n[1]==null){var i=a.prototype.toRaw.call(this,n[0]);if(h.isUndefined(i))return i;return i/this.multiplier}}});var o=g.DatetimeFormatter=function(e){h.extend(this,this.defaults,e||{});if(!this.includeDate&&!this.includeTime){throw new Error("Either includeDate or includeTime must be true")}};o.prototype=new r;h.extend(o.prototype,{defaults:{includeDate:true,includeTime:true,includeMilli:false},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(e,t){if((e+"").trim()==="")return null;var n,i=null;if(h.isNumber(e)){var r=new Date(e);n=u(r.getUTCFullYear(),4,0)+"-"+u(r.getUTCMonth()+1,2,0)+"-"+u(r.getUTCDate(),2,0);i=u(r.getUTCHours(),2,0)+":"+u(r.getUTCMinutes(),2,0)+":"+u(r.getUTCSeconds(),2,0)}else{e=e.trim();var a=e.split(this.ISO_SPLITTER_RE)||[];n=this.DATE_RE.test(a[0])?a[0]:"";i=n&&a[1]?a[1]:this.TIME_RE.test(a[0])?a[0]:""}var s=this.DATE_RE.exec(n)||[];var o=this.TIME_RE.exec(i)||[];if(t){if(this.includeDate&&h.isUndefined(s[0]))return;if(this.includeTime&&h.isUndefined(o[0]))return;if(!this.includeDate&&n)return;if(!this.includeTime&&i)return}var r=new Date(Date.UTC(s[1]*1||0,s[2]*1-1||0,s[3]*1||0,o[1]*1||null,o[2]*1||null,o[3]*1||null,o[5]*1||null));var l="";if(this.includeDate){l=u(r.getUTCFullYear(),4,0)+"-"+u(r.getUTCMonth()+1,2,0)+"-"+u(r.getUTCDate(),2,0)}if(this.includeTime){l=l+(this.includeDate?"T":"")+u(r.getUTCHours(),2,0)+":"+u(r.getUTCMinutes(),2,0)+":"+u(r.getUTCSeconds(),2,0);if(this.includeMilli){l=l+"."+u(r.getUTCMilliseconds(),3,0)}}if(this.includeDate&&this.includeTime){l+="Z"}return l},fromRaw:function(e,t){if(h.isNull(e)||h.isUndefined(e))return"";return this._convert(e)},toRaw:function(e,t){return this._convert(e,true)}});var d=g.StringFormatter=function(){};d.prototype=new r;h.extend(d.prototype,{fromRaw:function(e,t){if(h.isUndefined(e)||h.isNull(e))return"";return e+""}});var p=g.EmailFormatter=function(){};p.prototype=new r;h.extend(p.prototype,{toRaw:function(e,t){var n=e.trim().split("@");if(n.length===2&&h.all(n)){return e}}});var m=g.SelectFormatter=function(){};m.prototype=new r;h.extend(m.prototype,{fromRaw:function(e,t){return h.isArray(e)?e:e!=null?[e]:[]}});var v=g.CellEditor=l.View.extend({initialize:function(e){this.formatter=e.formatter;this.column=e.column;if(!(this.column instanceof I)){this.column=new I(this.column)}this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(e,t){if(t==null||t.get("name")==this.column.get("name")){this.$el.focus()}return this}});var y=g.InputCellEditor=v.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(e){y.__super__.initialize.apply(this,arguments);if(e.placeholder){this.$el.attr("placeholder",e.placeholder)}},render:function(){var e=this.model;this.$el.val(this.formatter.fromRaw(e.get(this.column.get("name")),e));return this},saveOrCancel:function(e){var t=this.formatter;var n=this.model;var i=this.column;var r=new f(e);var a=e.type==="blur";if(r.moveUp()||r.moveDown()||r.moveLeft()||r.moveRight()||r.save()||a){e.preventDefault();e.stopPropagation();var s=this.$el.val();var o=t.toRaw(s,n);if(h.isUndefined(o)){n.trigger("backgrid:error",n,i,s)}else{n.set(i.get("name"),o);n.trigger("backgrid:edited",n,i,r)}}else if(r.cancel()){e.stopPropagation();n.trigger("backgrid:edited",n,i,r)}},postRender:function(e,t){if(t==null||t.get("name")==this.column.get("name")){if(this.$el.css("text-align")==="right"){var n=this.$el.val();this.$el.focus().val(null).val(n)}else this.$el.focus()}return this}});var _=g.Cell=l.View.extend({tagName:"td",formatter:r,editor:y,events:{click:"enterEditMode"},initialize:function(e){this.column=e.column;if(!(this.column instanceof I)){this.column=new I(this.column)}var t=this.column,n=this.model,i=this.$el;var r=g.resolveNameToClass(t.get("formatter")||this.formatter,"Formatter");if(!h.isFunction(r.fromRaw)&&!h.isFunction(r.toRaw)){r=new r}this.formatter=r;this.editor=g.resolveNameToClass(this.editor,"CellEditor");this.listenTo(n,"change:"+t.get("name"),function(){if(!i.hasClass("editor"))this.render()});this.listenTo(n,"backgrid:error",this.renderError);this.listenTo(t,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var n in t){if(t.hasOwnProperty(n)){i.toggleClass(n,t[n])}}});if(g.callByNeed(t.editable(),t,n))i.addClass("editable");if(g.callByNeed(t.sortable(),t,n))i.addClass("sortable");if(g.callByNeed(t.renderable(),t,n))i.addClass("renderable")},render:function(){this.$el.empty();var e=this.model;this.$el.text(this.formatter.fromRaw(e.get(this.column.get("name")),e));this.delegateEvents();return this},enterEditMode:function(){var e=this.model;var t=this.column;var n=g.callByNeed(t.editable(),t,e);if(n){this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter});e.trigger("backgrid:edit",e,t,this,this.currentEditor);this.undelegateEvents();this.$el.empty();this.$el.append(this.currentEditor.$el);this.currentEditor.render();this.$el.addClass("editor");e.trigger("backgrid:editing",e,t,this,this.currentEditor)}},renderError:function(e,t){if(t==null||t.get("name")==this.column.get("name")){this.$el.addClass("error")}},exitEditMode:function(){this.$el.removeClass("error");this.currentEditor.remove();this.stopListening(this.currentEditor);delete this.currentEditor;this.$el.removeClass("editor");this.render()},remove:function(){if(this.currentEditor){this.currentEditor.remove.apply(this.currentEditor,arguments);delete this.currentEditor}return _.__super__.remove.apply(this,arguments)}});var w=g.StringCell=_.extend({className:"string-cell",formatter:d});var b=g.UriCell=_.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(e){b.__super__.initialize.apply(this,arguments);this.title=e.title||this.title;this.target=e.target||this.target},render:function(){this.$el.empty();var e=this.model.get(this.column.get("name"));var t=this.formatter.fromRaw(e,this.model);this.$el.append(c("<a>",{tabIndex:-1,href:e,title:this.title||t,target:this.target}).text(t));this.delegateEvents();return this}});var E=g.EmailCell=w.extend({className:"email-cell",formatter:p,render:function(){this.$el.empty();var e=this.model;var t=this.formatter.fromRaw(e.get(this.column.get("name")),e);this.$el.append(c("<a>",{tabIndex:-1,href:"mailto:"+t,title:t}).text(t));this.delegateEvents();return this}});var x=g.NumberCell=_.extend({className:"number-cell",decimals:a.prototype.defaults.decimals,decimalSeparator:a.prototype.defaults.decimalSeparator,orderSeparator:a.prototype.defaults.orderSeparator,formatter:a,initialize:function(e){x.__super__.initialize.apply(this,arguments);var t=this.formatter;t.decimals=this.decimals;t.decimalSeparator=this.decimalSeparator;t.orderSeparator=this.orderSeparator}});var T=g.IntegerCell=x.extend({className:"integer-cell",decimals:0});var N=g.PercentCell=x.extend({className:"percent-cell",multiplier:s.prototype.defaults.multiplier,symbol:s.prototype.defaults.symbol,formatter:s,initialize:function(){N.__super__.initialize.apply(this,arguments);var e=this.formatter;e.multiplier=this.multiplier;e.symbol=this.symbol}});var S=g.DatetimeCell=_.extend({className:"datetime-cell",includeDate:o.prototype.defaults.includeDate,includeTime:o.prototype.defaults.includeTime,includeMilli:o.prototype.defaults.includeMilli,formatter:o,initialize:function(e){S.__super__.initialize.apply(this,arguments);var t=this.formatter;t.includeDate=this.includeDate;t.includeTime=this.includeTime;t.includeMilli=this.includeMilli;var n=this.includeDate?"YYYY-MM-DD":"";n+=this.includeDate&&this.includeTime?"T":"";n+=this.includeTime?"HH:mm:ss":"";n+=this.includeTime&&this.includeMilli?".SSS":"";this.editor=this.editor.extend({attributes:h.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:n})})}});var C=g.DateCell=S.extend({className:"date-cell",includeTime:false});var A=g.TimeCell=S.extend({className:"time-cell",includeDate:false});var k=g.BooleanCellEditor=v.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=true},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=false},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var e=this.model;var t=this.formatter.fromRaw(e.get(this.column.get("name")),e);this.$el.prop("checked",t);return this},enterOrExitEditMode:function(e){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new f(e))}},saveOrCancel:function(e){var t=this.model;var n=this.column;var i=this.formatter;var r=new f(e);if(r.passThru()&&e.type!="change")return true;if(r.cancel()){e.stopPropagation();t.trigger("backgrid:edited",t,n,r)}var a=this.$el;if(r.save()||r.moveLeft()||r.moveRight()||r.moveUp()||r.moveDown()){e.preventDefault();e.stopPropagation();var s=i.toRaw(a.prop("checked"),t);t.set(n.get("name"),s);t.trigger("backgrid:edited",t,n,r)}else if(e.type=="change"){var s=i.toRaw(a.prop("checked"),t);t.set(n.get("name"),s);a.focus()}}});var M=g.BooleanCell=_.extend({className:"boolean-cell",editor:k,events:{click:"enterEditMode"},render:function(){this.$el.empty();var e=this.model,t=this.column;var n=g.callByNeed(t.editable(),t,e);this.$el.append(c("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(e.get(t.get("name")),e),disabled:!n}));this.delegateEvents();return this}});var R=g.SelectCellEditor=v.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:h.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>',null,{variable:null}),setOptionValues:function(e){this.optionValues=e;this.optionValues=h.result(this,"optionValues")},setMultiple:function(e){this.multiple=e;this.$el.prop("multiple",e)},_renderOptions:function(e,t){var n="";for(var i=0;i<e.length;i++){n=n+this.template({text:e[i][0],value:e[i][1],selected:h.indexOf(t,e[i][1])>-1})}return n},render:function(){this.$el.empty();var e=h.result(this,"optionValues");var t=this.model;var n=this.formatter.fromRaw(t.get(this.column.get("name")),t);if(!h.isArray(e))throw new TypeError("optionValues must be an array");var i=null;var r=null;var i=null;var a=null;var s=null;for(var o=0;o<e.length;o++){var i=e[o];if(h.isArray(i)){r=i[0];i=i[1];this.$el.append(this.template({text:r,value:i,selected:h.indexOf(n,i)>-1}))}else if(h.isObject(i)){a=i.name;s=c("<optgroup></optgroup>",{label:a});s.append(this._renderOptions.call(this,i.values,n));this.$el.append(s)}else{throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }")}}this.delegateEvents();return this},save:function(e){var t=this.model;var n=this.column;t.set(n.get("name"),this.formatter.toRaw(this.$el.val(),t))},close:function(e){var t=this.model;var n=this.column;var i=new f(e);if(i.cancel()){e.stopPropagation();t.trigger("backgrid:edited",t,n,new f(e))}else if(i.save()||i.moveLeft()||i.moveRight()||i.moveUp()||i.moveDown()||e.type=="blur"){e.preventDefault();e.stopPropagation();this.save(e);t.trigger("backgrid:edited",t,n,new f(e))}}});var O=g.SelectCell=_.extend({className:"select-cell",editor:R,multiple:false,formatter:m,optionValues:undefined,delimiter:", ",initialize:function(e){O.__super__.initialize.apply(this,arguments);this.listenTo(this.model,"backgrid:edit",function(e,t,n,i){if(t.get("name")==this.column.get("name")){i.setOptionValues(this.optionValues);i.setMultiple(this.multiple)}})},render:function(){this.$el.empty();var e=h.result(this,"optionValues");var t=this.model;var n=this.formatter.fromRaw(t.get(this.column.get("name")),t);var i=[];try{if(!h.isArray(e)||h.isEmpty(e))throw new TypeError;for(var r=0;r<n.length;r++){var a=n[r];for(var s=0;s<e.length;s++){var o=e[s];if(h.isArray(o)){var l=o[0];var o=o[1];if(o==a)i.push(l)}else if(h.isObject(o)){var u=o.values;for(var c=0;c<u.length;c++){var f=u[c];if(f[1]==a){i.push(f[0])}}}else{throw new TypeError}}}this.$el.append(i.join(this.delimiter))}catch(e){if(e instanceof TypeError){throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}")}throw e}this.delegateEvents();return this}});var I=g.Column=l.Model.extend({defaults:{name:undefined,label:undefined,sortable:true,editable:true,renderable:true,formatter:undefined,sortType:"cycle",sortValue:undefined,direction:null,cell:undefined,headerCell:undefined},initialize:function(){if(!this.has("label")){this.set({label:this.get("name")},{silent:true})}var e=g.resolveNameToClass(this.get("headerCell"),"HeaderCell");var t=g.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:t,headerCell:e},{silent:true})},sortValue:function(){var e=this.get("sortValue");if(h.isString(e))return this[e];else if(h.isFunction(e))return e;return function(e,t){return e.get(t)}}});h.each(["sortable","renderable","editable"],function(t){I.prototype[t]=function(){var e=this.get(t);if(h.isString(e))return this[e];else if(h.isFunction(e))return e;return!!e}});var D=g.Columns=l.Collection.extend({model:I});var L=g.Row=l.View.extend({tagName:"tr",initialize:function(a){var e=this.columns=a.columns;if(!(e instanceof l.Collection)){e=this.columns=new D(e)}var s=this.cells=[];for(var t=0;t<e.length;t++){s.push(this.makeCell(e.at(t),a))}this.listenTo(e,"add",function(e,t){var n=t.indexOf(e);var i=this.makeCell(e,a);s.splice(n,0,i);var r=this.$el;if(n===0){r.prepend(i.render().$el)}else if(n===t.length-1){r.append(i.render().$el)}else{r.children().eq(n).before(i.render().$el)}});this.listenTo(e,"remove",function(e,t,n){s[n.index].remove();s.splice(n.index,1)})},makeCell:function(e){return new(e.get("cell"))({column:e,model:this.model})},render:function(){this.$el.empty();var e=document.createDocumentFragment();for(var t=0;t<this.cells.length;t++){e.appendChild(this.cells[t].render().el)}this.el.appendChild(e);this.delegateEvents();return this},remove:function(){for(var e=0;e<this.cells.length;e++){var t=this.cells[e];t.remove.apply(t,arguments)}return l.View.prototype.remove.apply(this,arguments)}});var P=g.EmptyRow=l.View.extend({tagName:"tr",emptyText:null,initialize:function(e){this.emptyText=e.emptyText;this.columns=e.columns},render:function(){this.$el.empty();var e=document.createElement("td");e.setAttribute("colspan",this.columns.length);e.appendChild(document.createTextNode(h.result(this,"emptyText")));this.el.className="empty";this.el.appendChild(e);return this}});var F=g.HeaderCell=l.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(e){this.column=e.column;if(!(this.column instanceof I)){this.column=new I(this.column)}var t=this.column,n=this.collection,i=this.$el;this.listenTo(t,"change:editable change:sortable change:renderable",function(e){var t=e.changedAttributes();for(var n in t){if(t.hasOwnProperty(n)){i.toggleClass(n,t[n])}}});this.listenTo(t,"change:direction",this.setCellDirection);this.listenTo(t,"change:name change:label",this.render);if(g.callByNeed(t.editable(),t,n))i.addClass("editable");if(g.callByNeed(t.sortable(),t,n))i.addClass("sortable");if(g.callByNeed(t.renderable(),t,n))i.addClass("renderable");this.listenTo(n.fullCollection||n,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending");this.column.set("direction",null)},setCellDirection:function(e,t){this.$el.removeClass("ascending").removeClass("descending");if(e.cid==this.column.cid)this.$el.addClass(t)},onClick:function(e){e.preventDefault();var n=this.column;var i=this.collection;var r="backgrid:sort";function t(e,t){if(n.get("direction")==="ascending")i.trigger(r,t,"descending");else if(n.get("direction")==="descending")i.trigger(r,t,null);else i.trigger(r,t,"ascending")}function a(e,t){if(n.get("direction")==="ascending")i.trigger(r,t,"descending");else i.trigger(r,t,"ascending")}var s=g.callByNeed(n.sortable(),n,this.collection);if(s){var o=n.get("sortType");if(o==="toggle")a(this,n);else t(this,n)}},render:function(){this.$el.empty();var e=this.column;var t=g.callByNeed(e.sortable(),e,this.collection);var n;if(t){n=c("<a>").text(e.get("label")).append("<b class='sort-caret'></b>")}else{n=document.createTextNode(e.get("label"))}this.$el.append(n);this.$el.addClass(e.get("name"));this.$el.addClass(e.get("direction"));this.delegateEvents();return this}});var U=g.HeaderRow=g.Row.extend({requiredOptions:["columns","collection"],initialize:function(){g.Row.prototype.initialize.apply(this,arguments)},makeCell:function(e,t){var n=e.get("headerCell")||t.headerCell||F;n=new n({column:e,collection:this.collection});return n}});var H=g.Header=l.View.extend({tagName:"thead",initialize:function(e){this.columns=e.columns;if(!(this.columns instanceof l.Collection)){this.columns=new D(this.columns)}this.row=new g.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){this.$el.append(this.row.render().$el);this.delegateEvents();return this},remove:function(){this.row.remove.apply(this.row,arguments);return l.View.prototype.remove.apply(this,arguments)}});var G=g.Body=l.View.extend({tagName:"tbody",initialize:function(e){this.columns=e.columns;if(!(this.columns instanceof l.Collection)){this.columns=new D(this.columns)}this.row=e.row||L;this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this);this.emptyText=e.emptyText;this._unshiftEmptyRowMayBe();var t=this.collection;this.listenTo(t,"add",this.insertRow);this.listenTo(t,"remove",this.removeRow);this.listenTo(t,"sort",this.refresh);this.listenTo(t,"reset",this.refresh);this.listenTo(t,"backgrid:sort",this.sort);this.listenTo(t,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){if(this.rows.length===0&&this.emptyText!=null){this.rows.unshift(new P({emptyText:this.emptyText,columns:this.columns}))}},insertRow:function(e,t,n){if(this.rows[0]instanceof P)this.rows.pop().remove();if(!(t instanceof l.Collection)&&!n){this.collection.add(e,n=t);return}var i=new this.row({columns:this.columns,model:e});var r=t.indexOf(e);this.rows.splice(r,0,i);var a=this.$el;var s=a.children();var o=i.render().$el;if(r>=s.length){a.append(o)}else{s.eq(r).before(o)}return this},removeRow:function(e,t,n){if(!n){this.collection.remove(e,n=t);this._unshiftEmptyRowMayBe();return}if(h.isUndefined(n.render)||n.render){this.rows[n.index].remove()}this.rows.splice(n.index,1);this._unshiftEmptyRowMayBe();return this},refresh:function(){for(var e=0;e<this.rows.length;e++){this.rows[e].remove()}this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this);this._unshiftEmptyRowMayBe();this.render();this.collection.trigger("backgrid:refresh",this);return this},render:function(){this.$el.empty();var e=document.createDocumentFragment();for(var t=0;t<this.rows.length;t++){var n=this.rows[t];e.appendChild(n.render().el)}this.el.appendChild(e);this.delegateEvents();return this},remove:function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[e];t.remove.apply(t,arguments)}return l.View.prototype.remove.apply(this,arguments)},sort:function(e,t){if(!h.contains(["ascending","descending",null],t)){throw new RangeError('direction must be one of "ascending", "descending" or `null`')}if(h.isString(e))e=this.columns.findWhere({name:e});var n=this.collection;var i;if(t==="ascending")i=-1;else if(t==="descending")i=1;else i=null;var r=this.makeComparator(e.get("name"),i,i?e.sortValue():function(e){return e.cid.replace("c","")*1});if(l.PageableCollection&&n instanceof l.PageableCollection){n.setSorting(i&&e.get("name"),i,{sortValue:e.sortValue()});if(n.fullCollection){if(n.fullCollection.comparator==null){n.fullCollection.comparator=r}n.fullCollection.sort();n.trigger("backgrid:sorted",e,t,n)}else n.fetch({reset:true,success:function(){n.trigger("backgrid:sorted",e,t,n)}})}else{n.comparator=r;n.sort();n.trigger("backgrid:sorted",e,t,n)}e.set("direction",t);return this},makeComparator:function(a,s,o){return function(e,t){var n=o(e,a),i=o(t,a),r;if(s===1)r=n,n=i,i=r;if(n===i)return 0;else if(n<i)return-1;return 1}},moveToNextCell:function(e,t,n){var i=this.collection.indexOf(e);var r=this.columns.indexOf(t);var a,s,o,l,u;this.rows[i].cells[r].exitEditMode();if(n.moveUp()||n.moveDown()||n.moveLeft()||n.moveRight()||n.save()){var c=this.columns.length;var f=c*this.collection.length;if(n.moveUp()||n.moveDown()){l=i+(n.moveUp()?-1:1);var h=this.rows[l];if(h){a=h.cells[r];if(g.callByNeed(a.column.editable(),a.column,e)){a.enterEditMode();e.trigger("backgrid:next",l,r,false)}}else e.trigger("backgrid:next",l,r,true)}else if(n.moveLeft()||n.moveRight()){var d=n.moveRight();for(var p=i*c+r+(d?1:-1);p>=0&&p<f;d?p++:p--){l=~~(p/c);u=p-l*c;a=this.rows[l].cells[u];s=g.callByNeed(a.column.renderable(),a.column,a.model);o=g.callByNeed(a.column.editable(),a.column,e);if(s&&o){a.enterEditMode();e.trigger("backgrid:next",l,u,false);break}}if(p==f){e.trigger("backgrid:next",~~(p/c),p-l*c,true)}}}return this}});var Y=g.Footer=l.View.extend({tagName:"tfoot",initialize:function(e){this.columns=e.columns;if(!(this.columns instanceof l.Collection)){this.columns=new g.Columns(this.columns)}}});var j=g.Grid=l.View.extend({tagName:"table",className:"backgrid",header:H,body:G,footer:null,initialize:function(e){if(!(e.columns instanceof l.Collection)){e.columns=new D(e.columns)}this.columns=e.columns;var t=h.omit(e,["el","id","attributes","className","tagName","events"]);this.body=e.body||this.body;this.body=new this.body(t);this.header=e.header||this.header;if(this.header){this.header=new this.header(t)}this.footer=e.footer||this.footer;if(this.footer){this.footer=new this.footer(t)}this.listenTo(this.columns,"reset",function(){if(this.header){this.header=new(this.header.remove().constructor)(t)}this.body=new(this.body.remove().constructor)(t);if(this.footer){this.footer=new(this.footer.remove().constructor)(t)}this.render()})},insertRow:function(){this.body.insertRow.apply(this.body,arguments);return this},removeRow:function(){this.body.removeRow.apply(this.body,arguments);return this},insertColumn:function(){this.columns.add.apply(this.columns,arguments);return this},removeColumn:function(){this.columns.remove.apply(this.columns,arguments);return this},sort:function(){this.body.sort.apply(this.body,arguments);return this},render:function(){this.$el.empty();if(this.header){this.$el.append(this.header.render().$el)}if(this.footer){this.$el.append(this.footer.render().$el)}this.$el.append(this.body.render().$el);this.delegateEvents();this.trigger("backgrid:rendered",this);return this},remove:function(){this.header&&this.header.remove.apply(this.header,arguments);this.body.remove.apply(this.body,arguments);this.footer&&this.footer.remove.apply(this.footer,arguments);return l.View.prototype.remove.apply(this,arguments)}});return g});return e.Backgrid=Backgrid}.apply(e,arguments)})})(this);(function(){var i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c=[],s={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},f=function(e,t){var n=s;var i="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"; __p.push('"}).replace(/\r/g,"").replace(/\n/g,"").replace(/\t/g,"")+"');}return __p.join('');";return i};define("tpl",[],function(){var u;var e,n;if(typeof window!=="undefined"&&window.navigator&&window.document){e=function(e,t){var n=u.createXhr();n.open("GET",e,true);n.onreadystatechange=function(e){if(n.readyState===4){t(n.responseText)}};n.send(null)}}else if(typeof process!=="undefined"&&process.versions&&!!process.versions.node){n=require.nodeRequire("fs");e=function(e,t){t(n.readFileSync(e,"utf8"))}}return u={version:"0.24.0",strip:function(e){if(e){e=e.replace(r,"");var t=e.match(a);if(t){e=t[1]}}else{e=""}return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"").replace(/[\t]/g,"").replace(/[\r]/g,"")},createXhr:function(){var e,t,n;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest}else{for(t=0;t<3;t++){n=i[t];try{e=new ActiveXObject(n)}catch(e){}if(e){i=[n];break}}}if(!e){throw new Error("require.getXhr(): XMLHttpRequest not available")}return e},get:e,load:function(t,e,n,i){var r=false,a,s=t.indexOf("."),o=t.substring(0,s),l=t.substring(s+1,t.length);s=l.indexOf("!");if(s!==-1){r=l.substring(s+1,l.length);r=r==="strip";l=l.substring(0,s)}a="nameToUrl"in e?e.nameToUrl(o,"."+l):e.toUrl(o+"."+l);u.get(a,function(e){e=f(e);if(!i.isBuild){e=new Function("obj",e)}e=r?u.strip(e):e;if(i.isBuild&&i.inlineText){c[t]=e}n(e)})},write:function(e,t,n){if(t in c){var i=u.jsEscape(c[t]);n("define('"+e+"!"+t+"', function() {return function(obj) { "+i.replace(/(\\')/g,"'").replace(/(\\\\)/g,"\\")+"}});\n")}}};return function(){}})})();define("tpl!powa/templates/grid.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<h4 class="title"> ',title,' </h4><div class="row">  <div class="large-6 columns grid_filter">  </div>  <div class="large-6 columns">    <div class="export_csv right">      <a><i class="fi-download"></i> Export CSV</a>    </div>  </div></div><div class="backgrid-container" ></div><div class="grid_paginator"></div>')}return __p.join("")}});define("powa/utils/size",[],function(){return{SizeFormatter:function(e){e=e||{};this.suffix=e.suffix;this.fromRaw=function(e){if(e===undefined){return"(NA)"}if(e<=1024){return e+" "+"B"}var t=[null,"K","M","G","T","P"];for(i=0;i<5&&e>1024;i++){e/=1024}return e.toFixed(2)+" "+t[i]+(this.suffix||"")}}}});(function(t){define("highlight",[],function(){return function(){var e=function(){"use strict";var e={exports:{}};function i(n){return n instanceof Map?n.clear=n.delete=n.set=()=>{throw Error("map is read-only")}:n instanceof Set&&(n.add=n.clear=n.delete=()=>{throw Error("set is read-only")}),Object.freeze(n),Object.getOwnPropertyNames(n).forEach(e=>{var t=n[e];"object"!=typeof t||Object.isFrozen(t)||i(t)}),n}e.exports=i,e.exports.default=i;var h=e.exports;class O{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function l(e,...t){const n=Object.create(null);for(const t in e)n[t]=e[t];return t.forEach(t=>{for(const e in t)n[e]=t[e]}),n}const n=e=>!!e.kind;class r{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=t(e)}openNode(e){if(!n(e))return;let t=e.kind;t=e.sublanguage?"language-"+t:((t,{prefix:n})=>{if(t.includes(".")){const e=t.split(".");return[`${n}${e.shift()}`,...e.map((e,t)=>`${e}${"_".repeat(t+1)}`)].join(" ")}return`${n}${t}`})(t,{prefix:this.classPrefix}),this.span(t)}closeNode(e){n(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class a{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t={kind:e,children:[]};this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(t,e){return"string"==typeof e?t.addText(e):e.children&&(t.openNode(e),e.children.forEach(e=>this._walk(t,e)),t.closeNode(e)),t}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every(e=>"string"==typeof e)?e.children=[e.children.join("")]:e.children.forEach(e=>{a._collapse(e)}))}}class d extends a{constructor(e){super(),this.options=e}addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root;n.kind=t,n.sublanguage=!0,this.add(n)}toHTML(){return new r(this,this.options).value()}finalize(){return!0}}function u(e){return e?"string"==typeof e?e:e.source:null}function s(...e){return e.map(e=>u(e)).join("")}function o(...e){return"("+((e=>{const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}})(e).capture?"":"?:")+e.map(e=>u(e)).join("|")+")"}function c(e){return RegExp(e.toString()+"|").exec("").length-1}const f=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function p(e,{joinWith:t}){let r=0;return e.map(e=>{r+=1;const t=r;let n=u(e),i="";for(;n.length>0;){const e=f.exec(n);if(!e){i+=n;break}i+=n.substring(0,e.index),n=n.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?i+="\\"+(Number(e[1])+t):(i+=e[0],"("===e[0]&&r++)}return i}).map(e=>`(${e})`).join(t)}const g="[a-zA-Z]\\w*",m="[a-zA-Z_]\\w*",v="\\b\\d+(\\.\\d+)?",y="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",_="\\b(0b[01]+)",w={begin:"\\\\[\\s\\S]",relevance:0},b={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[w]},E={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[w]},x=(e,t,n={})=>{const i=l({scope:"comment",begin:e,end:t,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=o("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:s(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},T=x("//","$"),N=x("/\\*","\\*/"),S=x("#","$");var I=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:g,UNDERSCORE_IDENT_RE:m,NUMBER_RE:v,C_NUMBER_RE:y,BINARY_NUMBER_RE:_,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=s(t,/.*\b/,e.binary,/\b.*/)),l({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:w,APOS_STRING_MODE:b,QUOTE_STRING_MODE:E,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},COMMENT:x,C_LINE_COMMENT_MODE:T,C_BLOCK_COMMENT_MODE:N,HASH_COMMENT_MODE:S,NUMBER_MODE:{scope:"number",begin:v,relevance:0},C_NUMBER_MODE:{scope:"number",begin:y,relevance:0},BINARY_NUMBER_MODE:{scope:"number",begin:_,relevance:0},REGEXP_MODE:{begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[w,{begin:/\[/,end:/\]/,relevance:0,contains:[w]}]}]},TITLE_MODE:{scope:"title",begin:g,relevance:0},UNDERSCORE_TITLE_MODE:{scope:"title",begin:m,relevance:0},METHOD_GUARD:{begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0},END_SAME_AS_BEGIN:e=>Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})});function C(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function A(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function k(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=C,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function M(e,t){Array.isArray(e.illegal)&&(e.illegal=o(...e.illegal))}function R(e,t){if(e.match){if(e.begin||e.end)throw Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function D(e,t){void 0===e.relevance&&(e.relevance=1)}const L=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(e=>{delete t[e]}),t.keywords=n.keywords,t.begin=s(n.beforeMatch,s("(?=",n.begin,")")),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},P=["of","and","for","in","not","or","if","then","parent","list","value"];function F(t,i,e="keyword"){const r=Object.create(null);return"string"==typeof t?n(e,t.split(" ")):Array.isArray(t)?n(e,t):Object.keys(t).forEach(e=>{Object.assign(r,F(t[e],i,e))}),r;function n(n,e){i&&(e=e.map(e=>e.toLowerCase())),e.forEach(e=>{const t=e.split("|");r[t[0]]=[n,U(t[0],t[1])]})}}function U(e,t){return t?Number(t):(e=>P.includes(e.toLowerCase()))(e)?0:1}const H={},G=e=>{console.error(e)},Y=(e,...t)=>{console.log("WARN: "+e,...t)},j=(e,t)=>{H[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),H[`${e}/${t}`]=!0)},z=Error();function B(e,t,{key:n}){let i=0;const r=e[n],a={},s={};for(let e=1;e<=t.length;e++)s[e+i]=r[e],a[e+i]=!0,i+=c(t[e-1]);e[n]=s,e[n]._emit=a,e[n]._multi=!0}function q(e){(e=>{e.scope&&"object"==typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)})(e),"string"==typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope}),(e=>{if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw G("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),z;if("object"!=typeof e.beginScope||null===e.beginScope)throw G("beginScope must be object"),z;B(e,e.begin,{key:"beginScope"}),e.begin=p(e.begin,{joinWith:""})}})(e),(e=>{if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw G("skip, excludeEnd, returnEnd not compatible with endScope: {}"),z;if("object"!=typeof e.endScope||null===e.endScope)throw G("endScope must be object"),z;B(e,e.end,{key:"endScope"}),e.end=p(e.end,{joinWith:""})}})(e)}function V(a){function s(e,t){return RegExp(u(e),"m"+(a.case_insensitive?"i":"")+(t?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=c(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map(e=>e[1]);this.matcherRe=s(p(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex((e,t)=>t>0&&void 0!==e),i=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,i)}}class o{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const n=new t;return this.rules.slice(e).forEach(([e,t])=>n.addRule(e,t)),n.compile(),this.multiRegexes[e]=n,n}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(a.compilerExtensions||(a.compilerExtensions=[]),a.contains&&a.contains.includes("self"))throw Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return a.classNameAliases=l(a.classNameAliases||{}),function t(n,i){const r=n;if(n.isCompiled)return r;[A,R,q,L].forEach(e=>e(n,i)),a.compilerExtensions.forEach(e=>e(n,i)),n.__beforeBegin=null,[k,M,D].forEach(e=>e(n,i)),n.isCompiled=!0;let e=null;return"object"==typeof n.keywords&&n.keywords.$pattern&&(n.keywords=Object.assign({},n.keywords),e=n.keywords.$pattern,delete n.keywords.$pattern),e=e||/\w+/,n.keywords&&(n.keywords=F(n.keywords,a.case_insensitive)),r.keywordPatternRe=s(e,!0),i&&(n.begin||(n.begin=/\B|\b/),r.beginRe=s(n.begin),n.end||n.endsWithParent||(n.end=/\B|\b/),n.end&&(r.endRe=s(n.end)),r.terminatorEnd=u(n.end)||"",n.endsWithParent&&i.terminatorEnd&&(r.terminatorEnd+=(n.end?"|":"")+i.terminatorEnd)),n.illegal&&(r.illegalRe=s(n.illegal)),n.contains||(n.contains=[]),n.contains=[].concat(...n.contains.map(e=>(t=>(t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(e=>l(t,{variants:null},e))),t.cachedVariants?t.cachedVariants:W(t)?l(t,{starts:t.starts?l(t.starts):null}):Object.isFrozen(t)?l(t):t))("self"===e?n:e))),n.contains.forEach(e=>{t(e,r)}),n.starts&&t(n.starts,i),r.matcher=(e=>{const t=new o;return e.contains.forEach(e=>t.addRule(e.begin,{rule:e,type:"begin"})),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t})(r),r}(a)}function W(e){return!!e&&(e.endsWithParent||W(e.starts))}const $=t,X=l,J=Symbol("nomatch");var K=(i=>{const N=Object.create(null),a=Object.create(null),r=[];let S=!0;const C="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let A={ignoreUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function s(e){return A.noHighlightRe.test(e)}function o(e,t,n,i){let r="",a="";"object"==typeof t?(r=e,n=t.ignoreIllegals,a=t.language,i=void 0):(j("10.7.0","highlight(lang, code, ...args) has been deprecated."),j("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),a=e,r=t),void 0===n&&(n=!0);const s={code:r,language:a};f("before:highlight",s);const o=s.result?s.result:k(s.language,s.code,n,i);return o.code=s.code,f("after:highlight",o),o}function k(i,a,r,e){const s=Object.create(null);function o(){if(!v.keywords)return void _.addText(w);let n=0;v.keywordPatternRe.lastIndex=0;let i=v.keywordPatternRe.exec(w),r="";for(;i;){r+=w.substring(n,i.index);const e=g.case_insensitive?i[0].toLowerCase():i[0],t=(a=e,v.keywords[a]);if(t){const[n,a]=t;if(_.addText(r),r="",s[e]=(s[e]||0)+1,s[e]<=7&&(b+=a),n.startsWith("_"))r+=i[0];else{const r=g.classNameAliases[n]||n;_.addKeyword(i[0],r)}}else r+=i[0];n=v.keywordPatternRe.lastIndex,i=v.keywordPatternRe.exec(w)}var a;r+=w.substr(n),_.addText(r)}function l(){null!=v.subLanguage?(()=>{if(""===w)return;let e=null;if("string"==typeof v.subLanguage){if(!N[v.subLanguage])return void _.addText(w);e=k(v.subLanguage,w,!0,y[v.subLanguage]),y[v.subLanguage]=e._top}else e=M(w,v.subLanguage.length?v.subLanguage:null);v.relevance>0&&(b+=e.relevance),_.addSublanguage(e._emitter,e.language)})():o(),w=""}function u(n,i){let r=1;for(;void 0!==i[r];){if(!n._emit[r]){r++;continue}const e=g.classNameAliases[n[r]]||n[r],t=i[r];e?_.addKeyword(t,e):(w=t,o(),w=""),r++}}function c(e,t){return e.scope&&"string"==typeof e.scope&&_.openNode(g.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(_.addKeyword(w,g.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),w=""):e.beginScope._multi&&(u(e.beginScope,t),w="")),v=Object.create(e,{parent:{value:v}}),v}function f(e,t,n){let i=((e,t)=>{const n=e&&e.exec(t);return n&&0===n.index})(e.endRe,n);if(i){if(e["on:end"]){const n=new O(e);e["on:end"](t,n),n.isMatchIgnored&&(i=!1)}if(i){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return f(e.parent,t,n)}function h(e){return 0===v.matcher.regexIndex?(w+=e[0],1):(T=!0,0)}function d(e){const t=e[0],n=a.substr(e.index),i=f(v,e,n);if(!i)return J;const r=v;v.endScope&&v.endScope._wrap?(l(),_.addKeyword(t,v.endScope._wrap)):v.endScope&&v.endScope._multi?(l(),u(v.endScope,e)):r.skip?w+=t:(r.returnEnd||r.excludeEnd||(w+=t),l(),r.excludeEnd&&(w=t));do{v.scope&&!v.isMultiClass&&_.closeNode(),v.skip||v.subLanguage||(b+=v.relevance),v=v.parent}while(v!==i.parent);return i.starts&&c(i.starts,e),r.returnEnd?0:t.length}let p={};function t(e,t){const n=t&&t[0];if(w+=e,null==n)return l(),0;if("begin"===p.type&&"end"===t.type&&p.index===t.index&&""===n){if(w+=a.slice(t.index,t.index+1),!S){const e=Error(`0 width match regex (${i})`);throw e.languageName=i,e.badRule=p.rule,e}return 1}if(p=t,"begin"===t.type)return(e=>{const t=e[0],n=e.rule,i=new O(n),r=[n.__beforeBegin,n["on:begin"]];for(const n of r)if(n&&(n(e,i),i.isMatchIgnored))return h(t);return n.skip?w+=t:(n.excludeBegin&&(w+=t),l(),n.returnBegin||n.excludeBegin||(w=t)),c(n,e),n.returnBegin?0:t.length})(t);if("illegal"===t.type&&!r){const i=Error('Illegal lexeme "'+n+'" for mode "'+(v.scope||"<unnamed>")+'"');throw i.mode=v,i}if("end"===t.type){const i=d(t);if(i!==J)return i}if("illegal"===t.type&&""===n)return 1;if(x>1e5&&x>3*t.index)throw Error("potential infinite loop, way more iterations than matches");return w+=n,n.length}const g=R(i);if(!g)throw G(C.replace("{}",i)),Error('Unknown language: "'+i+'"');const n=V(g);let m="",v=e||n;const y={},_=new A.__emitter(A);(()=>{const t=[];for(let e=v;e!==g;e=e.parent)e.scope&&t.unshift(e.scope);t.forEach(e=>_.openNode(e))})();let w="",b=0,E=0,x=0,T=!1;try{for(v.matcher.considerAll();;){x++,T?T=!1:v.matcher.considerAll(),v.matcher.lastIndex=E;const i=v.matcher.exec(a);if(!i)break;const N=t(a.substring(E,i.index),i);E=i.index+N}return t(a.substr(E)),_.closeAllNodes(),_.finalize(),m=_.toHTML(),{language:i,value:m,relevance:b,illegal:!1,_emitter:_,_top:v}}catch(e){if(e.message&&e.message.includes("Illegal"))return{language:i,value:$(a),illegal:!0,relevance:0,_illegalBy:{message:e.message,index:E,context:a.slice(E-100,E+100),mode:e.mode,resultSoFar:m},_emitter:_};if(S)return{language:i,value:$(a),illegal:!1,relevance:0,errorRaised:e,_emitter:_,_top:v};throw e}}function M(t,e){e=e||A.languages||Object.keys(N);const n=(e=>{const t={value:$(e),illegal:!1,relevance:0,_top:l,_emitter:new A.__emitter(A)};return t._emitter.addText(e),t})(t),i=e.filter(R).filter(c).map(e=>k(e,t,!1));i.unshift(n);const r=i.sort((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(R(e.language).supersetOf===t.language)return 1;if(R(t.language).supersetOf===e.language)return-1}return 0}),[a,s]=r,o=a;return o.secondBest=s,o}function t(e){let t=null;const n=(e=>{let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=A.languageDetectRe.exec(t);if(n){const t=R(n[1]);return t||(Y(C.replace("{}",n[1])),Y("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}return t.split(/\s+/).find(e=>s(e)||R(e))})(e);if(s(n))return;f("before:highlightElement",{el:e,language:n}),!A.ignoreUnescapedHTML&&e.children.length>0&&(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/issues/2886"),console.warn(e)),t=e;const i=t.textContent,r=n?o(i,{language:n,ignoreIllegals:!0}):M(i);e.innerHTML=r.value,((e,t,n)=>{const i=t&&a[t]||n;e.classList.add("hljs"),e.classList.add("language-"+i)})(e,n,r.language),e.result={language:r.language,re:r.relevance,relevance:r.relevance},r.secondBest&&(e.secondBest={language:r.secondBest.language,relevance:r.secondBest.relevance}),f("after:highlightElement",{el:e,result:r,text:i})}let e=!1;function n(){"loading"!==document.readyState?document.querySelectorAll(A.cssSelector).forEach(t):e=!0}function R(e){return e=(e||"").toLowerCase(),N[e]||N[a[e]]}function u(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach(e=>{a[e.toLowerCase()]=t})}function c(e){const t=R(e);return t&&!t.disableAutodetect}function f(e,t){const n=e;r.forEach(e=>{e[n]&&e[n](t)})}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",()=>{e&&n()},!1),Object.assign(i,{highlight:o,highlightAuto:M,highlightAll:n,highlightElement:t,highlightBlock:e=>(j("10.7.0","highlightBlock will be removed entirely in v12.0"),j("10.7.0","Please use highlightElement now."),t(e)),configure:e=>{A=X(A,e)},initHighlighting:()=>{n(),j("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:()=>{n(),j("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:(t,e)=>{let n=null;try{n=e(i)}catch(e){if(G("Language definition for '{}' could not be registered.".replace("{}",t)),!S)throw e;G(e),n=l}n.name||(n.name=t),N[t]=n,n.rawDefinition=e.bind(null,i),n.aliases&&u(n.aliases,{languageName:t})},unregisterLanguage:e=>{delete N[e];for(const N of Object.keys(a))a[N]===e&&delete a[N]},listLanguages:()=>Object.keys(N),getLanguage:R,registerAliases:u,autoDetection:c,inherit:X,addPlugin:e=>{(t=>{t["before:highlightBlock"]&&!t["before:highlightElement"]&&(t["before:highlightElement"]=e=>{t["before:highlightBlock"](Object.assign({block:e.el},e))}),t["after:highlightBlock"]&&!t["after:highlightElement"]&&(t["after:highlightElement"]=e=>{t["after:highlightBlock"](Object.assign({block:e.el},e))})})(e),r.push(e)}}),i.debugMode=()=>{S=!1},i.safeMode=()=>{S=!0},i.versionString="11.0.1";for(const i in I)"object"==typeof I[i]&&h(I[i]);return Object.assign(i,I),i})({}),Z=Object.freeze({__proto__:null});const Q=K;for(const e of Object.keys(Z)){const i=e.replace("grmr_","");Q.registerLanguage(i,Z[e])}return Q}();"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=e);e.registerLanguage("sql",(()=>{"use strict";function t(e){return e?"string"==typeof e?e:e.source:null}function u(...e){return e.map(e=>t(e)).join("")}function c(...e){return"("+((e=>{const t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}})(e).capture?"":"?:")+e.map(e=>t(e)).join("|")+")"}return e=>{const t=e.COMMENT("--","$"),n=["true","false","unknown"],i=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],r=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],a=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],s=r,o=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter(e=>!r.includes(e)),l={begin:u(/\b/,c(...s),/\s*\(/),relevance:0,keywords:{built_in:s}};return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:((e,{exceptions:t,when:n}={})=>{const i=n;return t=t||[],e.map(e=>e.match(/\|\d+$/)||t.includes(e)?e:i(e)?e+"|0":e)})(o,{when:e=>e.length<3}),literal:n,type:i,built_in:["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"]},contains:[{begin:c(...a),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:o.concat(a),literal:n,type:i}},{className:"type",begin:c("double precision","large object","with timezone","without timezone")},l,{className:"variable",begin:/@[a-z0-9]+/},{className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},{begin:/"/,end:/"/,contains:[{begin:/""/}]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t,{className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0}]}}})());e.registerLanguage("pgsql",(()=>{"use strict";return e=>{const t=e.COMMENT("--","$"),n="\\$([a-zA-Z_]?|[a-zA-Z_][a-zA-Z_0-9]*)\\$",i="BIGINT INT8 BIGSERIAL SERIAL8 BIT VARYING VARBIT BOOLEAN BOOL BOX BYTEA CHARACTER CHAR VARCHAR CIDR CIRCLE DATE DOUBLE PRECISION FLOAT8 FLOAT INET INTEGER INT INT4 INTERVAL JSON JSONB LINE LSEG|10 MACADDR MACADDR8 MONEY NUMERIC DEC DECIMAL PATH POINT POLYGON REAL FLOAT4 SMALLINT INT2 SMALLSERIAL|10 SERIAL2|10 SERIAL|10 SERIAL4|10 TEXT TIME ZONE TIMETZ|10 TIMESTAMP TIMESTAMPTZ|10 TSQUERY|10 TSVECTOR|10 TXID_SNAPSHOT|10 UUID XML NATIONAL NCHAR INT4RANGE|10 INT8RANGE|10 NUMRANGE|10 TSRANGE|10 TSTZRANGE|10 DATERANGE|10 ANYELEMENT ANYARRAY ANYNONARRAY ANYENUM ANYRANGE CSTRING INTERNAL RECORD PG_DDL_COMMAND VOID UNKNOWN OPAQUE REFCURSOR NAME OID REGPROC|10 REGPROCEDURE|10 REGOPER|10 REGOPERATOR|10 REGCLASS|10 REGTYPE|10 REGROLE|10 REGNAMESPACE|10 REGCONFIG|10 REGDICTIONARY|10 ",r=i.trim().split(" ").map(e=>e.split("|")[0]).join("|"),a="ARRAY_AGG AVG BIT_AND BIT_OR BOOL_AND BOOL_OR COUNT EVERY JSON_AGG JSONB_AGG JSON_OBJECT_AGG JSONB_OBJECT_AGG MAX MIN MODE STRING_AGG SUM XMLAGG CORR COVAR_POP COVAR_SAMP REGR_AVGX REGR_AVGY REGR_COUNT REGR_INTERCEPT REGR_R2 REGR_SLOPE REGR_SXX REGR_SXY REGR_SYY STDDEV STDDEV_POP STDDEV_SAMP VARIANCE VAR_POP VAR_SAMP PERCENTILE_CONT PERCENTILE_DISC ROW_NUMBER RANK DENSE_RANK PERCENT_RANK CUME_DIST NTILE LAG LEAD FIRST_VALUE LAST_VALUE NTH_VALUE NUM_NONNULLS NUM_NULLS ABS CBRT CEIL CEILING DEGREES DIV EXP FLOOR LN LOG MOD PI POWER RADIANS ROUND SCALE SIGN SQRT TRUNC WIDTH_BUCKET RANDOM SETSEED ACOS ACOSD ASIN ASIND ATAN ATAND ATAN2 ATAN2D COS COSD COT COTD SIN SIND TAN TAND BIT_LENGTH CHAR_LENGTH CHARACTER_LENGTH LOWER OCTET_LENGTH OVERLAY POSITION SUBSTRING TREAT TRIM UPPER ASCII BTRIM CHR CONCAT CONCAT_WS CONVERT CONVERT_FROM CONVERT_TO DECODE ENCODE INITCAP LEFT LENGTH LPAD LTRIM MD5 PARSE_IDENT PG_CLIENT_ENCODING QUOTE_IDENT|10 QUOTE_LITERAL|10 QUOTE_NULLABLE|10 REGEXP_MATCH REGEXP_MATCHES REGEXP_REPLACE REGEXP_SPLIT_TO_ARRAY REGEXP_SPLIT_TO_TABLE REPEAT REPLACE REVERSE RIGHT RPAD RTRIM SPLIT_PART STRPOS SUBSTR TO_ASCII TO_HEX TRANSLATE OCTET_LENGTH GET_BIT GET_BYTE SET_BIT SET_BYTE TO_CHAR TO_DATE TO_NUMBER TO_TIMESTAMP AGE CLOCK_TIMESTAMP|10 DATE_PART DATE_TRUNC ISFINITE JUSTIFY_DAYS JUSTIFY_HOURS JUSTIFY_INTERVAL MAKE_DATE MAKE_INTERVAL|10 MAKE_TIME MAKE_TIMESTAMP|10 MAKE_TIMESTAMPTZ|10 NOW STATEMENT_TIMESTAMP|10 TIMEOFDAY TRANSACTION_TIMESTAMP|10 ENUM_FIRST ENUM_LAST ENUM_RANGE AREA CENTER DIAMETER HEIGHT ISCLOSED ISOPEN NPOINTS PCLOSE POPEN RADIUS WIDTH BOX BOUND_BOX CIRCLE LINE LSEG PATH POLYGON ABBREV BROADCAST HOST HOSTMASK MASKLEN NETMASK NETWORK SET_MASKLEN TEXT INET_SAME_FAMILY INET_MERGE MACADDR8_SET7BIT ARRAY_TO_TSVECTOR GET_CURRENT_TS_CONFIG NUMNODE PLAINTO_TSQUERY PHRASETO_TSQUERY WEBSEARCH_TO_TSQUERY QUERYTREE SETWEIGHT STRIP TO_TSQUERY TO_TSVECTOR JSON_TO_TSVECTOR JSONB_TO_TSVECTOR TS_DELETE TS_FILTER TS_HEADLINE TS_RANK TS_RANK_CD TS_REWRITE TSQUERY_PHRASE TSVECTOR_TO_ARRAY TSVECTOR_UPDATE_TRIGGER TSVECTOR_UPDATE_TRIGGER_COLUMN XMLCOMMENT XMLCONCAT XMLELEMENT XMLFOREST XMLPI XMLROOT XMLEXISTS XML_IS_WELL_FORMED XML_IS_WELL_FORMED_DOCUMENT XML_IS_WELL_FORMED_CONTENT XPATH XPATH_EXISTS XMLTABLE XMLNAMESPACES TABLE_TO_XML TABLE_TO_XMLSCHEMA TABLE_TO_XML_AND_XMLSCHEMA QUERY_TO_XML QUERY_TO_XMLSCHEMA QUERY_TO_XML_AND_XMLSCHEMA CURSOR_TO_XML CURSOR_TO_XMLSCHEMA SCHEMA_TO_XML SCHEMA_TO_XMLSCHEMA SCHEMA_TO_XML_AND_XMLSCHEMA DATABASE_TO_XML DATABASE_TO_XMLSCHEMA DATABASE_TO_XML_AND_XMLSCHEMA XMLATTRIBUTES TO_JSON TO_JSONB ARRAY_TO_JSON ROW_TO_JSON JSON_BUILD_ARRAY JSONB_BUILD_ARRAY JSON_BUILD_OBJECT JSONB_BUILD_OBJECT JSON_OBJECT JSONB_OBJECT JSON_ARRAY_LENGTH JSONB_ARRAY_LENGTH JSON_EACH JSONB_EACH JSON_EACH_TEXT JSONB_EACH_TEXT JSON_EXTRACT_PATH JSONB_EXTRACT_PATH JSON_OBJECT_KEYS JSONB_OBJECT_KEYS JSON_POPULATE_RECORD JSONB_POPULATE_RECORD JSON_POPULATE_RECORDSET JSONB_POPULATE_RECORDSET JSON_ARRAY_ELEMENTS JSONB_ARRAY_ELEMENTS JSON_ARRAY_ELEMENTS_TEXT JSONB_ARRAY_ELEMENTS_TEXT JSON_TYPEOF JSONB_TYPEOF JSON_TO_RECORD JSONB_TO_RECORD JSON_TO_RECORDSET JSONB_TO_RECORDSET JSON_STRIP_NULLS JSONB_STRIP_NULLS JSONB_SET JSONB_INSERT JSONB_PRETTY CURRVAL LASTVAL NEXTVAL SETVAL COALESCE NULLIF GREATEST LEAST ARRAY_APPEND ARRAY_CAT ARRAY_NDIMS ARRAY_DIMS ARRAY_FILL ARRAY_LENGTH ARRAY_LOWER ARRAY_POSITION ARRAY_POSITIONS ARRAY_PREPEND ARRAY_REMOVE ARRAY_REPLACE ARRAY_TO_STRING ARRAY_UPPER CARDINALITY STRING_TO_ARRAY UNNEST ISEMPTY LOWER_INC UPPER_INC LOWER_INF UPPER_INF RANGE_MERGE GENERATE_SERIES GENERATE_SUBSCRIPTS CURRENT_DATABASE CURRENT_QUERY CURRENT_SCHEMA|10 CURRENT_SCHEMAS|10 INET_CLIENT_ADDR INET_CLIENT_PORT INET_SERVER_ADDR INET_SERVER_PORT ROW_SECURITY_ACTIVE FORMAT_TYPE TO_REGCLASS TO_REGPROC TO_REGPROCEDURE TO_REGOPER TO_REGOPERATOR TO_REGTYPE TO_REGNAMESPACE TO_REGROLE COL_DESCRIPTION OBJ_DESCRIPTION SHOBJ_DESCRIPTION TXID_CURRENT TXID_CURRENT_IF_ASSIGNED TXID_CURRENT_SNAPSHOT TXID_SNAPSHOT_XIP TXID_SNAPSHOT_XMAX TXID_SNAPSHOT_XMIN TXID_VISIBLE_IN_SNAPSHOT TXID_STATUS CURRENT_SETTING SET_CONFIG BRIN_SUMMARIZE_NEW_VALUES BRIN_SUMMARIZE_RANGE BRIN_DESUMMARIZE_RANGE GIN_CLEAN_PENDING_LIST SUPPRESS_REDUNDANT_UPDATES_TRIGGER LO_FROM_BYTEA LO_PUT LO_GET LO_CREAT LO_CREATE LO_UNLINK LO_IMPORT LO_EXPORT LOREAD LOWRITE GROUPING CAST".split(" ").map(e=>e.split("|")[0]).join("|");return{name:"PostgreSQL",aliases:["postgres","postgresql"],supersetOf:"sql",case_insensitive:!0,keywords:{keyword:"ABORT ALTER ANALYZE BEGIN CALL CHECKPOINT|10 CLOSE CLUSTER COMMENT COMMIT COPY CREATE DEALLOCATE DECLARE DELETE DISCARD DO DROP END EXECUTE EXPLAIN FETCH GRANT IMPORT INSERT LISTEN LOAD LOCK MOVE NOTIFY PREPARE REASSIGN|10 REFRESH REINDEX RELEASE RESET REVOKE ROLLBACK SAVEPOINT SECURITY SELECT SET SHOW START TRUNCATE UNLISTEN|10 UPDATE VACUUM|10 VALUES AGGREGATE COLLATION CONVERSION|10 DATABASE DEFAULT PRIVILEGES DOMAIN TRIGGER EXTENSION FOREIGN WRAPPER|10 TABLE FUNCTION GROUP LANGUAGE LARGE OBJECT MATERIALIZED VIEW OPERATOR CLASS FAMILY POLICY PUBLICATION|10 ROLE RULE SCHEMA SEQUENCE SERVER STATISTICS SUBSCRIPTION SYSTEM TABLESPACE CONFIGURATION DICTIONARY PARSER TEMPLATE TYPE USER MAPPING PREPARED ACCESS METHOD CAST AS TRANSFORM TRANSACTION OWNED TO INTO SESSION AUTHORIZATION INDEX PROCEDURE ASSERTION ALL ANALYSE AND ANY ARRAY ASC ASYMMETRIC|10 BOTH CASE CHECK COLLATE COLUMN CONCURRENTLY|10 CONSTRAINT CROSS DEFERRABLE RANGE DESC DISTINCT ELSE EXCEPT FOR FREEZE|10 FROM FULL HAVING ILIKE IN INITIALLY INNER INTERSECT IS ISNULL JOIN LATERAL LEADING LIKE LIMIT NATURAL NOT NOTNULL NULL OFFSET ON ONLY OR ORDER OUTER OVERLAPS PLACING PRIMARY REFERENCES RETURNING SIMILAR SOME SYMMETRIC TABLESAMPLE THEN TRAILING UNION UNIQUE USING VARIADIC|10 VERBOSE WHEN WHERE WINDOW WITH BY RETURNS INOUT OUT SETOF|10 IF STRICT CURRENT CONTINUE OWNER LOCATION OVER PARTITION WITHIN BETWEEN ESCAPE EXTERNAL INVOKER DEFINER WORK RENAME VERSION CONNECTION CONNECT TABLES TEMP TEMPORARY FUNCTIONS SEQUENCES TYPES SCHEMAS OPTION CASCADE RESTRICT ADD ADMIN EXISTS VALID VALIDATE ENABLE DISABLE REPLICA|10 ALWAYS PASSING COLUMNS PATH REF VALUE OVERRIDING IMMUTABLE STABLE VOLATILE BEFORE AFTER EACH ROW PROCEDURAL ROUTINE NO HANDLER VALIDATOR OPTIONS STORAGE OIDS|10 WITHOUT INHERIT DEPENDS CALLED INPUT LEAKPROOF|10 COST ROWS NOWAIT SEARCH UNTIL ENCRYPTED|10 PASSWORD CONFLICT|10 INSTEAD INHERITS CHARACTERISTICS WRITE CURSOR ALSO STATEMENT SHARE EXCLUSIVE INLINE ISOLATION REPEATABLE READ COMMITTED SERIALIZABLE UNCOMMITTED LOCAL GLOBAL SQL PROCEDURES RECURSIVE SNAPSHOT ROLLUP CUBE TRUSTED|10 INCLUDE FOLLOWING PRECEDING UNBOUNDED RANGE GROUPS UNENCRYPTED|10 SYSID FORMAT DELIMITER HEADER QUOTE ENCODING FILTER OFF FORCE_QUOTE FORCE_NOT_NULL FORCE_NULL COSTS BUFFERS TIMING SUMMARY DISABLE_PAGE_SKIPPING RESTART CYCLE GENERATED IDENTITY DEFERRED IMMEDIATE LEVEL LOGGED UNLOGGED OF NOTHING NONE EXCLUDE ATTRIBUTE USAGE ROUTINES TRUE FALSE NAN INFINITY ALIAS BEGIN CONSTANT DECLARE END EXCEPTION RETURN PERFORM|10 RAISE GET DIAGNOSTICS STACKED|10 FOREACH LOOP ELSIF EXIT WHILE REVERSE SLICE DEBUG LOG INFO NOTICE WARNING ASSERT OPEN SUPERUSER NOSUPERUSER CREATEDB NOCREATEDB CREATEROLE NOCREATEROLE INHERIT NOINHERIT LOGIN NOLOGIN REPLICATION NOREPLICATION BYPASSRLS NOBYPASSRLS ",built_in:"CURRENT_TIME CURRENT_TIMESTAMP CURRENT_USER CURRENT_CATALOG|10 CURRENT_DATE LOCALTIME LOCALTIMESTAMP CURRENT_ROLE|10 CURRENT_SCHEMA|10 SESSION_USER PUBLIC FOUND NEW OLD TG_NAME|10 TG_WHEN|10 TG_LEVEL|10 TG_OP|10 TG_RELID|10 TG_RELNAME|10 TG_TABLE_NAME|10 TG_TABLE_SCHEMA|10 TG_NARGS|10 TG_ARGV|10 TG_EVENT|10 TG_TAG|10 ROW_COUNT RESULT_OID|10 PG_CONTEXT|10 RETURNED_SQLSTATE COLUMN_NAME CONSTRAINT_NAME PG_DATATYPE_NAME|10 MESSAGE_TEXT TABLE_NAME SCHEMA_NAME PG_EXCEPTION_DETAIL|10 PG_EXCEPTION_HINT|10 PG_EXCEPTION_CONTEXT|10 SQLSTATE SQLERRM|10 SUCCESSFUL_COMPLETION WARNING DYNAMIC_RESULT_SETS_RETURNED IMPLICIT_ZERO_BIT_PADDING NULL_VALUE_ELIMINATED_IN_SET_FUNCTION PRIVILEGE_NOT_GRANTED PRIVILEGE_NOT_REVOKED STRING_DATA_RIGHT_TRUNCATION DEPRECATED_FEATURE NO_DATA NO_ADDITIONAL_DYNAMIC_RESULT_SETS_RETURNED SQL_STATEMENT_NOT_YET_COMPLETE CONNECTION_EXCEPTION CONNECTION_DOES_NOT_EXIST CONNECTION_FAILURE SQLCLIENT_UNABLE_TO_ESTABLISH_SQLCONNECTION SQLSERVER_REJECTED_ESTABLISHMENT_OF_SQLCONNECTION TRANSACTION_RESOLUTION_UNKNOWN PROTOCOL_VIOLATION TRIGGERED_ACTION_EXCEPTION FEATURE_NOT_SUPPORTED INVALID_TRANSACTION_INITIATION LOCATOR_EXCEPTION INVALID_LOCATOR_SPECIFICATION INVALID_GRANTOR INVALID_GRANT_OPERATION INVALID_ROLE_SPECIFICATION DIAGNOSTICS_EXCEPTION STACKED_DIAGNOSTICS_ACCESSED_WITHOUT_ACTIVE_HANDLER CASE_NOT_FOUND CARDINALITY_VIOLATION DATA_EXCEPTION ARRAY_SUBSCRIPT_ERROR CHARACTER_NOT_IN_REPERTOIRE DATETIME_FIELD_OVERFLOW DIVISION_BY_ZERO ERROR_IN_ASSIGNMENT ESCAPE_CHARACTER_CONFLICT INDICATOR_OVERFLOW INTERVAL_FIELD_OVERFLOW INVALID_ARGUMENT_FOR_LOGARITHM INVALID_ARGUMENT_FOR_NTILE_FUNCTION INVALID_ARGUMENT_FOR_NTH_VALUE_FUNCTION INVALID_ARGUMENT_FOR_POWER_FUNCTION INVALID_ARGUMENT_FOR_WIDTH_BUCKET_FUNCTION INVALID_CHARACTER_VALUE_FOR_CAST INVALID_DATETIME_FORMAT INVALID_ESCAPE_CHARACTER INVALID_ESCAPE_OCTET INVALID_ESCAPE_SEQUENCE NONSTANDARD_USE_OF_ESCAPE_CHARACTER INVALID_INDICATOR_PARAMETER_VALUE INVALID_PARAMETER_VALUE INVALID_REGULAR_EXPRESSION INVALID_ROW_COUNT_IN_LIMIT_CLAUSE INVALID_ROW_COUNT_IN_RESULT_OFFSET_CLAUSE INVALID_TABLESAMPLE_ARGUMENT INVALID_TABLESAMPLE_REPEAT INVALID_TIME_ZONE_DISPLACEMENT_VALUE INVALID_USE_OF_ESCAPE_CHARACTER MOST_SPECIFIC_TYPE_MISMATCH NULL_VALUE_NOT_ALLOWED NULL_VALUE_NO_INDICATOR_PARAMETER NUMERIC_VALUE_OUT_OF_RANGE SEQUENCE_GENERATOR_LIMIT_EXCEEDED STRING_DATA_LENGTH_MISMATCH STRING_DATA_RIGHT_TRUNCATION SUBSTRING_ERROR TRIM_ERROR UNTERMINATED_C_STRING ZERO_LENGTH_CHARACTER_STRING FLOATING_POINT_EXCEPTION INVALID_TEXT_REPRESENTATION INVALID_BINARY_REPRESENTATION BAD_COPY_FILE_FORMAT UNTRANSLATABLE_CHARACTER NOT_AN_XML_DOCUMENT INVALID_XML_DOCUMENT INVALID_XML_CONTENT INVALID_XML_COMMENT INVALID_XML_PROCESSING_INSTRUCTION INTEGRITY_CONSTRAINT_VIOLATION RESTRICT_VIOLATION NOT_NULL_VIOLATION FOREIGN_KEY_VIOLATION UNIQUE_VIOLATION CHECK_VIOLATION EXCLUSION_VIOLATION INVALID_CURSOR_STATE INVALID_TRANSACTION_STATE ACTIVE_SQL_TRANSACTION BRANCH_TRANSACTION_ALREADY_ACTIVE HELD_CURSOR_REQUIRES_SAME_ISOLATION_LEVEL INAPPROPRIATE_ACCESS_MODE_FOR_BRANCH_TRANSACTION INAPPROPRIATE_ISOLATION_LEVEL_FOR_BRANCH_TRANSACTION NO_ACTIVE_SQL_TRANSACTION_FOR_BRANCH_TRANSACTION READ_ONLY_SQL_TRANSACTION SCHEMA_AND_DATA_STATEMENT_MIXING_NOT_SUPPORTED NO_ACTIVE_SQL_TRANSACTION IN_FAILED_SQL_TRANSACTION IDLE_IN_TRANSACTION_SESSION_TIMEOUT INVALID_SQL_STATEMENT_NAME TRIGGERED_DATA_CHANGE_VIOLATION INVALID_AUTHORIZATION_SPECIFICATION INVALID_PASSWORD DEPENDENT_PRIVILEGE_DESCRIPTORS_STILL_EXIST DEPENDENT_OBJECTS_STILL_EXIST INVALID_TRANSACTION_TERMINATION SQL_ROUTINE_EXCEPTION FUNCTION_EXECUTED_NO_RETURN_STATEMENT MODIFYING_SQL_DATA_NOT_PERMITTED PROHIBITED_SQL_STATEMENT_ATTEMPTED READING_SQL_DATA_NOT_PERMITTED INVALID_CURSOR_NAME EXTERNAL_ROUTINE_EXCEPTION CONTAINING_SQL_NOT_PERMITTED MODIFYING_SQL_DATA_NOT_PERMITTED PROHIBITED_SQL_STATEMENT_ATTEMPTED READING_SQL_DATA_NOT_PERMITTED EXTERNAL_ROUTINE_INVOCATION_EXCEPTION INVALID_SQLSTATE_RETURNED NULL_VALUE_NOT_ALLOWED TRIGGER_PROTOCOL_VIOLATED SRF_PROTOCOL_VIOLATED EVENT_TRIGGER_PROTOCOL_VIOLATED SAVEPOINT_EXCEPTION INVALID_SAVEPOINT_SPECIFICATION INVALID_CATALOG_NAME INVALID_SCHEMA_NAME TRANSACTION_ROLLBACK TRANSACTION_INTEGRITY_CONSTRAINT_VIOLATION SERIALIZATION_FAILURE STATEMENT_COMPLETION_UNKNOWN DEADLOCK_DETECTED SYNTAX_ERROR_OR_ACCESS_RULE_VIOLATION SYNTAX_ERROR INSUFFICIENT_PRIVILEGE CANNOT_COERCE GROUPING_ERROR WINDOWING_ERROR INVALID_RECURSION INVALID_FOREIGN_KEY INVALID_NAME NAME_TOO_LONG RESERVED_NAME DATATYPE_MISMATCH INDETERMINATE_DATATYPE COLLATION_MISMATCH INDETERMINATE_COLLATION WRONG_OBJECT_TYPE GENERATED_ALWAYS UNDEFINED_COLUMN UNDEFINED_FUNCTION UNDEFINED_TABLE UNDEFINED_PARAMETER UNDEFINED_OBJECT DUPLICATE_COLUMN DUPLICATE_CURSOR DUPLICATE_DATABASE DUPLICATE_FUNCTION DUPLICATE_PREPARED_STATEMENT DUPLICATE_SCHEMA DUPLICATE_TABLE DUPLICATE_ALIAS DUPLICATE_OBJECT AMBIGUOUS_COLUMN AMBIGUOUS_FUNCTION AMBIGUOUS_PARAMETER AMBIGUOUS_ALIAS INVALID_COLUMN_REFERENCE INVALID_COLUMN_DEFINITION INVALID_CURSOR_DEFINITION INVALID_DATABASE_DEFINITION INVALID_FUNCTION_DEFINITION INVALID_PREPARED_STATEMENT_DEFINITION INVALID_SCHEMA_DEFINITION INVALID_TABLE_DEFINITION INVALID_OBJECT_DEFINITION WITH_CHECK_OPTION_VIOLATION INSUFFICIENT_RESOURCES DISK_FULL OUT_OF_MEMORY TOO_MANY_CONNECTIONS CONFIGURATION_LIMIT_EXCEEDED PROGRAM_LIMIT_EXCEEDED STATEMENT_TOO_COMPLEX TOO_MANY_COLUMNS TOO_MANY_ARGUMENTS OBJECT_NOT_IN_PREREQUISITE_STATE OBJECT_IN_USE CANT_CHANGE_RUNTIME_PARAM LOCK_NOT_AVAILABLE OPERATOR_INTERVENTION QUERY_CANCELED ADMIN_SHUTDOWN CRASH_SHUTDOWN CANNOT_CONNECT_NOW DATABASE_DROPPED SYSTEM_ERROR IO_ERROR UNDEFINED_FILE DUPLICATE_FILE SNAPSHOT_TOO_OLD CONFIG_FILE_ERROR LOCK_FILE_EXISTS FDW_ERROR FDW_COLUMN_NAME_NOT_FOUND FDW_DYNAMIC_PARAMETER_VALUE_NEEDED FDW_FUNCTION_SEQUENCE_ERROR FDW_INCONSISTENT_DESCRIPTOR_INFORMATION FDW_INVALID_ATTRIBUTE_VALUE FDW_INVALID_COLUMN_NAME FDW_INVALID_COLUMN_NUMBER FDW_INVALID_DATA_TYPE FDW_INVALID_DATA_TYPE_DESCRIPTORS FDW_INVALID_DESCRIPTOR_FIELD_IDENTIFIER FDW_INVALID_HANDLE FDW_INVALID_OPTION_INDEX FDW_INVALID_OPTION_NAME FDW_INVALID_STRING_LENGTH_OR_BUFFER_LENGTH FDW_INVALID_STRING_FORMAT FDW_INVALID_USE_OF_NULL_POINTER FDW_TOO_MANY_HANDLES FDW_OUT_OF_MEMORY FDW_NO_SCHEMAS FDW_OPTION_NAME_NOT_FOUND FDW_REPLY_HANDLE FDW_SCHEMA_NOT_FOUND FDW_TABLE_NOT_FOUND FDW_UNABLE_TO_CREATE_EXECUTION FDW_UNABLE_TO_CREATE_REPLY FDW_UNABLE_TO_ESTABLISH_CONNECTION PLPGSQL_ERROR RAISE_EXCEPTION NO_DATA_FOUND TOO_MANY_ROWS ASSERT_FAILURE INTERNAL_ERROR DATA_CORRUPTED INDEX_CORRUPTED "},illegal:/:==|\W\s*\(\*|(^|\s)\$[a-z]|\{\{|[a-z]:\s*$|\.\.\.|TO:|DO:/,contains:[{className:"keyword",variants:[{begin:/\bTEXT\s*SEARCH\b/},{begin:/\b(PRIMARY|FOREIGN|FOR(\s+NO)?)\s+KEY\b/},{begin:/\bPARALLEL\s+(UNSAFE|RESTRICTED|SAFE)\b/},{begin:/\bSTORAGE\s+(PLAIN|EXTERNAL|EXTENDED|MAIN)\b/},{begin:/\bMATCH\s+(FULL|PARTIAL|SIMPLE)\b/},{begin:/\bNULLS\s+(FIRST|LAST)\b/},{begin:/\bEVENT\s+TRIGGER\b/},{begin:/\b(MAPPING|OR)\s+REPLACE\b/},{begin:/\b(FROM|TO)\s+(PROGRAM|STDIN|STDOUT)\b/},{begin:/\b(SHARE|EXCLUSIVE)\s+MODE\b/},{begin:/\b(LEFT|RIGHT)\s+(OUTER\s+)?JOIN\b/},{begin:/\b(FETCH|MOVE)\s+(NEXT|PRIOR|FIRST|LAST|ABSOLUTE|RELATIVE|FORWARD|BACKWARD)\b/},{begin:/\bPRESERVE\s+ROWS\b/},{begin:/\bDISCARD\s+PLANS\b/},{begin:/\bREFERENCING\s+(OLD|NEW)\b/},{begin:/\bSKIP\s+LOCKED\b/},{begin:/\bGROUPING\s+SETS\b/},{begin:/\b(BINARY|INSENSITIVE|SCROLL|NO\s+SCROLL)\s+(CURSOR|FOR)\b/},{begin:/\b(WITH|WITHOUT)\s+HOLD\b/},{begin:/\bWITH\s+(CASCADED|LOCAL)\s+CHECK\s+OPTION\b/},{begin:/\bEXCLUDE\s+(TIES|NO\s+OTHERS)\b/},{begin:/\bFORMAT\s+(TEXT|XML|JSON|YAML)\b/},{begin:/\bSET\s+((SESSION|LOCAL)\s+)?NAMES\b/},{begin:/\bIS\s+(NOT\s+)?UNKNOWN\b/},{begin:/\bSECURITY\s+LABEL\b/},{begin:/\bSTANDALONE\s+(YES|NO|NO\s+VALUE)\b/},{begin:/\bWITH\s+(NO\s+)?DATA\b/},{begin:/\b(FOREIGN|SET)\s+DATA\b/},{begin:/\bSET\s+(CATALOG|CONSTRAINTS)\b/},{begin:/\b(WITH|FOR)\s+ORDINALITY\b/},{begin:/\bIS\s+(NOT\s+)?DOCUMENT\b/},{begin:/\bXML\s+OPTION\s+(DOCUMENT|CONTENT)\b/},{begin:/\b(STRIP|PRESERVE)\s+WHITESPACE\b/},{begin:/\bNO\s+(ACTION|MAXVALUE|MINVALUE)\b/},{begin:/\bPARTITION\s+BY\s+(RANGE|LIST|HASH)\b/},{begin:/\bAT\s+TIME\s+ZONE\b/},{begin:/\bGRANTED\s+BY\b/},{begin:/\bRETURN\s+(QUERY|NEXT)\b/},{begin:/\b(ATTACH|DETACH)\s+PARTITION\b/},{begin:/\bFORCE\s+ROW\s+LEVEL\s+SECURITY\b/},{begin:/\b(INCLUDING|EXCLUDING)\s+(COMMENTS|CONSTRAINTS|DEFAULTS|IDENTITY|INDEXES|STATISTICS|STORAGE|ALL)\b/},{begin:/\bAS\s+(ASSIGNMENT|IMPLICIT|PERMISSIVE|RESTRICTIVE|ENUM|RANGE)\b/}]},{begin:/\b(FORMAT|FAMILY|VERSION)\s*\(/},{begin:/\bINCLUDE\s*\(/,keywords:"INCLUDE"},{begin:/\bRANGE(?!\s*(BETWEEN|UNBOUNDED|CURRENT|[-0-9]+))/},{begin:/\b(VERSION|OWNER|TEMPLATE|TABLESPACE|CONNECTION\s+LIMIT|PROCEDURE|RESTRICT|JOIN|PARSER|COPY|START|END|COLLATION|INPUT|ANALYZE|STORAGE|LIKE|DEFAULT|DELIMITER|ENCODING|COLUMN|CONSTRAINT|TABLE|SCHEMA)\s*=/},{begin:/\b(PG_\w+?|HAS_[A-Z_]+_PRIVILEGE)\b/,relevance:10},{begin:/\bEXTRACT\s*\(/,end:/\bFROM\b/,returnEnd:!0,keywords:{type:"CENTURY DAY DECADE DOW DOY EPOCH HOUR ISODOW ISOYEAR MICROSECONDS MILLENNIUM MILLISECONDS MINUTE MONTH QUARTER SECOND TIMEZONE TIMEZONE_HOUR TIMEZONE_MINUTE WEEK YEAR"}},{begin:/\b(XMLELEMENT|XMLPI)\s*\(\s*NAME/,keywords:{keyword:"NAME"}},{begin:/\b(XMLPARSE|XMLSERIALIZE)\s*\(\s*(DOCUMENT|CONTENT)/,keywords:{keyword:"DOCUMENT CONTENT"}},{beginKeywords:"CACHE INCREMENT MAXVALUE MINVALUE",end:e.C_NUMBER_RE,returnEnd:!0,keywords:"BY CACHE INCREMENT MAXVALUE MINVALUE"},{className:"type",begin:/\b(WITH|WITHOUT)\s+TIME\s+ZONE\b/},{className:"type",begin:/\bINTERVAL\s+(YEAR|MONTH|DAY|HOUR|MINUTE|SECOND)(\s+TO\s+(MONTH|HOUR|MINUTE|SECOND))?\b/},{begin:/\bRETURNS\s+(LANGUAGE_HANDLER|TRIGGER|EVENT_TRIGGER|FDW_HANDLER|INDEX_AM_HANDLER|TSM_HANDLER)\b/,keywords:{keyword:"RETURNS",type:"LANGUAGE_HANDLER TRIGGER EVENT_TRIGGER FDW_HANDLER INDEX_AM_HANDLER TSM_HANDLER"}},{begin:"\\b("+a+")\\s*\\("},{begin:"\\.("+r+")\\b"},{begin:"\\b("+r+")\\s+PATH\\b",keywords:{keyword:"PATH",type:i.replace("PATH ","")}},{className:"type",begin:"\\b("+r+")\\b"},{className:"string",begin:"'",end:"'",contains:[{begin:"''"}]},{className:"string",begin:"(e|E|u&|U&)'",end:"'",contains:[{begin:"\\\\."}],relevance:10},e.END_SAME_AS_BEGIN({begin:n,end:n,contains:[{subLanguage:["pgsql","perl","python","tcl","r","lua","java","php","ruby","bash","scheme","xml","json"],endsWithParent:!0}]}),{begin:'"',end:'"',contains:[{begin:'""'}]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,t,{className:"meta",variants:[{begin:"%(ROW)?TYPE",relevance:10},{begin:"\\$\\d+"},{begin:"^#\\w",end:"$"}]},{className:"symbol",begin:"<<\\s*[a-zA-Z_][a-zA-Z_0-9$]*\\s*>>",relevance:10}]}}})());return t.hljs=e}.apply(t,arguments)})})(this);var saveAs=saveAs||function(u){"use strict";if(typeof u==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var e=u.document,c=function(){return u.URL||u.webkitURL||u},f=e.createElementNS("http://www.w3.org/1999/xhtml","a"),h="download"in f,d=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},p=/constructor/i.test(u.HTMLElement)||u.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(u.setImmediate||u.setTimeout)(function(){throw e},0)},m="application/octet-stream",n=1e3*40,v=function(e){var t=function(){if(typeof e==="string"){c().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,n)},y=function(e,t,n){t=[].concat(t);var i=t.length;while(i--){var r=e["on"+t[i]];if(typeof r==="function"){try{r.call(e,n||e)}catch(e){a(e)}}}},_=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},i=function(t,e,n){if(!n){t=_(t)}var i=this,r=t.type,a=r===m,s,o=function(){y(i,"writestart progress write writeend".split(" "))},l=function(){if((g||a&&p)&&u.FileReader){var n=new FileReader;n.onloadend=function(){var e=g?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");var t=u.open(e,"_blank");if(!t)u.location.href=e;e=undefined;i.readyState=i.DONE;o()};n.readAsDataURL(t);i.readyState=i.INIT;return}if(!s){s=c().createObjectURL(t)}if(a){u.location.href=s}else{var e=u.open(s,"_blank");if(!e){u.location.href=s}}i.readyState=i.DONE;o();v(s)};i.readyState=i.INIT;if(h){s=c().createObjectURL(t);setTimeout(function(){f.href=s;f.download=e;d(f);o();v(s);i.readyState=i.DONE});return}l()},t=i.prototype,r=function(e,t,n){return new i(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=_(e)}return navigator.msSaveOrOpenBlob(e,t)}}t.abort=function(){};t.readyState=t.INIT=0;t.WRITING=1;t.DONE=2;t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null;return r}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define("FileSaver.js",[],function(){return saveAs})}define("file-saver",function(){});define("powa/utils/duration",["moment"],function(v){var y={nodiff:"0",year:"year",years:"years",month:"month",months:"months",day:"day",days:"days",hour:"hour",hours:"hours",minute:"min",minutes:"min",second:"s",seconds:"s",millisecond:"ms",milliseconds:"ms",microsecond:"s",microseconds:"s",delimiter:" "};v.fn.preciseDiff=function(e,t){return v.preciseDiff(this,e,t)};v.preciseDiff=function(e,t,n){var i=v(e),r=v(t);if(i.isAfter(r)||i.isSame(r)&&i._i>r._i){var a=i;i=r;r=a}var s=r.year()-i.year();var o=r.month()-i.month();var l=r.date()-i.date();var u=r.hour()-i.hour();var c=r.minute()-i.minute();var f=r.second()-i.second();var h=r.millisecond()-i.millisecond();var d=0;if(typeof i._i=="number"&&typeof r._i=="number"){d=Math.round(1e3*(r._i-Math.floor(r))-1e3*(i._i-Math.floor(i)))}else{if(i.isSame(r)){return y.nodiff}}if(d<0){d=1e3+d;h--}if(h<0){h=1e3+f;f--}if(f<0){f=60+f;c--}if(c<0){c=60+c;u--}if(u<0){u=24+u;l--}if(l<0){var p=v(r.year()+"-"+(r.month()+1),"YYYY-MM").subtract("months",1).daysInMonth();if(p<i.date()){l=p+l+(i.date()-p)}else{l=p+l}o--}if(o<0){o=12+o;s--}function g(e,t){return e+" "+y[t+(e===1?"":"s")]}var m=[];if(s){m.push(g(s,"year"))}if(o){m.push(g(o,"month"))}if(l){m.push(g(l,"day"))}if(u){m.push(g(u,"hour"))}if(c){m.push(g(c,"minute"))}if(f){m.push(g(f,"second"))}if(h){m.push(g(h,"millisecond"))}if(d){m.push(g(d,"microsecond"))}if(m.length==0){return"0"}if(n){m=m.slice(0,2)}return m.join(y.delimiter)}});(function(e){define("backgrid-filter",["backgrid"],function(){return function(){(function(e,t){if(typeof exports=="object"){(function(){var e;try{e=require("lunr")}catch(e){}module.exports=t(require("underscore"),require("backbone"),require("backgrid"),e)})()}else{t(e._,e.Backbone,e.Backgrid,e.lunr)}})(this,function(a,r,e,i){"use strict";var s=e.Extension.ServerSideFilter=r.View.extend({tagName:"form",className:"backgrid-filter form-search",template:a.template('<span class="search">&nbsp;</span><input type="search" <% if (placeholder) { %> placeholder="<%- placeholder %>" <% } %> name="<%- name %>" /><a class="clear" data-backgrid-action="clear" href="#">&times;</a>',null,{variable:null}),events:{"keyup input[type=search]":"showClearButtonMaybe","click a[data-backgrid-action=clear]":"clear",submit:"search"},name:"q",placeholder:null,initialize:function(e){s.__super__.initialize.apply(this,arguments);this.name=e.name||this.name;this.placeholder=e.placeholder||this.placeholder;this.template=e.template||this.template;var t=this.collection,n=this;if(r.PageableCollection&&t instanceof r.PageableCollection&&t.mode=="server"){t.queryParams[this.name]=function(){return n.searchBox().val()||null}}},showClearButtonMaybe:function(){var e=this.clearButton();var t=this.searchBox().val();if(t)e.show();else e.hide()},searchBox:function(){return this.$el.find("input[type=search]")},clearButton:function(){return this.$el.find("a[data-backgrid-action=clear]")},search:function(e){if(e)e.preventDefault();var t={};var n=this.searchBox().val();if(n)t[this.name]=n;var i=this.collection;if(r.PageableCollection&&i instanceof r.PageableCollection){i.getFirstPage({data:t,reset:true,fetch:true})}else i.fetch({data:t,reset:true})},clear:function(e){if(e)e.preventDefault();this.searchBox().val(null);this.showClearButtonMaybe();var t=this.collection;if(r.PageableCollection&&t instanceof r.PageableCollection){t.getFirstPage({reset:true,fetch:true})}else t.fetch({reset:true})},render:function(){this.$el.empty().append(this.template({name:this.name,placeholder:this.placeholder,value:this.value}));this.showClearButtonMaybe();this.delegateEvents();return this}});var n=e.Extension.ClientSideFilter=s.extend({events:a.extend({},s.prototype.events,{"click a[data-backgrid-action=clear]":function(e){e.preventDefault();this.clear()},"keydown input[type=search]":"search",submit:function(e){e.preventDefault();this.search()}}),fields:null,wait:149,initialize:function(e){n.__super__.initialize.apply(this,arguments);this.fields=e.fields||this.fields;this.wait=e.wait||this.wait;this._debounceMethods(["search","clear"]);var t=this.collection=this.collection.fullCollection||this.collection;var i=this.shadowCollection=t.clone();this.listenTo(t,"add",function(e,t,n){i.add(e,n)});this.listenTo(t,"remove",function(e,t,n){i.remove(e,n)});this.listenTo(t,"sort",function(e){if(!this.searchBox().val())i.reset(e.models)});this.listenTo(t,"reset",function(e,t){t=a.extend({reindex:true},t||{});if(t.reindex&&t.from==null&&t.to==null){i.reset(e.models)}})},_debounceMethods:function(e){if(a.isString(e))e=[e];this.undelegateEvents();for(var t=0,n=e.length;t<n;t++){var i=e[t];var r=this[i];this[i]=a.debounce(r,this.wait)}this.delegateEvents()},makeRegExp:function(e){return new RegExp(e.trim().split(/\s+/).join("|"),"i")},makeMatcher:function(e){var r=this.makeRegExp(e);return function(e){var t=this.fields||e.keys();for(var n=0,i=t.length;n<i;n++){if(r.test(e.get(t[n])+""))return true}return false}},search:function(){var e=a.bind(this.makeMatcher(this.searchBox().val()),this);var t=this.collection;if(t.pageableCollection)t.pageableCollection.getFirstPage({silent:true});t.reset(this.shadowCollection.filter(e),{reindex:false})},clear:function(){this.searchBox().val(null);this.showClearButtonMaybe();var e=this.collection;if(e.pageableCollection)e.pageableCollection.getFirstPage({silent:true});e.reset(this.shadowCollection.models,{reindex:false})}});var o=e.Extension.LunrFilter=n.extend({ref:"id",fields:null,initialize:function(e){o.__super__.initialize.apply(this,arguments);this.ref=e.ref||this.ref;var t=this.collection=this.collection.fullCollection||this.collection;this.listenTo(t,"add",this.addToIndex);this.listenTo(t,"remove",this.removeFromIndex);this.listenTo(t,"reset",this.resetIndex);this.listenTo(t,"change",this.updateIndex);this.resetIndex(t)},resetIndex:function(e,t){t=a.extend({reindex:true},t||{});if(t.reindex){var n=this;this.index=i(function(){a.each(n.fields,function(e,t){this.field(t,e);this.ref(n.ref)},this)});e.each(function(e){this.addToIndex(e)},this)}},addToIndex:function(e){var t=this.index;var n=e.toJSON();if(t.documentStore.has(n[this.ref]))t.update(n);else t.add(n)},removeFromIndex:function(e){var t=this.index;var n=e.toJSON();if(t.documentStore.has(n[this.ref]))t.remove(n)},updateIndex:function(e){var t=e.changedAttributes();if(t&&!a.isEmpty(a.intersection(a.keys(this.fields),a.keys(t)))){this.index.update(e.toJSON())}},search:function(){var e=this.collection;if(!this.searchBox().val()){e.reset(this.shadowCollection.models,{reindex:false});return}var t=this.index.search(this.searchBox().val());var n=[];for(var i=0;i<t.length;i++){var r=t[i];n.push(this.shadowCollection.get(r.ref))}if(e.pageableCollection)e.pageableCollection.getFirstPage({silent:true});e.reset(n,{reindex:false})}})})}.apply(e,arguments)})})(this);(function(e){define("backgrid-paginator",["backgrid"],function(){return function(){(function(e,t){if(typeof exports=="object"){module.exports=t(require("underscore"),require("backbone"),require("backgrid"),require("backbone-pageable"))}else{t(e._,e.Backbone,e.Backgrid)}})(this,function(l,e,t){"use strict";var n=t.Extension.PageHandle=e.View.extend({tagName:"li",events:{"click a":"changePage"},title:l.template("Page <%- label %>",null,{variable:null}),isRewind:false,isBack:false,isForward:false,isFastForward:false,initialize:function(e){var t=this.collection;var n=t.state;var i=n.currentPage;var r=n.firstPage;var a=n.lastPage;l.extend(this,l.pick(e,["isRewind","isBack","isForward","isFastForward"]));var s;if(this.isRewind)s=r;else if(this.isBack)s=Math.max(r,i-1);else if(this.isForward)s=Math.min(a,i+1);else if(this.isFastForward)s=a;else{s=+e.pageIndex;s=r?s+1:s}this.pageIndex=s;this.label=(e.label||(r?s:s+1))+"";var o=e.title||this.title;this.title=l.isFunction(o)?o({label:this.label}):o},render:function(){this.$el.empty();var e=document.createElement("a");e.href="#";if(this.title)e.title=this.title;e.innerHTML=this.label;this.el.appendChild(e);var t=this.collection;var n=t.state;var i=n.currentPage;var r=this.pageIndex;if(this.isRewind&&i==n.firstPage||this.isBack&&!t.hasPrevious()||this.isForward&&!t.hasNext()||this.isFastForward&&(i==n.lastPage||n.totalPages<1)){this.$el.addClass("disabled")}else if(!(this.isRewind||this.isBack||this.isForward||this.isFastForward)&&n.currentPage==r){this.$el.addClass("active")}this.delegateEvents();return this},changePage:function(e){e.preventDefault();var t=this.$el,n=this.collection;if(!t.hasClass("active")&&!t.hasClass("disabled")){if(this.isRewind)n.getFirstPage();else if(this.isBack)n.getPreviousPage();else if(this.isForward)n.getNextPage();else if(this.isFastForward)n.getLastPage();else n.getPage(this.pageIndex,{reset:true})}return this}});var i=t.Extension.Paginator=e.View.extend({className:"backgrid-paginator",windowSize:10,slideScale:.5,controls:{rewind:{label:"",title:"First"},back:{label:"",title:"Previous"},forward:{label:"",title:"Next"},fastForward:{label:"",title:"Last"}},renderIndexedPageHandles:true,pageHandle:n,goBackFirstOnSort:true,initialize:function(e){var t=this;t.controls=l.defaults(e.controls||{},t.controls,i.prototype.controls);l.extend(t,l.pick(e||{},"windowSize","pageHandle","slideScale","goBackFirstOnSort","renderIndexedPageHandles"));var n=t.collection;t.listenTo(n,"add",t.render);t.listenTo(n,"remove",t.render);t.listenTo(n,"reset",t.render);t.listenTo(n,"backgrid:sorted",function(){if(t.goBackFirstOnSort)n.getFirstPage({reset:true})})},slideMaybe:function(e,t,n,i,r){return Math.round(n%i/i)},slideThisMuch:function(e,t,n,i,r){return~~(i*r)},_calculateWindow:function(){var e=this.collection;var t=e.state;var n=t.firstPage;var i=+t.lastPage;i=Math.max(0,n?i-1:i);var r=Math.max(t.currentPage,t.firstPage);r=n?r-1:r;var a=this.windowSize;var s=this.slideScale;var o=Math.floor(r/a)*a;if(r<=i-this.slideThisMuch()){o+=this.slideMaybe(n,i,r,a,s)*this.slideThisMuch(n,i,r,a,s)}var l=Math.min(i+1,o+a);return[o,l]},makeHandles:function(){var r=[];var a=this.collection;var e=this._calculateWindow();var t=e[0],n=e[1];if(this.renderIndexedPageHandles){for(var i=t;i<n;i++){r.push(new this.pageHandle({collection:a,pageIndex:i}))}}var s=this.controls;l.each(["back","rewind","forward","fastForward"],function(e){var t=s[e];if(t){var n={collection:a,title:t.title,label:t.label};n["is"+e.slice(0,1).toUpperCase()+e.slice(1)]=true;var i=new this.pageHandle(n);if(e=="rewind"||e=="back")r.unshift(i);else r.push(i)}},this);return r},render:function(){this.$el.empty();if(this.handles){for(var e=0,t=this.handles.length;e<t;e++){this.handles[e].remove()}}var n=this.handles=this.makeHandles();var i=document.createElement("ul");for(var e=0;e<n.length;e++){i.appendChild(n[e].render().el)}this.el.appendChild(i);return this}})})}.apply(e,arguments)})})(this);define("powa/views/GridView",["jquery","foundation/foundation.tooltip","backbone","powa/views/WidgetView","powa/models/Grid","backgrid","moment","tpl!powa/templates/grid.html","powa/utils/size","highlight","powa/utils/timeurls","file-saver","powa/utils/duration","backgrid-filter","backgrid-paginator"],function(e,t,n,i,r,a,s,o,l,u,c,f){var h={fromRaw:function(e){return s(parseFloat(e,10)).preciseDiff(s(0),true)}};var d=a.Cell.extend({initialize:function(e){d.__super__.initialize.apply(this,arguments);var t=$("<div>");var n=a.resolveNameToClass(this.cell||"string","Cell");this.cell=new n($.extend({},e,{$el:t,tagName:"div"}))},render:function(){var e=this.cell.render(),t=this.model,n=this.$el;if(this.column.get("url_attr")){var i=c.parseUrl(window.location.search);n=$("<a>").attr("data-url-has-params","").attr("href",t.get(this.column.get("url_attr")));n.get(0).search=$.param(i,true);this.$el.append(n)}n.append(e.$el);return this}});var p=a.Header.extend({initialize:function(e){this.toprow=e.toprow;this.columns=e.columns;if(this.toprow){this.toprow=new n.Collection(e.toprow);var t=0}p.__super__.initialize.apply(this,arguments)},render:function(){if(this.toprow){var n=$("<tr>",{class:"toprow"});this.toprow.each(function(e){var t=$("<th>").attr("colspan",e.get("colspan")||1).append($("<span>").attr("title",e.get("name")).html(e.get("name")));t.addClass("renderable");if(e.get("merge")){t.addClass("merge")}n.append(t)});this.$el.append(n)}this.$el.append(this.row.render().$el);return this}});a.Extension.HtmlCell=a.Cell.extend({className:"html",render:function(){this.$el.empty();var e=this.model,t=e.get(this.column.get("name")),n=t.replace(/^\s+/g,"").replace(/\n\s+/,"\n");this.$el.append(n);this.delegateEvents();return this}});a.Extension.DurationCell=a.Cell.extend({className:"duration-cell",formatter:h});a.Extension.BoolCell=a.Cell.extend({className:"boolean-cell",render:function(){this.$el.empty();raw=this.model.get(this.column.get("name"));if(raw===undefined||raw===null)this.$el.html('<i class="fi-prohibited"></i>');else if(raw)this.$el.html('<i class="fi-check ok"></i>');else this.$el.html('<i class="fi-x ko"></i>');return this}});a.Extension.SizeCell=a.Cell.extend({className:"size-cell",formatter:l.SizeFormatter});a.Extension.SizerateCell=a.Cell.extend({className:"sizerate-cell",formatter:new l.SizeFormatter({suffix:"ps"})});a.Extension.QueryCell=a.Cell.extend({className:"query-cell",render:function(){this.$el.empty();var e=this.model,t=e.get(this.column.get("name")),n=t.replace(/^\s+/g,"").replace(/\n\s*/g," "),i=this.column.get("max_length"),r=n.length>i,a=r?n.substring(0,i)+"":n;code_elem=$("<pre>").addClass("has-tip").addClass("tip-top").attr("data-tooltip","").html(u.highlight(a,{language:"pgsql"}).value),base=this.$el;if(n===undefined){return this}base.append(code_elem);code_elem.attr("title","<pre>"+u.highlight(t,{language:"pgsql"}).value+"</pre>");this.$el.foundation("tooltip","reflow");this.delegateEvents();return this}});a.Extension.TextCell=a.Cell.extend({className:"text-cell"});var g=a.HeaderCell.extend({onClick:function(e){e.preventDefault();var t=this.column;var n=this.collection;var i="backgrid:sort";var r=a.callByNeed(t.sortable(),t,this.collection);if(r){if(t.get("direction")==="descending")n.trigger(i,t,"ascending");else n.trigger(i,t,"descending")}},initialize:function(e){g.__super__.initialize.apply(this,arguments);var t=this.column.get("cell").prototype.cell;var n=a.resolveNameToClass(t||"string","Cell");var i=n.prototype.className;this.$el.addClass(i)}});return i.extend({template:o,tag:"div",model:r,typname:"grid",events:{"click .export_csv a":"exportCsv"},initialize:function(){var e=this;this.grid=new a.Grid({columns:this.getColumnDefinitions(),collection:this.model.get("collection"),header:p,toprow:this.model.get("toprow")});this;this.grid.body.emptyText="No data";this.filter=new a.Extension.ClientSideFilter({collection:this.model.get("collection")});this.paginator=new a.Extension.Paginator({collection:this.model.get("collection")});this.listenTo(this.model,"widget:needrefresh",this.update);this.listenTo(this.model,"widget:dataload-failed",this.fail)},exportCsv:function(){var e=_.pluck(this.grid.columns.models,"attributes"),r=_.indexBy(e,"name"),t=_.pluck(e,"label"),n=_.pluck(e,"name");var i=t.join(",")+"\n";i+=this.model.get("collection").fullCollection.map(function(i){return _.map(n,function(e){var t=r[e].cell,n=t.prototype&&t.prototype.formatter;value=n&&n.fromRaw?n.fromRaw(i.get(e),i):i.get(e);value=value.toString();if(value.indexOf(",")!=-1||value.indexOf("\n")!=-1){value=value.replace(/"/g,'""');value='"'+value+'"'}return value}).join(",")}).join("\n");var a=new Blob([i],{type:"text/csv;charset=utf-8"});saveAs(a,"export_powa.csv")},getColumnDefinitions:function(){var t=this.model.get("columns").slice();this.model.get("metrics").each(function(e){t.push($.extend({},e.attributes,{editable:false,headerCell:g,cell:d.extend({cell:e.get("type")})}))});_.each(t,function(e){if(e.cell===undefined){e.cell=d.extend({cell:e.type})}if(e.editable===undefined){e.editable=false}});return t},update:function(){this.filter.search();this.hideload();this.trigger("widget:update")},render:function(){this.$el.html(this.template(this.model.toJSON()));var e=this.model.get("url");if(e!=undefined){var t=this.model.get("title");this.$el.find(".title").append('<a href="'+e+'"'+'target="_blank">'+'<i class="fi-link" title="See the documentation"></i>'+"</a>")}this.$el.find(".backgrid-container").append(this.grid.render().el);this.$el.find(".grid_filter").append(this.filter.render().el);this.$el.find(".grid_paginator").append(this.paginator.render().el);return this}},{})});define("powa/models/Wizard",["backbone","powa/models/DataSourceCollection","jquery","powa/views/GridView","highlight","powa/models/Widget"],function(t,n,e,i,a,r){var x=t.Collection.extend({comparator:function(e,t){if(e.get("relid")!=t.get("relid")){return e.get("relid")-t.get("relid")}if(e.get("attnum")!=t.get("attnum")){return e.get("attnum")-t.get("attnum")}if(e.get("opno")!=t.get("opno")){return e.get("opno")-t.get("opno")}return 0}});var s=t.Model.extend({get:function(e){if(typeof this[e]=="function"){return this[e]()}return t.Model.prototype.get.call(this,e)}});var o=s.extend({initialize:function(e){this.set("quals",new x);this.set("contained",new f);this.set("trashedQuals",new x);this.listenTo(this.get("quals"),"add",this.qualupdate,this);if(e&&e.quals){this.get("quals").set(e.quals)}},qualupdate:function(e,t){if(t.internal){return}var n=_.uniq(this.get("quals").pluck("relid"));if(n.length>1){throw"A qual should not span more than one table"}this.set("relid",n[0]);this.set("relname",this.get("quals").models[0].get("relname"));this.trashQuals()},relfqn:function(){return this.get("nspname")+"."+this.get("relname")},uniqAttnums:function(){return _.uniq(this.get("quals").map(function(e){return e.get("attnum")}))},trashQuals:function(){quals=this.get("quals");var t={};quals.each(function(e){_.each(_.keys(e.get("amops")),function(e){t[e]=(t[e]||0)+1})});var n=_.max(_.pairs(t),function(e){return e[1]})[0];var e=quals.groupBy(function(e){return e.get("amops")[n]?"keep":"trash"});this.get("trashedQuals").set(e.trash,{internal:true});this.get("quals").set(e.keep,{internal:true})},repr:function(){var e="WHERE ",r=this.get("quals").size()>0;if(r){e+=_.uniq(this.get("quals").map(function(e){return e.get("label")},this)).join(" AND ")}e="<pre>"+a.highlight(e,{language:"pgsql"}).value+"</pre>";var t=this.get("trashedQuals").map(function(e,t){var n="<strike><pre>";var i=e.get("label");if(t==0&&r){i=" AND "+i}if(t<this.get("trashedQuals").length-1){i+=" AND "}i=a.highlight("WHERE "+i,{language:"pgsql"}).value;i=i.substring(i.indexOf("</span> ")+8);n+=i+"</pre></strike>";return n},this).join(" AND ");e=e+t;e=e+this.get("contained").map(function(e){return e.repr()},this).join("");return e},merge:function(e){this.set("queries",_.uniq(this.get("queries").concat(e.get("queries"))));this.set("queryids",_.uniq(this.get("queryids").concat(e.get("queryids"))));var t=_.union(this.get("quals").models,e.get("quals").models);this.get("quals").set(t)}});var l=s.extend({ddl:function(){var e=this.get("ams")[0];var t=this.get("node");var n="CREATE INDEX ON "+this.get("node").get("relfqn");if(this.get("ams").indexOf("btree")>0){e=""}else{e=" USING "+e}n+=e+"(";var i=this.get("attnums");var r=_.uniq(_.map(_.sortBy(this.get("node").get("quals").map(function(e){var t=e.get("attnum");var n=e.get("attname");return[i.indexOf(t),n]}),function(e){return e[0]}),function(e){return e[1]}));n+=r.join(",")+")";return n},nbqueries:function(){return this.get("queryids").length},quals:function(){return this.get("node").get("repr")}});var u=s.extend({ddl:function(){return this.get("_ddl")},error:function(){return this.get("_error")}});var c=s.extend({query:function(){return this.get("_query")},used:function(){return this.get("_gain")>0},gain:function(){return this.get("_gain")+"%"}});var f=t.Collection.extend({model:o});var h=t.Collection.extend({model:l});var d=t.Collection.extend({model:u});var p=t.Collection.extend({model:c});var T=function(e){return""+e.get("relid")+"/"+e.get("attnum")};var g={scoreNode:function(e){return _.uniq(e.get("quals").map(function(e){return e.get("attnum")})).length},scorePath:function(e){return _.reduce(e,function(e,t){return e+t.get("score")},0)}};return r.extend({typname:"wizard",initialize:function(){this.set("stage","Starting wizard...");this.set("progress",0);this.set("indexes",new h);this.set("indexescheckserror",new d);this.set("indexeschecks",new p);this.set("unoptimizable",new x);this.listenTo(this.get("datasource"),"metricgroup:dataload",this.update,this);this.listenTo(this.get("datasource"),"metricgroup:startload",this.startload,this);this.set("scoringMethod",g)},startload:function(){this.trigger("wizard:start");this.trigger("widget:update_progress","Fetching most executed quals...",0)},launchOptimization:function(e){this.get("datasource").set("enabled",true);this.get("datasource").update(e.from_date,e.to_date);this.get("indexes").set([]);this.get("indexescheckserror").set([]);this.get("indexeschecks").set([]);this.get("unoptimizable").set([])},computeLinks:function(e){var t=[];var e=e.models;for(var n=0;n<e.length;n++){var i=e[n];this.trigger("widget:update_progress","Building links  for node "+(n+1)+" out of "+e.length,(20+(n+1)/e.length*10).toFixed(2));if(!i.get("quals").some(function(e){return _.keys(e.get("amops")).length>0})){t.push(i);continue}for(var r=0;r<n;r++){var a=e[r];if(!a.get("quals").some(function(e){return _.keys(e.get("amops")).length>0})){t.push(a);continue}t=_.uniq(t.concat(this.make_links(i,a)))}}_.each(e,function(e){e.get("contained").set(_.difference(e.get("contained").models,t))});return[_.difference(e,t),t]},make_links:function(e,t){var n=0,i=0,r=e.get("quals").models,a=t.get("quals").models;var s=[];var o={},l={};var u,c;var f=[];var h=[],d=[];r=new x(_.uniq(r,false,function(e){return[e.get("attnum"),e.get("relid")].join(".")})).models;a=new x(_.uniq(a,false,function(e){return[e.get("attnum"),e.get("relid")].join(".")})).models;if(e.get("relid")!=t.get("relid")){return[]}while(true){if(n>=r.length||i>=a.length){for(var p=n;p<r.length;p++){h.push(r[p])}for(var p=i;p<a.length;p++){d.push(a[p])}break}var g=r[n],m=a[i],v=T(g),y=T(m);if(o[v]===undefined){o[v]=false}if(l[y]===undefined){l[y]=false}c=m.get("relid");var w=false;if(g.get("relid")==m.get("relid")&&g.get("attnum")==m.get("attnum")){var b=_.filter(_.keys(g.get("amops")),function(e){return m.get("amops")[e]!=undefined});if(b.length>0){s.push({relid:g.get("relid"),attnum:g.get("attnum"),relname:g.get("relname"),attname:g.get("attname"),indexams:b,q1_idx:n,q2_idx:i});w=true;o[v]=true;l[y]=true;n++;i++;continue}}if(!w){if(e.get("quals").comparator.call(g,g,m)>0){d.push(m);i++}else{h.push(g);n++}}}var E=u!=undefined&&c!=undefined&&u==c;s=_.uniq(s,function(e){return e.attnum});if(h.length==0&&d.length==0){e.merge(t);return[t]}if(d.length==0){e.get("contained").add(t)}if(h.length==0){t.get("contained").add(e)}return[]},update:function(e,i,r){var a=_.size(e);this.set("from_date",i);this.set("to_date",r);if(a==0){this.trigger("widget:update_progress","No quals require optimization!",100);this.trigger("wizard:end");return}else{this.trigger("widget:update_progress","Building nodes for "+a+" quals ...",0)}var s=new f;_.each(e,function(e,t){var n=new o({label:e.where_clause,type:"qual",quals:e.quals,from_date:i,to_date:r,queries:e.queries,queryids:e.queryids,relid:e.relid,relname:e.relname,nspname:e.nspname,links:{},id:e.qualid});s.add(n);this.trigger("widget:update_progress","Building nodes for "+a+" quals ...",10+(10*t/a).toFixed(2))},this);result=this.computeLinks(s);this.get("unoptimizable").set(result[1]);this.solve(result[0]);this.checkSolution();this.trigger("wizard:end")},checkSolution:function(){if(!this.get("has_hypopg")){this.trigger("widget:update_progress","Install hypopg for solution validation",100);return}if(this.get("indexes").size()==0){this.trigger("widget:update_progress","No indexes to suggest!",100);return}this.trigger("widget:update_progress","Checking solution with hypopg...",60);var n=[],i=[];this.get("indexes").each(function(e){var t=_.clone(e.get("node").attributes);t["ams"]=e.get("ams");t["ddl"]=e.get("ddl");if(t["ams"].length>0){n.push(t)}i=_.uniq(i.concat(e.get("queryids")))});var r=this;e.ajax({url:"/server/"+this.get("server")+"/database/"+this.get("database")+"/suggest/",data:JSON.stringify({queryids:i,indexes:n,from_date:this.get("from_date"),to_date:this.get("to_date")}),type:"POST",contentType:"application/json"}).success(function(e){_.each(e["inderrors"],function(e,t){r.get("indexescheckserror").add({_ddl:t,_error:e})});_.each(e["plans"],function(e,t){r.get("indexeschecks").add({_query:e.query,_gain:e.gain_percent})});r.trigger("widget:update_progress","Done !",100)})},solve:function(r){var e=r;var a={};var s=function(e){return _.map(e,function(e){return e.get("id")}).join(",")};var o=this;var l=function(n){var e={id:n.get("id"),score:n.get("score"),nodes:[n]};var i=[];n.get("contained").each(function(e){var t=l(e);_.each(t,function(e){var t=_.clone(e.nodes);t.push(n);i.push({nodes:t,id:s(t),score:o.get("scoringMethod").scorePath(r)})})},this);i.push(e);return i};_.each(e,function(e){e.set("score",this.get("scoringMethod").scoreNode(e))},this);_.each(e,function(e,t){this.trigger("widget:update_progress","Building pathes for node "+t+" out of "+r.length+" nodes ...",30+10*(t/r.length).toFixed(2));_.each(l(e),function(e){a[e.id]=e})},this);var t=0;var u=0;var c=_.keys(a).length;while(_.values(a).length>0&&t<1e4){t++;var f=_.max(_.pairs(a),function(e){return e[1].score})[1];var n=f.nodes.slice(-1)[0];var h=[];var d=[];o.trigger("widget:update_progress","Optimizing  "+u+" out of "+c+" pathes ...",40+20*(u/c).toFixed(2));_.each(f.nodes,function(r,e){var t=r.get("quals").pluck("attnum");var n=_.difference(t,h);var i=s(f.nodes.slice(0,e+1));h=h.concat(n);_.each(_.pairs(a),function(e){var t=e[0];var n=e[1];if(n.nodes.indexOf(r)>-1){var i=a[t];u++;if(i){o.trigger("widget:update_progress","Optimizing  "+u+" out of "+c+" pathes ...",40+20*(u/c).toFixed(2))}delete a[t]}});d=_.uniq(d.concat(r.get("queryids")))});var i=_.flatten(f.nodes.slice(-1)[0].get("quals").map(function(e){return _.keys(e.get("amops"))}));i=_.uniq(i);this.get("indexes").add({node:f.nodes.slice(-1)[0],path:f.nodes,attnums:h,queryids:d,ams:i,stub:true})}}},{fromJSON:function(e){var t=n.get_instance();e.datasource=t.findWhere({name:e.datasource});if(e.datasource===undefined){throw"The content source could not be found."}return new this(e)}})});define("powa/models/Graph",["backbone","powa/models/DataSourceCollection","powa/models/MetricCollection","powa/models/Widget"],function(e,n,r,t){return t.extend({typname:"graph",initialize:function(){var e=this;this.hasloading=0;this.listenTo(this.get("metrics"),"change:series",e.update);this.listenTo(this.get("metrics"),"metric:configchanges",e.configchanges);this.listenTo(this.get("metrics"),"metric:startload",function(){e.hasloading+=1})},update:function(){var r=[];var e=this;e.hasloading-=1;if(e.hasloading!=0){return}e.get("metrics").each(function(i){var e=i.get("series");if(e!=undefined){$.each(e,function(e,t){var n=$.extend({},i.attributes,t);r.push(n)})}});this.trigger("widget:needrefresh",r)},configchanges:function(e){this.trigger("widget:configchanges",e)}},{fromJSON:function(e){var i=n.get_instance(),t=e.metrics.map(function(e){var e,t=e.split("."),n=i.findWhere({name:t[0]});if(n===undefined){throw"The metric group "+t[0]+" could not be found."}e=n.get("metrics").findWhere({name:t[1]});if(e===undefined){throw"The metric "+t[1]+" could not be found in group "+t[1]}return e});e.metrics=new r(t);return new this(e)}})});define("powa/models/Dashboard",["backbone","powa/models/DataSourceCollection","powa/models/Content","powa/models/Grid","powa/models/Widget","powa/models/Wizard","powa/models/Graph","powa/views/DashboardView"],function(t,e,n,i,s,r,a,o){return s.extend({typname:"dashboard",initialize:function(){this.data_sources=e.get_instance()},makeView:function(e){e.model=this;return new o(e)}},{fromJSON:function(e){var r=new t.Collection;var a=this;_.each(e.widgets,function(e,i){_.each(e,function(e,t){var n;e.x=t;e.y=i;e.dashboard=a;n=s.fromJSON(e);n.set("x",t);n.set("y",i);r.add(n)})});return new this({title:e.title,widgets:r})}})});define("powa/utils/message",[],function(){return{add_message:function(e,t){$("#messages").append('<div data-alert class="alert-box '+e+'">'+"<ul><li>"+t+"</li></ul>"+'<a href="#" class="close">&times;</a>'+"</div>");$(document).foundation("alert","reflow")},format_config_change:function(e){var t="<br /> detect on "+moment.unix(e["ts"]).format("lll");if(e["kind"]=="global"){data=e["data"];none='<i class="fi-prohibited"></i>';txt='<i class="fi-info"></i> <b><u>'+data["name"]+"</u></b> changed:<br />"+"<b>"+(data["prev_is_dropped"]?none:data["prev_val"])+"</b>"+" to "+"<b>"+(data["is_dropped"]?none:data["new_val"])+"</b>"+t;return txt}else if(e["kind"]=="rds"){data=e["data"];none='<i class="fi-prohibited"></i>';db="";if(data["datname"])db="<br />on database <b>"+data["datname"]+"</b>";role="";if(data["setrole"]!=0)role="<br />for role <b>"+data["setrole"]+"</b>";txt='<i class="fi-info"></i> <b><u>'+data["name"]+"</u></b> changed:<br />"+"<b>"+(data["prev_is_dropped"]?none:data["prev_val"])+"</b>"+" to "+"<b>"+(data["is_dropped"]?none:data["new_val"])+"</b>"+db+role+t;return txt}else if(e["kind"]=="reboot"){return'<i class="fi-alert"></i>'+"<b> Instance restarted!</b>"+t}else{return'<i class="fi-alert"></i> Unknown event "'+e["kind"]+'":<br />'+e["data"]}}}});define("powa/models/MetricGroup",["backbone","powa/models/DataSource","powa/models/Metric","powa/models/MetricCollection","powa/utils/message"],function(e,t,n,i,r){return t.extend({initialize:function(){},update:function(t,n){var s=this.get("grouper",null),o=this,l=this.get("xaxis");this.trigger("metricgroup:startload");o.get("metrics").each(function(e){e.trigger("metric:startload")});$.ajax({url:this.getUrl(t,n),type:"GET"}).done(function(e){var a={};o.get("metrics").each(function(e){a[e.get("name")]={}});o.trigger("metricgroup:dataload",e.data,t,n);if(e.messages!==undefined){$.each(e.messages,function(t,n){$.each(n,function(e){msg=r.add_message(t,n[e]);$("#messages").append(msg)})})}$.each(e.data,function(){var i=this,r=this[s]||"";o.get("metrics").each(function(e){var t=a[e.get("name")],n=t[r];if(n===undefined){n=t[r]={metric:e,id:e.get("name")+r,name:e.label_template({group:r}),data:[]}}if(i[l]===undefined){throw"Data is lacking for xaxis. Did you include "+l+" column in your query ?"}n.data.push($.extend({},{x:i[l],y:i[e.get("yaxis")]},i))})});o.get("metrics").each(function(e){var t=a[e.get("name")];if(!$.isEmptyObject(t)){e.set("series",t)}else{e.set("series",new Date)}})}).fail(function(e){var t=e.status!=500?e.responseText:"";o.trigger("metricgroup:dataload-failed",t)})},update_timeline:function(t){var e=this;e.get("metrics").each(function(e){e.trigger("metric:configchanges",t)})}},{fromJSON:function(e){var t=e.metrics.map(function(e){return n.fromJSON(e)});e.metrics=new i(t);return new this(e)}})});define("powa/models/ContentSource",["powa/models/DataSource"],function(e){return e.extend({update:function(e,t){var n=this;$.ajax({url:this.getUrl(e,t),type:"GET"}).done(function(e){n.trigger("contentsource:dataload",e)}).fail(function(e){var t=e.status!=500?e.responseText:"";n.trigger("contentsource:dataload-failed",t)})}},{fromJSON:function(e){return new this(e)}})});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define("popper",t):e.Popper=t()})(this,function(){"use strict";var e=typeof window!=="undefined"&&typeof document!=="undefined";var t=["Edge","Trident","Firefox"];var n=0;for(var i=0;i<t.length;i+=1){if(e&&navigator.userAgent.indexOf(t[i])>=0){n=1;break}}function r(e){var t=false;return function(){if(t){return}t=true;window.Promise.resolve().then(function(){t=false;e()})}}function a(e){var t=false;return function(){if(!t){t=true;setTimeout(function(){t=false;e()},n)}}}var s=e&&window.Promise;var o=s?r:a;function l(e){var t={};return e&&t.toString.call(e)==="[object Function]"}function w(e,t){if(e.nodeType!==1){return[]}var n=e.ownerDocument.defaultView;var i=n.getComputedStyle(e,null);return t?i[t]:i}function d(e){if(e.nodeName==="HTML"){return e}return e.parentNode||e.host}function p(e){if(!e){return document.body}switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=w(e),n=t.overflow,i=t.overflowX,r=t.overflowY;if(/(auto|scroll|overlay)/.test(n+r+i)){return e}return p(d(e))}var u=e&&!!(window.MSInputMethodContext&&document.documentMode);var c=e&&/MSIE 10/.test(navigator.userAgent);function g(e){if(e===11){return u}if(e===10){return c}return u||c}function _(e){if(!e){return document.documentElement}var t=g(10)?document.body:null;var n=e.offsetParent||null;while(n===t&&e.nextElementSibling){n=(e=e.nextElementSibling).offsetParent}var i=n&&n.nodeName;if(!i||i==="BODY"||i==="HTML"){return e?e.ownerDocument.documentElement:document.documentElement}if(["TH","TD","TABLE"].indexOf(n.nodeName)!==-1&&w(n,"position")==="static"){return _(n)}return n}function f(e){var t=e.nodeName;if(t==="BODY"){return false}return t==="HTML"||_(e.firstElementChild)===e}function h(e){if(e.parentNode!==null){return h(e.parentNode)}return e}function m(e,t){if(!e||!e.nodeType||!t||!t.nodeType){return document.documentElement}var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING;var i=n?e:t;var r=n?t:e;var a=document.createRange();a.setStart(i,0);a.setEnd(r,0);var s=a.commonAncestorContainer;if(e!==s&&t!==s||i.contains(r)){if(f(s)){return s}return _(s)}var o=h(e);if(o.host){return m(o.host,t)}else{return m(e,h(t).host)}}function v(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"top";var n=t==="top"?"scrollTop":"scrollLeft";var i=e.nodeName;if(i==="BODY"||i==="HTML"){var r=e.ownerDocument.documentElement;var a=e.ownerDocument.scrollingElement||r;return a[n]}return e[n]}function y(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=v(t,"top");var r=v(t,"left");var a=n?-1:1;e.top+=i*a;e.bottom+=i*a;e.left+=r*a;e.right+=r*a;return e}function b(e,t){var n=t==="x"?"Left":"Top";var i=n==="Left"?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+i+"Width"],10)}function E(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],g(10)?parseInt(n["offset"+e])+parseInt(i["margin"+(e==="Height"?"Top":"Left")])+parseInt(i["margin"+(e==="Height"?"Bottom":"Right")]):0)}function x(e){var t=e.body;var n=e.documentElement;var i=g(10)&&getComputedStyle(n);return{height:E("Height",t,n,i),width:E("Width",t,n,i)}}var T=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var N=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}}();var S=function(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e};var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e};function A(e){return C({},e,{right:e.left+e.width,bottom:e.top+e.height})}function k(e){var t={};try{if(g(10)){t=e.getBoundingClientRect();var n=v(e,"top");var i=v(e,"left");t.top+=n;t.left+=i;t.bottom+=n;t.right+=i}else{t=e.getBoundingClientRect()}}catch(e){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top};var a=e.nodeName==="HTML"?x(e.ownerDocument):{};var s=a.width||e.clientWidth||r.right-r.left;var o=a.height||e.clientHeight||r.bottom-r.top;var l=e.offsetWidth-s;var u=e.offsetHeight-o;if(l||u){var c=w(e);l-=b(c,"x");u-=b(c,"y");r.width-=l;r.height-=u}return A(r)}function M(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=g(10);var r=t.nodeName==="HTML";var a=k(e);var s=k(t);var o=p(e);var l=w(t);var u=parseFloat(l.borderTopWidth,10);var c=parseFloat(l.borderLeftWidth,10);if(n&&r){s.top=Math.max(s.top,0);s.left=Math.max(s.left,0)}var f=A({top:a.top-s.top-u,left:a.left-s.left-c,width:a.width,height:a.height});f.marginTop=0;f.marginLeft=0;if(!i&&r){var h=parseFloat(l.marginTop,10);var d=parseFloat(l.marginLeft,10);f.top-=u-h;f.bottom-=u-h;f.left-=c-d;f.right-=c-d;f.marginTop=h;f.marginLeft=d}if(i&&!n?t.contains(o):t===o&&o.nodeName!=="BODY"){f=y(f,t)}return f}function R(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=e.ownerDocument.documentElement;var i=M(e,n);var r=Math.max(n.clientWidth,window.innerWidth||0);var a=Math.max(n.clientHeight,window.innerHeight||0);var s=!t?v(n):0;var o=!t?v(n,"left"):0;var l={top:s-i.top+i.marginTop,left:o-i.left+i.marginLeft,width:r,height:a};return A(l)}function O(e){var t=e.nodeName;if(t==="BODY"||t==="HTML"){return false}if(w(e,"position")==="fixed"){return true}var n=d(e);if(!n){return false}return O(n)}function I(e){if(!e||!e.parentElement||g()){return document.documentElement}var t=e.parentElement;while(t&&w(t,"transform")==="none"){t=t.parentElement}return t||document.documentElement}function D(e,t,n,i){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var a={top:0,left:0};var s=r?I(e):m(e,t);if(i==="viewport"){a=R(s,r)}else{var o=void 0;if(i==="scrollParent"){o=p(d(t));if(o.nodeName==="BODY"){o=e.ownerDocument.documentElement}}else if(i==="window"){o=e.ownerDocument.documentElement}else{o=i}var l=M(o,s,r);if(o.nodeName==="HTML"&&!O(s)){var u=x(e.ownerDocument),c=u.height,f=u.width;a.top+=l.top-l.marginTop;a.bottom=c+l.top;a.left+=l.left-l.marginLeft;a.right=f+l.left}else{a=l}}n=n||0;var h=typeof n==="number";a.left+=h?n:n.left||0;a.top+=h?n:n.top||0;a.right-=h?n:n.right||0;a.bottom-=h?n:n.bottom||0;return a}function L(e){var t=e.width,n=e.height;return t*n}function P(e,t,i,n,r){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(e.indexOf("auto")===-1){return e}var s=D(i,n,a,r);var o={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}};var l=Object.keys(o).map(function(e){return C({key:e},o[e],{area:L(o[e])})}).sort(function(e,t){return t.area-e.area});var u=l.filter(function(e){var t=e.width,n=e.height;return t>=i.clientWidth&&n>=i.clientHeight});var c=u.length>0?u[0].key:l[0].key;var f=e.split("-")[1];return c+(f?"-"+f:"")}function F(e,t,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var r=i?I(t):m(t,n);return M(n,r,i)}function U(e){var t=e.ownerDocument.defaultView;var n=t.getComputedStyle(e);var i=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0);var r=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0);var a={width:e.offsetWidth+r,height:e.offsetHeight+i};return a}function H(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function G(e,t,n){n=n.split("-")[0];var i=U(e);var r={width:i.width,height:i.height};var a=["right","left"].indexOf(n)!==-1;var s=a?"top":"left";var o=a?"left":"top";var l=a?"height":"width";var u=!a?"height":"width";r[s]=t[s]+t[l]/2-i[l]/2;if(n===o){r[o]=t[o]-i[u]}else{r[o]=t[H(o)]}return r}function Y(e,t){if(Array.prototype.find){return e.find(t)}return e.filter(t)[0]}function j(e,t,n){if(Array.prototype.findIndex){return e.findIndex(function(e){return e[t]===n})}var i=Y(e,function(e){return e[t]===n});return e.indexOf(i)}function z(e,n,t){var i=t===undefined?e:e.slice(0,j(e,"name",t));i.forEach(function(e){if(e["function"]){console.warn("`modifier.function` is deprecated, use `modifier.fn`!")}var t=e["function"]||e.fn;if(e.enabled&&l(t)){n.offsets.popper=A(n.offsets.popper);n.offsets.reference=A(n.offsets.reference);n=t(n,e)}});return n}function B(){if(this.state.isDestroyed){return}var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:false,offsets:{}};e.offsets.reference=F(this.state,this.popper,this.reference,this.options.positionFixed);e.placement=P(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding);e.originalPlacement=e.placement;e.positionFixed=this.options.positionFixed;e.offsets.popper=G(this.popper,e.offsets.reference,e.placement);e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute";e=z(this.modifiers,e);if(!this.state.isCreated){this.state.isCreated=true;this.options.onCreate(e)}else{this.options.onUpdate(e)}}function q(e,i){return e.some(function(e){var t=e.name,n=e.enabled;return n&&t===i})}function V(e){var t=[false,"ms","Webkit","Moz","O"];var n=e.charAt(0).toUpperCase()+e.slice(1);for(var i=0;i<t.length;i++){var r=t[i];var a=r?""+r+n:e;if(typeof document.body.style[a]!=="undefined"){return a}}return null}function W(){this.state.isDestroyed=true;if(q(this.modifiers,"applyStyle")){this.popper.removeAttribute("x-placement");this.popper.style.position="";this.popper.style.top="";this.popper.style.left="";this.popper.style.right="";this.popper.style.bottom="";this.popper.style.willChange="";this.popper.style[V("transform")]=""}this.disableEventListeners();if(this.options.removeOnDestroy){this.popper.parentNode.removeChild(this.popper)}return this}function $(e){var t=e.ownerDocument;return t?t.defaultView:window}function X(e,t,n,i){var r=e.nodeName==="BODY";var a=r?e.ownerDocument.defaultView:e;a.addEventListener(t,n,{passive:true});if(!r){X(p(a.parentNode),t,n,i)}i.push(a)}function J(e,t,n,i){n.updateBound=i;$(e).addEventListener("resize",n.updateBound,{passive:true});var r=p(e);X(r,"scroll",n.updateBound,n.scrollParents);n.scrollElement=r;n.eventsEnabled=true;return n}function K(){if(!this.state.eventsEnabled){this.state=J(this.reference,this.options,this.state,this.scheduleUpdate)}}function Z(e,t){$(e).removeEventListener("resize",t.updateBound);t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)});t.updateBound=null;t.scrollParents=[];t.scrollElement=null;t.eventsEnabled=false;return t}function Q(){if(this.state.eventsEnabled){cancelAnimationFrame(this.scheduleUpdate);this.state=Z(this.reference,this.state)}}function ee(e){return e!==""&&!isNaN(parseFloat(e))&&isFinite(e)}function te(n,i){Object.keys(i).forEach(function(e){var t="";if(["width","height","top","right","bottom","left"].indexOf(e)!==-1&&ee(i[e])){t="px"}n.style[e]=i[e]+t})}function ne(n,i){Object.keys(i).forEach(function(e){var t=i[e];if(t!==false){n.setAttribute(e,i[e])}else{n.removeAttribute(e)}})}function ie(e){te(e.instance.popper,e.styles);ne(e.instance.popper,e.attributes);if(e.arrowElement&&Object.keys(e.arrowStyles).length){te(e.arrowElement,e.arrowStyles)}return e}function re(e,t,n,i,r){var a=F(r,t,e,n.positionFixed);var s=P(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);t.setAttribute("x-placement",s);te(t,{position:n.positionFixed?"fixed":"absolute"});return n}function ae(e,t){var n=e.offsets,i=n.popper,r=n.reference;var a=Math.round,s=Math.floor;var o=function e(t){return t};var l=a(r.width);var u=a(i.width);var c=["left","right"].indexOf(e.placement)!==-1;var f=e.placement.indexOf("-")!==-1;var h=l%2===u%2;var d=l%2===1&&u%2===1;var p=!t?o:c||f||h?a:s;var g=!t?o:a;return{left:p(d&&!f&&t?i.left-1:i.left),top:g(i.top),bottom:g(i.bottom),right:p(i.right)}}var se=e&&/Firefox/i.test(navigator.userAgent);function oe(e,t){var n=t.x,i=t.y;var r=e.offsets.popper;var a=Y(e.instance.modifiers,function(e){return e.name==="applyStyle"}).gpuAcceleration;if(a!==undefined){console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!")}var s=a!==undefined?a:t.gpuAcceleration;var o=_(e.instance.popper);var l=k(o);var u={position:r.position};var c=ae(e,window.devicePixelRatio<2||!se);var f=n==="bottom"?"top":"bottom";var h=i==="right"?"left":"right";var d=V("transform");var p=void 0,g=void 0;if(f==="bottom"){if(o.nodeName==="HTML"){g=-o.clientHeight+c.bottom}else{g=-l.height+c.bottom}}else{g=c.top}if(h==="right"){if(o.nodeName==="HTML"){p=-o.clientWidth+c.right}else{p=-l.width+c.right}}else{p=c.left}if(s&&d){u[d]="translate3d("+p+"px, "+g+"px, 0)";u[f]=0;u[h]=0;u.willChange="transform"}else{var m=f==="bottom"?-1:1;var v=h==="right"?-1:1;u[f]=g*m;u[h]=p*v;u.willChange=f+", "+h}var y={"x-placement":e.placement};e.attributes=C({},y,e.attributes);e.styles=C({},u,e.styles);e.arrowStyles=C({},e.offsets.arrow,e.arrowStyles);return e}function le(e,n,t){var i=Y(e,function(e){var t=e.name;return t===n});var r=!!i&&e.some(function(e){return e.name===t&&e.enabled&&e.order<i.order});if(!r){var a="`"+n+"`";var s="`"+t+"`";console.warn(s+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return r}function ue(e,t){var n;if(!le(e.instance.modifiers,"arrow","keepTogether")){return e}var i=t.element;if(typeof i==="string"){i=e.instance.popper.querySelector(i);if(!i){return e}}else{if(!e.instance.popper.contains(i)){console.warn("WARNING: `arrow.element` must be child of its popper element!");return e}}var r=e.placement.split("-")[0];var a=e.offsets,s=a.popper,o=a.reference;var l=["left","right"].indexOf(r)!==-1;var u=l?"height":"width";var c=l?"Top":"Left";var f=c.toLowerCase();var h=l?"left":"top";var d=l?"bottom":"right";var p=U(i)[u];if(o[d]-p<s[f]){e.offsets.popper[f]-=s[f]-(o[d]-p)}if(o[f]+p>s[d]){e.offsets.popper[f]+=o[f]+p-s[d]}e.offsets.popper=A(e.offsets.popper);var g=o[f]+o[u]/2-p/2;var m=w(e.instance.popper);var v=parseFloat(m["margin"+c],10);var y=parseFloat(m["border"+c+"Width"],10);var _=g-e.offsets.popper[f]-v-y;_=Math.max(Math.min(s[u]-p,_),0);e.arrowElement=i;e.offsets.arrow=(n={},S(n,f,Math.round(_)),S(n,h,""),n);return e}function ce(e){if(e==="end"){return"start"}else if(e==="start"){return"end"}return e}var fe=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"];var he=fe.slice(3);function de(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=he.indexOf(e);var i=he.slice(n+1).concat(he.slice(0,n));return t?i.reverse():i}var pe={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function ge(g,m){if(q(g.instance.modifiers,"inner")){return g}if(g.flipped&&g.placement===g.originalPlacement){return g}var v=D(g.instance.popper,g.instance.reference,m.padding,m.boundariesElement,g.positionFixed);var y=g.placement.split("-")[0];var _=H(y);var w=g.placement.split("-")[1]||"";var b=[];switch(m.behavior){case pe.FLIP:b=[y,_];break;case pe.CLOCKWISE:b=de(y);break;case pe.COUNTERCLOCKWISE:b=de(y,true);break;default:b=m.behavior}b.forEach(function(e,t){if(y!==e||b.length===t+1){return g}y=g.placement.split("-")[0];_=H(y);var n=g.offsets.popper;var i=g.offsets.reference;var r=Math.floor;var a=y==="left"&&r(n.right)>r(i.left)||y==="right"&&r(n.left)<r(i.right)||y==="top"&&r(n.bottom)>r(i.top)||y==="bottom"&&r(n.top)<r(i.bottom);var s=r(n.left)<r(v.left);var o=r(n.right)>r(v.right);var l=r(n.top)<r(v.top);var u=r(n.bottom)>r(v.bottom);var c=y==="left"&&s||y==="right"&&o||y==="top"&&l||y==="bottom"&&u;var f=["top","bottom"].indexOf(y)!==-1;var h=!!m.flipVariations&&(f&&w==="start"&&s||f&&w==="end"&&o||!f&&w==="start"&&l||!f&&w==="end"&&u);var d=!!m.flipVariationsByContent&&(f&&w==="start"&&o||f&&w==="end"&&s||!f&&w==="start"&&u||!f&&w==="end"&&l);var p=h||d;if(a||c||p){g.flipped=true;if(a||c){y=b[t+1]}if(p){w=ce(w)}g.placement=y+(w?"-"+w:"");g.offsets.popper=C({},g.offsets.popper,G(g.instance.popper,g.offsets.reference,g.placement));g=z(g.instance.modifiers,g,"flip")}});return g}function me(e){var t=e.offsets,n=t.popper,i=t.reference;var r=e.placement.split("-")[0];var a=Math.floor;var s=["top","bottom"].indexOf(r)!==-1;var o=s?"right":"bottom";var l=s?"left":"top";var u=s?"width":"height";if(n[o]<a(i[l])){e.offsets.popper[l]=a(i[l])-n[u]}if(n[l]>a(i[o])){e.offsets.popper[l]=a(i[o])}return e}function ve(e,t,n,i){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/);var a=+r[1];var s=r[2];if(!a){return e}if(s.indexOf("%")===0){var o=void 0;switch(s){case"%p":o=n;break;case"%":case"%r":default:o=i}var l=A(o);return l[t]/100*a}else if(s==="vh"||s==="vw"){var u=void 0;if(s==="vh"){u=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}else{u=Math.max(document.documentElement.clientWidth,window.innerWidth||0)}return u/100*a}else{return a}}function ye(e,r,a,t){var s=[0,0];var o=["right","left"].indexOf(t)!==-1;var n=e.split(/(\+|\-)/).map(function(e){return e.trim()});var i=n.indexOf(Y(n,function(e){return e.search(/,|\s/)!==-1}));if(n[i]&&n[i].indexOf(",")===-1){console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.")}var l=/\s*,\s*|\s+/;var u=i!==-1?[n.slice(0,i).concat([n[i].split(l)[0]]),[n[i].split(l)[1]].concat(n.slice(i+1))]:[n];u=u.map(function(e,t){var n=(t===1?!o:o)?"height":"width";var i=false;return e.reduce(function(e,t){if(e[e.length-1]===""&&["+","-"].indexOf(t)!==-1){e[e.length-1]=t;i=true;return e}else if(i){e[e.length-1]+=t;i=false;return e}else{return e.concat(t)}},[]).map(function(e){return ve(e,n,r,a)})});u.forEach(function(n,i){n.forEach(function(e,t){if(ee(e)){s[i]+=e*(n[t-1]==="-"?-1:1)}})});return s}function _e(e,t){var n=t.offset;var i=e.placement,r=e.offsets,a=r.popper,s=r.reference;var o=i.split("-")[0];var l=void 0;if(ee(+n)){l=[+n,0]}else{l=ye(n,a,s,o)}if(o==="left"){a.top+=l[0];a.left-=l[1]}else if(o==="right"){a.top+=l[0];a.left+=l[1]}else if(o==="top"){a.left+=l[0];a.top-=l[1]}else if(o==="bottom"){a.left+=l[0];a.top+=l[1]}e.popper=a;return e}function we(e,r){var t=r.boundariesElement||_(e.instance.popper);if(e.instance.reference===t){t=_(t)}var n=V("transform");var i=e.instance.popper.style;var a=i.top,s=i.left,o=i[n];i.top="";i.left="";i[n]="";var l=D(e.instance.popper,e.instance.reference,r.padding,t,e.positionFixed);i.top=a;i.left=s;i[n]=o;r.boundaries=l;var u=r.priority;var c=e.offsets.popper;var f={primary:function e(t){var n=c[t];if(c[t]<l[t]&&!r.escapeWithReference){n=Math.max(c[t],l[t])}return S({},t,n)},secondary:function e(t){var n=t==="right"?"left":"top";var i=c[n];if(c[t]>l[t]&&!r.escapeWithReference){i=Math.min(c[n],l[t]-(t==="right"?c.width:c.height))}return S({},n,i)}};u.forEach(function(e){var t=["left","top"].indexOf(e)!==-1?"primary":"secondary";c=C({},c,f[t](e))});e.offsets.popper=c;return e}function be(e){var t=e.placement;var n=t.split("-")[0];var i=t.split("-")[1];if(i){var r=e.offsets,a=r.reference,s=r.popper;var o=["bottom","top"].indexOf(n)!==-1;var l=o?"left":"top";var u=o?"width":"height";var c={start:S({},l,a[l]),end:S({},l,a[l]+a[u]-s[u])};e.offsets.popper=C({},s,c[i])}return e}function Ee(e){if(!le(e.instance.modifiers,"hide","preventOverflow")){return e}var t=e.offsets.reference;var n=Y(e.instance.modifiers,function(e){return e.name==="preventOverflow"}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(e.hide===true){return e}e.hide=true;e.attributes["x-out-of-boundaries"]=""}else{if(e.hide===false){return e}e.hide=false;e.attributes["x-out-of-boundaries"]=false}return e}function xe(e){var t=e.placement;var n=t.split("-")[0];var i=e.offsets,r=i.popper,a=i.reference;var s=["left","right"].indexOf(n)!==-1;var o=["top","left"].indexOf(n)===-1;r[s?"left":"top"]=a[n]-(o?r[s?"width":"height"]:0);e.placement=H(t);e.offsets.popper=A(r);return e}var Te={shift:{order:100,enabled:true,fn:be},offset:{order:200,enabled:true,fn:_e,offset:0},preventOverflow:{order:300,enabled:true,fn:we,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:true,fn:me},arrow:{order:500,enabled:true,fn:ue,element:"[x-arrow]"},flip:{order:600,enabled:true,fn:ge,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:false,flipVariationsByContent:false},inner:{order:700,enabled:false,fn:xe},hide:{order:800,enabled:true,fn:Ee},computeStyle:{order:850,enabled:true,fn:oe,gpuAcceleration:true,x:"bottom",y:"right"},applyStyle:{order:900,enabled:true,fn:ie,onLoad:re,gpuAcceleration:undefined}};var Ne={placement:"bottom",positionFixed:false,eventsEnabled:true,removeOnDestroy:false,onCreate:function e(){},onUpdate:function e(){},modifiers:Te};var Se=function(){function a(e,t){var n=this;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};T(this,a);this.scheduleUpdate=function(){return requestAnimationFrame(n.update)};this.update=o(this.update.bind(this));this.options=C({},a.Defaults,i);this.state={isDestroyed:false,isCreated:false,scrollParents:[]};this.reference=e&&e.jquery?e[0]:e;this.popper=t&&t.jquery?t[0]:t;this.options.modifiers={};Object.keys(C({},a.Defaults.modifiers,i.modifiers)).forEach(function(e){n.options.modifiers[e]=C({},a.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})});this.modifiers=Object.keys(this.options.modifiers).map(function(e){return C({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order});this.modifiers.forEach(function(e){if(e.enabled&&l(e.onLoad)){e.onLoad(n.reference,n.popper,n.options,e,n.state)}});this.update();var r=this.options.eventsEnabled;if(r){this.enableEventListeners()}this.state.eventsEnabled=r}N(a,[{key:"update",value:function e(){return B.call(this)}},{key:"destroy",value:function e(){return W.call(this)}},{key:"enableEventListeners",value:function e(){return K.call(this)}},{key:"disableEventListeners",value:function e(){return Q.call(this)}}]);return a}();Se.Utils=(typeof window!=="undefined"?window:global).PopperUtils;Se.placements=fe;Se.Defaults=Ne;return Se});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("popper.js")):typeof define==="function"&&define.amd?define("tippy",["popper"],t):(e=e||self,e.tippy=t(e.Popper))})(this,function(Q){"use strict";Q=Q&&Q.hasOwnProperty("default")?Q["default"]:Q;var e='.tippy-iOS{cursor:pointer!important;-webkit-tap-highlight-color:transparent}.tippy-popper{transition-timing-function:cubic-bezier(.165,.84,.44,1);max-width:calc(100% - 8px);pointer-events:none;outline:0}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-7px;bottom:-6.5px;-webkit-transform-origin:50% 0;transform-origin:50% 0;margin:0 3px}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 3px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%)}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(-10px) rotateX(0);transform:perspective(700px) translateY(-10px) rotateX(0)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateY(0) rotateX(60deg);transform:perspective(700px) translateY(0) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=top] [data-animation=scale]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(-10px) scale(1);transform:translateY(-10px) scale(1)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px) scale(.5);transform:translateY(-10px) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-7px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;margin:0 3px}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(0);transform:rotate(0)}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 3px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%)}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(10px) rotateX(0);transform:perspective(700px) translateY(10px) rotateX(0)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateY(0) rotateX(-60deg);transform:perspective(700px) translateY(0) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=bottom] [data-animation=scale]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(10px) scale(1);transform:translateY(10px) scale(1)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px) scale(.5);transform:translateY(10px) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-12px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%;margin:3px 0}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(-10px) rotateY(0);transform:perspective(700px) translateX(-10px) rotateY(0)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateX(0) rotateY(-60deg);transform:perspective(700px) translateX(0) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=left] [data-animation=scale]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(-10px) scale(1);transform:translateX(-10px) scale(1)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px) scale(.5);transform:translateX(-10px) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-12px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%;margin:3px 0}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(10px) rotateY(0);transform:perspective(700px) translateX(10px) rotateY(0)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateX(0) rotateY(60deg);transform:perspective(700px) translateX(0) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=right] [data-animation=scale]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(10px) scale(1);transform:translateX(10px) scale(1)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px) scale(.5);transform:translateX(10px) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:.25rem;font-size:.875rem;padding:.3125rem .5625rem;line-height:1.4;text-align:center;background-color:#333}.tippy-tooltip[data-size=small]{padding:.1875rem .375rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.375rem .75rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:transparent}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:18px;height:7px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity;will-change:opacity}.tippy-backdrop+.tippy-content[data-state=visible]{opacity:1}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}';function ee(){ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e};return ee.apply(this,arguments)}var t="4.2.1";var r=typeof window!=="undefined"&&typeof document!=="undefined";var n=r?navigator.userAgent:"";var te=/MSIE |Trident\//.test(n);var a=/UCBrowser\//.test(n);var i=r&&/iPhone|iPad|iPod/.test(navigator.platform)&&!window.MSStream;var ne={a11y:true,allowHTML:true,animateFill:true,animation:"shift-away",appendTo:function e(){return document.body},aria:"describedby",arrow:false,arrowType:"sharp",boundary:"scrollParent",content:"",delay:0,distance:10,duration:[325,275],flip:true,flipBehavior:"flip",flipOnUpdate:false,followCursor:false,hideOnClick:true,ignoreAttributes:false,inertia:false,interactive:false,interactiveBorder:2,interactiveDebounce:0,lazy:true,maxWidth:350,multiple:false,offset:0,onHidden:function e(){},onHide:function e(){},onMount:function e(){},onShow:function e(){},onShown:function e(){},placement:"top",popperOptions:{},role:"tooltip",showOnInit:false,size:"regular",sticky:false,target:"",theme:"dark",touch:true,touchHold:false,trigger:"mouseenter focus",updateDuration:0,wait:null,zIndex:9999};var ie=["arrow","arrowType","boundary","distance","flip","flipBehavior","flipOnUpdate","offset","placement","popperOptions"];var s=r?Element.prototype:{};var o=s.matches||s.matchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector;function re(e){return[].slice.call(e)}function ae(e,t){return(s.closest||function(e){var t=this;while(t){if(o.call(t,e)){return t}t=t.parentElement}}).call(e,t)}function se(e,t){while(e){if(t(e)){return e}e=e.parentElement}}var oe={passive:true};var le=4;var ue="x-placement";var ce="x-out-of-boundaries";var l="tippy-iOS";var fe="tippy-active";var he=".tippy-popper";var u=".tippy-tooltip";var c=".tippy-content";var f=".tippy-backdrop";var h=".tippy-arrow";var d=".tippy-roundarrow";var p=Object.keys(ne);function g(e){return p.reduce(function(t,n){var i=(e.getAttribute("data-tippy-".concat(n))||"").trim();if(!i){return t}if(n==="content"){t[n]=i}else{try{t[n]=JSON.parse(i)}catch(e){t[n]=i}}return t},{})}function m(i){var e={isVirtual:true,attributes:i.attributes||{},setAttribute:function e(t,n){i.attributes[t]=n},getAttribute:function e(t){return i.attributes[t]},removeAttribute:function e(t){delete i.attributes[t]},hasAttribute:function e(t){return t in i.attributes},addEventListener:function e(){},removeEventListener:function e(){},classList:{classNames:{},add:function e(t){i.classList.classNames[t]=true},remove:function e(t){delete i.classList.classNames[t]},contains:function e(t){return t in i.classList.classNames}}};for(var t in e){i[t]=e[t]}}function v(e){return{}.toString.call(e)==="[object Object]"&&!e.addEventListener}function de(e,t){return{}.hasOwnProperty.call(e,t)}function y(e){if(_(e)){return[e]}if(e instanceof NodeList){return re(e)}if(Array.isArray(e)){return e}try{return re(document.querySelectorAll(e))}catch(e){return[]}}function pe(e,t,n){if(Array.isArray(e)){var i=e[t];return i==null?n:i}return e}function ge(n,i){var r;return function(){var e=this,t=arguments;clearTimeout(r);r=setTimeout(function(){return n.apply(e,t)},i)}}function me(e,t){return e&&e.modifiers&&e.modifiers[t]}function ve(e,t){return e.indexOf(t)>-1}function _(e){return!!(e&&de(e,"isVirtual"))||e instanceof Element}function w(){return"innerHTML"}function ye(e,t){return typeof e==="function"?e.apply(null,t):e}function _e(e,t){e.filter(function(e){return e.name==="flip"})[0].enabled=t}function we(e){return e instanceof Element?o.call(e,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!e.hasAttribute("disabled"):true}function b(){return document.createElement("div")}function be(e,t){e.forEach(function(e){if(e){e.style.transitionDuration="".concat(t,"ms")}})}function Ee(e,t){e.forEach(function(e){if(e){e.setAttribute("data-state",t)}})}function xe(e,t){var n=ee({},t,{content:ye(t.content,[e])},t.ignoreAttributes?{}:g(e));if(n.arrow||a){n.animateFill=false}return n}function Te(e,t){Object.keys(e).forEach(function(e){if(!de(t,e)){throw new Error("[tippy]: `".concat(e,"` is not a valid option"))}})}function E(e,t){e[w()]=t instanceof Element?t[w()]:t}function x(e,t){if(t.content instanceof Element){E(e,"");e.appendChild(t.content)}else if(typeof t.content!=="function"){var n=t.allowHTML?"innerHTML":"textContent";e[n]=t.content}}function Ne(e){return{tooltip:e.querySelector(u),backdrop:e.querySelector(f),content:e.querySelector(c),arrow:e.querySelector(h)||e.querySelector(d)}}function T(e){e.setAttribute("data-inertia","")}function N(e){e.removeAttribute("data-inertia")}function S(e){var t=b();if(e==="round"){t.className="tippy-roundarrow";E(t,'<svg viewBox="0 0 18 7" xmlns="http://www.w3.org/2000/svg"><path d="M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z"/></svg>')}else{t.className="tippy-arrow"}return t}function C(){var e=b();e.className="tippy-backdrop";e.setAttribute("data-state","hidden");return e}function A(e,t){e.setAttribute("tabindex","-1");t.setAttribute("data-interactive","")}function k(e,t){e.removeAttribute("tabindex");t.removeAttribute("data-interactive")}function Se(e,t,n){var i=a&&document.body.style.webkitTransition!==undefined?"webkitTransitionEnd":"transitionend";e[t+"EventListener"](i,n)}function Ce(e){var t=e.getAttribute(ue);return t?t.split("-")[0]:""}function M(e){void e.offsetHeight}function R(t,n,e){e.split(" ").forEach(function(e){t.classList[n](e+"-theme")})}function Ae(e,t){var n=b();n.className="tippy-popper";n.id="tippy-".concat(e);n.style.zIndex=""+t.zIndex;if(t.role){n.setAttribute("role",t.role)}var i=b();i.className="tippy-tooltip";i.style.maxWidth=t.maxWidth+(typeof t.maxWidth==="number"?"px":"");i.setAttribute("data-size",t.size);i.setAttribute("data-animation",t.animation);i.setAttribute("data-state","hidden");R(i,"add",t.theme);var r=b();r.className="tippy-content";r.setAttribute("data-state","hidden");if(t.interactive){A(n,i)}if(t.arrow){i.appendChild(S(t.arrowType))}if(t.animateFill){i.appendChild(C());i.setAttribute("data-animatefill","")}if(t.inertia){T(i)}x(r,t);i.appendChild(r);n.appendChild(i);return n}function ke(e,t,n){var i=Ne(e),r=i.tooltip,a=i.content,s=i.backdrop,o=i.arrow;e.style.zIndex=""+n.zIndex;r.setAttribute("data-size",n.size);r.setAttribute("data-animation",n.animation);r.style.maxWidth=n.maxWidth+(typeof n.maxWidth==="number"?"px":"");if(n.role){e.setAttribute("role",n.role)}else{e.removeAttribute("role")}if(t.content!==n.content){x(a,n)}if(!t.animateFill&&n.animateFill){r.appendChild(C());r.setAttribute("data-animatefill","")}else if(t.animateFill&&!n.animateFill){r.removeChild(s);r.removeAttribute("data-animatefill")}if(!t.arrow&&n.arrow){r.appendChild(S(n.arrowType))}else if(t.arrow&&!n.arrow){r.removeChild(o)}if(t.arrow&&n.arrow&&t.arrowType!==n.arrowType){r.replaceChild(S(n.arrowType),o)}if(!t.interactive&&n.interactive){A(e,r)}else if(t.interactive&&!n.interactive){k(e,r)}if(!t.inertia&&n.inertia){T(r)}else if(t.inertia&&!n.inertia){N(r)}if(t.theme!==n.theme){R(r,"remove",t.theme);R(r,"add",n.theme)}}function Me(e,t){var n=e.popper,i=e.options;var r=i.onCreate,a=i.onUpdate;i.onCreate=i.onUpdate=function(e){M(n);t();if(a){a(e)}i.onCreate=r;i.onUpdate=a}}function O(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.checkHideOnClick,i=e.exclude,r=e.duration;re(document.querySelectorAll(he)).forEach(function(e){var t=e._tippy;if(t&&(n?t.props.hideOnClick===true:true)&&(!i||e!==i.popper)){t.hide(r)}})}function Re(e,t,n,i){if(!e){return true}var r=n.clientX,a=n.clientY;var s=i.interactiveBorder,o=i.distance;var l=t.top-a>(e==="top"?s+o:s);var u=a-t.bottom>(e==="bottom"?s+o:s);var c=t.left-r>(e==="left"?s+o:s);var f=r-t.right>(e==="right"?s+o:s);return l||u||c||f}function Oe(e){return-(e-10)+"px"}var Ie=false;function I(){if(Ie){return}Ie=true;if(i){document.body.classList.add(l)}if(window.performance){document.addEventListener("mousemove",L)}}var D=0;function L(){var e=performance.now();if(e-D<20){Ie=false;document.removeEventListener("mousemove",L);if(!i){document.body.classList.remove(l)}}D=e}function P(e){if(!(e.target instanceof Element)){return O()}var t=ae(e.target,he);if(t&&t._tippy&&t._tippy.props.interactive){return}var n=se(e.target,function(e){return e._tippy&&e._tippy.reference===e});if(n){var i=n._tippy;if(i){var r=ve(i.props.trigger||"","click");if(Ie||r){return O({exclude:i,checkHideOnClick:true})}if(i.props.hideOnClick!==true||r){return}i.clearDelayTimeouts()}}O({checkHideOnClick:true})}function F(){var e=document,t=e.activeElement;if(t&&t.blur&&t._tippy){t.blur()}}function U(){document.addEventListener("click",P,true);document.addEventListener("touchstart",I,oe);window.addEventListener("blur",F)}var De=1;function Le(e,n){var i=xe(e,n);if(!i.multiple&&e._tippy){return null}var t;var p;var r;var a;var s;var o=false;var l;var u;var c=false;var f;var h=[];var d=i.interactiveDebounce>0?ge(L,i.interactiveDebounce):L;var g=De++;var m=Ae(g,i);var v=Ne(m);var y=null;var _={isEnabled:true,isVisible:false,isDestroyed:false,isMounted:false,isShown:false};var w={id:g,reference:e,popper:m,popperChildren:v,popperInstance:y,props:i,state:_,clearDelayTimeouts:W,set:$,setContent:X,show:J,hide:K,enable:q,disable:V,destroy:Z};e._tippy=w;m._tippy=w;M();if(!i.lazy){Y();w.popperInstance.disableEventListeners()}if(i.showOnInit){z()}if(i.a11y&&!i.target&&!we(e)){e.setAttribute("tabindex","0")}m.addEventListener("mouseenter",function(e){if(w.props.interactive&&w.state.isVisible&&t==="mouseenter"){z(e)}});m.addEventListener("mouseleave",function(){if(w.props.interactive&&t==="mouseenter"){document.addEventListener("mousemove",d)}});return w;function b(){document.removeEventListener("mousemove",O)}function E(){document.body.removeEventListener("mouseleave",B);document.removeEventListener("mousemove",d)}function x(){return[w.popperChildren.tooltip,w.popperChildren.backdrop,w.popperChildren.content]}function T(){return w.props.followCursor&&!Ie&&t!=="focus"}function N(){be([w.popper],te?0:w.props.updateDuration);function e(){if(w.popperInstance){w.popperInstance.scheduleUpdate()}if(w.state.isMounted){requestAnimationFrame(e)}else{be([w.popper],0)}}e()}function S(e,t){A(e,function(){if(!w.state.isVisible&&l&&l.contains(w.popper)){t()}})}function C(e,t){A(e,t)}function A(e,t){var n=w.popperChildren.tooltip;function i(e){if(e.target===n){Se(n,"remove",i);t()}}if(e===0){return t()}Se(n,"remove",f);Se(n,"add",i);f=i}function k(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;w.reference.addEventListener(e,t,n);h.push({eventType:e,handler:t,options:n})}function M(){if(w.props.touchHold&&!w.props.target){k("touchstart",D,oe);k("touchend",P,oe)}w.props.trigger.trim().split(" ").forEach(function(e){if(e==="manual"){return}if(!w.props.target){k(e,D);switch(e){case"mouseenter":k("mouseleave",P);break;case"focus":k(te?"focusout":"blur",F);break}}else{switch(e){case"mouseenter":k("mouseover",U);k("mouseout",H);break;case"focus":k("focusin",U);k("focusout",H);break;case"click":k(e,U);break}}})}function R(){h.forEach(function(e){var t=e.eventType,n=e.handler,i=e.options;w.reference.removeEventListener(t,n,i)});h=[]}function O(e){var t=p=e,n=t.clientX,i=t.clientY;if(!w.popperInstance){return}var r=Ce(w.popper);var a=w.props.arrow?le+(w.props.arrowType==="round"?18:16):le;var s=ve(["top","bottom"],r);var o=ve(["left","right"],r);var l=s?Math.max(a,n):n;var u=o?Math.max(a,i):i;if(s&&l>a){l=Math.min(n,window.innerWidth-a)}if(o&&u>a){u=Math.min(i,window.innerHeight-a)}var c=w.reference.getBoundingClientRect();var f=w.props.followCursor;var h=f==="horizontal";var d=f==="vertical";w.popperInstance.reference=ee({},w.popperInstance.reference,{getBoundingClientRect:function e(){return{width:0,height:0,top:h?c.top:u,bottom:h?c.bottom:u,left:d?c.left:l,right:d?c.right:l}},clientWidth:0,clientHeight:0});w.popperInstance.scheduleUpdate();if(f==="initial"&&w.state.isVisible){b()}}function I(e){if(e){var t=ae(e.target,w.props.target);if(t&&!t._tippy){Le(t,ee({},w.props,{content:ye(n.content,[t]),appendTo:n.appendTo,target:"",showOnInit:true}));z(e)}}}function D(e){if(!w.state.isEnabled||G(e)){return}if(!w.state.isVisible){t=e.type;if(e instanceof MouseEvent){p=e}}if(e.type==="click"&&w.props.hideOnClick!==false&&w.state.isVisible){B()}else{z(e)}}function L(e){var t=se(e.target,function(e){return e._tippy});var n=ae(e.target,he)===w.popper;var i=t===w.reference;if(n||i){return}if(Re(Ce(w.popper),w.popper.getBoundingClientRect(),e,w.props)){E();B()}}function P(e){if(G(e)){return}if(w.props.interactive){document.body.addEventListener("mouseleave",B);document.addEventListener("mousemove",d);return}B()}function F(e){if(e.target!==w.reference){return}if(w.props.interactive&&e.relatedTarget&&w.popper.contains(e.relatedTarget)){return}B()}function U(e){if(ae(e.target,w.props.target)){z(e)}}function H(e){if(ae(e.target,w.props.target)){B()}}function G(e){var t="ontouchstart"in window;var n=ve(e.type,"touch");var i=w.props.touchHold;return t&&Ie&&i&&!n||Ie&&!i&&n}function Y(){var n=w.props.popperOptions;var e=w.popperChildren,s=e.tooltip,t=e.arrow;var o=me(n,"preventOverflow");function i(e){if(w.props.flip&&!w.props.flipOnUpdate){if(e.flipped){w.popperInstance.options.placement=e.placement}_e(w.popperInstance.modifiers,false)}s.setAttribute(ue,e.placement);if(e.attributes[ce]!==false){s.setAttribute(ce,"")}else{s.removeAttribute(ce)}if(u&&u!==e.placement&&c){s.style.transition="none";requestAnimationFrame(function(){s.style.transition=""})}u=e.placement;c=w.state.isVisible;var t=Ce(w.popper);var n=s.style;n.top=n.bottom=n.left=n.right="";n[t]=Oe(w.props.distance);var i=o&&o.padding!==undefined?o.padding:le;var r=typeof i==="number";var a=ee({top:r?i:i.top,bottom:r?i:i.bottom,left:r?i:i.left,right:r?i:i.right},!r&&i);a[t]=r?i+w.props.distance:(i[t]||0)+w.props.distance;w.popperInstance.modifiers.filter(function(e){return e.name==="preventOverflow"})[0].padding=a}var r=ee({placement:w.props.placement},n,{modifiers:ee({},n?n.modifiers:{},{preventOverflow:ee({boundariesElement:w.props.boundary,padding:le},o),arrow:ee({element:t,enabled:!!t},me(n,"arrow")),flip:ee({enabled:w.props.flip,padding:w.props.distance+le,behavior:w.props.flipBehavior},me(n,"flip")),offset:ee({offset:w.props.offset},me(n,"offset"))}),onCreate:function e(t){i(t);if(n&&n.onCreate){n.onCreate(t)}},onUpdate:function e(t){i(t);if(n&&n.onUpdate){n.onUpdate(t)}}});w.popperInstance=new Q(w.reference,w.popper,r)}function j(e){var t=!T()&&!(w.props.followCursor==="initial"&&Ie);if(!w.popperInstance){Y();if(!t){w.popperInstance.disableEventListeners()}}else{if(!T()){w.popperInstance.scheduleUpdate();if(t){w.popperInstance.enableEventListeners()}}_e(w.popperInstance.modifiers,w.props.flip)}w.popperInstance.reference=w.reference;var n=w.popperChildren.arrow;if(T()){if(n){n.style.margin="0"}if(p){O(p)}}else if(n){n.style.margin=""}if(Ie&&p&&w.props.followCursor==="initial"){O(p);if(n){n.style.margin="0"}}Me(w.popperInstance,e);var i=w.props.appendTo;l=i==="parent"?w.reference.parentNode:ye(i,[w.reference]);if(!l.contains(w.popper)){l.appendChild(w.popper);w.props.onMount(w);w.state.isMounted=true}}function z(e){W();if(w.state.isVisible){return}if(w.props.target){return I(e)}o=true;if(w.props.wait){return w.props.wait(w,e)}if(T()&&!w.state.isMounted){document.addEventListener("mousemove",O)}var t=pe(w.props.delay,0,ne.delay);if(t){r=setTimeout(function(){J()},t)}else{J()}}function B(){W();if(!w.state.isVisible){return b()}o=false;var e=pe(w.props.delay,1,ne.delay);if(e){a=setTimeout(function(){if(w.state.isVisible){K()}},e)}else{s=requestAnimationFrame(function(){K()})}}function q(){w.state.isEnabled=true}function V(){w.state.isEnabled=false}function W(){clearTimeout(r);clearTimeout(a);cancelAnimationFrame(s)}function $(t){t=t||{};Te(t,ne);var n=w.props;var e=xe(w.reference,ee({},w.props,t,{ignoreAttributes:true}));e.ignoreAttributes=de(t,"ignoreAttributes")?t.ignoreAttributes||false:n.ignoreAttributes;w.props=e;if(de(t,"trigger")||de(t,"touchHold")){R();M()}if(de(t,"interactiveDebounce")){E();d=ge(L,t.interactiveDebounce||0)}ke(w.popper,n,e);w.popperChildren=Ne(w.popper);if(w.popperInstance){w.popperInstance.update();if(ie.some(function(e){return de(t,e)&&t[e]!==n[e]})){w.popperInstance.destroy();Y();if(!w.state.isVisible){w.popperInstance.disableEventListeners()}if(w.props.followCursor&&p){O(p)}}}}function X(e){$({content:e})}function J(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:pe(w.props.duration,0,ne.duration[1]);if(w.state.isDestroyed||!w.state.isEnabled||Ie&&!w.props.touch){return}if(w.reference.hasAttribute("disabled")){return}if(w.props.onShow(w)===false){return}w.popper.style.visibility="visible";w.state.isVisible=true;if(w.props.interactive){w.reference.classList.add(fe)}var t=x();be(t.concat(w.popper),0);j(function(){if(!w.state.isVisible){return}if(!T()){w.popperInstance.update()}if(w.popperChildren.backdrop){w.popperChildren.content.style.transitionDelay=Math.round(e/12)+"ms"}if(w.props.sticky){N()}be([w.popper],i.updateDuration);be(t,e);Ee(t,"visible");C(e,function(){if(w.props.aria){w.reference.setAttribute("aria-".concat(w.props.aria),w.popper.id)}w.props.onShown(w);w.state.isShown=true})})}function K(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:pe(w.props.duration,1,ne.duration[1]);if(w.state.isDestroyed||!w.state.isEnabled){return}if(w.props.onHide(w)===false){return}w.popper.style.visibility="hidden";w.state.isVisible=false;w.state.isShown=false;c=false;if(w.props.interactive){w.reference.classList.remove(fe)}var t=x();be(t,e);Ee(t,"hidden");S(e,function(){if(!o){b()}if(w.props.aria){w.reference.removeAttribute("aria-".concat(w.props.aria))}w.popperInstance.disableEventListeners();w.popperInstance.options.placement=w.props.placement;l.removeChild(w.popper);w.props.onHidden(w);w.state.isMounted=false})}function Z(e){if(w.state.isDestroyed){return}if(w.state.isMounted){K(0)}R();delete w.reference._tippy;if(w.props.target&&e){re(w.reference.querySelectorAll(w.props.target)).forEach(function(e){if(e._tippy){e._tippy.destroy()}})}if(w.popperInstance){w.popperInstance.destroy()}w.state.isDestroyed=true}}function H(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=e.delay,i=n===void 0?t[0].props.delay:n,r=e.duration,a=r===void 0?0:r;if(t.some(function(e){return de(e,"_originalProps")})){return}var s=false;t.forEach(function(e){e._originalProps=ee({},e.props)});function o(e){s=e;f()}function l(e){e._originalProps.onShow(e);t.forEach(function(e){e.set({duration:a});e.hide()});o(true)}function u(e){e._originalProps.onHide(e);o(false)}function c(e){e._originalProps.onShown(e);e.set({duration:e._originalProps.duration})}function f(){t.forEach(function(e){e.set({onShow:l,onShown:c,onHide:u,delay:s?[0,Array.isArray(i)?i[1]:i]:i,duration:s?a:e._originalProps.duration})})}f()}var G=false;function Y(e,t){Te(t||{},ne);if(!G){U();G=true}var i=ee({},ne,t);if(v(e)){m(e)}var n=y(e).reduce(function(e,t){var n=t&&Le(t,i);if(n){e.push(n)}return e},[]);return _(e)?n[0]:n}Y.version=t;Y.defaults=ne;Y.setDefaults=function(t){Object.keys(t).forEach(function(e){ne[e]=t[e]})};Y.hideAll=O;Y.group=H;function j(){re(document.querySelectorAll("[data-tippy]")).forEach(function(e){var t=e.getAttribute("data-tippy");if(t){Y(e,{content:t})}})}if(r){setTimeout(j)}function z(e){if(r){var t=document.createElement("style");t.type="text/css";t.textContent=e;var n=document.head;var i=n.firstChild;if(i){n.insertBefore(t,i)}else{n.appendChild(t)}}}z(e);return Y});!function(){var D={version:"3.5.11"};var r=[].slice,f=function(e){return r.call(e)};var L=this.document;function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function P(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(L){try{f(L.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}}}if(!Date.now)Date.now=function(){return+new Date};if(L){try{L.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,n=t.setAttribute,i=t.setAttributeNS,a=this.CSSStyleDeclaration.prototype,s=a.setProperty;t.setAttribute=function(e,t){n.call(this,e,t+"")};t.setAttributeNS=function(e,t,n){i.call(this,e,t,n+"")};a.setProperty=function(e,t,n){s.call(this,e,t+"",n)}}}D.ascending=l;function l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}D.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};D.min=function(e,t){var n=-1,i=e.length,r,a;if(arguments.length===1){while(++n<i)if((a=e[n])!=null&&a>=a){r=a;break}while(++n<i)if((a=e[n])!=null&&r>a)r=a}else{while(++n<i)if((a=t.call(e,e[n],n))!=null&&a>=a){r=a;break}while(++n<i)if((a=t.call(e,e[n],n))!=null&&r>a)r=a}return r};D.max=function(e,t){var n=-1,i=e.length,r,a;if(arguments.length===1){while(++n<i)if((a=e[n])!=null&&a>=a){r=a;break}while(++n<i)if((a=e[n])!=null&&a>r)r=a}else{while(++n<i)if((a=t.call(e,e[n],n))!=null&&a>=a){r=a;break}while(++n<i)if((a=t.call(e,e[n],n))!=null&&a>r)r=a}return r};D.extent=function(e,t){var n=-1,i=e.length,r,a,s;if(arguments.length===1){while(++n<i)if((a=e[n])!=null&&a>=a){r=s=a;break}while(++n<i)if((a=e[n])!=null){if(r>a)r=a;if(s<a)s=a}}else{while(++n<i)if((a=t.call(e,e[n],n))!=null&&a>=a){r=s=a;break}while(++n<i)if((a=t.call(e,e[n],n))!=null){if(r>a)r=a;if(s<a)s=a}}return[r,s]};function u(e){return e===null?NaN:+e}function c(e){return!isNaN(e)}D.sum=function(e,t){var n=0,i=e.length,r,a=-1;if(arguments.length===1){while(++a<i)if(c(r=+e[a]))n+=r}else{while(++a<i)if(c(r=+t.call(e,e[a],a)))n+=r}return n};D.mean=function(e,t){var n=0,i=e.length,r,a=-1,s=i;if(arguments.length===1){while(++a<i)if(c(r=u(e[a])))n+=r;else--s}else{while(++a<i)if(c(r=u(t.call(e,e[a],a))))n+=r;else--s}if(s)return n/s};D.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],a=n-i;return a?r+a*(e[i]-r):r};D.median=function(e,t){var n=[],i=e.length,r,a=-1;if(arguments.length===1){while(++a<i)if(c(r=u(e[a])))n.push(r)}else{while(++a<i)if(c(r=u(t.call(e,e[a],a))))n.push(r)}if(n.length)return D.quantile(n.sort(l),.5)};D.variance=function(e,t){var n=e.length,i=0,r,a,s=0,o=-1,l=0;if(arguments.length===1){while(++o<n){if(c(r=u(e[o]))){a=r-i;i+=a/++l;s+=a*(r-i)}}}else{while(++o<n){if(c(r=u(t.call(e,e[o],o)))){a=r-i;i+=a/++l;s+=a*(r-i)}}}if(l>1)return s/(l-1)};D.deviation=function(){var e=D.variance.apply(this,arguments);return e?Math.sqrt(e):e};function e(a){return{left:function(e,t,n,i){if(arguments.length<3)n=0;if(arguments.length<4)i=e.length;while(n<i){var r=n+i>>>1;if(a(e[r],t)<0)n=r+1;else i=r}return n},right:function(e,t,n,i){if(arguments.length<3)n=0;if(arguments.length<4)i=e.length;while(n<i){var r=n+i>>>1;if(a(e[r],t)>0)i=r;else n=r+1}return n}}}var h=e(l);D.bisectLeft=h.left;D.bisect=D.bisectRight=h.right;D.bisector=function(n){return e(n.length===1?function(e,t){return l(n(e),t)}:n)};D.shuffle=function(e,t,n){if((i=arguments.length)<3){n=e.length;if(i<2)t=0}var i=n-t,r,a;while(i){a=Math.random()*i--|0;r=e[i+t],e[i+t]=e[a+t],e[a+t]=r}return e};D.permute=function(e,t){var n=t.length,i=new Array(n);while(n--)i[n]=e[t[n]];return i};D.pairs=function(e){var t=0,n=e.length-1,i,r=e[0],a=new Array(n<0?0:n);while(t<n)a[t]=[i=r,r=e[++t]];return a};D.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=D.min(arguments,d),n=new Array(t);++e<t;){for(var i=-1,r,a=n[e]=new Array(r);++i<r;){a[i]=arguments[i][e]}}return n};function d(e){return e.length}D.transpose=function(e){return D.zip.apply(D,e)};D.keys=function(e){var t=[];for(var n in e)t.push(n);return t};D.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t};D.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};D.merge=function(e){var t=e.length,n,i=-1,r=0,a,s;while(++i<t)r+=e[i].length;a=new Array(r);while(--t>=0){s=e[t];n=s.length;while(--n>=0){a[--r]=s[n]}}return a};var I=Math.abs;D.range=function(e,t,n){if(arguments.length<3){n=1;if(arguments.length<2){t=e;e=0}}if((t-e)/n===Infinity)throw new Error("infinite range");var i=[],r=p(I(n)),a=-1,s;e*=r,t*=r,n*=r;if(n<0)while((s=e+n*++a)>t)i.push(s/r);else while((s=e+n*++a)<t)i.push(s/r);return i};function p(e){var t=1;while(e*t%1)t*=10;return t}function g(e,t){for(var n in t){Object.defineProperty(e.prototype,n,{value:t[n],enumerable:false})}}D.map=function(e,t){var n=new y;if(e instanceof y){e.forEach(function(e,t){n.set(e,t)})}else if(Array.isArray(e)){var i=-1,r=e.length,a;if(arguments.length===1)while(++i<r)n.set(i,e[i]);else while(++i<r)n.set(t.call(e,a=e[i],i),a)}else{for(var s in e)n.set(s,e[s])}return n};function y(){this._=Object.create(null)}var m="__proto__",v="\0";g(y,{has:b,get:function(e){return this._[_(e)]},set:function(e,t){return this._[_(e)]=t},remove:E,keys:x,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:w(t),value:this._[t]});return e},size:T,empty:N,forEach:function(e){for(var t in this._)e.call(this,w(t),this._[t])}});function _(e){return(e+="")===m||e[0]===v?v+e:e}function w(e){return(e+="")[0]===v?e.slice(1):e}function b(e){return _(e)in this._}function E(e){return(e=_(e))in this._&&delete this._[e]}function x(){var e=[];for(var t in this._)e.push(w(t));return e}function T(){var e=0;for(var t in this._)++e;return e}function N(){for(var e in this._)return false;return true}D.nest=function(){var f={},h=[],t=[],d,p;function g(n,e,i){if(i>=h.length)return p?p.call(f,e):d?e.sort(d):e;var t=-1,r=e.length,a=h[i++],s,o,l,u=new y,c;while(++t<r){if(c=u.get(s=a(o=e[t]))){c.push(o)}else{u.set(s,[o])}}if(n){o=n();l=function(e,t){o.set(e,g(n,t,i))}}else{o={};l=function(e,t){o[e]=g(n,t,i)}}u.forEach(l);return o}function a(e,n){if(n>=h.length)return e;var i=[],r=t[n++];e.forEach(function(e,t){i.push({key:e,values:a(t,n)})});return r?i.sort(function(e,t){return r(e.key,t.key)}):i}f.map=function(e,t){return g(t,e,0)};f.entries=function(e){return a(g(D.map,e,0),0)};f.key=function(e){h.push(e);return f};f.sortKeys=function(e){t[h.length-1]=e;return f};f.sortValues=function(e){d=e;return f};f.rollup=function(e){p=e;return f};return f};D.set=function(e){var t=new S;if(e)for(var n=0,i=e.length;n<i;++n)t.add(e[n]);return t};function S(){this._=Object.create(null)}g(S,{has:b,add:function(e){this._[_(e+="")]=true;return e},remove:E,values:x,size:T,empty:N,forEach:function(e){for(var t in this._)e.call(this,w(t))}});D.behavior={};function F(e){return e}D.rebind=function(e,t){var n=1,i=arguments.length,r;while(++n<i)e[r=arguments[n]]=C(e,t,t[r]);return e};function C(t,n,i){return function(){var e=i.apply(n,arguments);return e===n?t:e}}function A(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=k.length;n<i;++n){var r=k[n]+t;if(r in e)return r}}var k=["webkit","ms","moz","Moz","o","O"];function M(){}D.dispatch=function(){var e=new R,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=O(e);return e};function R(){}R.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0){i=e.slice(n+1);e=e.slice(0,n)}if(e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(i,null)}return this}};function O(r){var a=[],s=new y;function e(){var e=a,t=-1,n=e.length,i;while(++t<n)if(i=e[t].on)i.apply(this,arguments);return r}e.on=function(e,t){var n=s.get(e),i;if(arguments.length<2)return n&&n.on;if(n){n.on=null;a=a.slice(0,i=a.indexOf(n)).concat(a.slice(i+1));s.remove(e)}if(t)a.push(s.set(e,{on:t}));return r};return e}D.event=null;function U(){D.event.preventDefault()}function H(){var e=D.event,t;while(t=e.sourceEvent)e=t;return e}function G(r){var a=new R,e=0,t=arguments.length;while(++e<t)a[arguments[e]]=O(a);a.of=function(n,i){return function(e){try{var t=e.sourceEvent=D.event;e.target=r;D.event=e;a[e.type].apply(n,i)}finally{D.event=t}}};return a}D.requote=function(e){return e.replace(Y,"\\$&")};var Y=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var j={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function z(e){j(e,W);return e}var B=function(e,t){return t.querySelector(e)},q=function(e,t){return t.querySelectorAll(e)},V=function(e,t){var n=e.matches||e[A(e,"matchesSelector")];V=function(e,t){return n.call(e,t)};return V(e,t)};if(typeof Sizzle==="function"){B=function(e,t){return Sizzle(e,t)[0]||null};q=Sizzle;V=Sizzle.matchesSelector}D.selection=function(){return D.select(L.documentElement)};var W=D.selection.prototype=[];W.select=function(e){var t=[],n,i,r,a;e=$(e);for(var s=-1,o=this.length;++s<o;){t.push(n=[]);n.parentNode=(r=this[s]).parentNode;for(var l=-1,u=r.length;++l<u;){if(a=r[l]){n.push(i=e.call(a,a.__data__,l,s));if(i&&"__data__"in a)i.__data__=a.__data__}else{n.push(null)}}}return z(t)};function $(e){return typeof e==="function"?e:function(){return B(e,this)}}W.selectAll=function(e){var t=[],n,i;e=X(e);for(var r=-1,a=this.length;++r<a;){for(var s=this[r],o=-1,l=s.length;++o<l;){if(i=s[o]){t.push(n=f(e.call(i,i.__data__,o,r)));n.parentNode=i}}}return z(t)};function X(e){return typeof e==="function"?e:function(){return q(e,this)}}var J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};D.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),n=e;if(t>=0&&(n=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return J.hasOwnProperty(n)?{space:J[n],local:e}:e}};W.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node();e=D.ns.qualify(e);return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(K(t,e[t]));return this}return this.each(K(e,t))};function K(t,n){t=D.ns.qualify(t);function e(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,n)}function a(){this.setAttributeNS(t.space,t.local,n)}function s(){var e=n.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}function o(){var e=n.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}return n==null?t.local?i:e:typeof n==="function"?t.local?o:s:t.local?a:r}function Z(e){return e.trim().replace(/\s+/g," ")}W.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node(),i=(e=ee(e)).length,r=-1;if(t=n.classList){while(++r<i)if(!t.contains(e[r]))return false}else{t=n.getAttribute("class");while(++r<i)if(!Q(e[r]).test(t))return false}return true}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))};function Q(e){return new RegExp("(?:^|\\s+)"+D.requote(e)+"(?:\\s+|$)","g")}function ee(e){return(e+"").trim().split(/^|\s+/)}function te(n,i){n=ee(n).map(ne);var r=n.length;function e(){var e=-1;while(++e<r)n[e](this,i)}function t(){var e=-1,t=i.apply(this,arguments);while(++e<r)n[e](this,t)}return typeof i==="function"?t:e}function ne(i){var r=Q(i);return function(e,t){if(n=e.classList)return t?n.add(i):n.remove(i);var n=e.getAttribute("class")||"";if(t){r.lastIndex=0;if(!r.test(n))e.setAttribute("class",Z(n+" "+i))}else{e.setAttribute("class",Z(n.replace(r," ")))}}}W.style=function(e,t,n){var i=arguments.length;if(i<3){if(typeof e!=="string"){if(i<2)t="";for(n in e)this.each(ie(n,e[n],t));return this}if(i<2){var r=this.node();return P(r).getComputedStyle(r,null).getPropertyValue(e)}n=""}return this.each(ie(e,t,n))};function ie(t,n,i){function e(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,n,i)}function a(){var e=n.apply(this,arguments);if(e==null)this.style.removeProperty(t);else this.style.setProperty(t,e,i)}return n==null?e:typeof n==="function"?a:r}W.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function re(t,n){function e(){delete this[t]}function i(){this[t]=n}function r(){var e=n.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}return n==null?e:typeof n==="function"?r:i}W.text=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent};W.html=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML};W.append=function(e){e=ae(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function ae(n){function e(){var e=this.ownerDocument,t=this.namespaceURI;return t?e.createElementNS(t,n):e.createElement(n)}function t(){return this.ownerDocument.createElementNS(n.space,n.local)}return typeof n==="function"?n:(n=D.ns.qualify(n)).local?t:e}W.insert=function(e,t){e=ae(e);t=$(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};W.remove=function(){return this.each(se)};function se(){var e=this.parentNode;if(e)e.removeChild(this)}W.data=function(e,p){var t=-1,n=this.length,i,r;if(!arguments.length){e=new Array(n=(i=this[0]).length);while(++t<n){if(r=i[t]){e[t]=r.__data__}}return e}function a(e,t){var n,i=e.length,r=t.length,a=Math.min(i,r),s=new Array(r),o=new Array(r),l=new Array(i),u,c;if(p){var f=new y,h=new Array(i),d;for(n=-1;++n<i;){if(u=e[n]){if(f.has(d=p.call(u,u.__data__,n))){l[n]=u}else{f.set(d,u)}h[n]=d}}for(n=-1;++n<r;){if(!(u=f.get(d=p.call(t,c=t[n],n)))){o[n]=oe(c)}else if(u!==true){s[n]=u;u.__data__=c}f.set(d,true)}for(n=-1;++n<i;){if(n in h&&f.get(h[n])!==true){l[n]=e[n]}}}else{for(n=-1;++n<a;){u=e[n];c=t[n];if(u){u.__data__=c;s[n]=u}else{o[n]=oe(c)}}for(;n<r;++n){o[n]=oe(t[n])}for(;n<i;++n){l[n]=e[n]}}o.update=s;o.parentNode=s.parentNode=l.parentNode=e.parentNode;g.push(o);m.push(s);v.push(l)}var g=fe([]),m=z([]),v=z([]);if(typeof e==="function"){while(++t<n){a(i=this[t],e.call(i,i.parentNode.__data__,t))}}else{while(++t<n){a(i=this[t],e)}}m.enter=function(){return g};m.exit=function(){return v};return m};function oe(e){return{__data__:e}}W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};W.filter=function(e){var t=[],n,i,r;if(typeof e!=="function")e=le(e);for(var a=0,s=this.length;a<s;a++){t.push(n=[]);n.parentNode=(i=this[a]).parentNode;for(var o=0,l=i.length;o<l;o++){if((r=i[o])&&e.call(r,r.__data__,o,a)){n.push(r)}}}return z(t)};function le(e){return function(){return V(this,e)}}W.order=function(){for(var e=-1,t=this.length;++e<t;){for(var n=this[e],i=n.length-1,r=n[i],a;--i>=0;){if(a=n[i]){if(r&&r!==a.nextSibling)r.parentNode.insertBefore(a,r);r=a}}}return this};W.sort=function(e){e=ue.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()};function ue(n){if(!arguments.length)n=l;return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}W.each=function(i){return ce(this,function(e,t,n){i.call(e,e.__data__,t,n)})};function ce(e,t){for(var n=0,i=e.length;n<i;n++){for(var r=e[n],a=0,s=r.length,o;a<s;a++){if(o=r[a])t(o,a,n)}}return e}W.call=function(e){var t=f(arguments);e.apply(t[0]=this,t);return this};W.empty=function(){return!this.node()};W.node=function(){for(var e=0,t=this.length;e<t;e++){for(var n=this[e],i=0,r=n.length;i<r;i++){var a=n[i];if(a)return a}}return null};W.size=function(){var e=0;ce(this,function(){++e});return e};function fe(e){j(e,he);return e}var he=[];D.selection.enter=fe;D.selection.enter.prototype=he;he.append=W.append;he.empty=W.empty;he.node=W.node;he.call=W.call;he.size=W.size;he.select=function(e){var t=[],n,i,r,a,s;for(var o=-1,l=this.length;++o<l;){r=(a=this[o]).update;t.push(n=[]);n.parentNode=a.parentNode;for(var u=-1,c=a.length;++u<c;){if(s=a[u]){n.push(r[u]=i=e.call(a.parentNode,s.__data__,u,o));i.__data__=s.__data__}else{n.push(null)}}}return z(t)};he.insert=function(e,t){if(arguments.length<2)t=de(this);return W.insert.call(this,e,t)};function de(s){var o,l;return function(e,t,n){var i=s[n].update,r=i.length,a;if(n!=l)l=n,o=0;if(t>=o)o=t+1;while(!(a=i[o])&&++o<r);return a}}D.select=function(e){var t;if(typeof e==="string"){t=[B(e,L)];t.parentNode=L.documentElement}else{t=[e];t.parentNode=o(e)}return z([t])};D.selectAll=function(e){var t;if(typeof e==="string"){t=f(q(e,L));t.parentNode=L.documentElement}else{t=f(e);t.parentNode=null}return z([t])};W.on=function(e,t,n){var i=arguments.length;if(i<3){if(typeof e!=="string"){if(i<2)t=false;for(n in e)this.each(pe(n,e[n],t));return this}if(i<2)return(i=this.node()["__on"+e])&&i._;n=false}return this.each(pe(e,t,n))};function pe(r,t,n){var i="__on"+r,e=r.indexOf("."),a=me;if(e>0)r=r.slice(0,e);var s=ge.get(r);if(s)r=s,a=ve;function o(){var e=this[i];if(e){this.removeEventListener(r,e,e.$);delete this[i]}}function l(){var e=a(t,f(arguments));o.call(this);this.addEventListener(r,this[i]=e,e.$=n);e._=t}function u(){var e=new RegExp("^__on([^.]+)"+D.requote(r)+"$"),t;for(var n in this){if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$);delete this[n]}}}return e?t?l:o:t?M:u}var ge=D.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(L){ge.forEach(function(e){if("on"+e in L)ge.remove(e)})}function me(n,i){return function(e){var t=D.event;D.event=e;i[0]=this.__data__;try{n.apply(this,i)}finally{D.event=t}}}function ve(e,t){var i=me(e,t);return function(e){var t=this,n=e.relatedTarget;if(!n||n!==t&&!(n.compareDocumentPosition(t)&8)){i.call(t,e)}}}var ye,_e=0;function we(e){var n=".dragsuppress-"+ ++_e,i="click"+n,r=D.select(P(e)).on("touchmove"+n,U).on("dragstart"+n,U).on("selectstart"+n,U);if(ye==null){ye="onselectstart"in e?false:A(e.style,"userSelect")}if(ye){var a=o(e).style,s=a[ye];a[ye]="none"}return function(e){r.on(n,null);if(ye)a[ye]=s;if(e){var t=function(){r.on(i,null)};r.on(i,function(){U();t()},true);setTimeout(t,0)}}}D.mouse=function(e){return Ee(e,H())};var be=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ee(e,t){if(t.changedTouches)t=t.changedTouches[0];var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(be<0){var r=P(e);if(r.scrollX||r.scrollY){n=D.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=n[0][0].getScreenCTM();be=!(a.f||a.e);n.remove()}}if(be)i.x=t.pageX,i.y=t.pageY;else i.x=t.clientX,i.y=t.clientY;i=i.matrixTransform(e.getScreenCTM().inverse());return[i.x,i.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}D.touch=function(e,t,n){if(arguments.length<3)n=t,t=H().changedTouches;if(t)for(var i=0,r=t.length,a;i<r;++i){if((a=t[i]).identifier===n){return Ee(e,a)}}};D.behavior.drag=function(){var y=G(n,"drag","dragstart","dragend"),_=null,e=i(M,D.mouse,P,"mousemove","mouseup"),t=i(xe,D.touch,F,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function i(d,p,g,m,v){return function(){var e=this,t=D.event.target,i=e.parentNode,r=y.of(e,arguments),a=0,s=d(),n=".drag"+(s==null?"":"-"+s),o,l=D.select(g(t)).on(m+n,f).on(v+n,h),u=we(t),c=p(i,s);if(_){o=_.apply(e,arguments);o=[o.x-c[0],o.y-c[1]]}else{o=[0,0]}r({type:"dragstart"});function f(){var e=p(i,s),t,n;if(!e)return;t=e[0]-c[0];n=e[1]-c[1];a|=t|n;c=e;r({type:"drag",x:e[0]+o[0],y:e[1]+o[1],dx:t,dy:n})}function h(){if(!p(i,s))return;l.on(m+n,null).on(v+n,null);u(a);r({type:"dragend"})}}}n.origin=function(e){if(!arguments.length)return _;_=e;return n};return D.rebind(n,y,"on")};function xe(){return D.event.changedTouches[0].identifier}D.touches=function(n,e){if(arguments.length<2)e=H().touches;return e?f(e).map(function(e){var t=Ee(n,e);t.identifier=e.identifier;return t}):[]};var Te=1e-6,Ne=Te*Te,Se=Math.PI,Ce=2*Se,Ae=Ce-Te,ke=Se/2,Me=Se/180,Re=180/Se;function Oe(e){return e>0?1:e<0?-1:0}function Ie(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function De(e){return e>1?0:e<-1?Se:Math.acos(e)}function Le(e){return e>1?ke:e<-1?-ke:Math.asin(e)}function Pe(e){return((e=Math.exp(e))-1/e)/2}function Fe(e){return((e=Math.exp(e))+1/e)/2}function Ue(e){return((e=Math.exp(2*e))-1)/(e+1)}function He(e){return(e=Math.sin(e/2))*e}var Ge=Math.SQRT2,Ye=2,je=4;D.interpolateZoom=function(e,t){var r=e[0],a=e[1],s=e[2],n=t[0],i=t[1],o=t[2],l=n-r,u=i-a,c=l*l+u*u,f,h;if(c<Ne){h=Math.log(o/s)/Ge;f=function(e){return[r+e*l,a+e*u,s*Math.exp(Ge*e*h)]}}else{var d=Math.sqrt(c),p=(o*o-s*s+je*c)/(2*s*Ye*d),g=(o*o-s*s-je*c)/(2*o*Ye*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);h=(v-m)/Ge;f=function(e){var t=e*h,n=Fe(m),i=s/(Ye*d)*(n*Ue(Ge*t+m)-Pe(m));return[r+i*l,a+i*u,s*n/Fe(Ge*t+m)]}}f.duration=h*1e3;return f};D.behavior.zoom=function(){var w={x:0,y:0,k:1},t,l,n,u=[960,500],i=ze,r=250,a=0,o="mousedown.zoom",c="mousemove.zoom",f="mouseup.zoom",s,b="touchstart.zoom",E,x=G(m,"zoomstart","zoom","zoomend"),h,d,p,g;if(!qe){qe="onwheel"in L?(Be=function(){return-D.event.deltaY*(D.event.deltaMode?120:1)},"wheel"):"onmousewheel"in L?(Be=function(){return D.event.wheelDelta},"mousewheel"):(Be=function(){return-D.event.detail},"MozMousePixelScroll")}function m(e){e.on(o,R).on(qe+".zoom",_).on("dblclick.zoom",I).on(b,O)}m.event=function(e){e.each(function(){var o=x.of(this,arguments),t=w;if(kl){D.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1};A(o)}).tween("zoom:zoom",function(){var i=u[0],e=u[1],r=l?l[0]:i/2,a=l?l[1]:e/2,s=D.interpolateZoom([(r-w.x)/w.k,(a-w.y)/w.k,i/w.k],[(r-t.x)/t.k,(a-t.y)/t.k,i/t.k]);return function(e){var t=s(e),n=i/t[2];this.__chart__=w={x:r-t[0]*n,y:a-t[1]*n,k:n};k(o)}}).each("interrupt.zoom",function(){M(o)}).each("end.zoom",function(){M(o)})}else{this.__chart__=w;A(o);k(o);M(o)}})};m.translate=function(e){if(!arguments.length)return[w.x,w.y];w={x:+e[0],y:+e[1],k:w.k};y();return m};m.scale=function(e){if(!arguments.length)return w.k;w={x:w.x,y:w.y,k:null};N(+e);y();return m};m.scaleExtent=function(e){if(!arguments.length)return i;i=e==null?ze:[+e[0],+e[1]];return m};m.center=function(e){if(!arguments.length)return n;n=e&&[+e[0],+e[1]];return m};m.size=function(e){if(!arguments.length)return u;u=e&&[+e[0],+e[1]];return m};m.duration=function(e){if(!arguments.length)return r;r=+e;return m};m.x=function(e){if(!arguments.length)return d;d=e;h=e.copy();w={x:0,y:0,k:1};return m};m.y=function(e){if(!arguments.length)return g;g=e;p=e.copy();w={x:0,y:0,k:1};return m};function T(e){return[(e[0]-w.x)/w.k,(e[1]-w.y)/w.k]}function v(e){return[e[0]*w.k+w.x,e[1]*w.k+w.y]}function N(e){w.k=Math.max(i[0],Math.min(i[1],e))}function S(e,t){t=v(t);w.x+=e[0]-t[0];w.y+=e[1]-t[1]}function C(e,t,n,i){e.__chart__={x:w.x,y:w.y,k:w.k};N(Math.pow(2,i));S(l=t,n);e=D.select(e);if(r>0)e=e.transition().duration(r);e.call(m.event)}function y(){if(d)d.domain(h.range().map(function(e){return(e-w.x)/w.k}).map(h.invert));if(g)g.domain(p.range().map(function(e){return(e-w.y)/w.k}).map(p.invert))}function A(e){if(!a++)e({type:"zoomstart"})}function k(e){y();e({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function M(e){if(!--a)e({type:"zoomend"}),l=null}function R(){var e=this,t=x.of(e,arguments),n=0,i=D.select(P(e)).on(c,s).on(f,o),r=T(D.mouse(e)),a=we(e);Tl.call(e);A(t);function s(){n=1;S(D.mouse(e),r);k(t)}function o(){i.on(c,null).on(f,null);a(n);M(t)}}function O(){var c=this,u=x.of(c,arguments),f={},h=0,d,r=".zoom-"+D.event.changedTouches[0].identifier,p="touchmove"+r,g="touchend"+r,m=[],a=D.select(c),s=we(c);e();A(u);a.on(o,null).on(b,e);function v(){var e=D.touches(c);d=w.k;e.forEach(function(e){if(e.identifier in f)f[e.identifier]=T(e)});return e}function e(){var e=D.event.target;D.select(e).on(p,y).on(g,_);m.push(e);var t=D.event.changedTouches;for(var n=0,i=t.length;n<i;++n){f[t[n].identifier]=null}var r=v(),a=Date.now();if(r.length===1){if(a-E<500){var s=r[0];C(c,s,f[s.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1);U()}E=a}else if(r.length>1){var s=r[0],o=r[1],l=s[0]-o[0],u=s[1]-o[1];h=l*l+u*u}}function y(){var e=D.touches(c),t,n,i,r;Tl.call(c);for(var a=0,s=e.length;a<s;++a,r=null){i=e[a];if(r=f[i.identifier]){if(n)break;t=i,n=r}}if(r){var o=(o=i[0]-t[0])*o+(o=i[1]-t[1])*o,l=h&&Math.sqrt(o/h);t=[(t[0]+i[0])/2,(t[1]+i[1])/2];n=[(n[0]+r[0])/2,(n[1]+r[1])/2];N(l*d)}E=null;S(t,n);k(u)}function _(){if(D.event.touches.length){var e=D.event.changedTouches;for(var t=0,n=e.length;t<n;++t){delete f[e[t].identifier]}for(var i in f){return void v()}}D.selectAll(m).on(r,null);a.on(o,R).on(b,O);s();M(u)}}function _(){var e=x.of(this,arguments);if(s)clearTimeout(s);else Tl.call(this),t=T(l=n||D.mouse(this)),A(e);s=setTimeout(function(){s=null;M(e)},50);U();N(Math.pow(2,Be()*.002)*w.k);S(l,t);k(e)}function I(){var e=D.mouse(this),t=Math.log(w.k)/Math.LN2;C(this,e,T(e),D.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return D.rebind(m,x,"on")};var ze=[0,Infinity],Be,qe;D.color=Ve;function Ve(){}Ve.prototype.toString=function(){return this.rgb()+""};D.hsl=We;function We(e,t,n){return this instanceof We?void(this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof We?new We(e.h,e.s,e.l):gt(""+e,mt,We):new We(e,t,n)}var $e=We.prototype=new Ve;$e.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new We(this.h,this.s,this.l/e)};$e.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new We(this.h,this.s,e*this.l)};$e.rgb=function(){return Xe(this.h,this.s,this.l)};function Xe(e,t,n){var i,r;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;n=n<0?0:n>1?1:n;r=n<=.5?n*(1+t):n+t-n*t;i=2*n-r;function a(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return i+(r-i)*e/60;if(e<180)return r;if(e<240)return i+(r-i)*(240-e)/60;return i}function s(e){return Math.round(a(e)*255)}return new ct(s(e+120),s(e),s(e-120))}D.hcl=Je;function Je(e,t,n){return this instanceof Je?void(this.h=+e,this.c=+t,this.l=+n):arguments.length<2?e instanceof Je?new Je(e.h,e.c,e.l):e instanceof Qe?st(e.l,e.a,e.b):st((e=vt((e=D.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Je(e,t,n)}var Ke=Je.prototype=new Ve;Ke.brighter=function(e){return new Je(this.h,this.c,Math.min(100,this.l+et*(arguments.length?e:1)))};Ke.darker=function(e){return new Je(this.h,this.c,Math.max(0,this.l-et*(arguments.length?e:1)))};Ke.rgb=function(){return Ze(this.h,this.c,this.l).rgb()};function Ze(e,t,n){if(isNaN(e))e=0;if(isNaN(t))t=0;return new Qe(n,Math.cos(e*=Me)*t,Math.sin(e)*t)}D.lab=Qe;function Qe(e,t,n){return this instanceof Qe?void(this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof Qe?new Qe(e.l,e.a,e.b):e instanceof Je?Ze(e.h,e.c,e.l):vt((e=ct(e)).r,e.g,e.b):new Qe(e,t,n)}var et=18;var tt=.95047,nt=1,it=1.08883;var rt=Qe.prototype=new Ve;rt.brighter=function(e){return new Qe(Math.min(100,this.l+et*(arguments.length?e:1)),this.a,this.b)};rt.darker=function(e){return new Qe(Math.max(0,this.l-et*(arguments.length?e:1)),this.a,this.b)};rt.rgb=function(){return at(this.l,this.a,this.b)};function at(e,t,n){var i=(e+16)/116,r=i+t/500,a=i-n/200;r=ot(r)*tt;i=ot(i)*nt;a=ot(a)*it;return new ct(ut(3.2404542*r-1.5371385*i-.4985314*a),ut(-.969266*r+1.8760108*i+.041556*a),ut(.0556434*r-.2040259*i+1.0572252*a))}function st(e,t,n){return e>0?new Je(Math.atan2(n,t)*Re,Math.sqrt(t*t+n*n),e):new Je(NaN,NaN,e)}function ot(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function lt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}D.rgb=ct;function ct(e,t,n){return this instanceof ct?void(this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof ct?new ct(e.r,e.g,e.b):gt(""+e,ct,Xe):new ct(e,t,n)}function ft(e){return new ct(e>>16,e>>8&255,e&255)}function ht(e){return ft(e)+""}var dt=ct.prototype=new Ve;dt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;if(!t&&!n&&!i)return new ct(r,r,r);if(t&&t<r)t=r;if(n&&n<r)n=r;if(i&&i<r)i=r;return new ct(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,i/e))};dt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new ct(e*this.r,e*this.g,e*this.b)};dt.hsl=function(){return mt(this.r,this.g,this.b)};dt.toString=function(){return"#"+pt(this.r)+pt(this.g)+pt(this.b)};function pt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,n){var i=0,r=0,a=0,s,o,l;s=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(s){o=s[2].split(",");switch(s[1]){case"hsl":{return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100)}case"rgb":{return t(_t(o[0]),_t(o[1]),_t(o[2]))}}}if(l=wt.get(e)){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){i=(l&3840)>>4;i=i>>4|i;r=l&240;r=r>>4|r;a=l&15;a=a<<4|a}else if(e.length===7){i=(l&16711680)>>16;r=(l&65280)>>8;a=l&255}}return t(i,r,a)}function mt(e,t,n){var i=Math.min(e/=255,t/=255,n/=255),r=Math.max(e,t,n),a=r-i,s,o,l=(r+i)/2;if(a){o=l<.5?a/(r+i):a/(2-r-i);if(e==r)s=(t-n)/a+(t<n?6:0);else if(t==r)s=(n-e)/a+2;else s=(e-t)/a+4;s*=60}else{s=NaN;o=l>0&&l<1?0:s}return new We(s,o,l)}function vt(e,t,n){e=yt(e);t=yt(t);n=yt(n);var i=lt((.4124564*e+.3575761*t+.1804375*n)/tt),r=lt((.2126729*e+.7151522*t+.072175*n)/nt),a=lt((.0193339*e+.119192*t+.9503041*n)/it);return Qe(116*r-16,500*(i-r),200*(r-a))}function yt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _t(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var wt=D.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});wt.forEach(function(e,t){wt.set(e,ft(t))});function bt(e){return typeof e==="function"?e:function(){return e}}D.functor=bt;D.xhr=Et(F);function Et(i){return function(e,t,n){if(arguments.length===2&&typeof t==="function")n=t,t=null;return xt(e,t,i,n)}}function xt(r,a,n,e){var s={},o=D.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;if(this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(r))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=t:u.onreadystatechange=function(){u.readyState>3&&t()};function t(){var e=u.status,t;if(!e&&Nt(u)||e>=200&&e<300||e===304){try{t=n.call(s,u)}catch(e){o.error.call(s,e);return}o.load.call(s,t)}else{o.error.call(s,u)}}u.onprogress=function(e){var t=D.event;D.event=e;try{o.progress.call(s,u)}finally{D.event=t}};s.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return s};s.mimeType=function(e){if(!arguments.length)return a;a=e==null?null:e+"";return s};s.responseType=function(e){if(!arguments.length)return c;c=e;return s};s.response=function(e){n=e;return s};["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(f(arguments)))}});s.send=function(e,t,n){if(arguments.length===2&&typeof t==="function")n=t,t=null;u.open(e,r,true);if(a!=null&&!("accept"in l))l["accept"]=a+",*/*";if(u.setRequestHeader)for(var i in l)u.setRequestHeader(i,l[i]);if(a!=null&&u.overrideMimeType)u.overrideMimeType(a);if(c!=null)u.responseType=c;if(n!=null)s.on("error",n).on("load",function(e){n(null,e)});o.beforesend.call(s,u);u.send(t==null?null:t);return s};s.abort=function(){u.abort();return s};D.rebind(s,o,"on");return e==null?s:s.get(Tt(e))}function Tt(n){return n.length===1?function(e,t){n(e==null?t:null)}:n}function Nt(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}D.dsv=function(r,a){var t=new RegExp('["'+r+"\n]"),h=r.charCodeAt(0);function s(e,t,n){if(arguments.length<3)n=t,t=null;var i=xt(e,a,t==null?o:l(t),n);i.row=function(e){return arguments.length?i.response((t=e)==null?o:l(e)):t};return i}function o(e){return s.parse(e.responseText)}function l(t){return function(e){return s.parse(e.responseText,t)}}s.parse=function(e,i){var r;return s.parseRows(e,function(e,t){if(r)return r(e,t-1);var n=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=i?function(e,t){return i(n(e),t)}:n})};s.parseRows=function(r,e){var a={},s={},t=[],o=r.length,l=0,n=0,i,u;function c(){if(l>=o)return s;if(u)return u=false,a;var e=l;if(r.charCodeAt(e)===34){var t=e;while(t++<o){if(r.charCodeAt(t)===34){if(r.charCodeAt(t+1)!==34)break;++t}}l=t+2;var n=r.charCodeAt(t+1);if(n===13){u=true;if(r.charCodeAt(t+2)===10)++l}else if(n===10){u=true}return r.slice(e+1,t).replace(/""/g,'"')}while(l<o){var n=r.charCodeAt(l++),i=1;if(n===10)u=true;else if(n===13){u=true;if(r.charCodeAt(l)===10)++l,++i}else if(n!==h)continue;return r.slice(e,l-i)}return r.slice(e)}while((i=c())!==s){var f=[];while(i!==a&&i!==s){f.push(i);i=c()}if(e&&(f=e(f,n++))==null)continue;t.push(f)}return t};s.format=function(e){if(Array.isArray(e[0]))return s.formatRows(e);var n=new S,i=[];e.forEach(function(e){for(var t in e){if(!n.has(t)){i.push(n.add(t))}}});return[i.map(u).join(r)].concat(e.map(function(t){return i.map(function(e){return u(t[e])}).join(r)})).join("\n")};s.formatRows=function(e){return e.map(n).join("\n")};function n(e){return e.map(u).join(r)}function u(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return s};D.csv=D.dsv(",","text/csv");D.tsv=D.dsv("\t","text/tab-separated-values");var St,Ct,At,kt,Mt=this[A(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};D.timer=function(){Rt.apply(this,arguments)};function Rt(e,t,n){var i=arguments.length;if(i<2)t=0;if(i<3)n=Date.now();var r=n+t,a={c:e,t:r,n:null};if(Ct)Ct.n=a;else St=a;Ct=a;if(!At){kt=clearTimeout(kt);At=1;Mt(Ot)}return a}function Ot(){var e=It(),t=Dt()-e;if(t>24){if(isFinite(t)){clearTimeout(kt);kt=setTimeout(Ot,t)}At=0}else{At=1;Mt(Ot)}}D.timer.flush=function(){It();Dt()};function It(){var e=Date.now(),t=St;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Dt(){var e,t=St,n=Infinity;while(t){if(t.c){if(t.t<n)n=t.t;t=(e=t).n}else{t=e?e.n=t.n:St=t.n}}Ct=e;return n}function Lt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}D.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Pt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ft);D.formatPrefix=function(e,t){var n=0;if(e=+e){if(e<0)e*=-1;if(t)e=D.round(e,Lt(e,t));n=1+Math.floor(1e-12+Math.log(e)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}return Pt[8+n/3]};function Ft(e,t){var n=Math.pow(10,I(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ut(e){var T=e.decimal,o=e.thousands,l=e.grouping,i=e.currency,N=l&&o?function(e,t){var n=e.length,i=[],r=0,a=l[0],s=0;while(n>0&&a>0){if(s+a+1>t)a=Math.max(1,t-s);i.push(e.substring(n-=a,n+a));if((s+=a+1)>t)break;a=l[r=(r+1)%l.length]}return i.reverse().join(o)}:F;return function(e){var t=Ht.exec(e),c=t[1]||" ",f=t[2]||">",h=t[3]||"-",n=t[4]||"",d=t[5],p=+t[6],g=t[7],m=t[8],v=t[9],y=1,_="",w="",b=false,E=true;if(m)m=+m.substring(1);if(d||c==="0"&&f==="="){d=c="0";f="="}switch(v){case"n":g=true;v="g";break;case"%":y=100;w="%";v="f";break;case"p":y=100;w="%";v="r";break;case"b":case"o":case"x":case"X":if(n==="#")_="0"+v.toLowerCase();case"c":E=false;case"d":b=true;m=0;break;case"s":y=-1;v="r";break}if(n==="$")_=i[0],w=i[1];if(v=="r"&&!m)v="g";if(m!=null){if(v=="g")m=Math.max(1,Math.min(21,m));else if(v=="e"||v=="f")m=Math.max(0,Math.min(20,m))}v=Gt.get(v)||Yt;var x=d&&g;return function(e){var t=w;if(b&&e%1)return"";var n=e<0||e===0&&1/e<0?(e=-e,"-"):h==="-"?"":h;if(y<0){var i=D.formatPrefix(e,m);e=i.scale(e);t=i.symbol+w}else{e*=y}e=v(e,m);var r=e.lastIndexOf("."),a,s;if(r<0){var o=E?e.lastIndexOf("e"):-1;if(o<0)a=e,s="";else a=e.substring(0,o),s=e.substring(o)}else{a=e.substring(0,r);s=T+e.substring(r+1)}if(!d&&g)a=N(a,Infinity);var l=_.length+a.length+s.length+(x?0:n.length),u=l<p?new Array(l=p-l+1).join(c):"";if(x)a=N(u+a,u.length?p-s.length:Infinity);n+=_;e=a+s;return(f==="<"?n+e+u:f===">"?u+n+e:f==="^"?u.substring(0,l>>=1)+n+e+u.substring(l):n+(x?e:u+e))+t}}}var Ht=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Gt=D.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=D.round(e,Lt(e,t))).toFixed(Math.max(0,Math.min(20,Lt(e*(1+1e-15),t))))}});function Yt(e){return e+""}var jt=D.time={},zt=Date;function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qt.setUTCDate.apply(this._,arguments)},setDay:function(){qt.setUTCDay.apply(this._,arguments)},setFullYear:function(){qt.setUTCFullYear.apply(this._,arguments)},setHours:function(){qt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){qt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){qt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qt.setUTCSeconds.apply(this._,arguments)},setTime:function(){qt.setTime.apply(this._,arguments)}};var qt=Date.prototype;function Vt(i,a,s){function e(e){var t=i(e),n=r(t,1);return e-t<n-e?t:n}function o(e){a(e=i(new zt(e-1)),1);return e}function r(e,t){a(e=new zt(+e),t);return e}function l(e,t,n){var i=o(e),r=[];if(n>1){while(i<t){if(!(s(i)%n))r.push(new Date(+i));a(i,1)}}else{while(i<t)r.push(new Date(+i)),a(i,1)}return r}function t(e,t,n){try{zt=Bt;var i=new Bt;i._=e;return l(i,t,n)}finally{zt=Date}}i.floor=i;i.round=e;i.ceil=o;i.offset=r;i.range=l;var n=i.utc=Wt(i);n.floor=n;n.round=Wt(e);n.ceil=Wt(o);n.offset=Wt(r);n.range=t;return i}function Wt(i){return function(e,t){try{zt=Bt;var n=new Bt;n._=e;return i(n,t)._}finally{zt=Date}}}jt.year=Vt(function(e){e=jt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});jt.years=jt.year.range;jt.years.utc=jt.year.utc.range;jt.day=Vt(function(e){var t=new zt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});jt.days=jt.day.range;jt.days.utc=jt.day.utc.range;jt.dayOfYear=function(e){var t=jt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,n){n=7-n;var t=jt[e]=Vt(function(e){(e=jt.day(e)).setDate(e.getDate()-(e.getDay()+n)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var t=jt.year(e).getDay();return Math.floor((jt.dayOfYear(e)+(t+n)%7)/7)-(t!==n)});jt[e+"s"]=t.range;jt[e+"s"].utc=t.utc.range;jt[e+"OfYear"]=function(e){var t=jt.year(e).getDay();return Math.floor((jt.dayOfYear(e)+(t+n)%7)/7)}});jt.week=jt.sunday;jt.weeks=jt.sunday.range;jt.weeks.utc=jt.sunday.utc.range;jt.weekOfYear=jt.sundayOfYear;function $t(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths;function u(o){var l=o.length;function e(e){var t=[],n=-1,i=0,r,a,s;while(++n<l){if(o.charCodeAt(n)===37){t.push(o.slice(i,n));if((a=Xt[r=o.charAt(++n)])!=null)r=o.charAt(++n);if(s=w[r])r=s(e,a==null?r==="e"?" ":"0":a);t.push(r);i=n+1}}t.push(o.slice(i,n));return t.join("")}e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},n=c(t,o,e,0);if(n!=e.length)return null;if("p"in t)t.H=t.H%12+t.p*12;var i=t.Z!=null&&zt!==Bt,r=new(i?Bt:zt);if("j"in t)r.setFullYear(t.y,0,t.j);else if("W"in t||"U"in t){if(!("w"in t))t.w="W"in t?1:0;r.setFullYear(t.y,0,1);r.setFullYear(t.y,0,"W"in t?(t.w+6)%7+t.W*7-(r.getDay()+5)%7:t.w+t.U*7-(r.getDay()+6)%7)}else r.setFullYear(t.y,t.m,t.d);r.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L);return i?r._:r};e.toString=function(){return o};return e}function c(e,t,n,i){var r,a,s,o=0,l=t.length,u=n.length;while(o<l){if(i>=u)return-1;r=t.charCodeAt(o++);if(r===37){s=t.charAt(o++);a=b[s in Xt?t.charAt(o++):s];if(!a||(i=a(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++)){return-1}}return i}u.utc=function(e){var n=u(e);function t(e){try{zt=Bt;var t=new zt;t._=e;return n(t)}finally{zt=Date}}t.parse=function(e){try{zt=Bt;var t=n.parse(e);return t&&t._}finally{zt=Date}};t.toString=n.toString;return t};u.multi=u.utc.multi=yn;var f=D.map(),h=Qt(a),d=en(a),p=Qt(s),g=en(s),m=Qt(o),v=en(o),y=Qt(l),_=en(l);r.forEach(function(e,t){f.set(e.toLowerCase(),t)});var w={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:u(t),d:function(e,t){return Zt(e.getDate(),t,2)},e:function(e,t){return Zt(e.getDate(),t,2)},H:function(e,t){return Zt(e.getHours(),t,2)},I:function(e,t){return Zt(e.getHours()%12||12,t,2)},j:function(e,t){return Zt(1+jt.dayOfYear(e),t,3)},L:function(e,t){return Zt(e.getMilliseconds(),t,3)},m:function(e,t){return Zt(e.getMonth()+1,t,2)},M:function(e,t){return Zt(e.getMinutes(),t,2)},p:function(e){return r[+(e.getHours()>=12)]},S:function(e,t){return Zt(e.getSeconds(),t,2)},U:function(e,t){return Zt(jt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Zt(jt.mondayOfYear(e),t,2)},x:u(n),X:u(i),y:function(e,t){return Zt(e.getFullYear()%100,t,2)},Y:function(e,t){return Zt(e.getFullYear()%1e4,t,4)},Z:mn,"%":function(){return"%"}};var b={a:E,A:x,b:T,B:N,c:S,d:cn,e:cn,H:hn,I:hn,j:fn,L:gn,m:un,M:dn,p:k,S:pn,U:nn,w:tn,W:rn,x:C,X:A,y:sn,Y:an,Z:on,"%":vn};function E(e,t,n){p.lastIndex=0;var i=p.exec(t.slice(n));return i?(e.w=g.get(i[0].toLowerCase()),n+i[0].length):-1}function x(e,t,n){h.lastIndex=0;var i=h.exec(t.slice(n));return i?(e.w=d.get(i[0].toLowerCase()),n+i[0].length):-1}function T(e,t,n){y.lastIndex=0;var i=y.exec(t.slice(n));return i?(e.m=_.get(i[0].toLowerCase()),n+i[0].length):-1}function N(e,t,n){m.lastIndex=0;var i=m.exec(t.slice(n));return i?(e.m=v.get(i[0].toLowerCase()),n+i[0].length):-1}function S(e,t,n){return c(e,w.c.toString(),t,n)}function C(e,t,n){return c(e,w.x.toString(),t,n)}function A(e,t,n){return c(e,w.X.toString(),t,n)}function k(e,t,n){var i=f.get(t.slice(n,n+=2).toLowerCase());return i==null?-1:(e.p=i,n)}return u}var Xt={"-":"",_:" ",0:"0"},Jt=/^\s*\d+/,Kt=/^%/;function Zt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function Qt(e){return new RegExp("^(?:"+e.map(D.requote).join("|")+")","i")}function en(e){var t=new y,n=-1,i=e.length;while(++n<i)t.set(e[n].toLowerCase(),n);return t}function tn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function nn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function rn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function an(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function sn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+2));return i?(e.y=ln(+i[0]),n+i[0].length):-1}function on(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function ln(e){return e+(e>68?1900:2e3)}function un(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function cn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function fn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+3));return i?(e.j=+i[0],n+i[0].length):-1}function hn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function dn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function pn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function gn(e,t,n){Jt.lastIndex=0;var i=Jt.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function mn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=I(t)/60|0,r=I(t)%60;return n+Zt(i,"0",2)+Zt(r,"0",2)}function vn(e,t,n){Kt.lastIndex=0;var i=Kt.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function yn(i){var e=i.length,t=-1;while(++t<e)i[t][0]=this(i[t][0]);return function(e){var t=0,n=i[t];while(!n[1](e))n=i[++t];return n[0](e)}}D.locale=function(e){return{numberFormat:Ut(e),timeFormat:$t(e)}};var _n=D.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});D.format=_n.numberFormat;D.geo={};function wn(){}wn.prototype={s:0,t:0,add:function(e){En(e,this.t,bn);En(bn.s,this.s,this);if(this.s)this.t+=bn.t;else this.s=bn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bn=new wn;function En(e,t,n){var i=n.s=e+t,r=i-e,a=i-r;n.t=e-a+(t-r)}D.geo.stream=function(e,t){if(e&&Tn.hasOwnProperty(e.type)){Tn[e.type](e,t)}else{xn(e,t)}};function xn(e,t){if(e&&Nn.hasOwnProperty(e.type)){Nn[e.type](e,t)}}var Tn={Feature:function(e,t){xn(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,i=-1,r=n.length;while(++i<r)xn(n[i].geometry,t)}};var Nn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,i=-1,r=n.length;while(++i<r)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Sn(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,i=-1,r=n.length;while(++i<r)Sn(n[i],t,0)},Polygon:function(e,t){Cn(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,i=-1,r=n.length;while(++i<r)Cn(n[i],t)},GeometryCollection:function(e,t){var n=e.geometries,i=-1,r=n.length;while(++i<r)xn(n[i],t)}};function Sn(e,t,n){var i=-1,r=e.length-n,a;t.lineStart();while(++i<r)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function Cn(e,t){var n=-1,i=e.length;t.polygonStart();while(++n<i)Sn(e[n],t,1);t.polygonEnd()}D.geo.area=function(e){An=0;D.geo.stream(e,Mn);return An};var An,kn=new wn;var Mn={sphere:function(){An+=4*Se},point:M,lineStart:M,lineEnd:M,polygonStart:function(){kn.reset();Mn.lineStart=Rn},polygonEnd:function(){var e=2*kn;An+=e<0?4*Se+e:e;Mn.lineStart=Mn.lineEnd=Mn.point=M}};function Rn(){var n,i,c,f,h;Mn.point=function(e,t){Mn.point=r;c=(n=e)*Me,f=Math.cos(t=(i=t)*Me/2+Se/4),h=Math.sin(t)};function r(e,t){e*=Me;t=t*Me/2+Se/4;var n=e-c,i=n>=0?1:-1,r=i*n,a=Math.cos(t),s=Math.sin(t),o=h*s,l=f*a+o*Math.cos(r),u=o*i*Math.sin(r);kn.add(Math.atan2(u,l));c=e,f=a,h=s}Mn.lineEnd=function(){r(n,i)}}function On(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function In(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Dn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ln(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Pn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Fn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Un(e){return[Math.atan2(e[1],e[0]),Le(e[2])]}function Hn(e,t){return I(e[0]-t[0])<Te&&I(e[1]-t[1])<Te}D.geo.bounds=function(){var f,h,d,p,g,i,r,m,a,l,u;var c={point:v,lineStart:e,lineEnd:t,polygonStart:function(){c.point=n;c.lineStart=o;c.lineEnd=y;a=0;Mn.polygonStart()},polygonEnd:function(){Mn.polygonEnd();c.point=v;c.lineStart=e;c.lineEnd=t;if(kn<0)f=-(d=180),h=-(p=90);else if(a>Te)p=90;else if(a<-Te)h=-90;u[0]=f,u[1]=d}};function v(e,t){l.push(u=[f=e,d=e]);if(t<h)h=t;if(t>p)p=t}function s(e,t){var n=On([e*Me,t*Me]);if(m){var i=Dn(m,n),r=[i[1],-i[0],0],a=Dn(r,i);Fn(a);a=Un(a);var s=e-g,o=s>0?1:-1,l=a[0]*Re*o,u=I(s)>180;if(u^(o*g<l&&l<o*e)){var c=a[1]*Re;if(c>p)p=c}else if(l=(l+360)%360-180,u^(o*g<l&&l<o*e)){var c=-a[1]*Re;if(c<h)h=c}else{if(t<h)h=t;if(t>p)p=t}if(u){if(e<g){if(_(f,e)>_(f,d))d=e}else{if(_(e,d)>_(f,d))f=e}}else{if(d>=f){if(e<f)f=e;if(e>d)d=e}else{if(e>g){if(_(f,e)>_(f,d))d=e}else{if(_(e,d)>_(f,d))f=e}}}}else{v(e,t)}m=n,g=e}function e(){c.point=s}function t(){u[0]=f,u[1]=d;c.point=v;m=null}function n(e,t){if(m){var n=e-g;a+=I(n)>180?n+(n>0?360:-360):n}else i=e,r=t;Mn.point(e,t);s(e,t)}function o(){Mn.lineStart()}function y(){n(i,r);Mn.lineEnd();if(I(a)>Te)f=-(d=180);u[0]=f,u[1]=d;m=null}function _(e,t){return(t-=e)<0?t+360:t}function w(e,t){return e[0]-t[0]}function b(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(e){p=d=-(f=h=Infinity);l=[];D.geo.stream(e,c);var t=l.length;if(t){l.sort(w);for(var n=1,i=l[0],r,a=[i];n<t;++n){r=l[n];if(b(r[0],i)||b(r[1],i)){if(_(i[0],r[1])>_(i[0],i[1]))i[1]=r[1];if(_(r[0],i[1])>_(i[0],i[1]))i[0]=r[0]}else{a.push(i=r)}}var s=-Infinity,o;for(var t=a.length-1,n=0,i=a[t],r;n<=t;i=r,++n){r=a[n];if((o=_(i[1],r[0]))>s)s=o,f=r[0],d=i[1]}}l=u=null;return f===Infinity||h===Infinity?[[NaN,NaN],[NaN,NaN]]:[[f,h],[d,p]]}}();D.geo.centroid=function(e){Gn=Yn=jn=zn=Bn=qn=Vn=Wn=$n=Xn=Jn=0;D.geo.stream(e,Kn);var t=$n,n=Xn,i=Jn,r=t*t+n*n+i*i;if(r<Ne){t=qn,n=Vn,i=Wn;if(Yn<Te)t=jn,n=zn,i=Bn;r=t*t+n*n+i*i;if(r<Ne)return[NaN,NaN]}return[Math.atan2(n,t)*Re,Le(i/Math.sqrt(r))*Re]};var Gn,Yn,jn,zn,Bn,qn,Vn,Wn,$n,Xn,Jn;var Kn={sphere:M,point:Zn,lineStart:ei,lineEnd:ti,polygonStart:function(){Kn.lineStart=ni},polygonEnd:function(){Kn.lineStart=ei}};function Zn(e,t){e*=Me;var n=Math.cos(t*=Me);Qn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Qn(e,t,n){++Gn;jn+=(e-jn)/Gn;zn+=(t-zn)/Gn;Bn+=(n-Bn)/Gn}function ei(){var o,l,u;Kn.point=function(e,t){e*=Me;var n=Math.cos(t*=Me);o=n*Math.cos(e);l=n*Math.sin(e);u=Math.sin(t);Kn.point=i;Qn(o,l,u)};function i(e,t){e*=Me;var n=Math.cos(t*=Me),i=n*Math.cos(e),r=n*Math.sin(e),a=Math.sin(t),s=Math.atan2(Math.sqrt((s=l*a-u*r)*s+(s=u*i-o*a)*s+(s=o*r-l*i)*s),o*i+l*r+u*a);Yn+=s;qn+=s*(o+(o=i));Vn+=s*(l+(l=r));Wn+=s*(u+(u=a));Qn(o,l,u)}}function ti(){Kn.point=Zn}function ni(){var i,r,d,p,g;Kn.point=function(e,t){i=e,r=t;Kn.point=a;e*=Me;var n=Math.cos(t*=Me);d=n*Math.cos(e);p=n*Math.sin(e);g=Math.sin(t);Qn(d,p,g)};Kn.lineEnd=function(){a(i,r);Kn.lineEnd=ti;Kn.point=Zn};function a(e,t){e*=Me;var n=Math.cos(t*=Me),i=n*Math.cos(e),r=n*Math.sin(e),a=Math.sin(t),s=p*a-g*r,o=g*i-d*a,l=d*r-p*i,u=Math.sqrt(s*s+o*o+l*l),c=d*i+p*r+g*a,f=u&&-De(c)/u,h=Math.atan2(u,c);$n+=f*s;Xn+=f*o;Jn+=f*l;Yn+=h;qn+=h*(d+(d=i));Vn+=h*(p+(p=r));Wn+=h*(g+(g=a));Qn(d,p,g)}}function ii(n,i){function e(e,t){return e=n(e,t),i(e[0],e[1])}if(n.invert&&i.invert)e.invert=function(e,t){return e=i.invert(e,t),e&&n.invert(e[0],e[1])};return e}function ri(){return true}function ai(e,t,n,i,o){var l=[],u=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],i=e[t];if(Hn(n,i)){o.lineStart();for(var r=0;r<t;++r)o.point((n=e[r])[0],n[1]);o.lineEnd();return}var a=new oi(n,e,null,true),s=new oi(n,null,a,false);a.o=s;l.push(a);u.push(s);a=new oi(i,e,null,false);s=new oi(i,null,a,true);a.o=s;l.push(a);u.push(s)});u.sort(t);si(l);si(u);if(!l.length)return;for(var r=0,a=n,s=u.length;r<s;++r){u[r].e=a=!a}var c=l[0],f,h;while(1){var d=c,p=true;while(d.v)if((d=d.n)===c)return;f=d.z;o.lineStart();do{d.v=d.o.v=true;if(d.e){if(p){for(var r=0,s=f.length;r<s;++r)o.point((h=f[r])[0],h[1])}else{i(d.x,d.n.x,1,o)}d=d.n}else{if(p){f=d.p.z;for(var r=f.length-1;r>=0;--r)o.point((h=f[r])[0],h[1])}else{i(d.x,d.p.x,-1,o)}d=d.p}d=d.o;f=d.z;p=!p}while(!d.v);o.lineEnd()}}function si(e){if(!(t=e.length))return;var t,n=0,i=e[0],r;while(++n<t){i.n=r=e[n];r.p=i;i=r}i.n=r=e[0];r.p=i}function oi(e,t,n,i){this.x=e;this.z=t;this.o=n;this.e=i;this.v=false;this.n=this.p=null}function li(y,_,w,b){return function(i,s){var r=_(s),t=i.invert(b[0],b[1]);var n={point:a,lineStart:o,lineEnd:l,polygonStart:function(){n.point=g;n.lineStart=m;n.lineEnd=v;u=[];d=[]},polygonEnd:function(){n.point=a;n.lineStart=o;n.lineEnd=l;u=D.merge(u);var e=mi(t,d);if(u.length){if(!h)s.polygonStart(),h=true;ai(u,fi,e,w,s)}else if(e){if(!h)s.polygonStart(),h=true;s.lineStart();w(null,null,1,s);s.lineEnd()}if(h)s.polygonEnd(),h=false;u=d=null},sphere:function(){s.polygonStart();s.lineStart();w(null,null,1,s);s.lineEnd();s.polygonEnd()}};function a(e,t){var n=i(e,t);if(y(e=n[0],t=n[1]))s.point(e,t)}function e(e,t){var n=i(e,t);r.point(n[0],n[1])}function o(){n.point=e;r.lineStart()}function l(){n.point=a;r.lineEnd()}var u;var c=ci(),f=_(c),h=false,d,p;function g(e,t){p.push([e,t]);var n=i(e,t);f.point(n[0],n[1])}function m(){f.lineStart();p=[]}function v(){g(p[0][0],p[0][1]);f.lineEnd();var e=f.clean(),t=c.buffer(),n,i=t.length;p.pop();d.push(p);p=null;if(!i)return;if(e&1){n=t[0];var i=n.length-1,r=-1,a;if(i>0){if(!h)s.polygonStart(),h=true;s.lineStart();while(++r<i)s.point((a=n[r])[0],a[1]);s.lineEnd()}return}if(i>1&&e&2)t.push(t.pop().concat(t.shift()));u.push(t.filter(ui))}return n}}function ui(e){return e.length>1}function ci(){var t=[],n;return{lineStart:function(){t.push(n=[])},point:function(e,t){n.push([e,t])},lineEnd:M,buffer:function(){var e=t;t=[];n=null;return e},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function fi(e,t){return((e=e.x)[0]<0?e[1]-ke-Te:ke-e[1])-((t=t.x)[0]<0?t[1]-ke-Te:ke-t[1])}var hi=li(ri,di,gi,[-Se,-Se/2]);function di(r){var a=NaN,s=NaN,o=NaN,l;return{lineStart:function(){r.lineStart();l=1},point:function(e,t){var n=e>0?Se:-Se,i=I(e-a);if(I(i-Se)<Te){r.point(a,s=(s+t)/2>0?ke:-ke);r.point(o,s);r.lineEnd();r.lineStart();r.point(n,s);r.point(e,s);l=0}else if(o!==n&&i>=Se){if(I(a-o)<Te)a-=o*Te;if(I(e-n)<Te)e-=n*Te;s=pi(a,s,e,t);r.point(o,s);r.lineEnd();r.lineStart();r.point(n,s);l=0}r.point(a=e,s=t);o=n},lineEnd:function(){r.lineEnd();a=s=NaN},clean:function(){return 2-l}}}function pi(e,t,n,i){var r,a,s=Math.sin(e-n);return I(s)>Te?Math.atan((Math.sin(t)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*a*s)):(t+i)/2}function gi(e,t,n,i){var r;if(e==null){r=n*ke;i.point(-Se,r);i.point(0,r);i.point(Se,r);i.point(Se,0);i.point(Se,-r);i.point(0,-r);i.point(-Se,-r);i.point(-Se,0);i.point(-Se,r)}else if(I(e[0]-t[0])>Te){var a=e[0]<t[0]?Se:-Se;r=n*a/2;i.point(-a,r);i.point(0,r);i.point(a,r)}else{i.point(t[0],t[1])}}function mi(e,t){var n=e[0],i=e[1],r=[Math.sin(n),-Math.cos(n),0],a=0,s=0;kn.reset();for(var o=0,l=t.length;o<l;++o){var u=t[o],c=u.length;if(!c)continue;var f=u[0],h=f[0],d=f[1]/2+Se/4,p=Math.sin(d),g=Math.cos(d),m=1;while(true){if(m===c)m=0;e=u[m];var v=e[0],y=e[1]/2+Se/4,_=Math.sin(y),w=Math.cos(y),b=v-h,E=b>=0?1:-1,x=E*b,T=x>Se,N=p*_;kn.add(Math.atan2(N*E*Math.sin(x),g*w+N*Math.cos(x)));a+=T?b+E*Ce:b;if(T^h>=n^v>=n){var S=Dn(On(f),On(e));Fn(S);var C=Dn(r,S);Fn(C);var A=(T^b>=0?-1:1)*Le(C[2]);if(i>A||i===A&&(S[0]||S[1])){s+=T^b>=0?1:-1}}if(!m++)break;h=v,p=_,g=w,f=e}}return(a<-Te||a<Te&&kn<0)^s&1}function vi(r){var M=Math.cos(r),d=M>0,p=I(M)>Te,e=er(r,6*Me);return li(g,t,e,d?[0,-r]:[-Se,r-Se]);function g(e,t){return Math.cos(e)*Math.cos(t)>M}function t(o){var l,u,c,f,h;return{lineStart:function(){f=c=false;h=1},point:function(e,t){var n=[e,t],i,r=g(e,t),a=d?r?0:v(e,t):r?v(e+(e<0?Se:-Se),t):0;if(!l&&(f=c=r))o.lineStart();if(r!==c){i=m(l,n);if(Hn(l,i)||Hn(n,i)){n[0]+=Te;n[1]+=Te;r=g(n[0],n[1])}}if(r!==c){h=0;if(r){o.lineStart();i=m(n,l);o.point(i[0],i[1])}else{i=m(l,n);o.point(i[0],i[1]);o.lineEnd()}l=i}else if(p&&l&&d^r){var s;if(!(a&u)&&(s=m(n,l,true))){h=0;if(d){o.lineStart();o.point(s[0][0],s[0][1]);o.point(s[1][0],s[1][1]);o.lineEnd()}else{o.point(s[1][0],s[1][1]);o.lineEnd();o.lineStart();o.point(s[0][0],s[0][1])}}}if(r&&(!l||!Hn(l,n))){o.point(n[0],n[1])}l=n,c=r,u=a},lineEnd:function(){if(c)o.lineEnd();l=null},clean:function(){return h|(f&&c)<<1}}}function m(e,t,n){var i=On(e),r=On(t);var a=[1,0,0],s=Dn(i,r),o=In(s,s),l=s[0],u=o-l*l;if(!u)return!n&&e;var c=M*o/u,f=-M*l/u,h=Dn(a,s),d=Pn(a,c),p=Pn(s,f);Ln(d,p);var g=h,m=In(d,g),v=In(g,g),y=m*m-v*(In(d,d)-1);if(y<0)return;var _=Math.sqrt(y),w=Pn(g,(-m-_)/v);Ln(w,d);w=Un(w);if(!n)return w;var b=e[0],E=t[0],x=e[1],T=t[1],N;if(E<b)N=b,b=E,E=N;var S=E-b,C=I(S-Se)<Te,A=C||S<Te;if(!C&&T<x)N=x,x=T,T=N;if(A?C?x+T>0^w[1]<(I(w[0]-b)<Te?x:T):x<=w[1]&&w[1]<=T:S>Se^(b<=w[0]&&w[0]<=E)){var k=Pn(g,(-m+_)/v);Ln(k,d);return[w,Un(k)]}}function v(e,t){var n=d?r:Se-r,i=0;if(e<-n)i|=1;else if(e>n)i|=2;if(t<-n)i|=4;else if(t>n)i|=8;return i}}function yi(h,d,p,g){return function(e){var t=e.a,n=e.b,i=t.x,r=t.y,a=n.x,s=n.y,o=0,l=1,u=a-i,c=s-r,f;f=h-i;if(!u&&f>0)return;f/=u;if(u<0){if(f<o)return;if(f<l)l=f}else if(u>0){if(f>l)return;if(f>o)o=f}f=p-i;if(!u&&f<0)return;f/=u;if(u<0){if(f>l)return;if(f>o)o=f}else if(u>0){if(f<o)return;if(f<l)l=f}f=d-r;if(!c&&f>0)return;f/=c;if(c<0){if(f<o)return;if(f<l)l=f}else if(c>0){if(f>l)return;if(f>o)o=f}f=g-r;if(!c&&f<0)return;f/=c;if(c<0){if(f>l)return;if(f>o)o=f}else if(c>0){if(f<o)return;if(f<l)l=f}if(o>0)e.a={x:i+o*u,y:r+o*c};if(l<1)e.b={x:i+l*u,y:r+l*c};return e}}var _i=1e9;D.geo.clipExtent=function(){var t,n,i,r,a,s,o={stream:function(e){if(a)a.valid=false;a=s(e);a.valid=true;return a},extent:function(e){if(!arguments.length)return[[t,n],[i,r]];s=wi(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]);if(a)a.valid=false,a=null;return o}};return o.extent([[0,0],[960,500]])};function wi(x,T,N,S){return function(r){var i=r,e=ci(),a=yi(x,T,N,S),s,c,o;var t={point:n,lineStart:w,lineEnd:b,polygonStart:function(){r=e;s=[];c=[];_=true},polygonEnd:function(){r=i;s=D.merge(s);var e=l([x,S]),t=_&&e,n=s.length;if(t||n){r.polygonStart();if(t){r.lineStart();u(null,null,1,r);r.lineEnd()}if(n){ai(s,A,e,u,r)}r.polygonEnd()}s=c=o=null}};function l(e){var t=0,n=c.length,i=e[1];for(var r=0;r<n;++r){for(var a=1,s=c[r],o=s.length,l=s[0],u;a<o;++a){u=s[a];if(l[1]<=i){if(u[1]>i&&Ie(l,u,e)>0)++t}else{if(u[1]<=i&&Ie(l,u,e)<0)--t}l=u}}return t!==0}function u(e,t,n,i){var r=0,a=0;if(e==null||(r=C(e,n))!==(a=C(t,n))||k(e,t)<0^n>0){do{i.point(r===0||r===3?x:N,r>1?S:T)}while((r=(r+n+4)%4)!==a)}else{i.point(t[0],t[1])}}function f(e,t){return x<=e&&e<=N&&T<=t&&t<=S}function n(e,t){if(f(e,t))r.point(e,t)}var h,d,p,g,m,v,y,_;function w(){t.point=E;if(c)c.push(o=[]);y=true;v=false;g=m=NaN}function b(){if(s){E(h,d);if(p&&v)e.rejoin();s.push(e.buffer())}t.point=n;if(v)r.lineEnd()}function E(e,t){e=Math.max(-_i,Math.min(_i,e));t=Math.max(-_i,Math.min(_i,t));var n=f(e,t);if(c)o.push([e,t]);if(y){h=e,d=t,p=n;y=false;if(n){r.lineStart();r.point(e,t)}}else{if(n&&v)r.point(e,t);else{var i={a:{x:g,y:m},b:{x:e,y:t}};if(a(i)){if(!v){r.lineStart();r.point(i.a.x,i.a.y)}r.point(i.b.x,i.b.y);if(!n)r.lineEnd();_=false}else if(n){r.lineStart();r.point(e,t);_=false}}}g=e,m=t,v=n}return t};function C(e,t){return I(e[0]-x)<Te?t>0?0:3:I(e[0]-N)<Te?t>0?2:1:I(e[1]-T)<Te?t>0?1:0:t>0?3:2}function A(e,t){return k(e.x,t.x)}function k(e,t){var n=C(e,1),i=C(t,1);return n!==i?n-i:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}}function bi(e){var t=0,n=Se/3,i=Vi(e),r=i(t,n);r.parallels=function(e){if(!arguments.length)return[t/Se*180,n/Se*180];return i(t=e[0]*Se/180,n=e[1]*Se/180)};return r}function Ei(e,t){var n=Math.sin(e),i=(n+Math.sin(t))/2,r=1+n*(2*i-n),a=Math.sqrt(r)/i;function s(e,t){var n=Math.sqrt(r-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),a-n*Math.cos(e)]}s.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,Le((r-(e*e+n*n)*i*i)/(2*i))]};return s}(D.geo.conicEqualArea=function(){return bi(Ei)}).raw=Ei;D.geo.albers=function(){return D.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};D.geo.albersUsa=function(){var a=D.geo.albers();var s=D.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var o=D.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var i,r={point:function(e,t){i=[e,t]}},l,u,c;function f(e){var t=e[0],n=e[1];i=null;(l(t,n),i)||(u(t,n),i)||c(t,n);return i}f.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?o:a).invert(e)};f.stream=function(e){var n=a.stream(e),i=s.stream(e),r=o.stream(e);return{point:function(e,t){n.point(e,t);i.point(e,t);r.point(e,t)},sphere:function(){n.sphere();i.sphere();r.sphere()},lineStart:function(){n.lineStart();i.lineStart();r.lineStart()},lineEnd:function(){n.lineEnd();i.lineEnd();r.lineEnd()},polygonStart:function(){n.polygonStart();i.polygonStart();r.polygonStart()},polygonEnd:function(){n.polygonEnd();i.polygonEnd();r.polygonEnd()}}};f.precision=function(e){if(!arguments.length)return a.precision();a.precision(e);s.precision(e);o.precision(e);return f};f.scale=function(e){if(!arguments.length)return a.scale();a.scale(e);s.scale(e*.35);o.scale(e);return f.translate(a.translate())};f.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),n=+e[0],i=+e[1];l=a.translate(e).clipExtent([[n-.455*t,i-.238*t],[n+.455*t,i+.238*t]]).stream(r).point;u=s.translate([n-.307*t,i+.201*t]).clipExtent([[n-.425*t+Te,i+.12*t+Te],[n-.214*t-Te,i+.234*t-Te]]).stream(r).point;c=o.translate([n-.205*t,i+.212*t]).clipExtent([[n-.214*t+Te,i+.166*t+Te],[n-.115*t-Te,i+.234*t-Te]]).stream(r).point;return f};return f.scale(1070)};var xi,Ti,Ni={point:M,lineStart:M,lineEnd:M,polygonStart:function(){Ti=0;Ni.lineStart=Si},polygonEnd:function(){Ni.lineStart=Ni.lineEnd=Ni.point=M;xi+=I(Ti/2)}};function Si(){var n,i,r,a;Ni.point=function(e,t){Ni.point=s;n=r=e,i=a=t};function s(e,t){Ti+=a*e-r*t;r=e,a=t}Ni.lineEnd=function(){s(n,i)}}var Ci,Ai,ki,Mi;var Ri={point:Oi,lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M};function Oi(e,t){if(e<Ci)Ci=e;if(e>ki)ki=e;if(t<Ai)Ai=t;if(t>Mi)Mi=t}function Ii(){var n=Di(4.5),i=[];var r={point:e,lineStart:function(){r.point=t},lineEnd:s,polygonStart:function(){r.lineEnd=o},polygonEnd:function(){r.lineEnd=s;r.point=e},pointRadius:function(e){n=Di(e);return r},result:function(){if(i.length){var e=i.join("");i=[];return e}}};function e(e,t){i.push("M",e,",",t,n)}function t(e,t){i.push("M",e,",",t);r.point=a}function a(e,t){i.push("L",e,",",t)}function s(){r.point=e}function o(){i.push("Z")}return r}function Di(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Li={point:Pi,lineStart:Fi,lineEnd:Ui,polygonStart:function(){Li.lineStart=Hi},polygonEnd:function(){Li.point=Pi;Li.lineStart=Fi;Li.lineEnd=Ui}};function Pi(e,t){jn+=e;zn+=t;++Bn}function Fi(){var a,s;Li.point=function(e,t){Li.point=n;Pi(a=e,s=t)};function n(e,t){var n=e-a,i=t-s,r=Math.sqrt(n*n+i*i);qn+=r*(a+e)/2;Vn+=r*(s+t)/2;Wn+=r;Pi(a=e,s=t)}}function Ui(){Li.point=Pi}function Hi(){var n,i,a,s;Li.point=function(e,t){Li.point=r;Pi(n=a=e,i=s=t)};function r(e,t){var n=e-a,i=t-s,r=Math.sqrt(n*n+i*i);qn+=r*(a+e)/2;Vn+=r*(s+t)/2;Wn+=r;r=s*e-a*t;$n+=r*(a+e);Xn+=r*(s+t);Jn+=r*3;Pi(a=e,s=t)}Li.lineEnd=function(){r(n,i)}}function Gi(n){var i=4.5;var r={point:e,lineStart:function(){r.point=t},lineEnd:s,polygonStart:function(){r.lineEnd=o},polygonEnd:function(){r.lineEnd=s;r.point=e},pointRadius:function(e){i=e;return r},result:M};function e(e,t){n.moveTo(e+i,t);n.arc(e,t,i,0,Ce)}function t(e,t){n.moveTo(e,t);r.point=a}function a(e,t){n.lineTo(e,t)}function s(){r.point=e}function o(){n.closePath()}return r}function Yi(k){var M=.5,R=Math.cos(30*Me),E=16;function t(e){return(E?i:n)(e)}function n(n){return Bi(n,function(e,t){e=k(e,t);n.point(e[0],e[1])})}function i(r){var n,i,a,s,o,l,u,c,f,h,d,p,g;var m={point:e,lineStart:t,lineEnd:y,polygonStart:function(){r.polygonStart();m.lineStart=_},polygonEnd:function(){r.polygonEnd();m.lineStart=t}};function e(e,t){e=k(e,t);r.point(e[0],e[1])}function t(){f=NaN;m.point=v;r.lineStart()}function v(e,t){var n=On([e,t]),i=k(e,t);O(f,h,c,d,p,g,f=i[0],h=i[1],c=e,d=n[0],p=n[1],g=n[2],E,r);r.point(f,h)}function y(){m.point=e;r.lineEnd()}function _(){t();m.point=w;m.lineEnd=b}function w(e,t){v(n=e,i=t),a=f,s=h,o=d,l=p,u=g;m.point=v}function b(){O(f,h,c,d,p,g,a,s,n,o,l,u,E,r);m.lineEnd=y;y()}return m}function O(e,t,n,i,r,a,s,o,l,u,c,f,h,d){var p=s-e,g=o-t,m=p*p+g*g;if(m>4*M&&h--){var v=i+u,y=r+c,_=a+f,w=Math.sqrt(v*v+y*y+_*_),b=Math.asin(_/=w),E=I(I(_)-1)<Te||I(n-l)<Te?(n+l)/2:Math.atan2(y,v),x=k(E,b),T=x[0],N=x[1],S=T-e,C=N-t,A=g*S-p*C;if(A*A/m>M||I((p*S+g*C)/m-.5)>.3||i*u+r*c+a*f<R){O(e,t,n,i,r,a,T,N,E,v/=w,y/=w,_,h,d);d.point(T,N);O(T,N,E,v,y,_,s,o,l,u,c,f,h,d)}}}t.precision=function(e){if(!arguments.length)return Math.sqrt(M);E=(M=e*e)>0&&16;return t};return t}D.geo.path=function(){var t=4.5,n,i,r,a,s;function o(e){if(e){if(typeof t==="function")a.pointRadius(+t.apply(this,arguments));if(!s||!s.valid)s=r(a);D.geo.stream(e,s)}return a.result()}o.area=function(e){xi=0;D.geo.stream(e,r(Ni));return xi};o.centroid=function(e){jn=zn=Bn=qn=Vn=Wn=$n=Xn=Jn=0;D.geo.stream(e,r(Li));return Jn?[$n/Jn,Xn/Jn]:Wn?[qn/Wn,Vn/Wn]:Bn?[jn/Bn,zn/Bn]:[NaN,NaN]};o.bounds=function(e){ki=Mi=-(Ci=Ai=Infinity);D.geo.stream(e,r(Ri));return[[Ci,Ai],[ki,Mi]]};o.projection=function(e){if(!arguments.length)return n;r=(n=e)?e.stream||ji(e):F;return l()};o.context=function(e){if(!arguments.length)return i;a=(i=e)==null?new Ii:new Gi(e);if(typeof t!=="function")a.pointRadius(t);return l()};o.pointRadius=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:(a.pointRadius(+e),+e);return o};function l(){s=null;return o}return o.projection(D.geo.albersUsa()).context(null)};function ji(n){var t=Yi(function(e,t){return n([e*Re,t*Re])});return function(e){return Wi(t(e))}}D.geo.transform=function(i){return{stream:function(e){var t=new zi(e);for(var n in i)t[n]=i[n];return t}}};function zi(e){this.stream=e}zi.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Bi(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}D.geo.projection=qi;D.geo.projectionMutator=Vi;function qi(e){return Vi(function(){return e})()}function Vi(e){var n,t,i,r=Yi(function(e,t){e=n(e,t);return[e[0]*a+d,p-e[1]*a]}),a=150,s=480,o=250,l=0,u=0,c=0,f=0,h=0,d,p,g=hi,m=F,v=null,y=null,_;function w(e){e=i(e[0]*Me,e[1]*Me);return[e[0]*a+d,p-e[1]*a]}function b(e){e=i.invert((e[0]-d)/a,(p-e[1])/a);return e&&[e[0]*Re,e[1]*Re]}w.stream=function(e){if(_)_.valid=false;_=Wi(g(t,r(m(e))));_.valid=true;return _};w.clipAngle=function(e){if(!arguments.length)return v;g=e==null?(v=e,hi):vi((v=+e)*Me);return x()};w.clipExtent=function(e){if(!arguments.length)return y;y=e;m=e?wi(e[0][0],e[0][1],e[1][0],e[1][1]):F;return x()};w.scale=function(e){if(!arguments.length)return a;a=+e;return E()};w.translate=function(e){if(!arguments.length)return[s,o];s=+e[0];o=+e[1];return E()};w.center=function(e){if(!arguments.length)return[l*Re,u*Re];l=e[0]%360*Me;u=e[1]%360*Me;return E()};w.rotate=function(e){if(!arguments.length)return[c*Re,f*Re,h*Re];c=e[0]%360*Me;f=e[1]%360*Me;h=e.length>2?e[2]%360*Me:0;return E()};D.rebind(w,r,"precision");function E(){i=ii(t=Ji(c,f,h),n);var e=n(l,u);d=s-e[0]*a;p=o+e[1]*a;return x()}function x(){if(_)_.valid=false,_=null;return w}return function(){n=e.apply(this,arguments);w.invert=n.invert&&b;return E()}}function Wi(n){return Bi(n,function(e,t){n.point(e*Me,t*Me)})}function $i(e,t){return[e,t]}(D.geo.equirectangular=function(){return qi($i)}).raw=$i.invert=$i;D.geo.rotation=function(t){t=Ji(t[0]%360*Me,t[1]*Me,t.length>2?t[2]*Me:0);function e(e){e=t(e[0]*Me,e[1]*Me);return e[0]*=Re,e[1]*=Re,e}e.invert=function(e){e=t.invert(e[0]*Me,e[1]*Me);return e[0]*=Re,e[1]*=Re,e};return e};function Xi(e,t){return[e>Se?e-Ce:e<-Se?e+Ce:e,t]}Xi.invert=$i;function Ji(e,t,n){return e?t||n?ii(Zi(e),Qi(t,n)):Zi(e):t||n?Qi(t,n):Xi}function Ki(n){return function(e,t){return e+=n,[e>Se?e-Ce:e<-Se?e+Ce:e,t]}}function Zi(e){var t=Ki(e);t.invert=Ki(-e);return t}function Qi(e,t){var o=Math.cos(e),l=Math.sin(e),u=Math.cos(t),c=Math.sin(t);function n(e,t){var n=Math.cos(t),i=Math.cos(e)*n,r=Math.sin(e)*n,a=Math.sin(t),s=a*o+i*l;return[Math.atan2(r*u-s*c,i*o-a*l),Le(s*u+r*c)]}n.invert=function(e,t){var n=Math.cos(t),i=Math.cos(e)*n,r=Math.sin(e)*n,a=Math.sin(t),s=a*u-r*c;return[Math.atan2(r*u+a*c,i*o+s*l),Le(s*o-i*l)]};return n}D.geo.circle=function(){var t=[0,0],n,i=6,r;function a(){var e=typeof t==="function"?t.apply(this,arguments):t,n=Ji(-e[0]*Me,-e[1]*Me,0).invert,i=[];r(null,null,1,{point:function(e,t){i.push(e=n(e,t));e[0]*=Re,e[1]*=Re}});return{type:"Polygon",coordinates:[i]}}a.origin=function(e){if(!arguments.length)return t;t=e;return a};a.angle=function(e){if(!arguments.length)return n;r=er((n=+e)*Me,i*Me);return a};a.precision=function(e){if(!arguments.length)return i;r=er(n*Me,(i=+e)*Me);return a};return a.angle(90)};function er(o,l){var u=Math.cos(o),c=Math.sin(o);return function(e,t,n,i){var r=n*l;if(e!=null){e=tr(u,e);t=tr(u,t);if(n>0?e<t:e>t)e+=n*Ce}else{e=o+n*Ce;t=o-.5*r}for(var a,s=e;n>0?s>t:s<t;s-=r){i.point((a=Un([u,-c*Math.cos(s),-c*Math.sin(s)]))[0],a[1])}}}function tr(e,t){var n=On(t);n[0]-=e;Fn(n);var i=De(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Te)%(2*Math.PI)}D.geo.distance=function(e,t){var n=(t[0]-e[0])*Me,i=e[1]*Me,r=t[1]*Me,a=Math.sin(n),s=Math.cos(n),o=Math.sin(i),l=Math.cos(i),u=Math.sin(r),c=Math.cos(r),f;return Math.atan2(Math.sqrt((f=c*a)*f+(f=l*u-o*c*s)*f),o*u+l*c*s)};D.geo.graticule=function(){var t,n,i,r,a,s,o,l,u=10,c=u,f=90,h=360,d,p,g,m,v=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return D.range(Math.ceil(r/f)*f,i,f).map(g).concat(D.range(Math.ceil(l/h)*h,o,h).map(m)).concat(D.range(Math.ceil(n/u)*u,t,u).filter(function(e){return I(e%f)>Te}).map(d)).concat(D.range(Math.ceil(s/c)*c,a,c).filter(function(e){return I(e%h)>Te}).map(p))}y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})};y.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(m(o).slice(1),g(i).reverse().slice(1),m(l).reverse().slice(1))]}};y.extent=function(e){if(!arguments.length)return y.minorExtent();return y.majorExtent(e).minorExtent(e)};y.majorExtent=function(e){if(!arguments.length)return[[r,l],[i,o]];r=+e[0][0],i=+e[1][0];l=+e[0][1],o=+e[1][1];if(r>i)e=r,r=i,i=e;if(l>o)e=l,l=o,o=e;return y.precision(v)};y.minorExtent=function(e){if(!arguments.length)return[[n,s],[t,a]];n=+e[0][0],t=+e[1][0];s=+e[0][1],a=+e[1][1];if(n>t)e=n,n=t,t=e;if(s>a)e=s,s=a,a=e;return y.precision(v)};y.step=function(e){if(!arguments.length)return y.minorStep();return y.majorStep(e).minorStep(e)};y.majorStep=function(e){if(!arguments.length)return[f,h];f=+e[0],h=+e[1];return y};y.minorStep=function(e){if(!arguments.length)return[u,c];u=+e[0],c=+e[1];return y};y.precision=function(e){if(!arguments.length)return v;v=+e;d=nr(s,a,90);p=ir(n,t,v);g=nr(l,o,90);m=ir(r,i,v);return y};return y.majorExtent([[-180,-90+Te],[180,90-Te]]).minorExtent([[-180,-80-Te],[180,80+Te]])};function nr(e,t,n){var i=D.range(e,t-Te,n).concat(t);return function(t){return i.map(function(e){return[t,e]})}}function ir(e,t,n){var i=D.range(e,t-Te,n).concat(t);return function(t){return i.map(function(e){return[e,t]})}}function rr(e){return e.source}function ar(e){return e.target}D.geo.greatArc=function(){var t=rr,n,i=ar,r;function a(){return{type:"LineString",coordinates:[n||t.apply(this,arguments),r||i.apply(this,arguments)]}}a.distance=function(){return D.geo.distance(n||t.apply(this,arguments),r||i.apply(this,arguments))};a.source=function(e){if(!arguments.length)return t;t=e,n=typeof e==="function"?null:e;return a};a.target=function(e){if(!arguments.length)return i;i=e,r=typeof e==="function"?null:e;return a};a.precision=function(){return arguments.length?a:0};return a};D.geo.interpolate=function(e,t){return sr(e[0]*Me,e[1]*Me,t[0]*Me,t[1]*Me)};function sr(e,t,n,i){var r=Math.cos(t),s=Math.sin(t),a=Math.cos(i),o=Math.sin(i),l=r*Math.cos(e),u=r*Math.sin(e),c=a*Math.cos(n),f=a*Math.sin(n),h=2*Math.asin(Math.sqrt(He(i-t)+r*a*He(n-e))),d=1/Math.sin(h);var p=h?function(e){var t=Math.sin(e*=h)*d,n=Math.sin(h-e)*d,i=n*l+t*c,r=n*u+t*f,a=n*s+t*o;return[Math.atan2(r,i)*Re,Math.atan2(a,Math.sqrt(i*i+r*r))*Re]}:function(){return[e*Re,t*Re]};p.distance=h;return p}D.geo.length=function(e){or=0;D.geo.stream(e,lr);return or};var or;var lr={sphere:M,point:M,lineStart:ur,lineEnd:M,polygonStart:M,polygonEnd:M};function ur(){var s,o,l;lr.point=function(e,t){s=e*Me,o=Math.sin(t*=Me),l=Math.cos(t);lr.point=n};lr.lineEnd=function(){lr.point=lr.lineEnd=M};function n(e,t){var n=Math.sin(t*=Me),i=Math.cos(t),r=I((e*=Me)-s),a=Math.cos(r);or+=Math.atan2(Math.sqrt((r=i*Math.sin(r))*r+(r=l*n-o*i*a)*r),o*n+l*i*a);s=e,o=n,l=i}}function cr(a,s){function e(e,t){var n=Math.cos(e),i=Math.cos(t),r=a(n*i);return[r*i*Math.sin(e),r*Math.sin(t)]}e.invert=function(e,t){var n=Math.sqrt(e*e+t*t),i=s(n),r=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*r,n*a),Math.asin(n&&t*r/n)]};return e}var fr=cr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(D.geo.azimuthalEqualArea=function(){return qi(fr)}).raw=fr;var hr=cr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},F);(D.geo.azimuthalEquidistant=function(){return qi(hr)}).raw=hr;function dr(e,t){var n=Math.cos(e),i=function(e){return Math.tan(Se/4+e/2)},r=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(i(t)/i(e)),a=n*Math.pow(i(e),r)/r;if(!r)return mr;function s(e,t){if(a>0){if(t<-ke+Te)t=-ke+Te}else{if(t>ke-Te)t=ke-Te}var n=a/Math.pow(i(t),r);return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}s.invert=function(e,t){var n=a-t,i=Oe(r)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/r,2*Math.atan(Math.pow(a/i,1/r))-ke]};return s}(D.geo.conicConformal=function(){return bi(dr)}).raw=dr;function pr(e,t){var n=Math.cos(e),i=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),r=n/i+e;if(I(i)<Te)return $i;function a(e,t){var n=r-t;return[n*Math.sin(i*e),r-n*Math.cos(i*e)]}a.invert=function(e,t){var n=r-t;return[Math.atan2(e,n)/i,r-Oe(i)*Math.sqrt(e*e+n*n)]};return a}(D.geo.conicEquidistant=function(){return bi(pr)}).raw=pr;var gr=cr(function(e){return 1/e},Math.atan);(D.geo.gnomonic=function(){return qi(gr)}).raw=gr;function mr(e,t){return[e,Math.log(Math.tan(Se/4+t/2))]}mr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-ke]};function vr(e){var r=qi(e),a=r.scale,s=r.translate,o=r.clipExtent,l;r.scale=function(){var e=a.apply(r,arguments);return e===r?l?r.clipExtent(null):r:e};r.translate=function(){var e=s.apply(r,arguments);return e===r?l?r.clipExtent(null):r:e};r.clipExtent=function(e){var t=o.apply(r,arguments);if(t===r){if(l=e==null){var n=Se*a(),i=s();o([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else if(l){t=null}return t};return r.clipExtent(null)}(D.geo.mercator=function(){return vr(mr)}).raw=mr;var yr=cr(function(){return 1},Math.asin);(D.geo.orthographic=function(){return qi(yr)}).raw=yr;var _r=cr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(D.geo.stereographic=function(){return qi(_r)}).raw=_r;function wr(e,t){return[Math.log(Math.tan(Se/4+t/2)),-e]}wr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-ke]};(D.geo.transverseMercator=function(){var e=vr(wr),t=e.center,n=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])};return n([0,0,90])}).raw=wr;D.geom={};function br(e){return e[0]}function Er(e){return e[1]}D.geom.hull=function(e){var h=br,d=Er;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t=bt(h),n=bt(d),i,r=e.length,a=[],s=[];for(i=0;i<r;i++){a.push([+t.call(this,e[i],i),+n.call(this,e[i],i),i])}a.sort(Tr);for(i=0;i<r;i++)s.push([a[i][0],-a[i][1]]);var o=xr(a),l=xr(s);var u=l[0]===o[0],c=l[l.length-1]===o[o.length-1],f=[];for(i=o.length-1;i>=0;--i)f.push(e[a[o[i]][2]]);for(i=+u;i<l.length-c;++i)f.push(e[a[l[i]][2]]);return f}t.x=function(e){return arguments.length?(h=e,t):h};t.y=function(e){return arguments.length?(d=e,t):d};return t};function xr(e){var t=e.length,n=[0,1],i=2;for(var r=2;r<t;r++){while(i>1&&Ie(e[n[i-2]],e[n[i-1]],e[r])<=0)--i;n[i++]=r}return n.slice(0,i)}function Tr(e,t){return e[0]-t[0]||e[1]-t[1]}D.geom.polygon=function(e){j(e,Nr);return e};var Nr=D.geom.polygon.prototype=[];Nr.area=function(){var e=-1,t=this.length,n,i=this[t-1],r=0;while(++e<t){n=i;i=this[e];r+=n[1]*i[0]-n[0]*i[1]}return r*.5};Nr.centroid=function(e){var t=-1,n=this.length,i=0,r=0,a,s=this[n-1],o;if(!arguments.length)e=-1/(6*this.area());while(++t<n){a=s;s=this[t];o=a[0]*s[1]-s[0]*a[1];i+=(a[0]+s[0])*o;r+=(a[1]+s[1])*o}return[i*e,r*e]};Nr.clip=function(e){var t,n=Ar(e),i=-1,r=this.length-Ar(this),a,s,o=this[r-1],l,u,c;while(++i<r){t=e.slice();e.length=0;l=this[i];u=t[(s=t.length-n)-1];a=-1;while(++a<s){c=t[a];if(Sr(c,o,l)){if(!Sr(u,o,l)){e.push(Cr(u,c,o,l))}e.push(c)}else if(Sr(u,o,l)){e.push(Cr(u,c,o,l))}u=c}if(n)e.push(e[0]);o=l}return e};function Sr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Cr(e,t,n,i){var r=e[0],a=n[0],s=t[0]-r,o=i[0]-a,l=e[1],u=n[1],c=t[1]-l,f=i[1]-u,h=(o*(l-u)-f*(r-a))/(f*s-o*c);return[r+h*s,l+h*c]}function Ar(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}var kr,Mr,Rr,Or=[],Ir,Dr,Lr=[];function Pr(){ia(this);this.edge=this.site=this.circle=null}function Fr(e){var t=Or.pop()||new Pr;t.site=e;return t}function Ur(e){$r(e);Rr.remove(e);Or.push(e);ia(e)}function Hr(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},a=e.P,s=e.N,o=[e];Ur(e);var l=a;while(l.circle&&I(n-l.circle.x)<Te&&I(i-l.circle.cy)<Te){a=l.P;o.unshift(l);Ur(l);l=a}o.unshift(l);$r(l);var u=s;while(u.circle&&I(n-u.circle.x)<Te&&I(i-u.circle.cy)<Te){s=u.N;o.push(u);Ur(u);u=s}o.push(u);$r(u);var c=o.length,f;for(f=1;f<c;++f){u=o[f];l=o[f-1];ea(u.edge,l.site,u.site,r)}l=o[0];u=o[c-1];u.edge=Zr(l.site,u.site,null,r);Wr(l);Wr(u)}function Gr(e){var t=e.x,n=e.y,i,r,a,s,o=Rr._;while(o){a=Yr(o,n)-t;if(a>Te)o=o.L;else{s=t-jr(o,n);if(s>Te){if(!o.R){i=o;break}o=o.R}else{if(a>-Te){i=o.P;r=o}else if(s>-Te){i=o;r=o.N}else{i=r=o}break}}}var l=Fr(e);Rr.insert(i,l);if(!i&&!r)return;if(i===r){$r(i);r=Fr(i.site);Rr.insert(l,r);l.edge=r.edge=Zr(i.site,l.site);Wr(i);Wr(r);return}if(!r){l.edge=Zr(i.site,l.site);return}$r(i);$r(r);var u=i.site,c=u.x,f=u.y,h=e.x-c,d=e.y-f,p=r.site,g=p.x-c,m=p.y-f,v=2*(h*m-d*g),y=h*h+d*d,_=g*g+m*m,w={x:(m*y-d*_)/v+c,y:(h*_-g*y)/v+f};ea(r.edge,u,p,w);l.edge=Zr(u,e,null,w);r.edge=Zr(e,p,null,w);Wr(i);Wr(r)}function Yr(e,t){var n=e.site,i=n.x,r=n.y,a=r-t;if(!a)return i;var s=e.P;if(!s)return-Infinity;n=s.site;var o=n.x,l=n.y,u=l-t;if(!u)return o;var c=o-i,f=1/a-1/u,h=c/u;if(f)return(-h+Math.sqrt(h*h-2*f*(c*c/(-2*u)-l+u/2+r-a/2)))/f+i;return(i+o)/2}function jr(e,t){var n=e.N;if(n)return Yr(n,t);var i=e.site;return i.y===t?i.x:Infinity}function zr(e){this.site=e;this.edges=[]}zr.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--){n=e[t].edge;if(!n.b||!n.a)e.splice(t,1)}e.sort(qr);return e.length};function Br(e){var t=e[0][0],n=e[1][0],i=e[0][1],r=e[1][1],a,s,o,l,u=Mr,c=u.length,f,h,d,p,g,m;while(c--){f=u[c];if(!f||!f.prepare())continue;d=f.edges;p=d.length;h=0;while(h<p){m=d[h].end(),o=m.x,l=m.y;g=d[++h%p].start(),a=g.x,s=g.y;if(I(o-a)>Te||I(l-s)>Te){d.splice(h,0,new ta(Qr(f.site,m,I(o-t)<Te&&r-l>Te?{x:t,y:I(a-t)<Te?s:r}:I(l-r)<Te&&n-o>Te?{x:I(s-r)<Te?a:n,y:r}:I(o-n)<Te&&l-i>Te?{x:n,y:I(a-n)<Te?s:i}:I(l-i)<Te&&o-t>Te?{x:I(s-i)<Te?a:t,y:i}:null),f.site,null));++p}}}}function qr(e,t){return t.angle-e.angle}function Vr(){ia(this);this.x=this.y=this.arc=this.site=this.cy=null}function Wr(e){var t=e.P,n=e.N;if(!t||!n)return;var i=t.site,r=e.site,a=n.site;if(i===a)return;var s=r.x,o=r.y,l=i.x-s,u=i.y-o,c=a.x-s,f=a.y-o;var h=2*(l*f-u*c);if(h>=-Ne)return;var d=l*l+u*u,p=c*c+f*f,g=(f*d-u*p)/h,m=(l*p-c*d)/h,f=m+o;var v=Lr.pop()||new Vr;v.arc=e;v.site=r;v.x=g+s;v.y=f+Math.sqrt(g*g+m*m);v.cy=f;e.circle=v;var y=null,_=Dr._;while(_){if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(_.L)_=_.L;else{y=_.P;break}}else{if(_.R)_=_.R;else{y=_;break}}}Dr.insert(y,v);if(!y)Ir=v}function $r(e){var t=e.circle;if(t){if(!t.P)Ir=t.N;Dr.remove(t);Lr.push(t);ia(t);e.circle=null}}function Xr(e){var t=kr,n=yi(e[0][0],e[0][1],e[1][0],e[1][1]),i=t.length,r;while(i--){r=t[i];if(!Jr(r,e)||!n(r)||I(r.a.x-r.b.x)<Te&&I(r.a.y-r.b.y)<Te){r.a=r.b=null;t.splice(i,1)}}}function Jr(e,t){var n=e.b;if(n)return true;var i=e.a,r=t[0][0],a=t[1][0],s=t[0][1],o=t[1][1],l=e.l,u=e.r,c=l.x,f=l.y,h=u.x,d=u.y,p=(c+h)/2,g=(f+d)/2,m,v;if(d===f){if(p<r||p>=a)return;if(c>h){if(!i)i={x:p,y:s};else if(i.y>=o)return;n={x:p,y:o}}else{if(!i)i={x:p,y:o};else if(i.y<s)return;n={x:p,y:s}}}else{m=(c-h)/(d-f);v=g-m*p;if(m<-1||m>1){if(c>h){if(!i)i={x:(s-v)/m,y:s};else if(i.y>=o)return;n={x:(o-v)/m,y:o}}else{if(!i)i={x:(o-v)/m,y:o};else if(i.y<s)return;n={x:(s-v)/m,y:s}}}else{if(f<d){if(!i)i={x:r,y:m*r+v};else if(i.x>=a)return;n={x:a,y:m*a+v}}else{if(!i)i={x:a,y:m*a+v};else if(i.x<r)return;n={x:r,y:m*r+v}}}}e.a=i;e.b=n;return true}function Kr(e,t){this.l=e;this.r=t;this.a=this.b=null}function Zr(e,t,n,i){var r=new Kr(e,t);kr.push(r);if(n)ea(r,e,t,n);if(i)ea(r,t,e,i);Mr[e.i].edges.push(new ta(r,e,t));Mr[t.i].edges.push(new ta(r,t,e));return r}function Qr(e,t,n){var i=new Kr(e,null);i.a=t;i.b=n;kr.push(i);return i}function ea(e,t,n,i){if(!e.a&&!e.b){e.a=i;e.l=t;e.r=n}else if(e.l===n){e.b=i}else{e.a=i}}function ta(e,t,n){var i=e.a,r=e.b;this.edge=e;this.site=t;this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}ta.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function na(){this._=null}function ia(e){e.U=e.C=e.L=e.R=e.P=e.N=null}na.prototype={insert:function(e,t){var n,i,r;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}n=e}else if(this._){e=sa(this._);t.P=null;t.N=e;e.P=e.L=t;n=e}else{t.P=t.N=null;this._=t;n=null}t.L=t.R=null;t.U=n;t.C=true;e=t;while(n&&n.C){i=n.U;if(n===i.L){r=i.R;if(r&&r.C){n.C=r.C=false;i.C=true;e=i}else{if(e===n.R){ra(this,n);e=n;n=e.U}n.C=false;i.C=true;aa(this,i)}}else{r=i.L;if(r&&r.C){n.C=r.C=false;i.C=true;e=i}else{if(e===n.L){aa(this,n);e=n;n=e.U}n.C=false;i.C=true;ra(this,i)}}n=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,n,i=e.L,r=e.R,a,s;if(!i)a=r;else if(!r)a=i;else a=sa(r);if(t){if(t.L===e)t.L=a;else t.R=a}else{this._=a}if(i&&r){s=a.C;a.C=e.C;a.L=i;i.U=a;if(a!==r){t=a.U;a.U=e.U;e=a.R;t.L=e;a.R=r;r.U=a}else{a.U=t;t=a;e=a.R}}else{s=e.C;e=a}if(e)e.U=t;if(s)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){n=t.R;if(n.C){n.C=false;t.C=true;ra(this,t);n=t.R}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C){n.L.C=false;n.C=true;aa(this,n);n=t.R}n.C=t.C;t.C=n.R.C=false;ra(this,t);e=this._;break}}else{n=t.L;if(n.C){n.C=false;t.C=true;aa(this,t);n=t.L}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C){n.R.C=false;n.C=true;ra(this,n);n=t.L}n.C=t.C;t.C=n.L.C=false;aa(this,t);e=this._;break}}n.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function ra(e,t){var n=t,i=t.R,r=n.U;if(r){if(r.L===n)r.L=i;else r.R=i}else{e._=i}i.U=r;n.U=i;n.R=i.L;if(n.R)n.R.U=n;i.L=n}function aa(e,t){var n=t,i=t.L,r=n.U;if(r){if(r.L===n)r.L=i;else r.R=i}else{e._=i}i.U=r;n.U=i;n.L=i.R;if(n.L)n.L.U=n;i.R=n}function sa(e){while(e.L)e=e.L;return e}function oa(e,t){var n=e.sort(la).pop(),i,r,a;kr=[];Mr=new Array(e.length);Rr=new na;Dr=new na;while(true){a=Ir;if(n&&(!a||n.y<a.y||n.y===a.y&&n.x<a.x)){if(n.x!==i||n.y!==r){Mr[n.i]=new zr(n);Gr(n);i=n.x,r=n.y}n=e.pop()}else if(a){Hr(a.arc)}else{break}}if(t)Xr(t),Br(t);var s={cells:Mr,edges:kr};Rr=Dr=kr=Mr=null;return s}function la(e,t){return t.y-e.y||t.x-e.x}D.geom.voronoi=function(e){var t=br,n=Er,i=t,r=n,f=ua;if(e)return a(e);function a(a){var s=new Array(a.length),o=f[0][0],l=f[0][1],u=f[1][0],c=f[1][1];oa(h(a),f).cells.forEach(function(e,t){var n=e.edges,i=e.site,r=s[t]=n.length?n.map(function(e){var t=e.start();return[t.x,t.y]}):i.x>=o&&i.x<=u&&i.y>=l&&i.y<=c?[[o,c],[u,c],[u,l],[o,l]]:[];r.point=a[t]});return s}function h(e){return e.map(function(e,t){return{x:Math.round(i(e,t)/Te)*Te,y:Math.round(r(e,t)/Te)*Te,i:t}})}a.links=function(t){return oa(h(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})};a.triangles=function(c){var f=[];oa(h(c)).cells.forEach(function(e,t){var n=e.site,i=e.edges.sort(qr),r=-1,a=i.length,s,o,l=i[a-1].edge,u=l.l===n?l.r:l.l;while(++r<a){s=l;o=u;l=i[r].edge;u=l.l===n?l.r:l.l;if(t<o.i&&t<u.i&&ca(n,o,u)<0){f.push([c[t],c[o.i],c[u.i]])}}});return f};a.x=function(e){return arguments.length?(i=bt(t=e),a):t};a.y=function(e){return arguments.length?(r=bt(n=e),a):n};a.clipExtent=function(e){if(!arguments.length)return f===ua?null:f;f=e==null?ua:e;return a};a.size=function(e){if(!arguments.length)return f===ua?null:f&&f[1];return a.clipExtent(e&&[[0,0],e])};return a};var ua=[[-1e6,-1e6],[1e6,1e6]];function ca(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}D.geom.delaunay=function(e){return D.geom.voronoi().triangles(e)};D.geom.quadtree=function(e,_,w,b,E){var x=br,T=Er,N;if(N=arguments.length){x=fa;T=ha;if(N===3){E=w;b=_;w=_=0}return t(e)}function t(e){var t,n=bt(x),i=bt(T),r,a,s,o,l,u,c,f;if(_!=null){l=_,u=w,c=b,f=E}else{c=f=-(l=u=Infinity);r=[],a=[];o=e.length;if(N)for(s=0;s<o;++s){t=e[s];if(t.x<l)l=t.x;if(t.y<u)u=t.y;if(t.x>c)c=t.x;if(t.y>f)f=t.y;r.push(t.x);a.push(t.y)}else for(s=0;s<o;++s){var h=+n(t=e[s],s),d=+i(t,s);if(h<l)l=h;if(d<u)u=d;if(h>c)c=h;if(d>f)f=d;r.push(h);a.push(d)}}var p=c-l,g=f-u;if(p>g)f=u+p;else c=l+g;function m(e,t,n,i,r,a,s,o){if(isNaN(n)||isNaN(i))return;if(e.leaf){var l=e.x,u=e.y;if(l!=null){if(I(l-n)+I(u-i)<.01){v(e,t,n,i,r,a,s,o)}else{var c=e.point;e.x=e.y=e.point=null;v(e,c,l,u,r,a,s,o);v(e,t,n,i,r,a,s,o)}}else{e.x=n,e.y=i,e.point=t}}else{v(e,t,n,i,r,a,s,o)}}function v(e,t,n,i,r,a,s,o){var l=(r+s)*.5,u=(a+o)*.5,c=n>=l,f=i>=u,h=f<<1|c;e.leaf=false;e=e.nodes[h]||(e.nodes[h]=da());if(c)r=l;else s=l;if(f)a=u;else o=u;m(e,t,n,i,r,a,s,o)}var y=da();y.add=function(e){m(y,e,+n(e,++s),+i(e,s),l,u,c,f)};y.visit=function(e){pa(e,y,l,u,c,f)};y.find=function(e){return ga(y,e[0],e[1],l,u,c,f)};s=-1;if(_==null){while(++s<o){m(y,e[s],r[s],a[s],l,u,c,f)}--s}else e.forEach(y.add);r=a=e=t=null;return y}t.x=function(e){return arguments.length?(x=e,t):x};t.y=function(e){return arguments.length?(T=e,t):T};t.extent=function(e){if(!arguments.length)return _==null?null:[[_,w],[b,E]];if(e==null)_=w=b=E=null;else _=+e[0][0],w=+e[0][1],b=+e[1][0],E=+e[1][1];return t};t.size=function(e){if(!arguments.length)return _==null?null:[b-_,E-w];if(e==null)_=w=b=E=null;else _=w=0,b=+e[0],E=+e[1];return t};return t};function fa(e){return e.x}function ha(e){return e.y}function da(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function pa(e,t,n,i,r,a){if(!e(t,n,i,r,a)){var s=(n+r)*.5,o=(i+a)*.5,l=t.nodes;if(l[0])pa(e,l[0],n,i,s,o);if(l[1])pa(e,l[1],s,i,r,o);if(l[2])pa(e,l[2],n,o,s,a);if(l[3])pa(e,l[3],s,o,r,a)}}function ga(e,y,_,w,b,E,x){var T=Infinity,N;(function e(t,n,i,r,a){if(n>E||i>x||r<w||a<b)return;if(s=t.point){var s,o=y-t.x,l=_-t.y,u=o*o+l*l;if(u<T){var c=Math.sqrt(T=u);w=y-c,b=_-c;E=y+c,x=_+c;N=s}}var f=t.nodes,h=(n+r)*.5,d=(i+a)*.5,p=y>=h,g=_>=d;for(var m=g<<1|p,v=m+4;m<v;++m){if(t=f[m&3])switch(m&3){case 0:e(t,n,i,h,d);break;case 1:e(t,h,i,r,d);break;case 2:e(t,n,d,h,a);break;case 3:e(t,h,d,r,a);break}}})(e,w,b,E,x);return N}D.interpolateRgb=ma;function ma(e,t){e=D.rgb(e);t=D.rgb(t);var n=e.r,i=e.g,r=e.b,a=t.r-n,s=t.g-i,o=t.b-r;return function(e){return"#"+pt(Math.round(n+a*e))+pt(Math.round(i+s*e))+pt(Math.round(r+o*e))}}D.interpolateObject=va;function va(e,t){var n={},i={},r;for(r in e){if(r in t){n[r]=Ea(e[r],t[r])}else{i[r]=e[r]}}for(r in t){if(!(r in e)){i[r]=t[r]}}return function(e){for(r in n)i[r]=n[r](e);return i}}D.interpolateNumber=ya;function ya(t,n){t=+t,n=+n;return function(e){return t*(1-e)+n*e}}D.interpolateString=_a;function _a(e,i){var t=wa.lastIndex=ba.lastIndex=0,n,r,a,s=-1,o=[],l=[];e=e+"",i=i+"";while((n=wa.exec(e))&&(r=ba.exec(i))){if((a=r.index)>t){a=i.slice(t,a);if(o[s])o[s]+=a;else o[++s]=a}if((n=n[0])===(r=r[0])){if(o[s])o[s]+=r;else o[++s]=r}else{o[++s]=null;l.push({i:s,x:ya(n,r)})}t=ba.lastIndex}if(t<i.length){a=i.slice(t);if(o[s])o[s]+=a;else o[++s]=a}return o.length<2?l[0]?(i=l[0].x,function(e){return i(e)+""}):function(){return i}:(i=l.length,function(e){for(var t=0,n;t<i;++t)o[(n=l[t]).i]=n.x(e);return o.join("")})}var wa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ba=new RegExp(wa.source,"g");D.interpolate=Ea;function Ea(e,t){var n=D.interpolators.length,i;while(--n>=0&&!(i=D.interpolators[n](e,t)));return i}D.interpolators=[function(e,t){var n=typeof t;return(n==="string"?wt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?ma:_a:t instanceof Ve?ma:Array.isArray(t)?xa:n==="object"&&isNaN(t)?va:ya)(e,t)}];D.interpolateArray=xa;function xa(e,t){var n=[],i=[],r=e.length,a=t.length,s=Math.min(e.length,t.length),o;for(o=0;o<s;++o)n.push(Ea(e[o],t[o]));for(;o<r;++o)i[o]=e[o];for(;o<a;++o)i[o]=t[o];return function(e){for(o=0;o<s;++o)i[o]=n[o](e);return i}}var Ta=function(){return F};var Na=D.map({linear:Ta,poly:Ia,quad:function(){return Ma},cubic:function(){return Ra},sin:function(){return Da},exp:function(){return La},circle:function(){return Pa},elastic:Fa,back:Ua,bounce:function(){return Ha}});var Sa=D.map({in:F,out:Aa,"in-out":ka,"out-in":function(e){return ka(Aa(e))}});D.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,i=t>=0?e.slice(t+1):"in";n=Na.get(n)||Ta;i=Sa.get(i)||F;return Ca(i(n.apply(null,r.call(arguments,1))))};function Ca(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Aa(t){return function(e){return 1-t(1-e)}}function ka(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Ma(e){return e*e}function Ra(e){return e*e*e}function Oa(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Ia(t){return function(e){return Math.pow(e,t)}}function Da(e){return 1-Math.cos(e*ke)}function La(e){return Math.pow(2,10*(e-1))}function Pa(e){return 1-Math.sqrt(1-e*e)}function Fa(t,n){var i;if(arguments.length<2)n=.45;if(arguments.length)i=n/Ce*Math.asin(1/t);else t=1,i=n/4;return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-i)*Ce/n)}}function Ua(t){if(!t)t=1.70158;return function(e){return e*e*((t+1)*e-t)}}function Ha(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}D.interpolateHcl=Ga;function Ga(e,t){e=D.hcl(e);t=D.hcl(t);var n=e.h,i=e.c,r=e.l,a=t.h-n,s=t.c-i,o=t.l-r;if(isNaN(s))s=0,i=isNaN(i)?t.c:i;if(isNaN(a))a=0,n=isNaN(n)?t.h:n;else if(a>180)a-=360;else if(a<-180)a+=360;return function(e){return Ze(n+a*e,i+s*e,r+o*e)+""}}D.interpolateHsl=Ya;function Ya(e,t){e=D.hsl(e);t=D.hsl(t);var n=e.h,i=e.s,r=e.l,a=t.h-n,s=t.s-i,o=t.l-r;if(isNaN(s))s=0,i=isNaN(i)?t.s:i;if(isNaN(a))a=0,n=isNaN(n)?t.h:n;else if(a>180)a-=360;else if(a<-180)a+=360;return function(e){return Xe(n+a*e,i+s*e,r+o*e)+""}}D.interpolateLab=ja;function ja(e,t){e=D.lab(e);t=D.lab(t);var n=e.l,i=e.a,r=e.b,a=t.l-n,s=t.a-i,o=t.b-r;return function(e){return at(n+a*e,i+s*e,r+o*e)+""}}D.interpolateRound=za;function za(t,n){n-=t;return function(e){return Math.round(t+n*e)}}D.transform=function(e){var n=L.createElementNS(D.ns.prefix.svg,"g");return(D.transform=function(e){if(e!=null){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new Ba(t?t.matrix:$a)})(e)};function Ba(e){var t=[e.a,e.b],n=[e.c,e.d],i=Va(t),r=qa(t,n),a=Va(Wa(n,t,-r))||0;if(t[0]*n[1]<n[0]*t[1]){t[0]*=-1;t[1]*=-1;i*=-1;r*=-1}this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Re;this.translate=[e.e,e.f];this.scale=[i,a];this.skew=a?Math.atan2(r,a)*Re:0}Ba.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function qa(e,t){return e[0]*t[0]+e[1]*t[1]}function Va(e){var t=Math.sqrt(qa(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Wa(e,t,n){e[0]+=n*t[0];e[1]+=n*t[1];return e}var $a={a:1,b:0,c:0,d:1,e:0,f:0};D.interpolateTransform=es;function Xa(e){return e.length?e.pop()+",":""}function Ja(e,t,n,i){if(e[0]!==t[0]||e[1]!==t[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:ya(e[0],t[0])},{i:r-2,x:ya(e[1],t[1])})}else if(t[0]||t[1]){n.push("translate("+t+")")}}function Ka(e,t,n,i){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;i.push({i:n.push(Xa(n)+"rotate(",null,")")-2,x:ya(e,t)})}else if(t){n.push(Xa(n)+"rotate("+t+")")}}function Za(e,t,n,i){if(e!==t){i.push({i:n.push(Xa(n)+"skewX(",null,")")-2,x:ya(e,t)})}else if(t){n.push(Xa(n)+"skewX("+t+")")}}function Qa(e,t,n,i){if(e[0]!==t[0]||e[1]!==t[1]){var r=n.push(Xa(n)+"scale(",null,",",null,")");i.push({i:r-4,x:ya(e[0],t[0])},{i:r-2,x:ya(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){n.push(Xa(n)+"scale("+t+")")}}function es(e,t){var r=[],a=[];e=D.transform(e),t=D.transform(t);Ja(e.translate,t.translate,r,a);Ka(e.rotate,t.rotate,r,a);Za(e.skew,t.skew,r,a);Qa(e.scale,t.scale,r,a);e=t=null;return function(e){var t=-1,n=a.length,i;while(++t<n)r[(i=a[t]).i]=i.x(e);return r.join("")}}function ts(t,n){n=(n-=t=+t)||1/n;return function(e){return(e-t)/n}}function ns(t,n){n=(n-=t=+t)||1/n;return function(e){return Math.max(0,Math.min(1,(e-t)/n))}}D.layout={};D.layout.bundle=function(){return function(e){var t=[],n=-1,i=e.length;while(++n<i)t.push(is(e[n]));return t}};function is(e){var t=e.source,n=e.target,i=as(t,n),r=[t];while(t!==i){t=t.parent;r.push(t)}var a=r.length;while(n!==i){r.splice(a,0,n);n=n.parent}return r}function rs(e){var t=[],n=e.parent;while(n!=null){t.push(e);e=n;n=n.parent}t.push(e);return t}function as(e,t){if(e===t)return e;var n=rs(e),i=rs(t),r=n.pop(),a=i.pop(),s=null;while(r===a){s=r;r=n.pop();a=i.pop()}return s}D.layout.chord=function(){var t={},m,v,y,_,w=0,b,E,x;function e(){var e={},n=[],t=D.range(_),i=[],r,a,s,o,l;m=[];v=[];r=0,o=-1;while(++o<_){a=0,l=-1;while(++l<_){a+=y[o][l]}n.push(a);i.push(D.range(_));r+=a}if(b){t.sort(function(e,t){return b(n[e],n[t])})}if(E){i.forEach(function(e,n){e.sort(function(e,t){return E(y[n][e],y[n][t])})})}r=(Ce-w*_)/r;a=0,o=-1;while(++o<_){s=a,l=-1;while(++l<_){var u=t[o],c=i[u][l],f=y[u][c],h=a,d=a+=f*r;e[u+"-"+c]={index:u,subindex:c,startAngle:h,endAngle:d,value:f}}v[u]={index:u,startAngle:s,endAngle:a,value:n[u]};a+=w}o=-1;while(++o<_){l=o-1;while(++l<_){var p=e[o+"-"+l],g=e[l+"-"+o];if(p.value||g.value){m.push(p.value<g.value?{source:g,target:p}:{source:p,target:g})}}}if(x)T()}function T(){m.sort(function(e,t){return x((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}t.matrix=function(e){if(!arguments.length)return y;_=(y=e)&&y.length;m=v=null;return t};t.padding=function(e){if(!arguments.length)return w;w=e;m=v=null;return t};t.sortGroups=function(e){if(!arguments.length)return b;b=e;m=v=null;return t};t.sortSubgroups=function(e){if(!arguments.length)return E;E=e;m=null;return t};t.sortChords=function(e){if(!arguments.length)return x;x=e;if(m)T();return t};t.chords=function(){if(!m)e();return m};t.groups=function(){if(!v)e();return v};return t};D.layout.force=function(){var r={},f=D.dispatch("start","tick","end"),h,d=[1,1],e,p,g=.9,a=fs,s=hs,m=-30,c=ds,v=.1,y=.64,_=[],w=[],b,E,x;function T(u){return function(e,t,n,i){if(e.point!==u){var r=e.cx-u.x,a=e.cy-u.y,s=i-t,o=r*r+a*a;if(s*s/y<o){if(o<c){var l=e.charge/o;u.px-=r*l;u.py-=a*l}return true}if(e.point&&o&&o<c){var l=e.pointCharge/o;u.px-=r*l;u.py-=a*l}}return!e.charge}}r.tick=function(){if((p*=.99)<.005){h=null;f.end({type:"end",alpha:p=0});return true}var e=_.length,t=w.length,n,i,r,a,s,o,l,u,c;for(i=0;i<t;++i){r=w[i];a=r.source;s=r.target;u=s.x-a.x;c=s.y-a.y;if(o=u*u+c*c){o=p*E[i]*((o=Math.sqrt(o))-b[i])/o;u*=o;c*=o;s.x-=u*(l=a.weight+s.weight?a.weight/(a.weight+s.weight):.5);s.y-=c*l;a.x+=u*(l=1-l);a.y+=c*l}}if(l=p*v){u=d[0]/2;c=d[1]/2;i=-1;if(l)while(++i<e){r=_[i];r.x+=(u-r.x)*l;r.y+=(c-r.y)*l}}if(m){cs(n=D.geom.quadtree(_),p,x);i=-1;while(++i<e){if(!(r=_[i]).fixed){n.visit(T(r))}}}i=-1;while(++i<e){r=_[i];if(r.fixed){r.x=r.px;r.y=r.py}else{r.x-=(r.px-(r.px=r.x))*g;r.y-=(r.py-(r.py=r.y))*g}}f.tick({type:"tick",alpha:p})};r.nodes=function(e){if(!arguments.length)return _;_=e;return r};r.links=function(e){if(!arguments.length)return w;w=e;return r};r.size=function(e){if(!arguments.length)return d;d=e;return r};r.linkDistance=function(e){if(!arguments.length)return a;a=typeof e==="function"?e:+e;return r};r.distance=r.linkDistance;r.linkStrength=function(e){if(!arguments.length)return s;s=typeof e==="function"?e:+e;return r};r.friction=function(e){if(!arguments.length)return g;g=+e;return r};r.charge=function(e){if(!arguments.length)return m;m=typeof e==="function"?e:+e;return r};r.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(c);c=e*e;return r};r.gravity=function(e){if(!arguments.length)return v;v=+e;return r};r.theta=function(e){if(!arguments.length)return Math.sqrt(y);y=e*e;return r};r.alpha=function(e){if(!arguments.length)return p;e=+e;if(p){if(e>0){p=e}else{h.c=null,h.t=NaN,h=null;f.end({type:"end",alpha:p=0})}}else if(e>0){f.start({type:"start",alpha:p=e});h=Rt(r.tick)}return r};r.start=function(){var o,l=_.length,u=w.length,e=d[0],t=d[1],c,n;for(o=0;o<l;++o){(n=_[o]).index=o;n.weight=0}for(o=0;o<u;++o){n=w[o];if(typeof n.source=="number")n.source=_[n.source];if(typeof n.target=="number")n.target=_[n.target];++n.source.weight;++n.target.weight}for(o=0;o<l;++o){n=_[o];if(isNaN(n.x))n.x=i("x",e);if(isNaN(n.y))n.y=i("y",t);if(isNaN(n.px))n.px=n.x;if(isNaN(n.py))n.py=n.y}b=[];if(typeof a==="function")for(o=0;o<u;++o)b[o]=+a.call(this,w[o],o);else for(o=0;o<u;++o)b[o]=a;E=[];if(typeof s==="function")for(o=0;o<u;++o)E[o]=+s.call(this,w[o],o);else for(o=0;o<u;++o)E[o]=s;x=[];if(typeof m==="function")for(o=0;o<l;++o)x[o]=+m.call(this,_[o],o);else for(o=0;o<l;++o)x[o]=m;function i(e,t){if(!c){c=new Array(l);for(r=0;r<l;++r){c[r]=[]}for(r=0;r<u;++r){var n=w[r];c[n.source.index].push(n.target);c[n.target.index].push(n.source)}}var i=c[o],r=-1,a=i.length,s;while(++r<a)if(!isNaN(s=i[r][e]))return s;return Math.random()*t}return r.resume()};r.resume=function(){return r.alpha(.1)};r.stop=function(){return r.alpha(0)};r.drag=function(){if(!e)e=D.behavior.drag().origin(F).on("dragstart.force",ss).on("drag.force",t).on("dragend.force",os);if(!arguments.length)return e;this.on("mouseover.force",ls).on("mouseout.force",us).call(e)};function t(e){e.px=D.event.x,e.py=D.event.y;r.resume()}return D.rebind(r,f,"on")};function ss(e){e.fixed|=2}function os(e){e.fixed&=~6}function ls(e){e.fixed|=4;e.px=e.x,e.py=e.y}function us(e){e.fixed&=~4}function cs(e,t,n){var i=0,r=0;e.charge=0;if(!e.leaf){var a=e.nodes,s=a.length,o=-1,l;while(++o<s){l=a[o];if(l==null)continue;cs(l,t,n);e.charge+=l.charge;i+=l.charge*l.cx;r+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*n[e.point.index];e.charge+=e.pointCharge=u;i+=u*e.point.x;r+=u*e.point.y}e.cx=i/e.charge;e.cy=r/e.charge}var fs=20,hs=1,ds=Infinity;D.layout.hierarchy=function(){var o=_s,l=vs,u=ys;function c(e){var t=[e],n=[],i;e.depth=0;while((i=t.pop())!=null){n.push(i);if((a=l.call(c,i,i.depth))&&(r=a.length)){var r,a,s;while(--r>=0){t.push(s=a[r]);s.parent=i;s.depth=i.depth+1}if(u)i.value=0;i.children=a}else{if(u)i.value=+u.call(c,i,i.depth)||0;delete i.children}}ms(e,function(e){var t,n;if(o&&(t=e.children))t.sort(o);if(u&&(n=e.parent))n.value+=e.value});return n}c.sort=function(e){if(!arguments.length)return o;o=e;return c};c.children=function(e){if(!arguments.length)return l;l=e;return c};c.value=function(e){if(!arguments.length)return u;u=e;return c};c.revalue=function(e){if(u){gs(e,function(e){if(e.children)e.value=0});ms(e,function(e){var t;if(!e.children)e.value=+u.call(c,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return c};function ps(e,t){D.rebind(e,t,"sort","children","value");e.nodes=e;e.links=ws;return e}function gs(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((r=e.children)&&(i=r.length)){var i,r;while(--i>=0)n.push(r[i])}}}function ms(e,t){var n=[e],i=[];while((e=n.pop())!=null){i.push(e);if((s=e.children)&&(a=s.length)){var r=-1,a,s;while(++r<a)n.push(s[r])}}while((e=i.pop())!=null){t(e)}}function vs(e){return e.children}function ys(e){return e.value}function _s(e,t){return t.value-e.value}function ws(e){return D.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}D.layout.partition=function(){var i=D.layout.hierarchy(),r=[1,1];function u(e,t,n,i){var r=e.children;e.x=t;e.y=e.depth*i;e.dx=n;e.dy=i;if(r&&(s=r.length)){var a=-1,s,o,l;n=e.value?n/e.value:0;while(++a<s){u(o=r[a],t,l=o.value*n,i);t+=l}}}function a(e){var t=e.children,n=0;if(t&&(r=t.length)){var i=-1,r;while(++i<r)n=Math.max(n,a(t[i]))}return 1+n}function t(e,t){var n=i.call(this,e,t);u(n[0],0,r[0],r[1]/a(n[0]));return n}t.size=function(e){if(!arguments.length)return r;r=e;return t};return ps(t,i)};D.layout.pie=function(){var h=Number,d=bs,p=0,g=Ce,m=0;function v(n){var e=n.length,i=n.map(function(e,t){return+h.call(v,e,t)}),t=+(typeof p==="function"?p.apply(this,arguments):p),r=(typeof g==="function"?g.apply(this,arguments):g)-t,a=Math.min(Math.abs(r)/e,+(typeof m==="function"?m.apply(this,arguments):m)),s=a*(r<0?-1:1),o=D.sum(i),l=o?(r-e*s)/o:0,u=D.range(e),c=[],f;if(d!=null)u.sort(d===bs?function(e,t){return i[t]-i[e]}:function(e,t){return d(n[e],n[t])});u.forEach(function(e){c[e]={data:n[e],value:f=i[e],startAngle:t,endAngle:t+=f*l+s,padAngle:a}});return c}v.value=function(e){if(!arguments.length)return h;h=e;return v};v.sort=function(e){if(!arguments.length)return d;d=e;return v};v.startAngle=function(e){if(!arguments.length)return p;p=e;return v};v.endAngle=function(e){if(!arguments.length)return g;g=e;return v};v.padAngle=function(e){if(!arguments.length)return m;m=e;return v};return v};var bs={};D.layout.stack=function(){var f=F,h=Cs,d=As,p=Ts,g=Es,m=xs;function v(e,t){if(!(o=e.length))return e;var n=e.map(function(e,t){return f.call(v,e,t)});var i=n.map(function(e){return e.map(function(e,t){return[g.call(v,e,t),m.call(v,e,t)]})});var r=h.call(v,i,t);n=D.permute(n,r);i=D.permute(i,r);var a=d.call(v,i,t);var s=n[0].length,o,l,u,c;for(u=0;u<s;++u){p.call(v,n[0][u],c=a[u],i[0][u][1]);for(l=1;l<o;++l){p.call(v,n[l][u],c+=i[l-1][u][1],i[l][u][1])}}return e}v.values=function(e){if(!arguments.length)return f;f=e;return v};v.order=function(e){if(!arguments.length)return h;h=typeof e==="function"?e:Ns.get(e)||Cs;return v};v.offset=function(e){if(!arguments.length)return d;d=typeof e==="function"?e:Ss.get(e)||As;return v};v.x=function(e){if(!arguments.length)return g;g=e;return v};v.y=function(e){if(!arguments.length)return m;m=e;return v};v.out=function(e){if(!arguments.length)return p;p=e;return v};return v};function Es(e){return e.x}function xs(e){return e.y}function Ts(e,t,n){e.y0=t;e.y=n}var Ns=D.map({"inside-out":function(e){var t=e.length,n,i,r=e.map(ks),a=e.map(Ms),s=D.range(t).sort(function(e,t){return r[e]-r[t]}),o=0,l=0,u=[],c=[];for(n=0;n<t;++n){i=s[n];if(o<l){o+=a[i];u.push(i)}else{l+=a[i];c.push(i)}}return c.reverse().concat(u)},reverse:function(e){return D.range(e.length).reverse()},default:Cs});var Ss=D.map({silhouette:function(e){var t=e.length,n=e[0].length,i=[],r=0,a,s,o,l=[];for(s=0;s<n;++s){for(a=0,o=0;a<t;a++)o+=e[a][s][1];if(o>r)r=o;i.push(o)}for(s=0;s<n;++s){l[s]=(r-i[s])/2}return l},wiggle:function(e){var t=e.length,n=e[0],i=n.length,r,a,s,o,l,u,c,f,h,d=[];d[0]=f=h=0;for(a=1;a<i;++a){for(r=0,o=0;r<t;++r)o+=e[r][a][1];for(r=0,l=0,c=n[a][0]-n[a-1][0];r<t;++r){for(s=0,u=(e[r][a][1]-e[r][a-1][1])/(2*c);s<r;++s){u+=(e[s][a][1]-e[s][a-1][1])/c}l+=u*e[r][a][1]}d[a]=f-=o?l/o*c:0;if(f<h)h=f}for(a=0;a<i;++a)d[a]-=h;return d},expand:function(e){var t=e.length,n=e[0].length,i=1/t,r,a,s,o=[];for(a=0;a<n;++a){for(r=0,s=0;r<t;r++)s+=e[r][a][1];if(s)for(r=0;r<t;r++)e[r][a][1]/=s;else for(r=0;r<t;r++)e[r][a][1]=i}for(a=0;a<n;++a)o[a]=0;return o},zero:As});function Cs(e){return D.range(e.length)}function As(e){var t=-1,n=e[0].length,i=[];while(++t<n)i[t]=0;return i}function ks(e){var t=1,n=0,i=e[0][1],r,a=e.length;for(;t<a;++t){if((r=e[t][1])>i){n=t;i=r}}return n}function Ms(e){return e.reduce(Rs,0)}function Rs(e,t){return e+t[1]}D.layout.histogram=function(){var f=true,h=Number,d=Ds,p=Os;function n(e,t){var n=[],i=e.map(h,this),r=d.call(this,i,t),a=p.call(this,r,i,t),s,t=-1,o=i.length,l=a.length-1,u=f?1:1/o,c;while(++t<l){s=n[t]=[];s.dx=a[t+1]-(s.x=a[t]);s.y=0}if(l>0){t=-1;while(++t<o){c=i[t];if(c>=r[0]&&c<=r[1]){s=n[D.bisect(a,c,1,l)-1];s.y+=u;s.push(e[t])}}}return n}n.value=function(e){if(!arguments.length)return h;h=e;return n};n.range=function(e){if(!arguments.length)return d;d=bt(e);return n};n.bins=function(t){if(!arguments.length)return p;p=typeof t==="number"?function(e){return Is(e,t)}:bt(t);return n};n.frequency=function(e){if(!arguments.length)return f;f=!!e;return n};return n};function Os(e,t){return Is(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Is(e,t){var n=-1,i=+e[0],r=(e[1]-i)/t,a=[];while(++n<=t)a[n]=r*n+i;return a}function Ds(e){return[D.min(e),D.max(e)]}D.layout.pack=function(){var l=D.layout.hierarchy().sort(Ls),u=0,c=[1,1],f;function t(e,t){var n=l.call(this,e,t),i=n[0],r=c[0],a=c[1],s=f==null?Math.sqrt:typeof f==="function"?f:function(){return f};i.x=i.y=0;ms(i,function(e){e.r=+s(e.value)});ms(i,Hs);if(u){var o=u*(f?1:Math.max(2*i.r/r,2*i.r/a))/2;ms(i,function(e){e.r+=o});ms(i,Hs);ms(i,function(e){e.r-=o})}js(i,r/2,a/2,f?1:1/Math.max(2*i.r/r,2*i.r/a));return n}t.size=function(e){if(!arguments.length)return c;c=e;return t};t.radius=function(e){if(!arguments.length)return f;f=e==null||typeof e==="function"?e:+e;return t};t.padding=function(e){if(!arguments.length)return u;u=+e;return t};return ps(t,l)};function Ls(e,t){return e.value-t.value}function Ps(e,t){var n=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=n;n._pack_prev=t}function Fs(e,t){e._pack_next=t;t._pack_prev=e}function Us(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function Hs(e){if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,i=-Infinity,r=Infinity,a=-Infinity,s,o,l,u,c,f,h;function d(e){n=Math.min(e.x-e.r,n);i=Math.max(e.x+e.r,i);r=Math.min(e.y-e.r,r);a=Math.max(e.y+e.r,a)}t.forEach(Gs);s=t[0];s.x=-s.r;s.y=0;d(s);if(h>1){o=t[1];o.x=o.r;o.y=0;d(o);if(h>2){l=t[2];zs(s,o,l);d(l);Ps(s,l);s._pack_prev=l;Ps(l,o);o=s._pack_next;for(u=3;u<h;u++){zs(s,o,l=t[u]);var p=0,g=1,m=1;for(c=o._pack_next;c!==o;c=c._pack_next,g++){if(Us(c,l)){p=1;break}}if(p==1){for(f=s._pack_prev;f!==c._pack_prev;f=f._pack_prev,m++){if(Us(f,l)){break}}}if(p){if(g<m||g==m&&o.r<s.r)Fs(s,o=c);else Fs(s=f,o);u--}else{Ps(s,l);o=l;d(l)}}}}var v=(n+i)/2,y=(r+a)/2,_=0;for(u=0;u<h;u++){l=t[u];l.x-=v;l.y-=y;_=Math.max(_,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=_;t.forEach(Ys)}function Gs(e){e._pack_next=e._pack_prev=e}function Ys(e){delete e._pack_next;delete e._pack_prev}function js(e,t,n,i){var r=e.children;e.x=t+=i*e.x;e.y=n+=i*e.y;e.r*=i;if(r){var a=-1,s=r.length;while(++a<s)js(r[a],t,n,i)}}function zs(e,t,n){var i=e.r+n.r,r=t.x-e.x,a=t.y-e.y;if(i&&(r||a)){var s=t.r+n.r,o=r*r+a*a;s*=s;i*=i;var l=.5+(i-s)/(2*o),u=Math.sqrt(Math.max(0,2*s*(i+o)-(i-=o)*i-s*s))/(2*o);n.x=e.x+l*r+u*a;n.y=e.y+l*a-u*r}else{n.x=e.x+i;n.y=e.y}}D.layout.tree=function(){var f=D.layout.hierarchy().sort(null).value(null),h=Bs,d=[1,1],p=null;function t(e,t){var n=f.call(this,e,t),i=n[0],r=g(i);ms(r,m),r.parent.m=-r.z;gs(r,v);if(p)gs(i,y);else{var a=i,s=i,o=i;gs(i,function(e){if(e.x<a.x)a=e;if(e.x>s.x)s=e;if(e.depth>o.depth)o=e});var l=h(a,s)/2-a.x,u=d[0]/(s.x+h(s,a)/2+l),c=d[1]/(o.depth||1);gs(i,function(e){e.x=(e.x+l)*u;e.y=e.depth*c})}return n}function g(e){var t={A:null,children:[e]},n=[t],i;while((i=n.pop())!=null){for(var r=i.children,a,s=0,o=r.length;s<o;++s){n.push((r[s]=a={_:r[s],parent:i,children:(a=r[s].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=a)}}return t.children[0]}function m(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t.length){$s(e);var r=(t[0].z+t[t.length-1].z)/2;if(i){e.z=i.z+h(e._,i._);e.m=e.z-r}else{e.z=r}}else if(i){e.z=i.z+h(e._,i._)}e.parent.A=a(e,i,e.parent.A||n[0])}function v(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function a(e,t,n){if(t){var i=e,r=e,a=t,s=i.parent.children[0],o=i.m,l=r.m,u=a.m,c=s.m,f;while(a=Vs(a),i=qs(i),a&&i){s=qs(s);r=Vs(r);r.a=e;f=a.z+u-i.z-o+h(a._,i._);if(f>0){Ws(Xs(a,e,n),e,f);o+=f;l+=f}u+=a.m;o+=i.m;c+=s.m;l+=r.m}if(a&&!Vs(r)){r.t=a;r.m+=u-l}if(i&&!qs(s)){s.t=i;s.m+=o-c;n=e}}return n}function y(e){e.x*=d[0];e.y=e.depth*d[1]}t.separation=function(e){if(!arguments.length)return h;h=e;return t};t.size=function(e){if(!arguments.length)return p?null:d;p=(d=e)==null?y:null;return t};t.nodeSize=function(e){if(!arguments.length)return p?d:null;p=(d=e)==null?null:y;return t};return ps(t,f)};function Bs(e,t){return e.parent==t.parent?1:2}function qs(e){var t=e.children;return t.length?t[0]:e.t}function Vs(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function Ws(e,t,n){var i=n/(t.i-e.i);t.c-=i;t.s+=n;e.c+=i;t.z+=n;t.m+=n}function $s(e){var t=0,n=0,i=e.children,r=i.length,a;while(--r>=0){a=i[r];a.z+=t;a.m+=t;t+=a.s+(n+=a.c)}}function Xs(e,t,n){return e.a.parent===t.parent?e.a:n}D.layout.cluster=function(){var c=D.layout.hierarchy().sort(null).value(null),f=Bs,h=[1,1],d=false;function t(e,t){var n=c.call(this,e,t),i=n[0],r,a=0;ms(i,function(e){var t=e.children;if(t&&t.length){e.x=Ks(t);e.y=Js(t)}else{e.x=r?a+=f(e,r):0;e.y=0;r=e}});var s=Zs(i),o=Qs(i),l=s.x-f(s,o)/2,u=o.x+f(o,s)/2;ms(i,d?function(e){e.x=(e.x-i.x)*h[0];e.y=(i.y-e.y)*h[1]}:function(e){e.x=(e.x-l)/(u-l)*h[0];e.y=(1-(i.y?e.y/i.y:1))*h[1]});return n}t.separation=function(e){if(!arguments.length)return f;f=e;return t};t.size=function(e){if(!arguments.length)return d?null:h;d=(h=e)==null;return t};t.nodeSize=function(e){if(!arguments.length)return d?h:null;d=(h=e)!=null;return t};return ps(t,c)};function Js(e){return 1+D.max(e,function(e){return e.y})}function Ks(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Zs(e){var t=e.children;return t&&t.length?Zs(t[0]):e}function Qs(e){var t=e.children,n;return t&&(n=t.length)?Qs(t[n-1]):e}D.layout.treemap=function(){var i=D.layout.hierarchy(),c=Math.round,r=[1,1],a=null,f=eo,s=false,o,h="squarify",l=.5*(1+Math.sqrt(5));function d(e,t){var n=-1,i=e.length,r,a;while(++n<i){a=(r=e[n]).value*(t<0?0:t);r.area=isNaN(a)||a<=0?0:a}}function p(e){var t=e.children;if(t&&t.length){var n=f(e),i=[],r=t.slice(),a,s=Infinity,o,l=h==="slice"?n.dx:h==="dice"?n.dy:h==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),u;d(r,n.dx*n.dy/e.value);i.area=0;while((u=r.length)>0){i.push(a=r[u-1]);i.area+=a.area;if(h!=="squarify"||(o=g(i,l))<=s){r.pop();s=o}else{i.area-=i.pop().area;m(i,l,n,false);l=Math.min(n.dx,n.dy);i.length=i.area=0;s=Infinity}}if(i.length){m(i,l,n,true);i.length=i.area=0}t.forEach(p)}}function u(e){var t=e.children;if(t&&t.length){var n=f(e),i=t.slice(),r,a=[];d(i,n.dx*n.dy/e.value);a.area=0;while(r=i.pop()){a.push(r);a.area+=r.area;if(r.z!=null){m(a,r.z?n.dx:n.dy,n,!i.length);a.length=a.area=0}}t.forEach(u)}}function g(e,t){var n=e.area,i,r=0,a=Infinity,s=-1,o=e.length;while(++s<o){if(!(i=e[s].area))continue;if(i<a)a=i;if(i>r)r=i}n*=n;t*=t;return n?Math.max(t*r*l/n,n/(t*a*l)):Infinity}function m(e,t,n,i){var r=-1,a=e.length,s=n.x,o=n.y,l=t?c(e.area/t):0,u;if(t==n.dx){if(i||l>n.dy)l=n.dy;while(++r<a){u=e[r];u.x=s;u.y=o;u.dy=l;s+=u.dx=Math.min(n.x+n.dx-s,l?c(u.area/l):0)}u.z=true;u.dx+=n.x+n.dx-s;n.y+=l;n.dy-=l}else{if(i||l>n.dx)l=n.dx;while(++r<a){u=e[r];u.x=s;u.y=o;u.dx=l;o+=u.dy=Math.min(n.y+n.dy-o,l?c(u.area/l):0)}u.z=false;u.dy+=n.y+n.dy-o;n.x+=l;n.dx-=l}}function v(e){var t=o||i(e),n=t[0];n.x=n.y=0;if(n.value)n.dx=r[0],n.dy=r[1];else n.dx=n.dy=0;if(o)i.revalue(n);d([n],n.dx*n.dy/n.value);(o?u:p)(n);if(s)o=t;return t}v.size=function(e){if(!arguments.length)return r;r=e;return v};v.padding=function(n){if(!arguments.length)return a;function e(e){var t=n.call(v,e,e.depth);return t==null?eo(e):to(e,typeof t==="number"?[t,t,t,t]:t)}function t(e){return to(e,n)}var i;f=(a=n)==null?eo:(i=typeof n)==="function"?e:i==="number"?(n=[n,n,n,n],t):t;return v};v.round=function(e){if(!arguments.length)return c!=Number;c=e?Math.round:Number;return v};v.sticky=function(e){if(!arguments.length)return s;s=e;o=null;return v};v.ratio=function(e){if(!arguments.length)return l;l=e;return v};v.mode=function(e){if(!arguments.length)return h;h=e+"";return v};return ps(v,i)};function eo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function to(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];if(r<0){n+=r/2;r=0}if(a<0){i+=a/2;a=0}return{x:n,y:i,dx:r,dy:a}}D.random={normal:function(i,r){var e=arguments.length;if(e<2)r=1;if(e<1)i=0;return function(){var e,t,n;do{e=Math.random()*2-1;t=Math.random()*2-1;n=e*e+t*t}while(!n||n>1);return i+r*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=D.random.normal.apply(D,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=D.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}};D.scale={};function no(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function io(e){return e.rangeExtent?e.rangeExtent():no(e.range())}function ro(e,t,n,i){var r=n(e[0],e[1]),a=i(t[0],t[1]);return function(e){return a(r(e))}}function ao(e,t){var n=0,i=e.length-1,r=e[n],a=e[i],s;if(a<r){s=n,n=i,i=s;s=r,r=a,a=s}e[n]=t.floor(r);e[i]=t.ceil(a);return e}function so(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:oo}var oo={floor:F,ceil:F};function lo(n,e,t,i){var r=[],a=[],s=0,o=Math.min(n.length,e.length)-1;if(n[o]<n[0]){n=n.slice().reverse();e=e.slice().reverse()}while(++s<=o){r.push(t(n[s-1],n[s]));a.push(i(e[s-1],e[s]))}return function(e){var t=D.bisect(n,e,1,o)-1;return a[t](r[t](e))}}D.scale.linear=function(){return uo([0,1],[0,1],Ea,false)};function uo(n,i,r,a){var s,o;function t(){var e=Math.min(n.length,i.length)>2?lo:ro,t=a?ns:ts;s=e(n,i,t,r);o=e(i,n,t,Ea);return l}function l(e){return s(e)}l.invert=function(e){return o(e)};l.domain=function(e){if(!arguments.length)return n;n=e.map(Number);return t()};l.range=function(e){if(!arguments.length)return i;i=e;return t()};l.rangeRound=function(e){return l.range(e).interpolate(za)};l.clamp=function(e){if(!arguments.length)return a;a=e;return t()};l.interpolate=function(e){if(!arguments.length)return r;r=e;return t()};l.ticks=function(e){return po(n,e)};l.tickFormat=function(e,t){return go(n,e,t)};l.nice=function(e){fo(n,e);return t()};l.copy=function(){return uo(n,i,r,a)};return t()}function co(e,t){return D.rebind(e,t,"range","rangeRound","interpolate","clamp")}function fo(e,t){return ao(e,so(ho(e,t)[2]))}function ho(e,t){if(t==null)t=10;var n=no(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=t/i*r;if(a<=.15)r*=10;else if(a<=.35)r*=5;else if(a<=.75)r*=2;n[0]=Math.ceil(n[0]/r)*r;n[1]=Math.floor(n[1]/r)*r+r*.5;n[2]=r;return n}function po(e,t){return D.range.apply(D,ho(e,t))}function go(e,t,n){var i=ho(e,t);if(n){var r=Ht.exec(n);r.shift();if(r[8]==="s"){var a=D.formatPrefix(Math.max(I(i[0]),I(i[1])));if(!r[7])r[7]="."+vo(a.scale(i[2]));r[8]="f";n=D.format(r.join(""));return function(e){return n(a.scale(e))+a.symbol}}if(!r[7])r[7]="."+yo(r[8],i);n=r.join("")}else{n=",."+vo(i[2])+"f"}return D.format(n)}var mo={s:1,g:1,p:1,r:1,e:1};function vo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function yo(e,t){var n=vo(t[2]);return e in mo?Math.abs(n-vo(Math.max(I(t[0]),I(t[1]))))+ +(e!=="e"):n-(e==="%")*2}D.scale.log=function(){return _o(D.scale.linear().domain([0,1]),10,true,[1,10])};function _o(t,l,u,c){function f(e){return(u?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(l)}function h(e){return u?Math.pow(l,e):-Math.pow(l,-e)}function r(e){return t(f(e))}r.invert=function(e){return h(t.invert(e))};r.domain=function(e){if(!arguments.length)return c;u=e[0]>=0;t.domain((c=e.map(Number)).map(f));return r};r.base=function(e){if(!arguments.length)return l;l=+e;t.domain(c.map(f));return r};r.nice=function(){var e=ao(c.map(f),u?Math:bo);t.domain(e);c=e.map(h);return r};r.ticks=function(){var e=no(c),t=[],n=e[0],i=e[1],r=Math.floor(f(n)),a=Math.ceil(f(i)),s=l%1?2:l;if(isFinite(a-r)){if(u){for(;r<a;r++)for(var o=1;o<s;o++)t.push(h(r)*o);t.push(h(r))}else{t.push(h(r));for(;r++<a;)for(var o=s-1;o>0;o--)t.push(h(r)*o)}for(r=0;t[r]<n;r++){}for(a=t.length;t[a-1]>i;a--){}t=t.slice(r,a)}return t};r.tickFormat=function(e,n){if(!arguments.length)return wo;if(arguments.length<2)n=wo;else if(typeof n!=="function")n=D.format(n);var i=Math.max(1,l*e/r.ticks().length);return function(e){var t=e/h(Math.round(f(e)));if(t*l<l-.5)t*=l;return t<=i?n(e):""}};r.copy=function(){return _o(t.copy(),l,u,c)};return co(r,t)}var wo=D.format(".0e"),bo={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};D.scale.pow=function(){return Eo(D.scale.linear(),1,[0,1])};function Eo(t,n,i){var r=xo(n),a=xo(1/n);function s(e){return t(r(e))}s.invert=function(e){return a(t.invert(e))};s.domain=function(e){if(!arguments.length)return i;t.domain((i=e.map(Number)).map(r));return s};s.ticks=function(e){return po(i,e)};s.tickFormat=function(e,t){return go(i,e,t)};s.nice=function(e){return s.domain(fo(i,e))};s.exponent=function(e){if(!arguments.length)return n;r=xo(n=e);a=xo(1/n);t.domain(i.map(r));return s};s.copy=function(){return Eo(t.copy(),n,i)};return co(s,t)}function xo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}D.scale.sqrt=function(){return D.scale.pow().exponent(.5)};D.scale.ordinal=function(){return To([],{t:"range",a:[[]]})};function To(o,l){var r,u,c;function f(e){return u[((r.get(e)||(l.t==="range"?r.set(e,o.push(e)):NaN))-1)%u.length]}function h(t,n){return D.range(o.length).map(function(e){return t+n*e})}f.domain=function(e){if(!arguments.length)return o;o=[];r=new y;var t=-1,n=e.length,i;while(++t<n)if(!r.has(i=e[t]))r.set(i,o.push(i));return f[l.t].apply(f,l.a)};f.range=function(e){if(!arguments.length)return u;u=e;c=0;l={t:"range",a:arguments};return f};f.rangePoints=function(e,t){if(arguments.length<2)t=0;var n=e[0],i=e[1],r=o.length<2?(n=(n+i)/2,0):(i-n)/(o.length-1+t);u=h(n+r*t/2,r);c=0;l={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(e,t){if(arguments.length<2)t=0;var n=e[0],i=e[1],r=o.length<2?(n=i=Math.round((n+i)/2),0):(i-n)/(o.length-1+t)|0;u=h(n+Math.round(r*t/2+(i-n-(o.length-1+t)*r)/2),r);c=0;l={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(e,t,n){if(arguments.length<2)t=0;if(arguments.length<3)n=t;var i=e[1]<e[0],r=e[i-0],a=e[1-i],s=(a-r)/(o.length-t+2*n);u=h(r+s*n,s);if(i)u.reverse();c=s*(1-t);l={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(e,t,n){if(arguments.length<2)t=0;if(arguments.length<3)n=t;var i=e[1]<e[0],r=e[i-0],a=e[1-i],s=Math.floor((a-r)/(o.length-t+2*n));u=h(r+Math.round((a-r-(o.length-t)*s)/2),s);if(i)u.reverse();c=Math.round(s*(1-t));l={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return c};f.rangeExtent=function(){return no(l.a[0])};f.copy=function(){return To(o,l)};return f.domain(o)}D.scale.category10=function(){return D.scale.ordinal().range(No)};D.scale.category20=function(){return D.scale.ordinal().range(So)};D.scale.category20b=function(){return D.scale.ordinal().range(Co)};D.scale.category20c=function(){return D.scale.ordinal().range(Ao)};var No=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ht);var So=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ht);var Co=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ht);var Ao=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ht);D.scale.quantile=function(){return ko([],[])};function ko(n,i){var r;function t(){var e=0,t=i.length;r=[];while(++e<t)r[e-1]=D.quantile(n,e/t);return a}function a(e){if(!isNaN(e=+e))return i[D.bisect(r,e)]}a.domain=function(e){if(!arguments.length)return n;n=e.map(u).filter(c).sort(l);return t()};a.range=function(e){if(!arguments.length)return i;i=e;return t()};a.quantiles=function(){return r};a.invertExtent=function(e){e=i.indexOf(e);return e<0?[NaN,NaN]:[e>0?r[e-1]:n[0],e<r.length?r[e]:n[n.length-1]]};a.copy=function(){return ko(n,i)};return t()}D.scale.quantize=function(){return Mo(0,1,[0,1])};function Mo(t,n,i){var r,a;function e(e){return i[Math.max(0,Math.min(a,Math.floor(r*(e-t))))]}function s(){r=i.length/(n-t);a=i.length-1;return e}e.domain=function(e){if(!arguments.length)return[t,n];t=+e[0];n=+e[e.length-1];return s()};e.range=function(e){if(!arguments.length)return i;i=e;return s()};e.invertExtent=function(e){e=i.indexOf(e);e=e<0?NaN:e/r+t;return[e,e+1/r]};e.copy=function(){return Mo(t,n,i)};return s()}D.scale.threshold=function(){return Ro([.5],[0,1])};function Ro(t,n){function i(e){if(e<=e)return n[D.bisect(t,e)]}i.domain=function(e){if(!arguments.length)return t;t=e;return i};i.range=function(e){if(!arguments.length)return n;n=e;return i};i.invertExtent=function(e){e=n.indexOf(e);return[t[e-1],t[e]]};i.copy=function(){return Ro(t,n)};return i}D.scale.identity=function(){return Oo([0,1])};function Oo(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){if(!arguments.length)return n;n=e.map(t);return t};t.ticks=function(e){return po(n,e)};t.tickFormat=function(e,t){return go(n,e,t)};t.copy=function(){return Oo(n)};return t}D.svg={};function Io(){return 0}D.svg.arc=function(){var U=Lo,H=Po,G=Io,Y=Do,j=Fo,z=Uo,B=Ho;function t(){var e=Math.max(0,+U.apply(this,arguments)),t=Math.max(0,+H.apply(this,arguments)),n=j.apply(this,arguments)-ke,i=z.apply(this,arguments)-ke,r=Math.abs(i-n),a=n>i?0:1;if(t<e)s=t,t=e,e=s;if(r>=Ae)return q(t,a)+(e?q(e,1-a):"")+"Z";var s,o,l,u,c=0,f=0,h,d,p,g,m,v,y,_,w=[];if(u=(+B.apply(this,arguments)||0)/2){l=Y===Do?Math.sqrt(e*e+t*t):+Y.apply(this,arguments);if(!a)f*=-1;if(t)f=Le(l/t*Math.sin(u));if(e)c=Le(l/e*Math.sin(u))}if(t){h=t*Math.cos(n+f);d=t*Math.sin(n+f);p=t*Math.cos(i-f);g=t*Math.sin(i-f);var b=Math.abs(i-n-2*f)<=Se?0:1;if(f&&Go(h,d,p,g)===a^b){var E=(n+i)/2;h=t*Math.cos(E);d=t*Math.sin(E);p=g=null}}else{h=d=0}if(e){m=e*Math.cos(i-c);v=e*Math.sin(i-c);y=e*Math.cos(n+c);_=e*Math.sin(n+c);var x=Math.abs(n-i+2*c)<=Se?0:1;if(c&&Go(m,v,y,_)===1-a^x){var T=(n+i)/2;m=e*Math.cos(T);v=e*Math.sin(T);y=_=null}}else{m=v=0}if(r>Te&&(s=Math.min(Math.abs(t-e)/2,+G.apply(this,arguments)))>.001){o=e<t^a?0:1;var N=s,S=s;if(r<Se){var C=y==null?[m,v]:p==null?[h,d]:Cr([h,d],[y,_],[p,g],[m,v]),A=h-C[0],k=d-C[1],M=p-C[0],R=g-C[1],O=1/Math.sin(Math.acos((A*M+k*R)/(Math.sqrt(A*A+k*k)*Math.sqrt(M*M+R*R)))/2),I=Math.sqrt(C[0]*C[0]+C[1]*C[1]);S=Math.min(s,(e-I)/(O-1));N=Math.min(s,(t-I)/(O+1))}if(p!=null){var D=Yo(y==null?[m,v]:[y,_],[h,d],t,N,a),L=Yo([p,g],[m,v],t,N,a);if(s===N){w.push("M",D[0],"A",N,",",N," 0 0,",o," ",D[1],"A",t,",",t," 0 ",1-a^Go(D[1][0],D[1][1],L[1][0],L[1][1]),",",a," ",L[1],"A",N,",",N," 0 0,",o," ",L[0])}else{w.push("M",D[0],"A",N,",",N," 0 1,",o," ",L[0])}}else{w.push("M",h,",",d)}if(y!=null){var P=Yo([h,d],[y,_],e,-S,a),F=Yo([m,v],p==null?[h,d]:[p,g],e,-S,a);if(s===S){w.push("L",F[0],"A",S,",",S," 0 0,",o," ",F[1],"A",e,",",e," 0 ",a^Go(F[1][0],F[1][1],P[1][0],P[1][1]),",",1-a," ",P[1],"A",S,",",S," 0 0,",o," ",P[0])}else{w.push("L",F[0],"A",S,",",S," 0 0,",o," ",P[0])}}else{w.push("L",m,",",v)}}else{w.push("M",h,",",d);if(p!=null)w.push("A",t,",",t," 0 ",b,",",a," ",p,",",g);w.push("L",m,",",v);if(y!=null)w.push("A",e,",",e," 0 ",x,",",1-a," ",y,",",_)}w.push("Z");return w.join("")}function q(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}t.innerRadius=function(e){if(!arguments.length)return U;U=bt(e);return t};t.outerRadius=function(e){if(!arguments.length)return H;H=bt(e);return t};t.cornerRadius=function(e){if(!arguments.length)return G;G=bt(e);return t};t.padRadius=function(e){if(!arguments.length)return Y;Y=e==Do?Do:bt(e);return t};t.startAngle=function(e){if(!arguments.length)return j;j=bt(e);return t};t.endAngle=function(e){if(!arguments.length)return z;z=bt(e);return t};t.padAngle=function(e){if(!arguments.length)return B;B=bt(e);return t};t.centroid=function(){var e=(+U.apply(this,arguments)+ +H.apply(this,arguments))/2,t=(+j.apply(this,arguments)+ +z.apply(this,arguments))/2-ke;return[Math.cos(t)*e,Math.sin(t)*e]};return t};var Do="auto";function Lo(e){return e.innerRadius}function Po(e){return e.outerRadius}function Fo(e){return e.startAngle}function Uo(e){return e.endAngle}function Ho(e){return e&&e.padAngle}function Go(e,t,n,i){return(e-n)*t-(t-i)*e>0?0:1}function Yo(e,t,n,i,r){var a=e[0]-t[0],s=e[1]-t[1],o=(r?i:-i)/Math.sqrt(a*a+s*s),l=o*s,u=-o*a,c=e[0]+l,f=e[1]+u,h=t[0]+l,d=t[1]+u,p=(c+h)/2,g=(f+d)/2,m=h-c,v=d-f,y=m*m+v*v,_=n-i,w=c*d-h*f,b=(v<0?-1:1)*Math.sqrt(Math.max(0,_*_*y-w*w)),E=(w*v-m*b)/y,x=(-w*m-v*b)/y,T=(w*v+m*b)/y,N=(-w*m+v*b)/y,S=E-p,C=x-g,A=T-p,k=N-g;if(S*S+C*C>A*A+k*k)E=T,x=N;return[[E-l,x-u],[E*n/_,x*n/_]]}function jo(u){var c=br,f=Er,h=ri,d=Bo,t=d.key,p=.7;function n(e){var t=[],n=[],i=-1,r=e.length,a,s=bt(c),o=bt(f);function l(){t.push("M",d(u(n),p))}while(++i<r){if(h.call(this,a=e[i],i)){n.push([+s.call(this,a,i),+o.call(this,a,i)])}else if(n.length){l();n=[]}}if(n.length)l();return t.length?t.join(""):null}n.x=function(e){if(!arguments.length)return c;c=e;return n};n.y=function(e){if(!arguments.length)return f;f=e;return n};n.defined=function(e){if(!arguments.length)return h;h=e;return n};n.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=d=e;else t=(d=zo.get(e)||Bo).key;return n};n.tension=function(e){if(!arguments.length)return p;p=e;return n};return n}D.svg.line=function(){return jo(F)};var zo=D.map({linear:Bo,"linear-closed":qo,step:Vo,"step-before":Wo,"step-after":$o,basis:el,"basis-open":tl,"basis-closed":nl,bundle:il,cardinal:Ko,"cardinal-open":Xo,"cardinal-closed":Jo,monotone:hl});zo.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Bo(e){return e.length>1?e.join("L"):e+"Z"}function qo(e){return e.join("L")+"Z"}function Vo(e){var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];while(++t<n)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);if(n>1)r.push("H",i[0]);return r.join("")}function Wo(e){var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];while(++t<n)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function $o(e){var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];while(++t<n)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function Xo(e,t){return e.length<4?Bo(e):e[1]+Zo(e.slice(1,-1),Qo(e,t))}function Jo(e,t){return e.length<3?qo(e):e[0]+Zo((e.push(e[0]),e),Qo([e[e.length-2]].concat(e,[e[1]]),t))}function Ko(e,t){return e.length<3?Bo(e):e[0]+Zo(e,Qo(e,t))}function Zo(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Bo(e)}var n=e.length!=t.length,i="",r=e[0],a=e[1],s=t[0],o=s,l=1;if(n){i+="Q"+(a[0]-s[0]*2/3)+","+(a[1]-s[1]*2/3)+","+a[0]+","+a[1];r=e[1];l=2}if(t.length>1){o=t[1];a=e[l];l++;i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++){a=e[l];o=t[u];i+="S"+(a[0]-o[0])+","+(a[1]-o[1])+","+a[0]+","+a[1]}}if(n){var c=e[l];i+="Q"+(a[0]+o[0]*2/3)+","+(a[1]+o[1]*2/3)+","+c[0]+","+c[1]}return i}function Qo(e,t){var n=[],i=(1-t)/2,r,a=e[0],s=e[1],o=1,l=e.length;while(++o<l){r=a;a=s;s=e[o];n.push([i*(s[0]-r[0]),i*(s[1]-r[1])])}return n}function el(e){if(e.length<3)return Bo(e);var t=1,n=e.length,i=e[0],r=i[0],a=i[1],s=[r,r,r,(i=e[1])[0]],o=[a,a,a,i[1]],l=[r,",",a,"L",rl(ol,s),",",rl(ol,o)];e.push(e[n-1]);while(++t<=n){i=e[t];s.shift();s.push(i[0]);o.shift();o.push(i[1]);ll(l,s,o)}e.pop();l.push("L",i);return l.join("")}function tl(e){if(e.length<4)return Bo(e);var t=[],n=-1,i=e.length,r,a=[0],s=[0];while(++n<3){r=e[n];a.push(r[0]);s.push(r[1])}t.push(rl(ol,a)+","+rl(ol,s));--n;while(++n<i){r=e[n];a.shift();a.push(r[0]);s.shift();s.push(r[1]);ll(t,a,s)}return t.join("")}function nl(e){var t,n=-1,i=e.length,r=i+4,a,s=[],o=[];while(++n<4){a=e[n%i];s.push(a[0]);o.push(a[1])}t=[rl(ol,s),",",rl(ol,o)];--n;while(++n<r){a=e[n%i];s.shift();s.push(a[0]);o.shift();o.push(a[1]);ll(t,s,o)}return t.join("")}function il(e,t){var n=e.length-1;if(n){var i=e[0][0],r=e[0][1],a=e[n][0]-i,s=e[n][1]-r,o=-1,l,u;while(++o<=n){l=e[o];u=o/n;l[0]=t*l[0]+(1-t)*(i+u*a);l[1]=t*l[1]+(1-t)*(r+u*s)}}return el(e)}function rl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var al=[0,2/3,1/3,0],sl=[0,1/3,2/3,0],ol=[0,1/6,2/3,1/6];function ll(e,t,n){e.push("C",rl(al,t),",",rl(al,n),",",rl(sl,t),",",rl(sl,n),",",rl(ol,t),",",rl(ol,n))}function ul(e,t){return(t[1]-e[1])/(t[0]-e[0])}function cl(e){var t=0,n=e.length-1,i=[],r=e[0],a=e[1],s=i[0]=ul(r,a);while(++t<n){i[t]=(s+(s=ul(r=a,a=e[t+1])))/2}i[t]=s;return i}function fl(e){var t=[],n,i,r,a,s=cl(e),o=-1,l=e.length-1;while(++o<l){n=ul(e[o],e[o+1]);if(I(n)<Te){s[o]=s[o+1]=0}else{i=s[o]/n;r=s[o+1]/n;a=i*i+r*r;if(a>9){a=n*3/Math.sqrt(a);s[o]=a*i;s[o+1]=a*r}}}o=-1;while(++o<=l){a=(e[Math.min(l,o+1)][0]-e[Math.max(0,o-1)][0])/(6*(1+s[o]*s[o]));t.push([a||0,s[o]*a||0])}return t}function hl(e){return e.length<3?Bo(e):e[0]+Zo(e,fl(e))}D.svg.line.radial=function(){var e=jo(dl);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function dl(e){var t,n=-1,i=e.length,r,a;while(++n<i){t=e[n];r=t[0];a=t[1]-ke;t[0]=r*Math.cos(a);t[1]=r*Math.sin(a)}return e}function pl(p){var g=br,m=br,v=0,y=Er,_=ri,w=Bo,t=w.key,b=w,E="L",x=.7;function n(e){var t=[],n=[],i=[],r=-1,a=e.length,s,o=bt(g),l=bt(v),u=g===m?function(){return f}:bt(m),c=v===y?function(){return h}:bt(y),f,h;function d(){t.push("M",w(p(i),x),E,b(p(n.reverse()),x),"Z")}while(++r<a){if(_.call(this,s=e[r],r)){n.push([f=+o.call(this,s,r),h=+l.call(this,s,r)]);i.push([+u.call(this,s,r),+c.call(this,s,r)])}else if(n.length){d();n=[];i=[]}}if(n.length)d();return t.length?t.join(""):null}n.x=function(e){if(!arguments.length)return m;g=m=e;return n};n.x0=function(e){if(!arguments.length)return g;g=e;return n};n.x1=function(e){if(!arguments.length)return m;m=e;return n};n.y=function(e){if(!arguments.length)return y;v=y=e;return n};n.y0=function(e){if(!arguments.length)return v;v=e;return n};n.y1=function(e){if(!arguments.length)return y;y=e;return n};n.defined=function(e){if(!arguments.length)return _;_=e;return n};n.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=w=e;else t=(w=zo.get(e)||Bo).key;b=w.reverse||w;E=w.closed?"M":"L";return n};n.tension=function(e){if(!arguments.length)return x;x=e;return n};return n}Wo.reverse=$o;$o.reverse=Wo;D.svg.area=function(){return pl(F)};D.svg.area.radial=function(){var e=pl(dl);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};D.svg.chord=function(){var r=rr,a=ar,l=gl,u=Fo,c=Uo;function t(e,t){var n=s(this,r,e,t),i=s(this,a,e,t);return"M"+n.p0+f(n.r,n.p1,n.a1-n.a0)+(o(n,i)?h(n.r,n.p1,n.r,n.p0):h(n.r,n.p1,i.r,i.p0)+f(i.r,i.p1,i.a1-i.a0)+h(i.r,i.p1,n.r,n.p0))+"Z"}function s(e,t,n,i){var r=t.call(e,n,i),a=l.call(e,r,i),s=u.call(e,r,i)-ke,o=c.call(e,r,i)-ke;return{r:a,a0:s,a1:o,p0:[a*Math.cos(s),a*Math.sin(s)],p1:[a*Math.cos(o),a*Math.sin(o)]}}function o(e,t){return e.a0==t.a0&&e.a1==t.a1}function f(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Se)+",1 "+t}function h(e,t,n,i){return"Q 0,0 "+i}t.radius=function(e){if(!arguments.length)return l;l=bt(e);return t};t.source=function(e){if(!arguments.length)return r;r=bt(e);return t};t.target=function(e){if(!arguments.length)return a;a=bt(e);return t};t.startAngle=function(e){if(!arguments.length)return u;u=bt(e);return t};t.endAngle=function(e){if(!arguments.length)return c;c=bt(e);return t};return t};function gl(e){return e.radius}D.svg.diagonal=function(){var s=rr,o=ar,l=ml;function t(e,t){var n=s.call(this,e,t),i=o.call(this,e,t),r=(n.y+i.y)/2,a=[n,{x:n.x,y:r},{x:i.x,y:r},i];a=a.map(l);return"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}t.source=function(e){if(!arguments.length)return s;s=bt(e);return t};t.target=function(e){if(!arguments.length)return o;o=bt(e);return t};t.projection=function(e){if(!arguments.length)return l;l=e;return t};return t};function ml(e){return[e.x,e.y]}D.svg.diagonal.radial=function(){var e=D.svg.diagonal(),t=ml,n=e.projection;e.projection=function(e){return arguments.length?n(vl(t=e)):t};return e};function vl(i){return function(){var e=i.apply(this,arguments),t=e[0],n=e[1]-ke;return[t*Math.cos(n),t*Math.sin(n)]}}D.svg.symbol=function(){var n=_l,i=yl;function t(e,t){return(bl.get(n.call(this,e,t))||wl)(i.call(this,e,t))}t.type=function(e){if(!arguments.length)return n;n=bt(e);return t};t.size=function(e){if(!arguments.length)return i;i=bt(e);return t};return t};function yl(){return 64}function _l(){return"circle"}function wl(e){var t=Math.sqrt(e/Se);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var bl=D.map({circle:wl,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*xl)),n=t*xl;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/El),n=t*El/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/El),n=t*El/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});D.svg.symbolTypes=bl.keys();var El=Math.sqrt(3),xl=Math.tan(30*Me);W.transition=function(e){var t=kl||++Al,n=Il(e),i=[],r,a,s=Ml||{time:Date.now(),ease:Oa,delay:0,duration:250};for(var o=-1,l=this.length;++o<l;){i.push(r=[]);for(var u=this[o],c=-1,f=u.length;++c<f;){if(a=u[c])Dl(a,c,n,t,s);r.push(a)}}return Sl(i,n,t)};W.interrupt=function(e){return this.each(e==null?Tl:Nl(Il(e)))};var Tl=Nl(Il());function Nl(i){return function(){var e,t,n;if((e=this[i])&&(n=e[t=e.active])){n.timer.c=null;n.timer.t=NaN;if(--e.count)delete e[t];else delete this[i];e.active+=.5;n.event&&n.event.interrupt.call(this,this.__data__,n.index)}}}function Sl(e,t,n){j(e,Cl);e.namespace=t;e.id=n;return e}var Cl=[],Al=0,kl,Ml;Cl.call=W.call;Cl.empty=W.empty;Cl.node=W.node;Cl.size=W.size;D.transition=function(e,t){return e&&e.transition?kl?e.transition(t):e:D.selection().transition(e)};D.transition.prototype=Cl;Cl.select=function(e){var t=this.id,n=this.namespace,i=[],r,a,s;e=$(e);for(var o=-1,l=this.length;++o<l;){i.push(r=[]);for(var u=this[o],c=-1,f=u.length;++c<f;){if((s=u[c])&&(a=e.call(s,s.__data__,c,o))){if("__data__"in s)a.__data__=s.__data__;Dl(a,c,n,t,s[n][t]);r.push(a)}else{r.push(null)}}}return Sl(i,n,t)};Cl.selectAll=function(e){var t=this.id,n=this.namespace,i=[],r,a,s,o,l;e=X(e);for(var u=-1,c=this.length;++u<c;){for(var f=this[u],h=-1,d=f.length;++h<d;){if(s=f[h]){l=s[n][t];a=e.call(s,s.__data__,h,u);i.push(r=[]);for(var p=-1,g=a.length;++p<g;){if(o=a[p])Dl(o,p,n,t,l);r.push(o)}}}}return Sl(i,n,t)};Cl.filter=function(e){var t=[],n,i,r;if(typeof e!=="function")e=le(e);for(var a=0,s=this.length;a<s;a++){t.push(n=[]);for(var i=this[a],o=0,l=i.length;o<l;o++){if((r=i[o])&&e.call(r,r.__data__,o,a)){n.push(r)}}}return Sl(t,this.namespace,this.id)};Cl.tween=function(t,n){var i=this.id,r=this.namespace;if(arguments.length<2)return this.node()[r][i].tween.get(t);return ce(this,n==null?function(e){e[r][i].tween.remove(t)}:function(e){e[r][i].tween.set(t,n)})};function Rl(e,i,r,a){var s=e.id,o=e.namespace;return ce(e,typeof r==="function"?function(e,t,n){e[o][s].tween.set(i,a(r.call(e,e.__data__,t,n)))}:(r=a(r),function(e){e[o][s].tween.set(i,r)}))}Cl.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var i=e=="transform"?es:Ea,r=D.ns.qualify(e);function a(){this.removeAttribute(r)}function s(){this.removeAttributeNS(r.space,r.local)}function n(n){return n==null?a:(n+="",function(){var e=this.getAttribute(r),t;return e!==n&&(t=i(e,n),function(e){this.setAttribute(r,t(e))})})}function o(n){return n==null?s:(n+="",function(){var e=this.getAttributeNS(r.space,r.local),t;return e!==n&&(t=i(e,n),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}return Rl(this,"attr."+e,t,r.local?o:n)};Cl.attrTween=function(e,i){var r=D.ns.qualify(e);function t(e,t){var n=i.call(this,e,t,this.getAttribute(r));return n&&function(e){this.setAttribute(r,n(e))}}function n(e,t){var n=i.call(this,e,t,this.getAttributeNS(r.space,r.local));return n&&function(e){this.setAttributeNS(r.space,r.local,n(e))}}return this.tween("attr."+e,r.local?n:t)};Cl.style=function(i,e,r){var t=arguments.length;if(t<3){if(typeof i!=="string"){if(t<2)e="";for(r in i)this.style(r,i[r],e);return this}r=""}function a(){this.style.removeProperty(i)}function n(n){return n==null?a:(n+="",function(){var e=P(this).getComputedStyle(this,null).getPropertyValue(i),t;return e!==n&&(t=Ea(e,n),function(e){this.style.setProperty(i,t(e),r)})})}return Rl(this,"style."+i,e,n)};Cl.styleTween=function(i,r,a){if(arguments.length<3)a="";function e(e,t){var n=r.call(this,e,t,P(this).getComputedStyle(this,null).getPropertyValue(i));return n&&function(e){this.style.setProperty(i,n(e),a)}}return this.tween("style."+i,e)};Cl.text=function(e){return Rl(this,"text",e,Ol)};function Ol(e){if(e==null)e="";return function(){this.textContent=e}}Cl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;if(this[t].count<2&&(e=this.parentNode))e.removeChild(this)})};Cl.ease=function(t){var n=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][n].ease;if(typeof t!=="function")t=D.ease.apply(D,arguments);return ce(this,function(e){e[i][n].ease=t})};Cl.delay=function(i){var r=this.id,a=this.namespace;if(arguments.length<1)return this.node()[a][r].delay;return ce(this,typeof i==="function"?function(e,t,n){e[a][r].delay=+i.call(e,e.__data__,t,n)}:(i=+i,function(e){e[a][r].delay=i}))};Cl.duration=function(i){var r=this.id,a=this.namespace;if(arguments.length<1)return this.node()[a][r].duration;return ce(this,typeof i==="function"?function(e,t,n){e[a][r].duration=Math.max(1,i.call(e,e.__data__,t,n))}:(i=Math.max(1,i),function(e){e[a][r].duration=i}))};Cl.each=function(i,n){var r=this.id,a=this.namespace;if(arguments.length<2){var e=Ml,t=kl;try{kl=r;ce(this,function(e,t,n){Ml=e[a][r];i.call(e,e.__data__,t,n)})}finally{Ml=e;kl=t}}else{ce(this,function(e){var t=e[a][r];(t.event||(t.event=D.dispatch("start","end","interrupt"))).on(i,n)})}return this};Cl.transition=function(){var e=this.id,t=++Al,n=this.namespace,i=[],r,a,s,o;for(var l=0,u=this.length;l<u;l++){i.push(r=[]);for(var a=this[l],c=0,f=a.length;c<f;c++){if(s=a[c]){o=s[n][e];Dl(s,c,n,t,{time:o.time,ease:o.ease,delay:o.delay+o.duration,duration:o.duration})}r.push(s)}}return Sl(i,n,t)};function Il(e){return e==null?"__transition__":"__transition_"+e+"__"}function Dl(a,s,r,o,e){var l=a[r]||(a[r]={active:0,count:0}),u=l[o],c,f,h,d,p;function t(e){var t=u.delay;f.t=t+c;if(t<=e)return n(e-t);f.c=n}function n(e){var t=l.active,n=l[t];if(n){n.timer.c=null;n.timer.t=NaN;--l.count;delete l[t];n.event&&n.event.interrupt.call(a,a.__data__,n.index)}for(var i in l){if(+i<o){var r=l[i];r.timer.c=null;r.timer.t=NaN;--l.count;delete l[i]}}f.c=g;Rt(function(){if(f.c&&g(e||1)){f.c=null;f.t=NaN}return 1},0,c);l.active=o;u.event&&u.event.start.call(a,a.__data__,s);p=[];u.tween.forEach(function(e,t){if(t=t.call(a,a.__data__,s)){p.push(t)}});d=u.ease;h=u.duration}function g(e){var t=e/h,n=d(t),i=p.length;while(i>0){p[--i].call(a,n)}if(t>=1){u.event&&u.event.end.call(a,a.__data__,s);if(--l.count)delete l[o];else delete a[r];return 1}}if(!u){c=e.time;f=Rt(t,0,c);u=l[o]={tween:new y,time:c,timer:f,delay:e.delay,duration:e.duration,ease:e.ease,index:s};e=null;++l.count}}D.svg.axis=function(){var S=D.scale.linear(),C=Ll,A=6,k=6,M=3,R=[10],O=null,I;function n(e){e.each(function(){var e=D.select(this);var t=this.__chart__||S,n=this.__chart__=S.copy();var i=O==null?n.ticks?n.ticks.apply(n,R):n.domain():O,r=I==null?n.tickFormat?n.tickFormat.apply(n,R):F:I,a=e.selectAll(".tick").data(i,n),s=a.enter().insert("g",".domain").attr("class","tick").style("opacity",Te),o=D.transition(a.exit()).style("opacity",Te).remove(),l=D.transition(a.order()).style("opacity",1),u=Math.max(A,0)+M,c;var f=io(n),h=e.selectAll(".domain").data([0]),d=(h.enter().append("path").attr("class","domain"),D.transition(h));s.append("line");s.append("text");var p=s.select("line"),g=l.select("line"),m=a.select("text").text(r),v=s.select("text"),y=l.select("text"),_=C==="top"||C==="left"?-1:1,w,b,E,x;if(C==="bottom"||C==="top"){c=Fl,w="x",E="y",b="x2",x="y2";m.attr("dy",_<0?"0em":".71em").style("text-anchor","middle");d.attr("d","M"+f[0]+","+_*k+"V0H"+f[1]+"V"+_*k)}else{c=Ul,w="y",E="x",b="y2",x="x2";m.attr("dy",".32em").style("text-anchor",_<0?"end":"start");d.attr("d","M"+_*k+","+f[0]+"H0V"+f[1]+"H"+_*k)}p.attr(x,_*A);v.attr(E,_*u);g.attr(b,0).attr(x,_*A);y.attr(w,0).attr(E,_*u);if(n.rangeBand){var T=n,N=T.rangeBand()/2;t=n=function(e){return T(e)+N}}else if(t.rangeBand){t=n}else{o.call(c,n,t)}s.call(c,t,n);l.call(c,n,n)})}n.scale=function(e){if(!arguments.length)return S;S=e;return n};n.orient=function(e){if(!arguments.length)return C;C=e in Pl?e+"":Ll;return n};n.ticks=function(){if(!arguments.length)return R;R=f(arguments);return n};n.tickValues=function(e){if(!arguments.length)return O;O=e;return n};n.tickFormat=function(e){if(!arguments.length)return I;I=e;return n};n.tickSize=function(e){var t=arguments.length;if(!t)return A;A=+e;k=+arguments[t-1];return n};n.innerTickSize=function(e){if(!arguments.length)return A;A=+e;return n};n.outerTickSize=function(e){if(!arguments.length)return k;k=+e;return n};n.tickPadding=function(e){if(!arguments.length)return M;M=+e;return n};n.tickSubdivide=function(){return arguments.length&&n};return n};var Ll="bottom",Pl={top:1,right:1,bottom:1,left:1};function Fl(e,n,i){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:i(e))+",0)"})}function Ul(e,n,i){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:i(e))+")"})}D.svg.brush=function(){var w=G(k,"brushstart","brush","brushend"),b=null,E=null,x=[0,0],T=[0,0],N,S,C=true,A=true,s=Gl[0];function k(e){e.each(function(){var e=D.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o);var t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(s,F);n.exit().remove();n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",k.empty()?"none":null);var i=D.transition(e),r=D.transition(t),a;if(b){a=io(b);r.attr("x",a[0]).attr("width",a[1]-a[0]);R(i)}if(E){a=io(E);r.attr("y",a[0]).attr("height",a[1]-a[0]);O(i)}M(i)})}k.event=function(e){e.each(function(){var i=w.of(this,arguments),r={x:x,y:T,i:N,j:S},e=this.__chart__||r;this.__chart__=r;if(kl){D.select(this).transition().each("start.brush",function(){N=e.i;S=e.j;x=e.x;T=e.y;i({type:"brushstart"})}).tween("brush:brush",function(){var t=xa(x,r.x),n=xa(T,r.y);N=S=null;return function(e){x=r.x=t(e);T=r.y=n(e);i({type:"brush",mode:"resize"})}}).each("end.brush",function(){N=r.i;S=r.j;i({type:"brush",mode:"resize"});i({type:"brushend"})})}else{i({type:"brushstart"});i({type:"brush",mode:"resize"});i({type:"brushend"})}})};function M(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+x[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function R(e){e.select(".extent").attr("x",x[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",x[1]-x[0])}function O(e){e.select(".extent").attr("y",T[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function o(){var n=this,e=D.select(D.event.target),i=w.of(n,arguments),r=D.select(n),t=e.datum(),a=!/^(n|s)$/.test(t)&&b,s=!/^(e|w)$/.test(t)&&E,f=e.classed("extent"),o=we(n),h,d=D.mouse(n),l;var u=D.select(P(n)).on("keydown.brush",g).on("keyup.brush",m);if(D.event.changedTouches){u.on("touchmove.brush",v).on("touchend.brush",_)}else{u.on("mousemove.brush",v).on("mouseup.brush",_)}r.interrupt().selectAll("*").interrupt();if(f){d[0]=x[0]-d[0];d[1]=T[0]-d[1]}else if(t){var c=+/w$/.test(t),p=+/^n/.test(t);l=[x[1-c]-d[0],T[1-p]-d[1]];d[0]=x[c];d[1]=T[p]}else if(D.event.altKey)h=d.slice();r.style("pointer-events","none").selectAll(".resize").style("display",null);D.select("body").style("cursor",e.style("cursor"));i({type:"brushstart"});v();function g(){if(D.event.keyCode==32){if(!f){h=null;d[0]-=x[1];d[1]-=T[1];f=2}U()}}function m(){if(D.event.keyCode==32&&f==2){d[0]+=x[1];d[1]+=T[1];f=0;U()}}function v(){var e=D.mouse(n),t=false;if(l){e[0]+=l[0];e[1]+=l[1]}if(!f){if(D.event.altKey){if(!h)h=[(x[0]+x[1])/2,(T[0]+T[1])/2];d[0]=x[+(e[0]<h[0])];d[1]=T[+(e[1]<h[1])]}else h=null}if(a&&y(e,b,0)){R(r);t=true}if(s&&y(e,E,1)){O(r);t=true}if(t){M(r);i({type:"brush",mode:f?"move":"resize"})}}function y(e,t,n){var i=io(t),r=i[0],a=i[1],s=d[n],o=n?T:x,l=o[1]-o[0],u,c;if(f){r-=s;a-=l+s}u=(n?A:C)?Math.max(r,Math.min(a,e[n])):e[n];if(f){c=(u+=s)+l}else{if(h)s=Math.max(r,Math.min(a,2*h[n]-u));if(s<u){c=u;u=s}else{c=s}}if(o[0]!=u||o[1]!=c){if(n)S=null;else N=null;o[0]=u;o[1]=c;return true}}function _(){v();r.style("pointer-events","all").selectAll(".resize").style("display",k.empty()?"none":null);D.select("body").style("cursor",null);u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);o();i({type:"brushend"})}}k.x=function(e){if(!arguments.length)return b;b=e;s=Gl[!b<<1|!E];return k};k.y=function(e){if(!arguments.length)return E;E=e;s=Gl[!b<<1|!E];return k};k.clamp=function(e){if(!arguments.length)return b&&E?[C,A]:b?C:E?A:null;if(b&&E)C=!!e[0],A=!!e[1];else if(b)C=!!e;else if(E)A=!!e;return k};k.extent=function(e){var t,n,i,r,a;if(!arguments.length){if(b){if(N){t=N[0],n=N[1]}else{t=x[0],n=x[1];if(b.invert)t=b.invert(t),n=b.invert(n);if(n<t)a=t,t=n,n=a}}if(E){if(S){i=S[0],r=S[1]}else{i=T[0],r=T[1];if(E.invert)i=E.invert(i),r=E.invert(r);if(r<i)a=i,i=r,r=a}}return b&&E?[[t,i],[n,r]]:b?[t,n]:E&&[i,r]}if(b){t=e[0],n=e[1];if(E)t=t[0],n=n[0];N=[t,n];if(b.invert)t=b(t),n=b(n);if(n<t)a=t,t=n,n=a;if(t!=x[0]||n!=x[1])x=[t,n]}if(E){i=e[0],r=e[1];if(b)i=i[1],r=r[1];S=[i,r];if(E.invert)i=E(i),r=E(r);if(r<i)a=i,i=r,r=a;if(i!=T[0]||r!=T[1])T=[i,r]}return k};k.clear=function(){if(!k.empty()){x=[0,0],T=[0,0];N=S=null}return k};k.empty=function(){return!!b&&x[0]==x[1]||!!E&&T[0]==T[1]};return D.rebind(k,w,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Gl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Yl=jt.format=_n.timeFormat;var jl=Yl.utc;var zl=jl("%Y-%m-%dT%H:%M:%S.%LZ");Yl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Bl:zl;function Bl(e){return e.toISOString()}Bl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Bl.toString=zl.toString;jt.second=Vt(function(e){return new zt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});jt.seconds=jt.second.range;jt.seconds.utc=jt.second.utc.range;jt.minute=Vt(function(e){return new zt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});jt.minutes=jt.minute.range;jt.minutes.utc=jt.minute.utc.range;jt.hour=Vt(function(e){var t=e.getTimezoneOffset()/60;return new zt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});jt.hours=jt.hour.range;jt.hours.utc=jt.hour.utc.range;jt.month=Vt(function(e){e=jt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});jt.months=jt.month.range;jt.months.utc=jt.month.utc.range;function ql(t,a,e){function s(e){return t(e)}s.invert=function(e){return Vl(t.invert(e))};s.domain=function(e){if(!arguments.length)return t.domain().map(Vl);t.domain(e);return s};function o(e,t){var n=e[1]-e[0],i=n/t,r=D.bisect(Wl,i);return r==Wl.length?[a.year,ho(e.map(function(e){return e/31536e6}),t)[2]]:!r?[Jl,ho(e,t)[2]]:a[i/Wl[r-1]<Wl[r]/i?r-1:r]}s.nice=function(t,n){var e=s.domain(),i=no(e),r=t==null?o(i,10):typeof t==="number"&&o(i,t);if(r)t=r[0],n=r[1];function a(e){return!isNaN(e)&&!t.range(e,Vl(+e+1),n).length}return s.domain(ao(e,n>1?{floor:function(e){while(a(e=t.floor(e)))e=Vl(e-1);return e},ceil:function(e){while(a(e=t.ceil(e)))e=Vl(+e+1);return e}}:t))};s.ticks=function(e,t){var n=no(s.domain()),i=e==null?o(n,10):typeof e==="number"?o(n,e):!e.range&&[{range:e},t];if(i)e=i[0],t=i[1];return e.range(n[0],Vl(+n[1]+1),t<1?1:t)};s.tickFormat=function(){return e};s.copy=function(){return ql(t.copy(),a,e)};return co(s,t)}function Vl(e){return new Date(e)}var Wl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var $l=[[jt.second,1],[jt.second,5],[jt.second,15],[jt.second,30],[jt.minute,1],[jt.minute,5],[jt.minute,15],[jt.minute,30],[jt.hour,1],[jt.hour,3],[jt.hour,6],[jt.hour,12],[jt.day,1],[jt.day,2],[jt.week,1],[jt.month,1],[jt.month,3],[jt.year,1]];var Xl=Yl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",ri]]);var Jl={range:function(e,t,n){return D.range(Math.ceil(e/n)*n,+t,n).map(Vl)},floor:F,ceil:F};$l.year=jt.year;jt.scale=function(){return ql(D.scale.linear(),$l,Xl)};var Kl=$l.map(function(e){return[e[0].utc,e[1]]});var Zl=jl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",ri]]);Kl.year=jt.year.utc;jt.scale.utc=function(){return ql(D.scale.linear(),Kl,Zl)};D.text=Et(function(e){return e.responseText});D.json=function(e,t){return xt(e,"application/json",Ql,t)};function Ql(e){return JSON.parse(e.responseText)}D.html=function(e,t){return xt(e,"text/html",eu,t)};function eu(e){var t=L.createRange();t.selectNode(L.body);return t.createContextualFragment(e.responseText)}D.xml=Et(function(e){return e.responseXML});if(typeof define==="function"&&define.amd)this.d3=D,define("d3",D);else if(typeof module==="object"&&module.exports)module.exports=D;else this.d3=D}();(function(t,n){if(typeof define==="function"&&define.amd){define("rickshaw",["d3"],function(e){return t.Rickshaw=n(e)})}else if(typeof exports==="object"){module.exports=n(require("d3"))}else{t.Rickshaw=n(d3)}})(this,function(y){var l={namespace:function(e,t){var n=e.split(".");var i=l;for(var r=1,a=n.length;r<a;r++){var s=n[r];i[s]=i[s]||{};i=i[s]}return i},keys:function(e){var t=[];for(var n in e)t.push(n);return t},extend:function(e,t){for(var n in t){e[n]=t[n]}return e},clone:function(e){return JSON.parse(JSON.stringify(e))}};(function(e){var t=Object.prototype.toString,n="Null",i="Undefined",r="Boolean",a="Number",s="String",o="Object",l="[object Function]";function u(e){return t.call(e)===l}function c(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];return e}function f(e){if(h(e)!==o){throw new TypeError}var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t}function h(e){switch(e){case null:return n;case void 0:return i}var t=typeof e;switch(t){case"boolean":return r;case"number":return a;case"string":return s}return o}function d(e){return typeof e==="undefined"}var p=Array.prototype.slice;function g(e){var t=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return t.length==1&&!t[0]?[]:t}function m(e,t){var n=e;return function(){var e=v([_(n,this)],arguments);return t.apply(this,e)}}function v(e,t){var n=e.length,i=t.length;while(i--)e[n+i]=t[i];return e}function y(e,t){e=p.call(e,0);return v(e,t)}function _(e,t){if(arguments.length<2&&d(arguments[0]))return this;var n=e,i=p.call(arguments,2);return function(){var e=y(i,arguments);return n.apply(t,e)}}var w=function(){};var b=function(){var l=function(){for(var e in{toString:1}){if(e==="toString")return false}return true}();function a(){}function e(){var e=null,t=[].slice.apply(arguments);if(u(t[0]))e=t.shift();function n(){this.initialize.apply(this,arguments)}c(n,b.Methods);n.superclass=e;n.subclasses=[];if(e){a.prototype=e.prototype;n.prototype=new a;try{e.subclasses.push(n)}catch(e){}}for(var i=0,r=t.length;i<r;i++)n.addMethods(t[i]);if(!n.prototype.initialize)n.prototype.initialize=w;n.prototype.constructor=n;return n}function t(e){var t=this.superclass&&this.superclass.prototype,n=f(e);if(l){if(e.toString!=Object.prototype.toString)n.push("toString");if(e.valueOf!=Object.prototype.valueOf)n.push("valueOf")}for(var i=0,r=n.length;i<r;i++){var a=n[i],s=e[a];if(t&&u(s)&&g(s)[0]=="$super"){var o=s;s=m(function(e){return function(){return t[e].apply(this,arguments)}}(a),o);s.valueOf=_(o.valueOf,o);s.toString=_(o.toString,o)}this.prototype[a]=s}return this}return{create:e,Methods:{addMethods:t}}}();if(e.exports){e.exports.Class=b}else{e.Class=b}})(l);l.namespace("Rickshaw.Compat.ClassList");l.Compat.ClassList=function(){if(typeof document!=="undefined"&&!("classList"in document.createElement("a"))){(function(e){"use strict";var t="classList",n="prototype",i=(e.HTMLElement||e.Element)[n],r=Object,a=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++){if(t in this&&this[t]===e){return t}}return-1},o=function(e,t){this.name=e;this.code=DOMException[e];this.message=t},l=function(e,t){if(t===""){throw new o("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(t)){throw new o("INVALID_CHARACTER_ERR","String contains an invalid character")}return s.call(e,t)},u=function(e){var t=a.call(e.className),n=t?t.split(/\s+/):[],i=0,r=n.length;for(;i<r;i++){this.push(n[i])}this._updateClassName=function(){e.className=this.toString()}},c=u[n]=[],f=function(){return new u(this)};o[n]=Error[n];c.item=function(e){return this[e]||null};c.contains=function(e){e+="";return l(this,e)!==-1};c.add=function(e){e+="";if(l(this,e)===-1){this.push(e);this._updateClassName()}};c.remove=function(e){e+="";var t=l(this,e);if(t!==-1){this.splice(t,1);this._updateClassName()}};c.toggle=function(e){e+="";if(l(this,e)===-1){this.add(e)}else{this.remove(e)}};c.toString=function(){return this.join(" ")};if(r.defineProperty){var h={get:f,enumerable:true,configurable:true};try{r.defineProperty(i,t,h)}catch(e){if(e.number===-2146823252){h.enumerable=false;r.defineProperty(i,t,h)}}}else if(r[n].__defineGetter__){i.__defineGetter__(t,f)}})(window)}};if(typeof RICKSHAW_NO_COMPAT!=="undefined"&&!RICKSHAW_NO_COMPAT||typeof RICKSHAW_NO_COMPAT==="undefined"){new l.Compat.ClassList}l.namespace("Rickshaw.Graph");l.Graph=function(e){var a=this;this.initialize=function(e){if(!e.element)throw"Rickshaw.Graph needs a reference to an element";if(e.element.nodeType!==1)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=e.element;this.series=e.series;this.window={};this.updateCallbacks=[];this.configureCallbacks=[];this.defaults={interpolation:"cardinal",offset:"zero",min:undefined,max:undefined,preserve:false,xScale:undefined,yScale:undefined,stack:true};this._loadRenderers();this.configure(e);this.validateSeries(e.series);this.series.active=function(){return a.series.filter(function(e){return!e.disabled})};this.setSize({width:e.width,height:e.height});this.element.classList.add("rickshaw_graph");this.vis=y.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height);this.discoverRange()};this._loadRenderers=function(){for(var e in l.Graph.Renderer){if(!e||!l.Graph.Renderer.hasOwnProperty(e))continue;var t=l.Graph.Renderer[e];if(!t||!t.prototype||!t.prototype.render)continue;a.registerRenderer(new t({graph:a}))}};this.validateSeries=function(e){if(!Array.isArray(e)&&!(e instanceof l.Series)){var t=Object.prototype.toString.apply(e);throw"series is not an array: "+t}var n;e.forEach(function(e){if(!(e instanceof Object)){throw"series element is not an object: "+e}if(!e.data){throw"series has no data: "+JSON.stringify(e)}if(!Array.isArray(e.data)){throw"series data is not an array: "+JSON.stringify(e.data)}if(e.data.length>0){var t=e.data[0].x;var n=e.data[0].y;if(typeof t!="number"||typeof n!="number"&&n!==null){throw"x and y properties of points should be numbers instead of "+typeof t+" and "+typeof n}}if(e.data.length>=3){if(e.data[2].x<e.data[1].x||e.data[1].x<e.data[0].x||e.data[e.data.length-1].x<e.data[0].x){throw"series data needs to be sorted on x values for series name: "+e.name}}},this)};this.dataDomain=function(){var e=this.series.map(function(e){return e.data});var t=y.min(e.map(function(e){return e[0].x}));var n=y.max(e.map(function(e){return e[e.length-1].x}));return[t,n]};this.discoverRange=function(){var e=this.renderer.domain();this.x=(this.xScale||y.scale.linear()).copy().domain(e.x).range([0,this.width]);this.y=(this.yScale||y.scale.linear()).copy().domain(e.y).range([this.height,0]);this.x.magnitude=y.scale.linear().domain([e.x[0]-e.x[0],e.x[1]-e.x[0]]).range([0,this.width]);this.y.magnitude=y.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])};this.render=function(){var e=this.stackData();this.discoverRange();this.renderer.render();this.updateCallbacks.forEach(function(e){e()})};this.update=this.render;this.stackData=function(){var i=this.series.active().map(function(e){return e.data}).map(function(e){return e.filter(function(e){return this._slice(e)},this)},this);var t=this.preserve;if(!t){this.series.forEach(function(e){if(e.scale){t=true}})}i=t?l.clone(i):i;this.series.active().forEach(function(t,e){if(t.scale){var n=i[e];if(n){n.forEach(function(e){e.y=t.scale(e.y)})}}});this.stackData.hooks.data.forEach(function(e){i=e.f.apply(a,[i])});var n;if(!this.renderer.unstack){this._validateStackable();var e=y.layout.stack();e.offset(a.offset);n=e(i)}n=n||i;if(this.renderer.unstack){n.forEach(function(e){e.forEach(function(e){e.y0=e.y0===undefined?0:e.y0})})}this.stackData.hooks.after.forEach(function(e){n=e.f.apply(a,[i])});var r=0;this.series.forEach(function(e){if(e.disabled)return;e.stack=n[r++]});this.stackedData=n;return n};this._validateStackable=function(){var e=this.series;var t;e.forEach(function(e){t=t||e.data.length;if(t&&e.data.length!=t){throw"stacked series cannot have differing numbers of points: "+t+" vs "+e.data.length+"; see Rickshaw.Series.fill()"}},this)};this.stackData.hooks={data:[],after:[]};this._slice=function(e){if(this.window.xMin||this.window.xMax){var t=true;if(this.window.xMin&&e.x<this.window.xMin)t=false;if(this.window.xMax&&e.x>this.window.xMax)t=false;return t}return true};this.onUpdate=function(e){this.updateCallbacks.push(e)};this.onConfigure=function(e){this.configureCallbacks.push(e)};this.registerRenderer=function(e){this._renderers=this._renderers||{};this._renderers[e.name]=e};this.configure=function(t){this.config=this.config||{};if(t.width||t.height){this.setSize(t)}l.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this?this[e]:this.defaults[e]},this);l.keys(this.config).forEach(function(e){this[e]=this.config[e]},this);if("stack"in t)t.unstack=!t.stack;var e=t.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(e,t);this.configureCallbacks.forEach(function(e){e(t)})};this.setRenderer=function(e,t){if(typeof e=="function"){this.renderer=new e({graph:a});this.registerRenderer(this.renderer)}else{if(!this._renderers[e]){throw"couldn't find renderer "+e}this.renderer=this._renderers[e]}if(typeof t=="object"){this.renderer.configure(t)}};this.setSize=function(e){e=e||{};if(typeof window!==undefined){var t=window.getComputedStyle(this.element,null);var n=parseInt(t.getPropertyValue("width"),10);var i=parseInt(t.getPropertyValue("height"),10)}this.width=e.width||n||400;this.height=e.height||i||250;this.vis&&this.vis.attr("width",this.width).attr("height",this.height)};this.initialize(e)};l.namespace("Rickshaw.Fixtures.Color");l.Fixtures.Color=function(){this.schemes={};this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse();this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"];this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"];this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse();this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"};this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse();this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"];this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]};l.namespace("Rickshaw.Fixtures.RandomData");l.Fixtures.RandomData=function(s){var e;s=s||1;var t=200;var o=Math.floor((new Date).getTime()/1e3);this.addData=function(e){var i=Math.random()*100+15+t;var r=e[0].length;var a=1;e.forEach(function(e){var t=Math.random()*20;var n=i/25+a+++(Math.cos(r*a*11/960)+2)*15+(Math.cos(r/7)+2)*7+(Math.cos(r/17)+2)*1;e.push({x:r*s+o,y:n+t})});t=i*.85};this.removeData=function(e){e.forEach(function(e){e.shift()});o+=s}};l.namespace("Rickshaw.Fixtures.Time");l.Fixtures.Time=function(){var t=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.units=[{name:"decade",seconds:86400*365.25*10,formatter:function(e){return parseInt(e.getUTCFullYear()/10,10)*10}},{name:"year",seconds:86400*365.25,formatter:function(e){return e.getUTCFullYear()}},{name:"month",seconds:86400*30.5,formatter:function(e){return t.months[e.getUTCMonth()]}},{name:"week",seconds:86400*7,formatter:function(e){return t.formatDate(e)}},{name:"day",seconds:86400,formatter:function(e){return e.getUTCDate()}},{name:"6 hour",seconds:3600*6,formatter:function(e){return t.formatTime(e)}},{name:"hour",seconds:3600,formatter:function(e){return t.formatTime(e)}},{name:"15 minute",seconds:60*15,formatter:function(e){return t.formatTime(e)}},{name:"minute",seconds:60,formatter:function(e){return e.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(e){return e.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(e){return e.getUTCSeconds()+"s"}},{name:"decisecond",seconds:1/10,formatter:function(e){return e.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:1/100,formatter:function(e){return e.getUTCMilliseconds()+"ms"}}];this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()};this.formatDate=function(e){return y.time.format("%b %e")(e)};this.formatTime=function(e){return e.toUTCString().match(/(\d+:\d+):/)[1]};this.ceil=function(e,t){var n,i,r;if(t.name=="month"){n=new Date(e*1e3);i=Date.UTC(n.getUTCFullYear(),n.getUTCMonth())/1e3;if(i==e)return e;r=n.getUTCFullYear();var a=n.getUTCMonth();if(a==11){a=0;r=r+1}else{a+=1}return Date.UTC(r,a)/1e3}if(t.name=="year"){n=new Date(e*1e3);i=Date.UTC(n.getUTCFullYear(),0)/1e3;if(i==e)return e;r=n.getUTCFullYear()+1;return Date.UTC(r,0)/1e3}return Math.ceil(e/t.seconds)*t.seconds}};l.namespace("Rickshaw.Fixtures.Time.Local");l.Fixtures.Time.Local=function(){var t=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.units=[{name:"decade",seconds:86400*365.25*10,formatter:function(e){return parseInt(e.getFullYear()/10,10)*10}},{name:"year",seconds:86400*365.25,formatter:function(e){return e.getFullYear()}},{name:"month",seconds:86400*30.5,formatter:function(e){return t.months[e.getMonth()]}},{name:"week",seconds:86400*7,formatter:function(e){return t.formatDate(e)}},{name:"day",seconds:86400,formatter:function(e){return e.getDate()}},{name:"6 hour",seconds:3600*6,formatter:function(e){return t.formatTime(e)}},{name:"hour",seconds:3600,formatter:function(e){return t.formatTime(e)}},{name:"15 minute",seconds:60*15,formatter:function(e){return t.formatTime(e)}},{name:"minute",seconds:60,formatter:function(e){return e.getMinutes()}},{name:"15 second",seconds:15,formatter:function(e){return e.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(e){return e.getSeconds()+"s"}},{name:"decisecond",seconds:1/10,formatter:function(e){return e.getMilliseconds()+"ms"}},{name:"centisecond",seconds:1/100,formatter:function(e){return e.getMilliseconds()+"ms"}}];this.unit=function(t){return this.units.filter(function(e){return t==e.name}).shift()};this.formatDate=function(e){return y.time.format("%b %e")(e)};this.formatTime=function(e){return e.toString().match(/(\d+:\d+):/)[1]};this.ceil=function(e,t){var n,i,r;if(t.name=="day"){var a=new Date((e+t.seconds-1)*1e3);var s=new Date(0);s.setMilliseconds(0);s.setSeconds(0);s.setMinutes(0);s.setHours(0);s.setDate(a.getDate());s.setMonth(a.getMonth());s.setFullYear(a.getFullYear());return s.getTime()/1e3}if(t.name=="month"){n=new Date(e*1e3);i=new Date(n.getFullYear(),n.getMonth()).getTime()/1e3;if(i==e)return e;r=n.getFullYear();var o=n.getMonth();if(o==11){o=0;r=r+1}else{o+=1}return new Date(r,o).getTime()/1e3}if(t.name=="year"){n=new Date(e*1e3);i=new Date(n.getUTCFullYear(),0).getTime()/1e3;if(i==e)return e;r=n.getFullYear()+1;return new Date(r,0).getTime()/1e3}return Math.ceil(e/t.seconds)*t.seconds}};l.namespace("Rickshaw.Fixtures.Number");l.Fixtures.Number.formatKMBT=function(e){var t=Math.abs(e);if(t>=1e12){return e/1e12+"T"}else if(t>=1e9){return e/1e9+"B"}else if(t>=1e6){return e/1e6+"M"}else if(t>=1e3){return e/1e3+"K"}else if(t<1&&e>0){return e.toFixed(2)}else if(t===0){return""}else{return e}};l.Fixtures.Number.formatBase1024KMGTP=function(e){var t=Math.abs(e);if(t>=0x4000000000000){return e/0x4000000000000+"P"}else if(t>=1099511627776){return e/1099511627776+"T"}else if(t>=1073741824){return e/1073741824+"G"}else if(t>=1048576){return e/1048576+"M"}else if(t>=1024){return e/1024+"K"}else if(t<1&&e>0){return e.toFixed(2)}else if(t===0){return""}else{return e}};l.namespace("Rickshaw.Color.Palette");l.Color.Palette=function(e){var t=new l.Fixtures.Color;e=e||{};this.schemes={};this.scheme=t.schemes[e.scheme]||e.scheme||t.schemes.colorwheel;this.runningIndex=0;this.generatorIndex=0;if(e.interpolatedStopCount){var n=this.scheme.length-1;var i,r,a=[];for(i=0;i<n;i++){a.push(this.scheme[i]);var s=y.interpolateHsl(this.scheme[i],this.scheme[i+1]);for(r=1;r<e.interpolatedStopCount;r++){a.push(s(1/e.interpolatedStopCount*r))}}a.push(this.scheme[this.scheme.length-1]);this.scheme=a}this.rotateCount=this.scheme.length;this.color=function(e){return this.scheme[e]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"};this.interpolateColor=function(){if(!Array.isArray(this.scheme))return;var e;if(this.generatorIndex==this.rotateCount*2-1){e=y.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5);this.generatorIndex=0;this.rotateCount*=2}else{e=y.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5);this.generatorIndex++}this.scheme.push(e);return e}};l.namespace("Rickshaw.Graph.Ajax");l.Graph.Ajax=l.Class.create({initialize:function(e){this.dataURL=e.dataURL;this.onData=e.onData||function(e){return e};this.onComplete=e.onComplete||function(){};this.onError=e.onError||function(){};this.args=e;this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL);this.onError(this)},success:function(e,t){e=this.onData(e);this.args.series=this._splice({data:e,series:this.args.series});this.graph=this.graph||new l.Graph(this.args);this.graph.render();this.onComplete(this)},_splice:function(e){var t=e.data;var n=e.series;if(!e.series)return t;n.forEach(function(i){var r=i.key||i.name;if(!r)throw"series needs a key or a name";t.forEach(function(t){var e=t.key||t.name;if(!e)throw"data needs a key or a name";if(r==e){var n=["color","name","data"];n.forEach(function(e){if(t[e])i[e]=t[e]})}})});return n}});l.namespace("Rickshaw.Graph.Annotate");l.Graph.Annotate=function(e){var t=this.graph=e.graph;this.elements={timeline:e.element};var o=this;this.data={};this.elements.timeline.classList.add("rickshaw_annotation_timeline");this.add=function(e,t,n){o.data[e]=o.data[e]||{boxes:[]};o.data[e].boxes.push({content:t,end:n})};this.update=function(){l.keys(o.data).forEach(function(e){var a=o.data[e];var s=o.graph.x(e);if(s<0||s>o.graph.x.range()[1]){if(a.element){a.line.classList.add("offscreen");a.element.style.display="none"}a.boxes.forEach(function(e){if(e.rangeElement)e.rangeElement.classList.add("offscreen")});return}if(!a.element){var t=a.element=document.createElement("div");t.classList.add("annotation");this.elements.timeline.appendChild(t);t.addEventListener("click",function(e){t.classList.toggle("active");a.line.classList.toggle("active");a.boxes.forEach(function(e){if(e.rangeElement)e.rangeElement.classList.toggle("active")})},false)}a.element.style.left=s+"px";a.element.style.display="block";a.boxes.forEach(function(e){var t=e.element;if(!t){t=e.element=document.createElement("div");t.classList.add("content");t.innerHTML=e.content;a.element.appendChild(t);a.line=document.createElement("div");a.line.classList.add("annotation_line");o.graph.element.appendChild(a.line);if(e.end){e.rangeElement=document.createElement("div");e.rangeElement.classList.add("annotation_range");o.graph.element.appendChild(e.rangeElement)}}if(e.end){var n=s;var i=Math.min(o.graph.x(e.end),o.graph.x.range()[1]);if(n>i){i=s;n=Math.max(o.graph.x(e.end),o.graph.x.range()[0])}var r=i-n;e.rangeElement.style.left=n+"px";e.rangeElement.style.width=r+"px";e.rangeElement.classList.remove("offscreen")}a.line.classList.remove("offscreen");a.line.style.left=s+"px"})},this)};this.graph.onUpdate(function(){o.update()})};l.namespace("Rickshaw.Graph.Axis.Time");l.Graph.Axis.Time=function(e){var i=this;this.graph=e.graph;this.elements=[];this.ticksTreatment=e.ticksTreatment||"plain";this.fixedTimeUnit=e.timeUnit;var o=e.timeFixture||new l.Fixtures.Time;this.appropriateTimeUnit=function(){var t;var e=o.units;var n=this.graph.x.domain();var i=n[1]-n[0];e.forEach(function(e){if(Math.floor(i/e.seconds)>=2){t=t||e}});return t||o.units[o.units.length-1]};this.tickOffsets=function(){var e=this.graph.x.domain();var t=this.fixedTimeUnit||this.appropriateTimeUnit();var n=Math.ceil((e[1]-e[0])/t.seconds);var i=e[0];var r=[];for(var a=0;a<n;a++){var s=o.ceil(i,t);i=s+t.seconds/2;r.push({value:s,unit:t})}return r};this.render=function(){this.elements.forEach(function(e){e.parentNode.removeChild(e)});this.elements=[];var e=this.tickOffsets();e.forEach(function(e){if(i.graph.x(e.value)>i.graph.x.range()[1])return;var t=document.createElement("div");t.style.left=i.graph.x(e.value)+"px";t.classList.add("x_tick");t.classList.add(i.ticksTreatment);var n=document.createElement("div");n.classList.add("title");n.innerHTML=e.unit.formatter(new Date(e.value*1e3));t.appendChild(n);i.graph.element.appendChild(t);i.elements.push(t)})};this.graph.onUpdate(function(){i.render()})};l.namespace("Rickshaw.Graph.Axis.X");l.Graph.Axis.X=function(a){var t=this;var s=.1;this.initialize=function(e){this.graph=e.graph;this.orientation=e.orientation||"top";this.pixelsPerTick=e.pixelsPerTick||75;if(e.ticks)this.staticTicks=e.ticks;if(e.tickValues)this.tickValues=e.tickValues;this.tickSize=e.tickSize||4;this.ticksTreatment=e.ticksTreatment||"plain";if(e.element){this.element=e.element;this._discoverSize(e.element,e);this.vis=y.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3");this.element=this.vis[0][0];this.element.style.position="relative";this.setSize({width:e.width,height:e.height})}else{this.vis=this.graph.vis}this.graph.onUpdate(function(){t.render()})};this.setSize=function(e){e=e||{};if(!this.element)return;this._discoverSize(this.element.parentNode,e);this.vis.attr("height",this.height).attr("width",this.width*(1+s));var t=Math.floor(this.width*s/2);this.element.style.left=-1*t+"px"};this.render=function(){if(this._renderWidth!==undefined&&this.graph.width!==this._renderWidth)this.setSize({auto:true});var e=y.svg.axis().scale(this.graph.x).orient(this.orientation);e.tickFormat(a.tickFormat||function(e){return e});if(this.tickValues)e.tickValues(this.tickValues);this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var t=Math.floor(this.width*s/2)||0;var n;if(this.orientation=="top"){var i=this.height||this.graph.height;n="translate("+t+","+i+")"}else{n="translate("+t+", 0)"}if(this.element){this.vis.selectAll("*").remove()}this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",n).call(e.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var r=(this.orientation=="bottom"?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(e.ticks(this.ticks).tickSubdivide(0).tickSize(r)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)});this._renderHeight=this.graph.height};this._discoverSize=function(e,t){if(typeof window!=="undefined"){var n=window.getComputedStyle(e,null);var i=parseInt(n.getPropertyValue("height"),10);if(!t.auto){var r=parseInt(n.getPropertyValue("width"),10)}}this.width=(t.width||r||this.graph.width)*(1+s);this.height=t.height||i||40};this.initialize(a)};l.namespace("Rickshaw.Graph.Axis.Y");l.Graph.Axis.Y=l.Class.create({initialize:function(e){this.graph=e.graph;this.orientation=e.orientation||"right";this.pixelsPerTick=e.pixelsPerTick||75;if(e.ticks)this.staticTicks=e.ticks;if(e.tickValues)this.tickValues=e.tickValues;this.tickSize=e.tickSize||4;this.ticksTreatment=e.ticksTreatment||"plain";this.tickFormat=e.tickFormat||function(e){return e};this.berthRate=.1;if(e.element){this.element=e.element;this.vis=y.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis");this.element=this.vis[0][0];this.element.style.position="relative";this.setSize({width:e.width,height:e.height})}else{this.vis=this.graph.vis}var t=this;this.graph.onUpdate(function(){t.render()})},setSize:function(e){e=e||{};if(!this.element)return;if(typeof window!=="undefined"){var t=window.getComputedStyle(this.element.parentNode,null);var n=parseInt(t.getPropertyValue("width"),10);if(!e.auto){var i=parseInt(t.getPropertyValue("height"),10)}}this.width=e.width||n||this.graph.width*this.berthRate;this.height=e.height||i||this.graph.height;this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var r=this.height*this.berthRate;if(this.orientation=="left"){this.element.style.top=-1*r+"px"}},render:function(){if(this._renderHeight!==undefined&&this.graph.height!==this._renderHeight)this.setSize({auto:true});this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var e=this._drawAxis(this.graph.y);this._drawGrid(e);this._renderHeight=this.graph.height},_drawAxis:function(e){var t=y.svg.axis().scale(e).orient(this.orientation);t.tickFormat(this.tickFormat);if(this.tickValues)t.tickValues(this.tickValues);if(this.orientation=="left"){var n=this.height*this.berthRate;var i="translate("+this.width+", "+n+")"}if(this.element){this.vis.selectAll("*").remove()}this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",i).call(t.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));return t},_drawGrid:function(e){var t=(this.orientation=="right"?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(e.ticks(this.ticks).tickSubdivide(0).tickSize(t)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}});l.namespace("Rickshaw.Graph.Axis.Y.Scaled");l.Graph.Axis.Y.Scaled=l.Class.create(l.Graph.Axis.Y,{initialize:function($super,e){if(typeof e.scale==="undefined"){throw new Error("Scaled requires scale")}this.scale=e.scale;if(typeof e.grid==="undefined"){this.grid=true}else{this.grid=e.grid}$super(e)},_drawAxis:function($super,e){var t=this.scale.domain();var n=this.graph.renderer.domain().y;var i=[Math.min.apply(Math,t),Math.max.apply(Math,t)];var r=y.scale.linear().domain([0,1]).range(i);var a=[r(n[0]),r(n[1])];var s=y.scale.linear().domain(i).range(a);var o=this.scale.copy().domain(t.map(s)).range(e.range());return $super(o)},_drawGrid:function($super,e){if(this.grid){$super(e)}}});l.namespace("Rickshaw.Graph.Behavior.Series.Highlight");l.Graph.Behavior.Series.Highlight=function(e){this.graph=e.graph;this.legend=e.legend;var r=this;var a={};var t=null;var s=e.disabledColor||function(e){return y.interpolateRgb(e,y.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(i){i.element.addEventListener("mouseover",function(e){if(t)return;else t=i;r.legend.lines.forEach(function(e){if(i===e){if(r.graph.renderer.unstack&&(e.series.renderer?e.series.renderer.unstack:true)){var t=r.graph.series.indexOf(e.series);e.originalIndex=t;var n=r.graph.series.splice(t,1)[0];r.graph.series.push(n)}return}a[e.series.name]=a[e.series.name]||e.series.color;e.series.color=s(e.series.color)});r.graph.update()},false);i.element.addEventListener("mouseout",function(e){if(!t)return;else t=null;r.legend.lines.forEach(function(e){if(i===e&&e.hasOwnProperty("originalIndex")){var t=r.graph.series.pop();r.graph.series.splice(e.originalIndex,0,t);delete e.originalIndex}if(a[e.series.name]){e.series.color=a[e.series.name]}});r.graph.update()},false)};if(this.legend){this.legend.lines.forEach(function(e){r.addHighlightEvents(e)})}};l.namespace("Rickshaw.Graph.Behavior.Series.Order");l.Graph.Behavior.Series.Order=function(e){this.graph=e.graph;this.legend=e.legend;var r=this;if(typeof window.jQuery=="undefined"){throw"couldn't find jQuery at window.jQuery"}if(typeof window.jQuery.ui=="undefined"){throw"couldn't find jQuery UI at window.jQuery.ui"}jQuery(function(){jQuery(r.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(e,t){var n=[];jQuery(r.legend.list).find("li").each(function(e,t){if(!t.series)return;n.push(t.series)});for(var i=r.graph.series.length-1;i>=0;i--){r.graph.series[i]=n.shift()}r.graph.update()}});jQuery(r.legend.list).disableSelection()});this.graph.onUpdate(function(){var e=window.getComputedStyle(r.legend.element).height;r.legend.element.style.height=e})};l.namespace("Rickshaw.Graph.Behavior.Series.Toggle");l.Graph.Behavior.Series.Toggle=function(e){this.graph=e.graph;this.legend=e.legend;var a=this;this.addAnchor=function(r){var e=document.createElement("a");e.innerHTML="&#10004;";e.classList.add("action");r.element.insertBefore(e,r.element.firstChild);e.onclick=function(e){if(r.series.disabled){r.series.enable();r.element.classList.remove("disabled")}else{if(this.graph.series.filter(function(e){return!e.disabled}).length<=1)return;r.series.disable();r.element.classList.add("disabled")}a.graph.update()}.bind(this);var t=r.element.getElementsByTagName("span")[0];t.onclick=function(e){var t=r.series.disabled;if(!t){for(var n=0;n<a.legend.lines.length;n++){var i=a.legend.lines[n];if(r.series===i.series){}else if(i.series.disabled){}else{t=true;break}}}if(t){r.series.enable();r.element.classList.remove("disabled");a.legend.lines.forEach(function(e){if(r.series===e.series){}else{e.series.disable();e.element.classList.add("disabled")}})}else{a.legend.lines.forEach(function(e){e.series.enable();e.element.classList.remove("disabled")})}a.graph.update()}};if(this.legend){var t=jQuery;if(typeof t!="undefined"&&t(this.legend.list).sortable){t(this.legend.list).sortable({start:function(e,t){t.item.bind("no.onclick",function(e){e.preventDefault()})},stop:function(e,t){setTimeout(function(){t.item.unbind("no.onclick")},250)}})}this.legend.lines.forEach(function(e){a.addAnchor(e)})}this._addBehavior=function(){this.graph.series.forEach(function(e){e.disable=function(){if(a.graph.series.length<=1){throw"only one series left"}e.disabled=true};e.enable=function(){e.disabled=false}})};this._addBehavior();this.updateBehaviour=function(){this._addBehavior()}};l.namespace("Rickshaw.Graph.HoverDetail");l.Graph.HoverDetail=l.Class.create({initialize:function(e){var t=this.graph=e.graph;this.xFormatter=e.xFormatter||function(e){return new Date(e*1e3).toUTCString()};this.yFormatter=e.yFormatter||function(e){return e===null?e:e.toFixed(2)};var n=this.element=document.createElement("div");n.className="detail";this.visible=true;t.element.appendChild(n);this.lastEvent=null;this._addListeners();this.onShow=e.onShow;this.onHide=e.onHide;this.onRender=e.onRender;this.formatter=e.formatter||this.formatter},formatter:function(e,t,n,i,r,a){return e.name+":&nbsp;"+r},update:function(e){e=e||this.lastEvent;if(!e)return;this.lastEvent=e;if(!e.target.nodeName.match(/^(path|svg|rect|circle)$/))return;var h=this.graph;var d=e.offsetX||e.layerX;var p=e.offsetY||e.layerY;var g=0;var m=[];var v;this.graph.series.active().forEach(function(e){var t=this.graph.stackedData[g++];if(!t.length)return;var n=h.x.invert(d);var i=y.scale.linear().domain([t[0].x,t.slice(-1)[0].x]).range([0,t.length-1]);var r=Math.round(i(n));if(r==t.length-1)r--;var a=Math.min(r||0,t.length-1);for(var s=r;s<t.length-1;){if(!t[s]||!t[s+1])break;if(t[s].x<=n&&t[s+1].x>n){a=Math.abs(n-t[s].x)<Math.abs(n-t[s+1].x)?s:s+1;break}if(t[s+1].x<=n){s++}else{s--}}if(a<0)a=0;var o=t[a];var l=Math.sqrt(Math.pow(Math.abs(h.x(o.x)-d),2)+Math.pow(Math.abs(h.y(o.y+o.y0)-p),2));var u=e.xFormatter||this.xFormatter;var c=e.yFormatter||this.yFormatter;var f={formattedXValue:u(o.x),formattedYValue:c(e.scale?e.scale.invert(o.y):o.y),series:e,value:o,distance:l,order:g,name:e.name};if(!v||l<v.distance){v=f}m.push(f)},this);if(!v)return;v.active=true;var t=v.value.x;var n=v.formattedXValue;this.element.innerHTML="";this.element.style.left=h.x(t)+"px";this.visible&&this.render({points:m,detail:m,mouseX:d,mouseY:p,formattedXValue:n,domainX:t})},hide:function(){this.visible=false;this.element.classList.add("inactive");if(typeof this.onHide=="function"){this.onHide()}},show:function(){this.visible=true;this.element.classList.remove("inactive");if(typeof this.onShow=="function"){this.onShow()}},render:function(e){var t=this.graph;var n=e.points;var i=n.filter(function(e){return e.active}).shift();if(i.value.y===null)return;var r=i.formattedXValue;var a=i.formattedYValue;this.element.innerHTML="";this.element.style.left=t.x(i.value.x)+"px";var s=document.createElement("div");s.className="x_label";s.innerHTML=r;this.element.appendChild(s);var o=document.createElement("div");o.className="item";var l=i.series;var u=l.scale?l.scale.invert(i.value.y):i.value.y;o.innerHTML=this.formatter(l,i.value.x,u,r,a,i);o.style.top=this.graph.y(i.value.y0+i.value.y)+"px";this.element.appendChild(o);var c=document.createElement("div");c.className="dot";c.style.top=o.style.top;c.style.borderColor=l.color;this.element.appendChild(c);if(i.active){o.classList.add("active");c.classList.add("active")}var f=[s,o];f.forEach(function(e){e.classList.add("left")});this.show();var h=this._calcLayoutError(f);if(h>0){f.forEach(function(e){e.classList.remove("left");e.classList.add("right")});var d=this._calcLayoutError(f);if(d>h){f.forEach(function(e){e.classList.remove("right");e.classList.add("left")})}}if(typeof this.onRender=="function"){this.onRender(e)}},_calcLayoutError:function(e){var n=this.element.parentNode.getBoundingClientRect();var i=0;var t=e.forEach(function(e){var t=e.getBoundingClientRect();if(!t.width){return}if(t.right>n.right){i+=t.right-n.right}if(t.left<n.left){i+=n.left-t.left}});return i},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(e){this.visible=true;this.update(e)}.bind(this),false);this.graph.onUpdate(function(){this.update()}.bind(this));this.graph.element.addEventListener("mouseout",function(e){if(e.relatedTarget&&!(e.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS)){this.hide()}}.bind(this),false)}});l.namespace("Rickshaw.Graph.JSONP");l.Graph.JSONP=l.Class.create(l.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}});l.namespace("Rickshaw.Graph.Legend");l.Graph.Legend=l.Class.create({className:"rickshaw_legend",initialize:function(e){this.element=e.element;this.graph=e.graph;this.naturalOrder=e.naturalOrder;this.element.classList.add(this.className);this.list=document.createElement("ul");this.element.appendChild(this.list);this.render();this.graph.onUpdate(function(){})},render:function(){var t=this;while(this.list.firstChild){this.list.removeChild(this.list.firstChild)}this.lines=[];var e=this.graph.series.map(function(e){return e});if(!this.naturalOrder){e=e.reverse()}e.forEach(function(e){t.addLine(e)})},addLine:function(e){var t=document.createElement("li");t.className="line";if(e.disabled){t.className+=" disabled"}if(e.className){y.select(t).classed(e.className,true)}var n=document.createElement("div");n.className="swatch";n.style.backgroundColor=e.color;t.appendChild(n);var i=document.createElement("span");i.className="label";i.innerHTML=e.name;t.appendChild(i);this.list.appendChild(t);t.series=e;if(e.noLegend){t.style.display="none"}var r={element:t,series:e};if(this.shelving){this.shelving.addAnchor(r);this.shelving.updateBehaviour()}if(this.highlighter){this.highlighter.addHighlightEvents(r)}this.lines.push(r);return t}});l.namespace("Rickshaw.Graph.RangeSlider");l.Graph.RangeSlider=l.Class.create({initialize:function(e){var t=this.element=e.element;var n=this.graph=e.graph;this.slideCallbacks=[];this.build();n.onUpdate(function(){this.update()}.bind(this))},build:function(){var e=this.element;var i=this.graph;var t=jQuery;var n=i.dataDomain();var r=this;t(function(){t(e).slider({range:true,min:n[0],max:n[1],values:[n[0],n[1]],slide:function(e,t){if(t.values[1]<=t.values[0])return;i.window.xMin=t.values[0];i.window.xMax=t.values[1];i.update();var n=i.dataDomain();if(n[0]==t.values[0]){i.window.xMin=undefined}if(n[1]==t.values[1]){i.window.xMax=undefined}r.slideCallbacks.forEach(function(e){e(i,i.window.xMin,i.window.xMax)})}})});t(e)[0].style.width=i.width+"px"},update:function(){var e=this.element;var t=this.graph;var n=jQuery;var i=n(e).slider("option","values");var r=t.dataDomain();n(e).slider("option","min",r[0]);n(e).slider("option","max",r[1]);if(t.window.xMin==null){i[0]=r[0]}if(t.window.xMax==null){i[1]=r[1]}n(e).slider("option","values",i)},onSlide:function(e){this.slideCallbacks.push(e)}});l.namespace("Rickshaw.Graph.RangeSlider.Preview");l.Graph.RangeSlider.Preview=l.Class.create({initialize:function(e){if(!e.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!e.graph&&!e.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=e.element;this.element.style.position="relative";this.graphs=e.graph?[e.graph]:e.graphs;this.defaults={height:75,width:400,gripperColor:undefined,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2};this.heightRatio=e.heightRatio||this.defaults.heightRatio;this.defaults.gripperColor=y.rgb(this.defaults.frameColor).darker().toString();this.configureCallbacks=[];this.slideCallbacks=[];this.previews=[];if(!e.width)this.widthFromGraph=true;if(!e.height)this.heightFromGraph=true;if(this.widthFromGraph||this.heightFromGraph){this.graphs[0].onConfigure(function(){this.configure(e);this.render()}.bind(this))}e.width=e.width||this.graphs[0].width||this.defaults.width;e.height=e.height||this.graphs[0].height*this.heightRatio||this.defaults.height;this.configure(e);this.render()},onSlide:function(e){this.slideCallbacks.push(e)},onConfigure:function(e){this.configureCallbacks.push(e)},configure:function(t){this.config=this.config||{};this.configureCallbacks.forEach(function(e){e(t)});l.keys(this.defaults).forEach(function(e){this.config[e]=e in t?t[e]:e in this.config?this.config[e]:this.defaults[e]},this);if("width"in t||"height"in t){if(this.widthFromGraph){this.config.width=this.graphs[0].width}if(this.heightFromGraph){this.config.height=this.graphs[0].height*this.heightRatio;this.previewHeight=this.config.height}this.previews.forEach(function(e){var t=this.previewHeight/this.graphs.length-this.config.frameTopThickness*2;var n=this.config.width-this.config.frameHandleThickness*2;e.setSize({width:n,height:t});if(this.svg){var i=t+this.config.frameHandleThickness*2;var r=n+this.config.frameHandleThickness*2;this.svg.style("width",r+"px");this.svg.style("height",i+"px")}},this)}},render:function(){var s=this;this.svg=y.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]);this.previewHeight=this.config.height-this.config.frameTopThickness*2;this.previewWidth=this.config.width-this.config.frameHandleThickness*2;this.currentFrame=[0,this.previewWidth];var e=function(e,t){var n=l.extend({},e.config);var i=s.previewHeight/s.graphs.length;var r=e.renderer.name;l.extend(n,{element:this.appendChild(document.createElement("div")),height:i,width:s.previewWidth,series:e.series,renderer:r});var a=new l.Graph(n);s.previews.push(a);e.onUpdate(function(){a.render();s.render()});e.onConfigure(function(e){delete e.height;e.width=e.width-s.config.frameHandleThickness*2;a.configure(e);a.render()});a.render()};var t=y.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs);var n="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";t.enter().append("div").classed("rickshaw_range_slider_preview_container",true).style("-webkit-transform",n).style("-moz-transform",n).style("-ms-transform",n).style("transform",n).each(e);t.exit().remove();var i=this.graphs[0];var r=y.scale.linear().domain([0,this.previewWidth]).range(i.dataDomain());var a=[i.window.xMin,i.window.xMax];this.currentFrame[0]=a[0]===undefined?0:Math.round(r.invert(a[0]));if(this.currentFrame[0]<0)this.currentFrame[0]=0;this.currentFrame[1]=a[1]===undefined?this.previewWidth:r.invert(a[1]);if(this.currentFrame[1]-this.currentFrame[0]<s.config.minimumFrameWidth){this.currentFrame[1]=(this.currentFrame[0]||0)+s.config.minimumFrameWidth}this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",true).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0);this._renderDimming();this._renderFrame();this._renderGrippers();this._renderHandles();this._renderMiddle();this._registerMouseEvents()},_renderDimming:function(){var e=this.svg.selectAll("path.dimming").data([null]);e.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",true);var t="";t+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness;t+=" h "+this.previewWidth;t+=" v "+this.previewHeight;t+=" h "+-this.previewWidth;t+=" z ";t+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness;t+=" H "+Math.min(this.currentFrame[1]+this.config.frameHandleThickness*2,this.previewWidth+this.config.frameHandleThickness);t+=" v "+this.previewHeight;t+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness);t+=" z";e.attr("d",t)},_renderFrame:function(){var e=this.svg.selectAll("path.frame").data([null]);e.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",true);var t="";t+=" M "+this.currentFrame[0]+" 0";t+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness*2);t+=" V "+this.config.height;t+=" H "+this.currentFrame[0];t+=" z";t+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness;t+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness);t+=" v "+this.previewHeight;t+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness);t+=" z";e.attr("d",t)},_renderGrippers:function(){var e=this.svg.selectAll("path.gripper").data([null]);e.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",true);var t="";[.4,.6].forEach(function(e){t+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*e)+" "+Math.round(this.config.height*.3);t+=" V "+Math.round(this.config.height*.7);t+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+e))+" "+Math.round(this.config.height*.3);t+=" V "+Math.round(this.config.height*.7)}.bind(this));e.attr("d",t)},_renderHandles:function(){var e=this.svg.selectAll("rect.left_handle").data([null]);e.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",true);e.attr("x",this.currentFrame[0]).attr("height",this.config.height);var t=this.svg.selectAll("rect.right_handle").data([null]);t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",true);t.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var e=this.svg.selectAll("rect.middle_handle").data([null]);e.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",true);e.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){var e=y.select(this.element);var s={target:null,start:null,stop:null,left:false,right:false,rigid:false};var o=this;function t(e,t){s.stop=o._getClientXFromEvent(y.event,s);var n=s.stop-s.start;var i=o.frameBeforeDrag.slice(0);var r=o.config.minimumFrameWidth;if(s.rigid){r=o.frameBeforeDrag[1]-o.frameBeforeDrag[0]}if(s.left){i[0]=Math.max(i[0]+n,0)}if(s.right){i[1]=Math.min(i[1]+n,o.previewWidth)}var a=i[1]-i[0];if(a<=r){if(s.left){i[0]=i[1]-r}if(s.right){i[1]=i[0]+r}if(i[0]<=0){i[1]-=i[0];i[0]=0}if(i[1]>=o.previewWidth){i[0]-=i[1]-o.previewWidth;i[1]=o.previewWidth}}o.graphs.forEach(function(t){var e=y.scale.linear().interpolate(y.interpolateNumber).domain([0,o.previewWidth]).range(t.dataDomain());var n=[e(i[0]),e(i[1])];o.slideCallbacks.forEach(function(e){e(t,n[0],n[1])});if(i[0]===0){n[0]=undefined}if(i[1]===o.previewWidth){n[1]=undefined}t.window.xMin=n[0];t.window.xMax=n[1];t.update()})}function n(){s.target=y.event.target;s.start=o._getClientXFromEvent(y.event,s);o.frameBeforeDrag=o.currentFrame.slice();y.event.preventDefault?y.event.preventDefault():y.event.returnValue=false;y.select(document).on("mousemove.rickshaw_range_slider_preview",t);y.select(document).on("mouseup.rickshaw_range_slider_preview",l);y.select(document).on("touchmove.rickshaw_range_slider_preview",t);y.select(document).on("touchend.rickshaw_range_slider_preview",l);y.select(document).on("touchcancel.rickshaw_range_slider_preview",l)}function i(e,t){s.left=true;n()}function r(e,t){s.right=true;n()}function a(e,t){s.left=true;s.right=true;s.rigid=true;n()}function l(e,t){y.select(document).on("mousemove.rickshaw_range_slider_preview",null);y.select(document).on("mouseup.rickshaw_range_slider_preview",null);y.select(document).on("touchmove.rickshaw_range_slider_preview",null);y.select(document).on("touchend.rickshaw_range_slider_preview",null);y.select(document).on("touchcancel.rickshaw_range_slider_preview",null);delete o.frameBeforeDrag;s.left=false;s.right=false;s.rigid=false}e.select("rect.left_handle").on("mousedown",i);e.select("rect.right_handle").on("mousedown",r);e.select("rect.middle_handle").on("mousedown",a);e.select("rect.left_handle").on("touchstart",i);e.select("rect.right_handle").on("touchstart",r);e.select("rect.middle_handle").on("touchstart",a)},_getClientXFromEvent:function(e,t){switch(e.type){case"touchstart":case"touchmove":var n=e.changedTouches;var i=null;for(var r=0;r<n.length;r++){if(n[r].target===t.target){i=n[r];break}}return i!==null?i.clientX:undefined;default:return e.clientX}}});l.namespace("Rickshaw.Graph.Renderer");l.Graph.Renderer=l.Class.create({initialize:function(e){this.graph=e.graph;this.tension=e.tension||this.tension;this.configure(e)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:true,padding:{top:.01,right:0,bottom:.01,left:0},stroke:false,fill:false}},domain:function(e){var t=e||this.graph.stackedData||this.graph.stackData();var n=+Infinity;var i=-Infinity;var r=+Infinity;var a=-Infinity;t.forEach(function(e){e.forEach(function(e){if(e.y==null)return;var t=e.y+e.y0;if(t<r)r=t;if(t>a)a=t});if(!e.length)return;if(e[0].x<n)n=e[0].x;if(e[e.length-1].x>i)i=e[e.length-1].x});n-=(i-n)*this.padding.left;i+=(i-n)*this.padding.right;r=this.graph.min==="auto"?r:this.graph.min||0;a=this.graph.max===undefined?a:this.graph.max;if(this.graph.min==="auto"||r<0){r-=(a-r)*this.padding.bottom}if(this.graph.max===undefined){a+=(a-r)*this.padding.top}return{x:[n,i],y:[r,a]}},render:function(e){e=e||{};var t=this.graph;var n=e.series||t.series;var i=e.vis||t.vis;i.selectAll("*").remove();var r=n.filter(function(e){return!e.disabled}).map(function(e){return e.stack});var a=i.selectAll("path.path").data(r).enter().append("svg:path").classed("path",true).attr("d",this.seriesPathFactory());if(this.stroke){var s=i.selectAll("path.stroke").data(r).enter().append("svg:path").classed("stroke",true).attr("d",this.seriesStrokeFactory())}var o=0;n.forEach(function(e){if(e.disabled)return;e.path=a[0][o];if(this.stroke)e.stroke=s[0][o];this._styleSeries(e);o++},this)},_styleSeries:function(e){var t=this.fill?e.color:"none";var n=this.stroke?e.color:"none";e.path.setAttribute("fill",t);e.path.setAttribute("stroke",n);e.path.setAttribute("stroke-width",this.strokeWidth);if(e.className){y.select(e.path).classed(e.className,true)}if(e.className&&this.stroke){y.select(e.stroke).classed(e.className,true)}},configure:function(n){n=n||{};l.keys(this.defaults()).forEach(function(t){if(!n.hasOwnProperty(t)){this[t]=this[t]||this.graph[t]||this.defaults()[t];return}if(typeof this.defaults()[t]=="object"){l.keys(this.defaults()[t]).forEach(function(e){this[t][e]=n[t][e]!==undefined?n[t][e]:this[t][e]!==undefined?this[t][e]:this.defaults()[t][e]},this)}else{this[t]=n[t]!==undefined?n[t]:this[t]!==undefined?this[t]:this.graph[t]!==undefined?this.graph[t]:this.defaults()[t]}},this)},setStrokeWidth:function(e){if(e!==undefined){this.strokeWidth=e}},setTension:function(e){if(e!==undefined){this.tension=e}}});l.namespace("Rickshaw.Graph.Renderer.Line");l.Graph.Renderer.Line=l.Class.create(l.Graph.Renderer,{name:"line",defaults:function($super){return l.extend($super(),{unstack:true,fill:false,stroke:true})},seriesPathFactory:function(){var t=this.graph;var e=y.svg.line().x(function(e){return t.x(e.x)}).y(function(e){return t.y(e.y)}).interpolate(this.graph.interpolation).tension(this.tension);e.defined&&e.defined(function(e){return e.y!==null});return e}});l.namespace("Rickshaw.Graph.Renderer.Stack");l.Graph.Renderer.Stack=l.Class.create(l.Graph.Renderer,{name:"stack",defaults:function($super){return l.extend($super(),{fill:true,stroke:false,unstack:false})},seriesPathFactory:function(){var t=this.graph;var e=y.svg.area().x(function(e){return t.x(e.x)}).y0(function(e){return t.y(e.y0)}).y1(function(e){return t.y(e.y+e.y0)}).interpolate(this.graph.interpolation).tension(this.tension);e.defined&&e.defined(function(e){return e.y!==null});return e}});l.namespace("Rickshaw.Graph.Renderer.Bar");l.Graph.Renderer.Bar=l.Class.create(l.Graph.Renderer,{name:"bar",defaults:function($super){var e=l.extend($super(),{gapSize:.05,unstack:false});delete e.tension;return e},initialize:function($super,e){e=e||{};this.gapSize=e.gapSize||this.gapSize;$super(e)},domain:function($super){var e=$super();var t=this._frequentInterval(this.graph.stackedData.slice(-1).shift());e.x[1]+=Number(t.magnitude);return e},barWidth:function(e){var t=this._frequentInterval(e.stack);var n=this.graph.x.magnitude(t.magnitude)*(1-this.gapSize);return n},render:function(e){e=e||{};var i=this.graph;var t=e.series||i.series;var r=e.vis||i.vis;r.selectAll("*").remove();var n=this.barWidth(t.active()[0]);var a=0;var s=t.filter(function(e){return!e.disabled}).length;var o=this.unstack?n/s:n;var l=function(e){var t=[1,0,0,e.y<0?-1:1,0,e.y<0?i.y.magnitude(Math.abs(e.y))*2:0];return"matrix("+t.join(",")+")"};t.forEach(function(t){if(t.disabled)return;var e=this.barWidth(t);var n=r.selectAll("path").data(t.stack.filter(function(e){return e.y!==null})).enter().append("svg:rect").attr("x",function(e){return i.x(e.x)+a}).attr("y",function(e){return i.y(e.y0+Math.abs(e.y))*(e.y<0?-1:1)}).attr("width",o).attr("height",function(e){return i.y.magnitude(Math.abs(e.y))}).attr("transform",l);Array.prototype.forEach.call(n[0],function(e){e.setAttribute("fill",t.color)});if(this.unstack)a+=o},this)},_frequentInterval:function(e){var t={};for(var n=0;n<e.length-1;n++){var i=e[n+1].x-e[n].x;t[i]=t[i]||0;t[i]++}var r={count:0,magnitude:1};l.keys(t).forEach(function(e){if(r.count<t[e]){r={count:t[e],magnitude:e}}});return r}});l.namespace("Rickshaw.Graph.Renderer.Area");l.Graph.Renderer.Area=l.Class.create(l.Graph.Renderer,{name:"area",defaults:function($super){return l.extend($super(),{unstack:false,fill:false,stroke:false})},seriesPathFactory:function(){var t=this.graph;var e=y.svg.area().x(function(e){return t.x(e.x)}).y0(function(e){return t.y(e.y0)}).y1(function(e){return t.y(e.y+e.y0)}).interpolate(t.interpolation).tension(this.tension);e.defined&&e.defined(function(e){return e.y!==null});return e},seriesStrokeFactory:function(){var t=this.graph;var e=y.svg.line().x(function(e){return t.x(e.x)}).y(function(e){return t.y(e.y+e.y0)}).interpolate(t.interpolation).tension(this.tension);e.defined&&e.defined(function(e){return e.y!==null});return e},render:function(e){e=e||{};var t=this.graph;var n=e.series||t.series;var i=e.vis||t.vis;i.selectAll("*").remove();var r=this.unstack?"append":"insert";var a=n.filter(function(e){return!e.disabled}).map(function(e){return e.stack});var s=i.selectAll("path").data(a).enter()[r]("svg:g","g");s.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area");if(this.stroke){s.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line")}var o=0;n.forEach(function(e){if(e.disabled)return;e.path=s[0][o++];this._styleSeries(e)},this)},_styleSeries:function(e){if(!e.path)return;y.select(e.path).select(".area").attr("fill",e.color);if(this.stroke){y.select(e.path).select(".line").attr("fill","none").attr("stroke",e.stroke||y.interpolateRgb(e.color,"black")(.125)).attr("stroke-width",this.strokeWidth)}if(e.className){e.path.setAttribute("class",e.className)}}});l.namespace("Rickshaw.Graph.Renderer.ScatterPlot");l.Graph.Renderer.ScatterPlot=l.Class.create(l.Graph.Renderer,{name:"scatterplot",defaults:function($super){return l.extend($super(),{unstack:true,fill:true,stroke:false,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,e){$super(e)},render:function(e){e=e||{};var n=this.graph;var t=e.series||n.series;var i=e.vis||n.vis;var r=this.dotSize;i.selectAll("*").remove();t.forEach(function(t){if(t.disabled)return;var e=i.selectAll("path").data(t.stack.filter(function(e){return e.y!==null})).enter().append("svg:circle").attr("cx",function(e){return n.x(e.x)}).attr("cy",function(e){return n.y(e.y)}).attr("r",function(e){return"r"in e?e.r:r});if(t.className){e.classed(t.className,true)}Array.prototype.forEach.call(e[0],function(e){e.setAttribute("fill",t.color)})},this)}});l.namespace("Rickshaw.Graph.Renderer.Multi");l.Graph.Renderer.Multi=l.Class.create(l.Graph.Renderer,{name:"multi",initialize:function($super,e){$super(e)},defaults:function($super){return l.extend($super(),{unstack:true,fill:false,stroke:true})},configure:function($super,e){e=e||{};this.config=e;$super(e)},domain:function($super){this.graph.stackData();var i=[];var e=this._groups();this._stack(e);e.forEach(function(e){var t=e.series.filter(function(e){return!e.disabled}).map(function(e){return e.stack});if(!t.length)return;var n=null;if(e.renderer&&e.renderer.domain){n=e.renderer.domain(t)}else{n=$super(t)}i.push(n)});var t=y.min(i.map(function(e){return e.x[0]}));var n=y.max(i.map(function(e){return e.x[1]}));var r=y.min(i.map(function(e){return e.y[0]}));var a=y.max(i.map(function(e){return e.y[1]}));return{x:[t,n],y:[r,a]}},_groups:function(){var s=this.graph;var o={};s.series.forEach(function(e){if(e.disabled)return;if(!o[e.renderer]){var t="http://www.w3.org/2000/svg";var n=document.createElementNS(t,"g");s.vis[0][0].appendChild(n);var i=s._renderers[e.renderer];var r={};var a=[this.defaults(),i.defaults(),this.config,this.graph];a.forEach(function(e){l.extend(r,e)});i.configure(r);o[e.renderer]={renderer:i,series:[],vis:y.select(n)}}o[e.renderer].series.push(e)},this);var n=[];Object.keys(o).forEach(function(e){var t=o[e];n.push(t)});return n},_stack:function(e){e.forEach(function(e){var t=e.series.filter(function(e){return!e.disabled});var n=t.map(function(e){return e.stack});if(!e.renderer.unstack){var i=y.layout.stack();var r=l.clone(i(n));t.forEach(function(e,t){e._stack=l.clone(r[t])})}},this);return e},render:function(){this.graph.series.forEach(function(e){if(!e.renderer){throw new Error("Each series needs a renderer for graph 'multi' renderer")}});this.graph.vis.selectAll("*").remove();var e=this._groups();e=this._stack(e);e.forEach(function(e){var t=e.series.filter(function(e){return!e.disabled});t.active=function(){return t};e.renderer.render({series:t,vis:e.vis});t.forEach(function(e){e.stack=e._stack||e.stack||e.data})})}});l.namespace("Rickshaw.Graph.Renderer.LinePlot");l.Graph.Renderer.LinePlot=l.Class.create(l.Graph.Renderer,{name:"lineplot",defaults:function($super){return l.extend($super(),{unstack:true,fill:false,stroke:true,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var t=this.graph;var e=y.svg.line().x(function(e){return t.x(e.x)}).y(function(e){return t.y(e.y)}).interpolate(this.graph.interpolation).tension(this.tension);e.defined&&e.defined(function(e){return e.y!==null});return e},render:function(e){e=e||{};var n=this.graph;var t=e.series||n.series;var i=e.vis||n.vis;var r=this.dotSize;i.selectAll("*").remove();var a=t.filter(function(e){return!e.disabled}).map(function(e){return e.stack});var s=i.selectAll("path").data(a).enter().append("svg:path").attr("d",this.seriesPathFactory());var o=0;t.forEach(function(e){if(e.disabled)return;e.path=s[0][o++];this._styleSeries(e)},this);t.forEach(function(t){if(t.disabled)return;var e=i.selectAll("x").data(t.stack.filter(function(e){return e.y!==null})).enter().append("svg:circle").attr("cx",function(e){return n.x(e.x)}).attr("cy",function(e){return n.y(e.y)}).attr("r",function(e){return"r"in e?e.r:r});Array.prototype.forEach.call(e[0],function(e){if(!e)return;e.setAttribute("data-color",t.color);e.setAttribute("fill","white");e.setAttribute("stroke",t.color);e.setAttribute("stroke-width",this.strokeWidth)}.bind(this))},this)}});l.namespace("Rickshaw.Graph.Smoother");l.Graph.Smoother=l.Class.create({initialize:function(e){this.graph=e.graph;this.element=e.element;this.aggregationScale=1;this.build();this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var n=this;var e=jQuery;if(this.element){e(function(){e(n.element).slider({min:1,max:100,slide:function(e,t){n.setScale(t.value)}})})}},setScale:function(e){if(e<1){throw"scale out of range: "+e}this.aggregationScale=e;this.graph.update()},transformer:function(e){if(this.aggregationScale==1)return e;var a=[];e.forEach(function(e){var t=[];while(e.length){var n=0,i=0;var r=e.splice(0,this.aggregationScale);r.forEach(function(e){n+=e.x/r.length;i+=e.y/r.length});t.push({x:n,y:i})}a.push(t)}.bind(this));return a}});l.namespace("Rickshaw.Graph.Socketio");l.Graph.Socketio=l.Class.create(l.Graph.Ajax,{request:function(){var e=io.connect(this.dataURL);var t=this;e.on("rickshaw",function(e){t.success(e)})}});l.namespace("Rickshaw.Series");l.Series=l.Class.create(Array,{initialize:function(e,t,n){n=n||{};this.palette=new l.Color.Palette(t);this.timeBase=typeof n.timeBase==="undefined"?Math.floor((new Date).getTime()/1e3):n.timeBase;var i=typeof n.timeInterval=="undefined"?1e3:n.timeInterval;this.setTimeInterval(i);if(e&&typeof e=="object"&&Array.isArray(e)){e.forEach(function(e){this.addItem(e)},this)}},addItem:function(t){if(typeof t.name==="undefined"){throw"addItem() needs a name"}t.color=t.color||this.palette.color(t.name);t.data=t.data||[];if(t.data.length===0&&this.length&&this.getIndex()>0){this[0].data.forEach(function(e){t.data.push({x:e.x,y:0})})}else if(t.data.length===0){t.data.push({x:this.timeBase-(this.timeInterval||0),y:0})}this.push(t);if(this.legend){this.legend.addLine(this.itemByName(t.name))}},addData:function(t,n){var i=this.getIndex();l.keys(t).forEach(function(e){if(!this.itemByName(e)){this.addItem({name:e})}},this);this.forEach(function(e){e.data.push({x:n||(i*this.timeInterval||1)+this.timeBase,y:t[e.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(e){for(var t=0;t<this.length;t++){if(this[t].name==e)return this[t]}},setTimeInterval:function(e){this.timeInterval=e/1e3},setTimeBase:function(e){this.timeBase=e},dump:function(){var n={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};this.forEach(function(e){var t={color:e.color,name:e.name,data:[]};e.data.forEach(function(e){t.data.push({x:e.x,y:e.y})});n.items.push(t)});return n},load:function(e){if(e.timeInterval){this.timeInterval=e.timeInterval}if(e.timeBase){this.timeBase=e.timeBase}if(e.items){e.items.forEach(function(e){this.push(e);if(this.legend){this.legend.addLine(this.itemByName(e.name))}},this)}}});l.Series.zeroFill=function(e){l.Series.fill(e,0)};l.Series.fill=function(e,t){var n;var i=0;var r=e.map(function(e){return e.data});while(i<Math.max.apply(null,r.map(function(e){return e.length}))){n=Math.min.apply(null,r.filter(function(e){return e[i]}).map(function(e){return e[i].x}));r.forEach(function(e){if(!e[i]||e[i].x!=n){e.splice(i,0,{x:n,y:t})}});i++}};l.namespace("Rickshaw.Series.FixedDuration");l.Series.FixedDuration=l.Class.create(l.Series,{initialize:function(e,t,n){n=n||{};if(typeof n.timeInterval==="undefined"){throw new Error("FixedDuration series requires timeInterval")}if(typeof n.maxDataPoints==="undefined"){throw new Error("FixedDuration series requires maxDataPoints")}this.palette=new l.Color.Palette(t);this.timeBase=typeof n.timeBase==="undefined"?Math.floor((new Date).getTime()/1e3):n.timeBase;this.setTimeInterval(n.timeInterval);if(this[0]&&this[0].data&&this[0].data.length){this.currentSize=this[0].data.length;this.currentIndex=this[0].data.length}else{this.currentSize=0;this.currentIndex=0}this.maxDataPoints=n.maxDataPoints;if(e&&typeof e=="object"&&Array.isArray(e)){e.forEach(function(e){this.addItem(e)},this);this.currentSize+=1;this.currentIndex+=1}this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval;if(typeof this.maxDataPoints!=="undefined"&&this.currentSize<this.maxDataPoints){for(var i=this.maxDataPoints-this.currentSize-1;i>1;i--){this.currentSize+=1;this.currentIndex+=1;this.forEach(function(e){e.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)}}},addData:function($super,e,t){$super(e,t);this.currentSize+=1;this.currentIndex+=1;if(this.maxDataPoints!==undefined){while(this.currentSize>this.maxDataPoints){this.dropData()}}},dropData:function(){this.forEach(function(e){e.data.splice(0,1)});this.currentSize-=1},getIndex:function(){return this.currentIndex}});return l});define("tpl!powa/templates/graph.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<h4 class="title graph-title"> ',title,'  <i class="fi-info" id="',cid,'"></i></h4><div class="row graph">    <div class="graph_left_axis columns large-1 small-1"></div>    <div class="columns large-10 small-10">        <div class="row">        <div class="graph_container"></div>        </div>        <div class="graph_timeline"></div>        <div class="row">        <div class="graph_preview"></div>        </div>    </div>    <div class="graph_right_axis columns large-1 small-1"></div></div><div class="row"><div class="graph_legend"></div></div>')}return __p.join("")}});define("powa/rickshaw/Rickshaw.Graph.DragZoom",["rickshaw"],function(e){e.namespace("Rickshaw.Graph.DragZoom");e.Graph.DragZoom=e.Class.create({initialize:function(e){if(!e.graph){throw"Rickshaw.Graph.DragZoom needs a reference to a graph"}var t={opacity:.5,fill:"steelblue",minimumTimeSelection:.02,callback:function(){}};this.graph=e.graph;this.svg=d3.select(this.graph.element).select("svg");this.svgWidth=parseInt(this.svg.attr("width"),10);this.opacity=e.opacity||t.opacity;this.fill=e.fill||t.fill;this.minimumTimeSelection=e.minimumTimeSelection||t.minimumTimeSelection;this.callback=e.callback||t.callback;this.stack=[];this.registerMouseEvents()},registerMouseEvents:function(){var o=this;var t=27;var i;var l={startDt:null,stopDt:null,startPX:null,stopPX:null};this.svg.on("mousedown",a);this.svg.on("touchstart",a);this.svg.on("dblclick",e);function e(e,t){if(o.stack.length){var n=o.stack.pop();o.callback(n[0],n[1])}}function n(e,t){l.stopDt=f(d3.event);var n=[o.graph.window.xMin,o.graph.window.xMax];var i=[l.startDt,l.stopDt].sort(c);u(this);var r=i[1]-i[0],a=n[1]-n[0];if(r<o.minimumTimeSelection*a){return}o.graph.window.xMin=i[0];o.graph.window.xMax=i[1];var s=o.graph.window.xMax;if(isNaN(r)){return}o.stack.push(n);o.callback(o.graph.window.xMin,o.graph.window.xMax)}function r(){var e=l.stopPX=d3.event.offsetX||d3.event.layerX;if(e>o.svgWidth-1||e<1){return}var t=[l.startPX,e].sort(c);var n=t[1]-t[0];if(isNaN(n)){return u(this)}i.attr("fill",o.fill).attr("x",t[0]).attr("width",n)}function a(){var e=d3.select(this);i=e.append("rect").style("opacity",o.opacity).attr("y",0).attr("height","100%");if(d3.event.preventDefault){d3.event.preventDefault()}else{d3.event.returnValue=false}l.target=d3.event.target;l.startDt=f(d3.event);l.startPX=d3.event.offsetX||d3.event.layerX;e.on("mousemove",r);d3.select(document).on("mouseup",n);d3.select(document).on("keyup",function(){if(d3.event.keyCode===t){u(this)}});e.on("touchmove",r);d3.select(document).on("touchend",n);d3.select(document).on("touchcancel",n)}function u(e){var t=d3.select(e);t.on("mousemove",null);d3.select(document).on("mouseup",null);t.on("touchmove",null);d3.select(document).on("touchend",null);d3.select(document).on("touchcancel",null);l={};i.remove()}function c(e,t){return e-t}function f(e){return Math.floor(o.graph.x.invert(e.offsetX||e.layerX))}}});return e.Graph.DragZoom});define("powa/views/GraphView",["backbone","d3","rickshaw","powa/views/WidgetView","powa/models/Graph","tpl!powa/templates/graph.html","powa/utils/duration","powa/utils/size","powa/rickshaw/Rickshaw.Graph.DragZoom","powa/utils/message","tippy"],function(e,o,l,i,t,n,r,a,s,u,c){var f={};var h=function(e){return new f[e.model.get("renderer")||"line"](e)};var d=i.extend({template:n,tag:"div",model:t,typname:"graph",axisFormats:{number:l.Fixtures.Number.formatKMBT,size:(new a.SizeFormatter).fromRaw,sizerate:function(e){return new a.SizeFormatter({suffix:"ps"}).fromRaw(e)},duration:function(e){return moment(parseFloat(e,10)).preciseDiff(moment(0))},percent:function(e){return Math.round(e*100)/100+"%"}},initialize:function(){var e=this;this.listenTo(this.model,"widget:needrefresh",this.update);this.listenTo(this.model,"widget:configchanges",this.configchanges);this.listenTo(this.model,"widget:dataload-failed",this.fail);this.listenTo(this,"graph:resize",this.onResize);this.render();this.$nodata_el=$("<div>").html("No data").css({position:"absolute","text-align":"center",top:"50%",width:"100%",height:"100%"}).addClass("nodata");this.nodata_el=this.$nodata_el.get(0);this.$el.addClass("graph")},getGraph:function(e){var t=new l.Color.Palette({scheme:this.model.get("color_scheme"),interpolatedStopCount:1});$.each(e,function(){this.color=t.color()});if(this.graph===undefined){this.makeGraph(e)}else{this.updateScales();this.graph.series.splice(0,this.graph.series.length+1);this.graph.series.push.apply(this.graph.series,e);this.adaptGraph(e);this.graph.validateSeries(this.graph.series)}return this.graph},getSize:function(){return{width:this.$graph_elem.parent().innerWidth()}},updateScales:function(e){var t=this;$.each(this.y_axes,function(n,i){return;var e=n;var r=+Infinity,a=-Infinity;i.scale=o.scale.linear();var s=[];_.each(this.graph.series,function(t){var e=t.metric;if(e.get("type")===n){_.each(t.data,function(e){r=Math.min(e.y,r);a=Math.max(e.y,a);t.scale=i.scale;s.push(t)})}});r=.8*r;a=1.2*a;i.scale=i.scale.domain([r,a]).range([0,1]);_.each(s,function(e){e.scale=i.scale})})},adaptGraph:function(e){},makeGraph:function(e){var t=this.model.get("renderer")||"line";data=this.model.toJSON();data["cid"]=this.cid;this.$el.html(this.template(data));var n=this.model.get("url");if(n!=undefined){var i=this.model.get("title");this.title=i;this.$el.find(".title").append(' <a href="'+n+'"'+'target="_blank">'+'<i class="fi-link" title="See the documentation"></i>'+"</a>")}this.$graph_elem=this.$el.find(".graph_container");this.graph_elem=this.$graph_elem.get(0);this.y_axes={};this.initGraph(e);this.initAxes(e);this.updateScales();this.initGoodies()},initAxes:function(e){var a=this;var s=0;this.model.get("metrics").each(function(e,t){var n=e.get("type")||"number";if(this.y_axes[n]==undefined){var i=a.axisFormats[n];var r=s%2==0?"left":"right";this.y_axes[n]=new l.Graph.Axis.Y.Scaled({element:this.$el.find(".graph_"+r+"_axis").get(0),graph:this.graph,min:0,scale:o.scale.linear(),orientation:r,tickFormat:i});s++}},this)},initAnnotator:function(){this.annotator=new l.Graph.Annotate({graph:this.graph,element:this.$el.find(".graph_timeline").get(0)})},initGraphHelp:function(){labels="";this.model.get("metrics").each(function(e,t){labels="<tr>"+"<td><b>"+e.get("label")+"</b></td>"+"<td>"+e.get("desc")+"</td></td>"+labels});help="<table>"+labels+'</table class="stack">';c("#"+this.cid,{content:help,arrow:true,arrowType:"round",maxWidth:"100%",theme:"translucent"})},initGoodies:function(){this.initAnnotator();this.legend=new l.Graph.Legend({graph:this.graph,element:this.$el.find(".graph_legend").get(0)});this.initGraphHelp()},nodata:function(){this.$nodata_el.width(this.$el.innerWidth());this.$nodata_el.height(this.$el.innerHeight());this.el.insertBefore(this.nodata_el,this.el.firstChild||null);if(this.legend){$(this.legend.element).hide()}if(this.graph){$(this.graph.element).hide()}$(".graph_timeline").hide();_.each(this.y_axes,function(e){$(e.element).empty()})},remove_nodata:function(){if(this.nodata_el&&this.nodata_el.parentNode){this.nodata_el.parentNode.removeChild(this.nodata_el)}},_resize:function(){if(this.graph){this.graph.configure({width:this.$graph_elem.parent().innerWidth()});_.each(this.y_axes,function(e){var t=e.orientation==="left"?0:this.$el.innerWidth();e.setSize({height:this.graph.height+4,auto:true})},this);this.graph.render();this.trigger("graph:resize")}},onResize:function(){},update:function(e){this.hideload();this.remove_nodata();if(e.length==0){this.nodata()}else{this.getGraph(e);$(this.graph.element).show();$(this.legend.element).show();this.graph.update();if(this.legend){this.legend.render();var t=new l.Graph.Behavior.Series.Toggle({graph:this.graph,legend:this.legend});var n=new l.Graph.Behavior.Series.Highlight({graph:this.graph,legend:this.legend})}}this.trigger("widget:update")},configchanges:function(t){if(this.annotator){var n=this;if(t===undefined||t.length==0)return;$(".graph_timeline").show();n.initAnnotator();$.each(t,function(e){change=t[e];txt=u.format_config_change(change);n.annotator.add(change["ts"],txt)});this.annotator.update()}},show:function(){this._resize()},render:function(){return this}},{extend:function(e,t){var n=i.extend.apply(this,[e,t]);f[n.prototype.rendername]=n;if(!n.makeInstance){n.makeInstance=h}return n},makeInstance:h});return d});define("powa/views/GraphPreview",["rickshaw","d3"],function(e,c){return Rickshaw.Class.create(Rickshaw.Graph.RangeSlider.Preview,{initialize:function($super,e){this.range=e.range;$super(e);e.graph.window.xMin=this.range[0];e.graph.window.xMax=this.range[1]},render:function($super){var s=this;this.svg=c.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]);this.previewHeight=this.config.height-this.config.frameTopThickness*2;this.previewWidth=this.config.width-this.config.frameHandleThickness*2;this.currentFrame=[0,this.previewWidth];var e=function(t,e){var n=Rickshaw.extend({},t.config);var i=s.previewHeight/s.graphs.length;var r=t.renderer.name;Rickshaw.extend(n,{element:this.appendChild(document.createElement("div")),height:i,width:s.previewWidth,series:t.series,renderer:r,xScale:c.time.scale()});var a=new Rickshaw.Graph(n);new Rickshaw.Graph.Axis.Time({graph:a,timeFixture:new Rickshaw.Fixtures.Time.Local});s.previews.push(a);t.onUpdate(function(){var e=t.dataDomain();if(s.range[0]>e[0]||s.range[1]<e[1]){s.rendered=false;s.range=e}s.render()});t.onConfigure(function(e){delete e.height;e.width=e.width-s.config.frameHandleThickness*2;a.configure(e);a.render()});a.render()};var t=c.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs);var n="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";if(!this.rendered){t.enter().append("div").classed("rickshaw_range_slider_preview_container",true).style("-webkit-transform",n).style("-moz-transform",n).style("-ms-transform",n).style("transform",n).each(e);t.exit().remove()}var i=this.graphs[0];var r=c.scale.linear().domain([0,this.previewWidth]).range(this.range);var a=[i.window.xMin,i.window.xMax];this.currentFrame[0]=a[0]===undefined?0:Math.round(r.invert(a[0]));if(this.currentFrame[0]<0)this.currentFrame[0]=0;this.currentFrame[1]=a[1]===undefined?this.previewWidth:r.invert(a[1]);if(this.currentFrame[1]-this.currentFrame[0]<s.config.minimumFrameWidth){this.currentFrame[1]=(this.currentFrame[0]||0)+s.config.minimumFrameWidth}this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",true).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0);this._renderDimming();this._renderFrame();this._renderGrippers();this._renderHandles();this._renderMiddle();this._registerMouseEvents();this.rendered=true},update:function($super,e){$super(e)},configure:function($super,e){$super(e)},_updateAll:function(i){var r=this;r.render();r.graphs.forEach(function(e){var t=c.scale.linear().interpolate(c.interpolateNumber).domain([0,r.previewWidth]).range(r.range);var n=[t(i[0]),t(i[1])];if(i[0]===0){n[0]=undefined}if(i[1]===r.previewWidth){n[1]=undefined}e.window.xMin=n[0];e.window.xMax=n[1]})},_registerMouseEvents:function(){var e=c.select(this.element);var n=c.select(document);var s={target:null,start:null,stop:null,left:false,right:false,rigid:false};var o=this;function t(e,t){s.stop=o._getClientXFromEvent(c.event,s);var n=s.stop-s.start;var i=o.frameBeforeDrag.slice(0);var r=o.config.minimumFrameWidth;if(s.rigid){r=o.frameBeforeDrag[1]-o.frameBeforeDrag[0]}if(s.left){i[0]=Math.max(i[0]+n,0)}if(s.right){i[1]=Math.min(i[1]+n,o.previewWidth)}var a=i[1]-i[0];if(a<=r){if(s.left){i[0]=i[1]-r}if(s.right){i[1]=i[0]+r}if(i[0]<=0){i[1]-=i[0];i[0]=0}if(i[1]>=o.previewWidth){i[0]-=i[1]-o.previewWidth;i[1]=o.previewWidth}}o._updateAll(i)}function i(){s.target=c.event.target;s.start=o._getClientXFromEvent(c.event,s);o.frameBeforeDrag=o.currentFrame.slice();c.event.preventDefault?c.event.preventDefault():c.event.returnValue=false;n.on("mousemove.rickshaw_range_slider_preview",t);n.on("mouseup.rickshaw_range_slider_preview",u);n.on("touchmove.rickshaw_range_slider_preview",t);n.on("touchend.rickshaw_range_slider_preview",u);n.on("touchcancel.rickshaw_range_slider_preview",u)}function r(e,t){s.left=true;i()}function a(e,t){s.right=true;i()}function l(e,t){s.left=true;s.right=true;s.rigid=true;i()}function u(e,t){n.on("mousemove.rickshaw_range_slider_preview",null);n.on("mouseup.rickshaw_range_slider_preview",null);n.on("touchmove.rickshaw_range_slider_preview",null);n.on("touchend.rickshaw_range_slider_preview",null);n.on("touchcancel.rickshaw_range_slider_preview",null);delete o.frameBeforeDrag;s.left=false;s.right=false;s.rigid=false;o.graphs.forEach(function(t){o.slideCallbacks.forEach(function(e){e(t,t.window.xMin||o.range[0],t.window.xMax||o.range[1])})})}e.select("rect.left_handle").on("mousedown",r);e.select("rect.right_handle").on("mousedown",a);e.select("rect.middle_handle").on("mousedown",l);e.select("rect.left_handle").on("touchstart",r);e.select("rect.right_handle").on("touchstart",a);e.select("rect.middle_handle").on("touchstart",l)}})});define("powa/views/TimeView",["powa/views/GraphView","powa/views/GraphPreview"],function(n,t){return n.extend({rendername:"time",update:function(e){n.prototype.update.call(this,e);if(this.preview){var t=this.graph.dataDomain();this.graph.window.xMin=t[0];this.graph.window.xMax=t[1];if(!this.preview.rendered){this.preview.range=t}}if(e.length>0){this.graph.render();if(this.preview){this.preview.render()}}},nodata:function(){n.prototype.nodata.call(this);this.$el.find(".graph_preview").empty()},initGoodies:function(){n.prototype.initGoodies.call(this);var l=this;var e=new Rickshaw.Graph.HoverDetail({graph:this.graph,xFormatter:function(e){return new moment.unix(e).format("LLLL")},formatter:function(e,t,n){var i=e.metric.get("type")||"number";var r=l.axisFormats[i];var a='<span class="date">'+new moment.unix(t).format("lll")+"</span>";var s='<span class="detail_swatch" style="background-color: '+e.color+'"></span>';var o=s+e.label+": "+r(n)+"<br/>"+a;return o}});this.preview=new t({graph:this.graph,element:this.$el.find(".graph_preview").get(0),range:this.graph.dataDomain()});this.preview.onSlide(function(e,t,n){l.trigger("widget:zoomin",moment.unix(t),moment.unix(n))});this.dragzoom=new Rickshaw.Graph.DragZoom({graph:this.graph,callback:function(e,t){l.trigger("widget:zoomin",moment.unix(e),moment.unix(t))}})}},{extend:function(){return n.extend.apply(this,arguments)}})});define("powa/views/LineGraphView",["rickshaw","d3","powa/views/TimeView"],function(e,t,n){return n.extend({rendername:"line",initGraph:function(e){this.graph=new Rickshaw.Graph($.extend(this.getSize(),this.model.attributes,{element:this.graph_elem,xScale:t.time.scale(),renderer:"line",series:e||[],interpolation:"linear"}));this.x_axis=new Rickshaw.Graph.Axis.Time({graph:this.graph,timeFixture:new Rickshaw.Fixtures.Time.Local})},onResize:function(){this.preview.configure({width:this.graph.width})},updatePeriod:function(e,t){if(this.preview){this.preview.rendered=false}this.from_date=e;this.to_date=t;this.showload()},addPreview:function(e,t){}},{})});define("powa/views/BarGraphView",["rickshaw","d3","powa/views/TimeView"],function(e,n,t){return t.extend({rendername:"bar",initGraph:function(e){this.graph=new Rickshaw.Graph($.extend(this.getSize(),this.model.attributes,{element:this.graph_elem,renderer:"bar",series:e||[]}));this.x_axis=new Rickshaw.Graph.Axis.Time({graph:this.graph,timeFixture:new Rickshaw.Fixtures.Time.Local});this.adaptGraph(e)},adaptGraph:function(e){var t=_.max(_.map(e,function(e){var t=_.max(e.data,function(e){return e.x});return t.x}));this.graph.x=n.scale.linear().range([0,t]).domain([0,t]);this.graph.xScale=this.graph.x}},{})});define("powa/rickshaw/Rickshaw.Graph.Renderer.Pie",["rickshaw"],function(e){e.namespace("Rickshaw.Graph.Renderer.Pie");e.Graph.Renderer.Pie=e.Class.create(e.Graph.Renderer,{name:"pie",defaults:function($super){return e.extend($super(),{unstack:true,fill:false,stroke:false,label_attribute:""})},mergeSeries:function(e){},render:function(e){e=e||{};var t=this.graph;var n=this;var i=e.series||t.series;var r=Math.min(this.graph.height,this.graph.width)*.45;var a=e.vis||t.vis;a.selectAll("*").remove();var s=[];i.forEach(function(e){if(!e.disabled){s.push(e)}});var o=a.data([s.map(function(e){return e.stack[0]})]).attr("width",this.graph.width).attr("height",this.graph.height).append("svg:g").attr("transform","translate("+r+", "+r+")");var l=d3.svg.arc().outerRadius(r);var u=d3.layout.pie().value(function(e){return e.y});var c=o.selectAll("g.slice").data(u).enter().append("svg:g","g").attr("class","slice").attr("fill",function(e,t){return s[t].color});c.append("svg:path").attr("d",l);c.append("svg:text").attr("transform",function(e){e.innerRadius=0;e.outerRadius=r;return"translate("+l.centroid(e)+")"}).attr("text-anchor","middle").attr("fill","white").text(function(e,t){if(e.endAngle-e.startAngle<4){return""}else{return e.data[n.label_attribute]}});i.forEach(function(e){if(e.disabled)return;e.path=c[0]},this)}})});define("powa/views/PieGraphView",["powa/views/GraphView","rickshaw","powa/rickshaw/Rickshaw.Graph.Renderer.Pie"],function(e,t){return e.extend({rendername:"pie",initGraph:function(e){this.graph=new t.Graph($.extend({},this.model.attributes,{element:this.graph_elem,height:this.$el.innerHeight(),width:this.$el.innerWidth()-40,renderer:"pie",series:e||[],label_attribute:this.model.get("x_label_attr")}));this.adaptGraph(e)},initAxes:function(){return}})});define("powa/views/ContentView",["powa/views/WidgetView","powa/models/Content","highlight","moment","powa/utils/duration"],function(e,t,n,i,r){return e.extend({model:t,typname:"content",initialize:function(e){this.model=e.model;this.listenTo(this.model,"widget:dataload-failed",this.fail);this.listenTo(this.model,"widget:needrefresh",this.update);this.$el.addClass("content-widget")},render:function(){var e=this;this.showload();return this},update:function(e){this.$el.html(e);this.$el.find("pre.sql code").each(function(e,t){$(t).addClass("language-pgsql");n.highlightElement(t)});this.$el.find("span.duration").each(function(e,t){var n=i(parseInt($(t).html()));$(t).html(n.preciseDiff(i.unix(0)))});this.hideload();this.trigger("widget:update")}})});define("tpl!powa/templates/wizard.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("<h4> ",title,' </h4><div class="wizard">    <div class="configuration">        <a class="launcher button radius">            Optimize this database !        </a>    </div>    <div class="summary">    <div>    <label class="progress_label" >',stage,' </label>    <div class="progress [small-# large-#]">        <span class="meter" style="width: [',progress,']%"></span>    </div>    </div>    <div class="unoptimizablegrid">    </div>    <div class="indexesgrid">    </div>    <div class="indexescheckserrorgrid">    </div>    <div class="indexeschecksgrid">    </div></div>')}return __p.join("")}});define("powa/views/WizardView",["powa/views/WidgetView","powa/models/Wizard","tpl!powa/templates/wizard.html","highlight","moment","backgrid","backbone"],function(e,t,n,i,r,a,s){var o="500",l="200";return e.extend({model:t,template:n,typname:"wizard",events:{"click .launcher":"launchOptimization"},initialize:function(e){this.model=e.model;this.listenTo(this.model,"widget:dataload-failed",this.fail);this.listenTo(this.model,"widget:update_progress",this.change_progress);this.listenTo(this.model,"wizard:start",this.onStart);this.listenTo(this.model,"wizard:end",this.onEnd);this.$el.addClass("wizard-widget");this.indexgrid=new a.Grid({columns:[{editable:false,name:"ddl",label:"Index",cell:"query"},{editable:false,name:"quals",label:"Used by",cell:"html"},{editable:false,name:"nbqueries",label:"# Queries boosted",cell:"string"}],emptyText:"No qual to optimize !",collection:this.model.get("indexes")});this.indexcheckerrorgrid=new a.Grid({columns:[{editable:false,name:"ddl",label:"Hypothetical index creation error",cell:"query"},{editable:false,name:"error",label:"Reason",cell:"string"}],emptyText:"No hypothetical index creation error.",collection:this.model.get("indexescheckserror")});this.indexcheckgrid=new a.Grid({columns:[{editable:false,name:"query",label:"Query",cell:"query"},{editable:false,name:"used",label:"Index used",cell:"bool"},{editable:false,name:"gain",label:"Gain",cell:"string"}],emptyText:"No index validation done.",collection:this.model.get("indexeschecks")});this.unoptimizablegrid=new a.Grid({columns:[{editable:false,name:"repr",label:"Unoptimized quals",cell:"html"}],emptyText:"All quals could be optimized.",collection:this.model.get("unoptimizable")});this.render()},change_progress:function(e,t){this.$progress_label.text(e);this.$progress_elem.css({width:t+"%"})},onStart:function(e,t){this.$el.find(".summary").show();this.$el.find(".launcher").prop("disabled",true);this.$gridel.show();this.$gridel2.show();this.$gridel3.show();this.$unoptimizedGrid.show()},onEnd:function(e,t){this.$el.find(".launcher").prop("disabled",false)},showload:function(){},render:function(){var e=this;if(!this.model.get("has_remote_conn")){this.$el.html("<h4>"+this.model.get("title")+"</h4>"+"<span>Impossible to suggest indexes: impossible "+" to connect to the remote database. <br />"+"<b>"+this.model.get("conn_error")+"</b>"+"</span>");return this}if(!this.model.get("has_qualstats")){this.$el.html("<h4>"+this.model.get("title")+"</h4>"+"<span>Impossible to suggest indexes: please "+" enable support for pg_qualstats in powa or update "+" pg_qualstats extension to a newer version. "+' See <a href="http://powa.readthedocs.io"> '+" the documentation for more information</span>");return this}this.$el.html(this.template(this.model.toJSON()));this.$el.find(".unoptimizablegrid").hide();this.$el.find(".indexesgrid").hide();this.$el.find(".indexescheckserrorgrid").hide();this.$el.find(".indexeschecksgrid").hide();this.$el.find(".summary").hide();this.$el.find(".results").hide();this.$progress_elem=this.$el.find(".progress");this.$progress_label=this.$el.find(".progress_label");this.$unoptimizedGrid=this.$el.find(".unoptimizablegrid");this.$unoptimizedGrid.append(this.unoptimizablegrid.render().el);this.$gridel=this.$el.find(".indexesgrid");this.$gridel.append(this.indexgrid.render().el);this.$gridel2=this.$el.find(".indexescheckserrorgrid");this.$gridel2.append(this.indexcheckerrorgrid.render().el);this.$gridel3=this.$el.find(".indexeschecksgrid");this.$gridel3.append(this.indexcheckgrid.render().el);return this},resolve_indexes:function(e){var n=this;this.change_progress("Collecting index suggestion",0);var i=_.filter(e,function(e){return e.value!=0});_.each(i,function(e,t){n.change_progress("Collecting index suggestion",t/i.length)})},launchOptimization:function(){this.model.launchOptimization({from_date:this.from_date,to_date:this.to_date})},updateIndexList:function(){}})});define("tpl!powa/templates/tabs.html",function(){return function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push('<ul class="tabs" data-tab></ul><div class="tabs-content"></div>')}return __p.join("")}});define("powa/views/TabView",["backbone","powa/views/WidgetView","powa/models/TabContainer","tpl!powa/templates/tabs.html"],function(t,n,e,i){return n.extend({template:i,tag:"div",model:e,typname:"tabcontainer",initialize:function(e){this.model=e.model;this.tabs=this.model.get("tabs").map(n.makeView);this.datasources=new t.Collection;_.each(this.tabs,function(e){this.datasources.add(e.model.data_sources.models)},this);this.render()},render:function(){var e=this;this.$el.html(this.template(this.model.toJSON()));this.$tabtitles=this.$el.find(".tabs");this.$tabs=this.$el.find(".tabs-content");this.model.get("tabs").each(function(e,t){var n=$("<li>").addClass("tab-title").attr("data-tabid",t);n.append($("<a>").attr("href","#tab"+t).html(e.get("title")));this.$tabtitles.append(n);var i=$("<div>").addClass("content").attr("id","tab"+t);if(t==0){n.addClass("active");i.addClass("active")}i.append(this.tabs[t].render().el);i.show();i.attr("style","display: inline-block");this.$tabs.append(i)},this);this.postRender();return this},postRender:function(){this.$el.foundation()},refreshSources:function(t,n){this.datasources.each(function(e){if(e.get("enabled")!=false){e.update(t,n)}});this.updatePeriod(t,n)},updatePeriod:function(e,t){var n=this;if(e.isValid()){this.from_date=e}if(t.isValid()){this.to_date=t}_.each(this.tabs,function(e){e.updatePeriod(this.from_date,this.to_date)},this)}})});define("powa/models/TabContainer",["backbone","powa/models/Widget","powa/models/DataSourceCollection","powa/views/TabView"],function(i,r,e,t){return r.extend({typname:"tabcontainer",initialize:function(e){this.tabs=e.tabs;this.title=e.title},makeView:function(e){e.model=this;return new t(e)}},{fromJSON:function(e){var n=new i.Collection;var t=this;_.each(e.tabs,function(e,t){n.add(r.fromJSON(e))});return new this({title:e.title,tabs:n})}})});window.Modernizr=function(i,f,s){var e="2.8.3",r={},a=true,h=f.documentElement,d="modernizr",t=f.createElement(d),o=t.style,l=f.createElement("input"),u=":)",n={}.toString,c=" -webkit- -moz- -o- -ms- ".split(" "),p="Webkit Moz O ms",g=p.split(" "),m=p.toLowerCase().split(" "),v={svg:"http://www.w3.org/2000/svg"},y={},_={},w={},b=[],E=b.slice,x,T=function(e,t,n,i){var r,a,s,o,l=f.createElement("div"),u=f.body,c=u||f.createElement("body");if(parseInt(n,10)){while(n--){s=f.createElement("div");s.id=i?i[n]:d+(n+1);l.appendChild(s)}}r=["&#173;",'<style id="s',d,'">',e,"</style>"].join("");l.id=d;(u?l:c).innerHTML+=r;c.appendChild(l);if(!u){c.style.background="";c.style.overflow="hidden";o=h.style.overflow;h.style.overflow="hidden";h.appendChild(c)}a=t(l,e);if(!u){c.parentNode.removeChild(c);h.style.overflow=o}else{l.parentNode.removeChild(l)}return!!a},N=function(e){var t=i.matchMedia||i.msMatchMedia;if(t){return t(e)&&t(e).matches||false}var n;T("@media "+e+" { #"+d+" { position: absolute; } }",function(e){n=(i.getComputedStyle?getComputedStyle(e,null):e.currentStyle)["position"]=="absolute"});return n},S=function(){var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function e(e,t){t=t||f.createElement(i[e]||"div");e="on"+e;var n=e in t;if(!n){if(!t.setAttribute){t=f.createElement("div")}if(t.setAttribute&&t.removeAttribute){t.setAttribute(e,"");n=R(t[e],"function");if(!R(t[e],"undefined")){t[e]=s}t.removeAttribute(e)}}t=null;return n}return e}(),C={}.hasOwnProperty,A;if(!R(C,"undefined")&&!R(C.call,"undefined")){A=function(e,t){return C.call(e,t)}}else{A=function(e,t){return t in e&&R(e.constructor.prototype[t],"undefined")}}if(!Function.prototype.bind){Function.prototype.bind=function e(i){var r=this;if(typeof r!="function"){throw new TypeError}var a=E.call(arguments,1),s=function(){if(this instanceof s){var e=function(){};e.prototype=r.prototype;var t=new e;var n=r.apply(t,a.concat(E.call(arguments)));if(Object(n)===n){return n}return t}else{return r.apply(i,a.concat(E.call(arguments)))}};return s}}function k(e){o.cssText=e}function M(e,t){return k(c.join(e+";")+(t||""))}function R(e,t){return typeof e===t}function O(e,t){return!!~(""+e).indexOf(t)}function I(e,t){for(var n in e){var i=e[n];if(!O(i,"-")&&o[i]!==s){return t=="pfx"?i:true}}return false}function D(e,t,n){for(var i in e){var r=t[e[i]];if(r!==s){if(n===false)return e[i];if(R(r,"function")){return r.bind(n||t)}return r}}return false}function L(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+g.join(i+" ")+i).split(" ");if(R(t,"string")||R(t,"undefined")){return I(r,t)}else{r=(e+" "+m.join(i+" ")+i).split(" ");return D(r,t,n)}}y["flexbox"]=function(){return L("flexWrap")};y["flexboxlegacy"]=function(){return L("boxDirection")};y["canvas"]=function(){var e=f.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))};y["canvastext"]=function(){return!!(r["canvas"]&&R(f.createElement("canvas").getContext("2d").fillText,"function"))};y["webgl"]=function(){return!!i.WebGLRenderingContext};y["touch"]=function(){var t;if("ontouchstart"in i||i.DocumentTouch&&f instanceof DocumentTouch){t=true}else{T(["@media (",c.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){t=e.offsetTop===9})}return t};y["geolocation"]=function(){return"geolocation"in navigator};y["postmessage"]=function(){return!!i.postMessage};y["websqldatabase"]=function(){return!!i.openDatabase};y["indexedDB"]=function(){return!!L("indexedDB",i)};y["hashchange"]=function(){return S("hashchange",i)&&(f.documentMode===s||f.documentMode>7)};y["history"]=function(){return!!(i.history&&history.pushState)};y["draganddrop"]=function(){var e=f.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e};y["websockets"]=function(){return"WebSocket"in i||"MozWebSocket"in i};y["rgba"]=function(){k("background-color:rgba(150,255,150,.5)");return O(o.backgroundColor,"rgba")};y["hsla"]=function(){k("background-color:hsla(120,40%,100%,.5)");return O(o.backgroundColor,"rgba")||O(o.backgroundColor,"hsla")};y["multiplebgs"]=function(){k("background:url(https://),url(https://),red url(https://)");return/(url\s*\(.*?){3}/.test(o.background)};y["backgroundsize"]=function(){return L("backgroundSize")};y["borderimage"]=function(){return L("borderImage")};y["borderradius"]=function(){return L("borderRadius")};y["boxshadow"]=function(){return L("boxShadow")};y["textshadow"]=function(){return f.createElement("div").style.textShadow===""};y["opacity"]=function(){M("opacity:.55");return/^0.55$/.test(o.opacity)};y["cssanimations"]=function(){return L("animationName")};y["csscolumns"]=function(){return L("columnCount")};y["cssgradients"]=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";k((e+"-webkit- ".split(" ").join(t+e)+c.join(n+e)).slice(0,-e.length));return O(o.backgroundImage,"gradient")};y["cssreflections"]=function(){return L("boxReflect")};y["csstransforms"]=function(){return!!L("transform")};y["csstransforms3d"]=function(){var n=!!L("perspective");if(n&&"webkitPerspective"in h.style){T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e,t){n=e.offsetLeft===9&&e.offsetHeight===3})}return n};y["csstransitions"]=function(){return L("transition")};y["fontface"]=function(){var a;T('@font-face {font-family:"font";src:url("https://")}',function(e,t){var n=f.getElementById("smodernizr"),i=n.sheet||n.styleSheet,r=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";a=/src/i.test(r)&&r.indexOf(t.split(" ")[0])===0});return a};y["generatedcontent"]=function(){var t;T(["#",d,"{font:0/0 a}#",d,':after{content:"',u,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3});return t};y["video"]=function(){var e=f.createElement("video"),t=false;try{if(t=!!e.canPlayType){t=new Boolean(t);t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(e){}return t};y["audio"]=function(){var e=f.createElement("audio"),t=false;try{if(t=!!e.canPlayType){t=new Boolean(t);t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,"");t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(e){}return t};y["localstorage"]=function(){try{localStorage.setItem(d,d);localStorage.removeItem(d);return true}catch(e){return false}};y["sessionstorage"]=function(){try{sessionStorage.setItem(d,d);sessionStorage.removeItem(d);return true}catch(e){return false}};y["webworkers"]=function(){return!!i.Worker};y["applicationcache"]=function(){return!!i.applicationCache};y["svg"]=function(){return!!f.createElementNS&&!!f.createElementNS(v.svg,"svg").createSVGRect};y["inlinesvg"]=function(){var e=f.createElement("div");e.innerHTML="<svg/>";return(e.firstChild&&e.firstChild.namespaceURI)==v.svg};y["smil"]=function(){return!!f.createElementNS&&/SVGAnimate/.test(n.call(f.createElementNS(v.svg,"animate")))};y["svgclippaths"]=function(){return!!f.createElementNS&&/SVGClipPath/.test(n.call(f.createElementNS(v.svg,"clipPath")))};function P(){r["input"]=function(e){for(var t=0,n=e.length;t<n;t++){w[e[t]]=!!(e[t]in l)}if(w.list){w.list=!!(f.createElement("datalist")&&i.HTMLDataListElement)}return w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));r["inputtypes"]=function(e){for(var t=0,n,i,r,a=e.length;t<a;t++){l.setAttribute("type",i=e[t]);n=l.type!=="text";if(n){l.value=u;l.style.cssText="position:absolute;visibility:hidden;";if(/^range$/.test(i)&&l.style.WebkitAppearance!==s){h.appendChild(l);r=f.defaultView;n=r.getComputedStyle&&r.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0;h.removeChild(l)}else if(/^(search|tel)$/.test(i)){}else if(/^(url|email)$/.test(i)){n=l.checkValidity&&l.checkValidity()===false}else{n=l.value!=u}}_[e[t]]=!!n}return _}("search tel url email datetime date month week time datetime-local number range color".split(" "))}for(var F in y){if(A(y,F)){x=F.toLowerCase();r[x]=y[F]();b.push((r[x]?"":"no-")+x)}}r.input||P();r.addTest=function(e,t){if(typeof e=="object"){for(var n in e){if(A(e,n)){r.addTest(n,e[n])}}}else{e=e.toLowerCase();if(r[e]!==s){return r}t=typeof t=="function"?t():t;if(typeof a!=="undefined"&&a){h.className+=" "+(t?"":"no-")+e}r[e]=t}return r};k("");t=l=null;(function(e,s){var t="3.7.0";var n=e.html5||{};var r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var a=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var i;var o="_html5shiv";var l=0;var u={};var c;(function(){try{var e=s.createElement("a");e.innerHTML="<xyz></xyz>";i="hidden"in e;c=e.childNodes.length==1||function(){s.createElement("a");var e=s.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(e){i=true;c=true}})();function f(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;n.innerHTML="x<style>"+t+"</style>";return i.insertBefore(n.lastChild,i.firstChild)}function h(){var e=y.elements;return typeof e=="string"?e.split(" "):e}function d(e){var t=u[e[o]];if(!t){t={};l++;e[o]=l;u[l]=t}return t}function p(e,t,n){if(!t){t=s}if(c){return t.createElement(e)}if(!n){n=d(t)}var i;if(n.cache[e]){i=n.cache[e].cloneNode()}else if(a.test(e)){i=(n.cache[e]=n.createElem(e)).cloneNode()}else{i=n.createElem(e)}return i.canHaveChildren&&!r.test(e)&&!i.tagUrn?n.frag.appendChild(i):i}function g(e,t){if(!e){e=s}if(c){return e.createDocumentFragment()}t=t||d(e);var n=t.frag.cloneNode(),i=0,r=h(),a=r.length;for(;i<a;i++){n.createElement(r[i])}return n}function m(t,n){if(!n.cache){n.cache={};n.createElem=t.createElement;n.createFrag=t.createDocumentFragment;n.frag=n.createFrag()}t.createElement=function(e){if(!y.shivMethods){return n.createElem(e)}return p(e,t,n)};t.createDocumentFragment=Function("h,f","return function(){"+"var n=f.cloneNode(),c=n.createElement;"+"h.shivMethods&&("+h().join().replace(/[\w\-]+/g,function(e){n.createElem(e);n.frag.createElement(e);return'c("'+e+'")'})+");return n}")(y,n.frag)}function v(e){if(!e){e=s}var t=d(e);if(y.shivCSS&&!i&&!t.hasCSS){t.hasCSS=!!f(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}"+"mark{background:#FF0;color:#000}"+"template{display:none}")}if(!c){m(e,t)}return e}var y={elements:n.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:t,shivCSS:n.shivCSS!==false,supportsUnknownElements:c,shivMethods:n.shivMethods!==false,type:"default",shivDocument:v,createElement:p,createDocumentFragment:g};e.html5=y;v(s)})(this,f);r._version=e;r._prefixes=c;r._domPrefixes=m;r._cssomPrefixes=g;r.mq=N;r.hasEvent=S;r.testProp=function(e){return I([e])};r.testAllProps=L;r.testStyles=T;r.prefixed=function(e,t,n){if(!t){return L(e,"pfx")}else{return L(e,t,n)}};h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(a?" js "+b.join(" "):"");return r}(this,this.document);define("modernizr",function(){});(function(e){define("foundation/foundation.tab",["foundation/foundation"],function(){return function(){(function(d,p,g,m){"use strict";Foundation.libs.tab={name:"tab",version:"5.5.3",settings:{active_class:"active",callback:function(){},deep_linking:false,scroll_to_content:true,is_hover:false},default_tab_hashes:[],init:function(e,t,n){var i=this,r=this.S;r("["+this.attr_name()+"] > .active > a",this.scope).each(function(){i.default_tab_hashes.push(this.hash)});this.bindings(t,n);this.handle_location_hash_change()},events:function(){var r=this,a=this.S;var i=function(e,t){var n=a(t).closest("["+r.attr_name()+"]").data(r.attr_name(true)+"-init");if(!n.is_hover||Modernizr.touch){var i=e.keyCode||e.which;if(i!==9){e.preventDefault();e.stopPropagation()}r.toggle_active_tab(a(t).parent())}};a(this.scope).off(".tab").on("keydown.fndtn.tab","["+this.attr_name()+"] > * > a",function(e){var t=e.keyCode||e.which;if(t===13||t===32){var n=this;i(e,n)}}).on("click.fndtn.tab","["+this.attr_name()+"] > * > a",function(e){var t=this;i(e,t)}).on("mouseenter.fndtn.tab","["+this.attr_name()+"] > * > a",function(e){var t=a(this).closest("["+r.attr_name()+"]").data(r.attr_name(true)+"-init");if(t.is_hover){r.toggle_active_tab(a(this).parent())}});a(p).on("hashchange.fndtn.tab",function(e){e.preventDefault();r.handle_location_hash_change()})},handle_location_hash_change:function(){var a=this,s=this.S;s("["+this.attr_name()+"]",this.scope).each(function(){var e=s(this).data(a.attr_name(true)+"-init");if(e.deep_linking){var t;if(e.scroll_to_content){t=a.scope.location.hash}else{t=a.scope.location.hash.replace("fndtn-","")}if(t!=""){var n=s(t);if(n.hasClass("content")&&n.parent().hasClass("tabs-content")){a.toggle_active_tab(d("["+a.attr_name()+"] > * > a[href="+t+"]").parent())}else{var i=n.closest(".content").attr("id");if(i!=m){a.toggle_active_tab(d("["+a.attr_name()+"] > * > a[href=#"+i+"]").parent(),t)}}}else{for(var r=0;r<a.default_tab_hashes.length;r++){a.toggle_active_tab(d("["+a.attr_name()+"] > * > a[href="+a.default_tab_hashes[r]+"]").parent())}}}})},toggle_active_tab:function(e,t){var n=this,i=n.S,r=e.closest("["+this.attr_name()+"]"),a=e.find("a"),s=e.children("a").first(),o="#"+s.attr("href").split("#")[1],l=i(o),u=e.siblings(),c=r.data(this.attr_name(true)+"-init"),f=function(e){var t=d(this);var n=d(this).parents("li").prev().children('[role="tab"]');var i=d(this).parents("li").next().children('[role="tab"]');var r;switch(e.keyCode){case 37:r=n;break;case 39:r=i;break;default:r=false;break}if(r.length){t.attr({tabindex:"-1","aria-selected":null});r.attr({tabindex:"0","aria-selected":true}).focus()}d('[role="tabpanel"]').attr("aria-hidden","true");d("#"+d(g.activeElement).attr("href").substring(1)).attr("aria-hidden",null)},h=function(e){var t=c.scroll_to_content?n.default_tab_hashes[0]:"fndtn-"+n.default_tab_hashes[0].replace("#","");if(e!==t||p.location.hash){p.location.hash=e}};if(s.data("tab-content")){o="#"+s.data("tab-content").split("#")[1];l=i(o)}if(c.deep_linking){if(c.scroll_to_content){h(t||o);if(t==m||t==o){e.parent()[0].scrollIntoView()}else{i(o)[0].scrollIntoView()}}else{if(t!=m){h("fndtn-"+t.replace("#",""))}else{h("fndtn-"+o.replace("#",""))}}}e.addClass(c.active_class).triggerHandler("opened");a.attr({"aria-selected":"true",tabindex:0});u.removeClass(c.active_class);u.find("a").attr({"aria-selected":"false"});l.siblings().removeClass(c.active_class).attr({"aria-hidden":"true"});l.addClass(c.active_class).attr("aria-hidden","false").removeAttr("tabindex");c.callback(e);l.triggerHandler("toggled",[l]);r.triggerHandler("toggled",[e]);a.off("keydown").on("keydown",f)},data_attr:function(e){if(this.namespace.length>0){return this.namespace+"-"+e}return e},off:function(){},reflow:function(){}}})(jQuery,window,window.document)}.apply(e,arguments)})})(this);(function(e){define("foundation/foundation.dropdown",["foundation/foundation"],function(){return function(){(function(r,f,h,e){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.5.3",settings:{active_class:"open",disabled_class:"disabled",mega_class:"mega",align:"bottom",is_hover:false,hover_timeout:150,opened:function(){},closed:function(){}},init:function(e,t,n){Foundation.inherit(this,"throttle");r.extend(true,this.settings,t,n);this.bindings(t,n)},events:function(e){var a=this,s=a.S;s(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(e){var t=s(this).data(a.attr_name(true)+"-init")||a.settings;if(!t.is_hover||Modernizr.touch){e.preventDefault();if(s(this).parent("[data-reveal-id]").length){e.stopPropagation()}a.toggle(r(this))}}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(e){var t=s(this),n,i;clearTimeout(a.timeout);if(t.data(a.data_attr())){n=s("#"+t.data(a.data_attr()));i=t}else{n=t;i=s("["+a.attr_name()+'="'+n.attr("id")+'"]')}var r=i.data(a.attr_name(true)+"-init")||a.settings;if(s(e.currentTarget).data(a.data_attr())&&r.is_hover){a.closeall.call(a)}if(r.is_hover){a.open.apply(a,[n,i])}}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(e){var t=s(this);var n;if(t.data(a.data_attr())){n=t.data(a.data_attr(true)+"-init")||a.settings}else{var i=s("["+a.attr_name()+'="'+s(this).attr("id")+'"]'),n=i.data(a.attr_name(true)+"-init")||a.settings}a.timeout=setTimeout(function(){if(t.data(a.data_attr())){if(n.is_hover){a.close.call(a,s("#"+t.data(a.data_attr())))}}else{if(n.is_hover){a.close.call(a,t)}}}.bind(this),n.hover_timeout)}).on("click.fndtn.dropdown",function(e){var t=s(e.target).closest("["+a.attr_name()+"-content]");var n=t.find("a");if(n.length>0&&t.attr("aria-autoclose")!=="false"){a.close.call(a,s("["+a.attr_name()+"-content]"))}if(e.target!==h&&!r.contains(h.documentElement,e.target)){return}if(s(e.target).closest("["+a.attr_name()+"]").length>0){return}if(!s(e.target).data("revealId")&&(t.length>0&&(s(e.target).is("["+a.attr_name()+"-content]")||r.contains(t.first()[0],e.target)))){e.stopPropagation();return}a.close.call(a,s("["+a.attr_name()+"-content]"))}).on("opened.fndtn.dropdown","["+a.attr_name()+"-content]",function(){a.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+a.attr_name()+"-content]",function(){a.settings.closed.call(this)});s(f).off(".dropdown").on("resize.fndtn.dropdown",a.throttle(function(){a.resize.call(a)},50));this.resize()},close:function(n){var i=this;n.each(function(e){var t=r("["+i.attr_name()+"="+n[e].id+"]")||r("aria-controls="+n[e].id+"]");t.attr("aria-expanded","false");if(i.S(this).hasClass(i.settings.active_class)){i.S(this).css(Foundation.rtl?"right":"left","-99999px").attr("aria-hidden","true").removeClass(i.settings.active_class).prev("["+i.attr_name()+"]").removeClass(i.settings.active_class).removeData("target");i.S(this).trigger("closed.fndtn.dropdown",[n])}});n.removeClass("f-open-"+this.attr_name(true))},closeall:function(){var e=this;r.each(e.S(".f-open-"+this.attr_name(true)),function(){e.close.call(e,e.S(this))})},open:function(e,t){this.css(e.addClass(this.settings.active_class),t);e.prev("["+this.attr_name()+"]").addClass(this.settings.active_class);e.data("target",t.get(0)).trigger("opened.fndtn.dropdown",[e,t]);e.attr("aria-hidden","false");t.attr("aria-expanded","true");e.focus();e.addClass("f-open-"+this.attr_name(true))},data_attr:function(){if(this.namespace.length>0){return this.namespace+"-"+this.name}return this.name},toggle:function(e){if(e.hasClass(this.settings.disabled_class)){return}var t=this.S("#"+e.data(this.data_attr()));if(t.length===0){return}this.close.call(this,this.S("["+this.attr_name()+"-content]").not(t));if(t.hasClass(this.settings.active_class)){this.close.call(this,t);if(t.data("target")!==e.get(0)){this.open.call(this,t,e)}}else{this.open.call(this,t,e)}},resize:function(){var e=this.S("["+this.attr_name()+"-content].open");var t=r(e.data("target"));if(e.length&&t.length){this.css(e,t)}},css:function(e,t){var n=Math.max((t.width()-e.width())/2,8),i=t.data(this.attr_name(true)+"-init")||this.settings,r=e.parent().css("overflow-y")||e.parent().css("overflow");this.clear_idx();if(this.small()){var a=this.dirs.bottom.call(e,t,i);e.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:a.top});e.css(Foundation.rtl?"right":"left",n)}else if(r!=="visible"){var s=t[0].offsetTop+t[0].offsetHeight;e.attr("style","").css({position:"absolute",top:s});e.css(Foundation.rtl?"right":"left",n)}else{this.style(e,t,i)}return e},style:function(e,t,n){var i=r.extend({position:"absolute"},this.dirs[n.align].call(e,t,n));e.attr("style","").css(i)},dirs:{_base:function(e,t){var n=this.offsetParent(),i=n.offset(),r=e.offset();r.top-=i.top;r.left-=i.left;r.missRight=false;r.missTop=false;r.missLeft=false;r.leftRightFlag=false;var a;var s=f.innerWidth;if(h.getElementsByClassName("row")[0]){a=h.getElementsByClassName("row")[0].clientWidth}else{a=s}var o=(s-a)/2;var l=a;if(!this.hasClass("mega")&&!t.ignore_repositioning){var u=this.outerWidth();var c=e.offset().left;if(e.offset().top<=this.outerHeight()){r.missTop=true;l=s-o;r.leftRightFlag=true}if(c+u>c+o&&c-o>u){r.missRight=true;r.missLeft=false}if(c-u<=0){r.missLeft=true;r.missRight=false}}return r},top:function(e,t){var n=Foundation.libs.dropdown,i=n.dirs._base.call(this,e,t);this.addClass("drop-top");if(i.missTop==true){i.top=i.top+e.outerHeight()+this.outerHeight();this.removeClass("drop-top")}if(i.missRight==true){i.left=i.left-this.outerWidth()+e.outerWidth()}if(e.outerWidth()<this.outerWidth()||n.small()||this.hasClass(t.mega_menu)){n.adjust_pip(this,e,t,i)}if(Foundation.rtl){return{left:i.left-this.outerWidth()+e.outerWidth(),top:i.top-this.outerHeight()}}return{left:i.left,top:i.top-this.outerHeight()}},bottom:function(e,t){var n=Foundation.libs.dropdown,i=n.dirs._base.call(this,e,t);if(i.missRight==true){i.left=i.left-this.outerWidth()+e.outerWidth()}if(e.outerWidth()<this.outerWidth()||n.small()||this.hasClass(t.mega_menu)){n.adjust_pip(this,e,t,i)}if(n.rtl){return{left:i.left-this.outerWidth()+e.outerWidth(),top:i.top+e.outerHeight()}}return{left:i.left,top:i.top+e.outerHeight()}},left:function(e,t){var n=Foundation.libs.dropdown.dirs._base.call(this,e,t);this.addClass("drop-left");if(n.missLeft==true){n.left=n.left+this.outerWidth();n.top=n.top+e.outerHeight();this.removeClass("drop-left")}return{left:n.left-this.outerWidth(),top:n.top}},right:function(e,t){var n=Foundation.libs.dropdown.dirs._base.call(this,e,t);this.addClass("drop-right");if(n.missRight==true){n.left=n.left-this.outerWidth();n.top=n.top+e.outerHeight();this.removeClass("drop-right")}else{n.triggeredRight=true}var i=Foundation.libs.dropdown;if(e.outerWidth()<this.outerWidth()||i.small()||this.hasClass(t.mega_menu)){i.adjust_pip(this,e,t,n)}return{left:n.left+e.outerWidth(),top:n.top}}},adjust_pip:function(e,t,n,i){var r=Foundation.stylesheet,a=8;if(e.hasClass(n.mega_class)){a=i.left+t.outerWidth()/2-8}else if(this.small()){a+=i.left-8}this.rule_idx=r.cssRules.length;var s=".f-dropdown.open:before",o=".f-dropdown.open:after",l="left: "+a+"px;",u="left: "+(a-1)+"px;";if(i.missRight==true){a=e.outerWidth()-23;s=".f-dropdown.open:before",o=".f-dropdown.open:after",l="left: "+a+"px;",u="left: "+(a-1)+"px;"}if(i.triggeredRight==true){s=".f-dropdown.open:before",o=".f-dropdown.open:after",l="left:-12px;",u="left:-14px;"}if(r.insertRule){r.insertRule([s,"{",l,"}"].join(" "),this.rule_idx);r.insertRule([o,"{",u,"}"].join(" "),this.rule_idx+1)}else{r.addRule(s,l,this.rule_idx);r.addRule(o,u,this.rule_idx+1)}},clear_idx:function(){var e=Foundation.stylesheet;if(typeof this.rule_idx!=="undefined"){e.deleteRule(this.rule_idx);e.deleteRule(this.rule_idx);delete this.rule_idx}},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown");this.S("html, body").off(".fndtn.dropdown");this.S(f).off(".fndtn.dropdown");this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}})(jQuery,window,window.document)}.apply(e,arguments)})})(this);(function(e){define("foundation/foundation.topbar",["foundation/foundation"],function(){return function(){(function(s,a,o,e){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.3",settings:{index:0,start_offset:0,sticky_class:"sticky",custom_back_text:true,back_text:"Back",mobile_show_parent_link:true,is_hover:true,scrolltop:true,sticky_on:"all",dropdown_autoclose:true},init:function(e,t,n){Foundation.inherit(this,"add_custom_rule register_media throttle");var r=this;r.register_media("topbar","foundation-mq-topbar");this.bindings(t,n);r.S("["+this.attr_name()+"]",this.scope).each(function(){var e=s(this),t=e.data(r.attr_name(true)+"-init"),n=r.S("section, .top-bar-section",this);e.data("index",0);var i=e.parent();if(i.hasClass("fixed")||r.is_sticky(e,i,t)){r.settings.sticky_class=t.sticky_class;r.settings.sticky_topbar=e;e.data("height",i.outerHeight());e.data("stickyoffset",i.offset().top)}else{e.data("height",e.outerHeight())}if(!t.assembled){r.assemble(e)}if(t.is_hover){r.S(".has-dropdown",e).addClass("not-click")}else{r.S(".has-dropdown",e).removeClass("not-click")}r.add_custom_rule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }");if(i.hasClass("fixed")){r.S("body").addClass("f-topbar-fixed")}})},is_sticky:function(e,t,n){var i=t.hasClass(n.sticky_class);var r=matchMedia(Foundation.media_queries.small).matches;var a=matchMedia(Foundation.media_queries.medium).matches;var s=matchMedia(Foundation.media_queries.large).matches;if(i&&n.sticky_on==="all"){return true}if(i&&this.small()&&n.sticky_on.indexOf("small")!==-1){if(r&&!a&&!s){return true}}if(i&&this.medium()&&n.sticky_on.indexOf("medium")!==-1){if(r&&a&&!s){return true}}if(i&&this.large()&&n.sticky_on.indexOf("large")!==-1){if(r&&a&&s){return true}}return false},toggle:function(e){var t=this,n;if(e){n=t.S(e).closest("["+this.attr_name()+"]")}else{n=t.S("["+this.attr_name()+"]")}var i=n.data(this.attr_name(true)+"-init");var r=t.S("section, .top-bar-section",n);if(t.breakpoint()){if(!t.rtl){r.css({left:"0%"});s(">.name",r).css({left:"100%"})}else{r.css({right:"0%"});s(">.name",r).css({right:"100%"})}t.S("li.moved",r).removeClass("moved");n.data("index",0);n.toggleClass("expanded").css("height","")}if(i.scrolltop){if(!n.hasClass("expanded")){if(n.hasClass("fixed")){n.parent().addClass("fixed");n.removeClass("fixed");t.S("body").addClass("f-topbar-fixed")}}else if(n.parent().hasClass("fixed")){if(i.scrolltop){n.parent().removeClass("fixed");n.addClass("fixed");t.S("body").removeClass("f-topbar-fixed");a.scrollTo(0,0)}else{n.parent().removeClass("expanded")}}}else{if(t.is_sticky(n,n.parent(),i)){n.parent().addClass("fixed")}if(n.parent().hasClass("fixed")){if(!n.hasClass("expanded")){n.removeClass("fixed");n.parent().removeClass("expanded");t.update_sticky_positioning()}else{n.addClass("fixed");n.parent().addClass("expanded");t.S("body").addClass("f-topbar-fixed")}}}},timer:null,events:function(e){var o=this,l=this.S;l(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(e){e.preventDefault();o.toggle(this)}).on("click.fndtn.topbar contextmenu.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(e){var t=s(this).closest("li"),n=t.closest("["+o.attr_name()+"]"),i=n.data(o.attr_name(true)+"-init");if(i.dropdown_autoclose&&i.is_hover){var r=s(this).closest(".hover");r.removeClass("hover")}if(o.breakpoint()&&!t.hasClass("back")&&!t.hasClass("has-dropdown")){o.toggle()}}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(e){var t=l(this),n=l(e.target),i=t.closest("["+o.attr_name()+"]"),r=i.data(o.attr_name(true)+"-init");if(n.data("revealId")){o.toggle();return}if(o.breakpoint()){return}if(r.is_hover&&!Modernizr.touch){return}e.stopImmediatePropagation();if(t.hasClass("hover")){t.removeClass("hover").find("li").removeClass("hover");t.parents("li.hover").removeClass("hover")}else{t.addClass("hover");s(t).siblings().removeClass("hover");if(n[0].nodeName==="A"&&n.parent().hasClass("has-dropdown")){e.preventDefault()}}}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(e){if(o.breakpoint()){e.preventDefault();var t=l(this),n=t.closest("["+o.attr_name()+"]"),i=n.find("section, .top-bar-section"),r=t.next(".dropdown").outerHeight(),a=t.closest("li");n.data("index",n.data("index")+1);a.addClass("moved");if(!o.rtl){i.css({left:-(100*n.data("index"))+"%"});i.find(">.name").css({left:100*n.data("index")+"%"})}else{i.css({right:-(100*n.data("index"))+"%"});i.find(">.name").css({right:100*n.data("index")+"%"})}n.css("height",t.siblings("ul").outerHeight(true)+n.data("height"))}});l(a).off(".topbar").on("resize.fndtn.topbar",o.throttle(function(){o.resize.call(o)},50)).trigger("resize.fndtn.topbar").load(function(){l(this).trigger("resize.fndtn.topbar")});l("body").off(".topbar").on("click.fndtn.topbar",function(e){var t=l(e.target).closest("li").closest("li.hover");if(t.length>0){return}l("["+o.attr_name()+"] li.hover").removeClass("hover")});l(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(e){e.preventDefault();var t=l(this),n=t.closest("["+o.attr_name()+"]"),i=n.find("section, .top-bar-section"),r=n.data(o.attr_name(true)+"-init"),a=t.closest("li.moved"),s=a.parent();n.data("index",n.data("index")-1);if(!o.rtl){i.css({left:-(100*n.data("index"))+"%"});i.find(">.name").css({left:100*n.data("index")+"%"})}else{i.css({right:-(100*n.data("index"))+"%"});i.find(">.name").css({right:100*n.data("index")+"%"})}if(n.data("index")===0){n.css("height","")}else{n.css("height",s.outerHeight(true)+n.data("height"))}setTimeout(function(){a.removeClass("moved")},300)});l(this.scope).find(".dropdown a").focus(function(){s(this).parents(".has-dropdown").addClass("hover")}).blur(function(){s(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var a=this;a.S("["+this.attr_name()+"]").each(function(){var e=a.S(this),t=e.data(a.attr_name(true)+"-init");var n=e.parent("."+a.settings.sticky_class);var i;if(!a.breakpoint()){var r=e.hasClass("expanded");e.css("height","").removeClass("expanded").find("li").removeClass("hover");if(r){a.toggle(e)}}if(a.is_sticky(e,n,t)){if(n.hasClass("fixed")){n.removeClass("fixed");i=n.offset().top;if(a.S(o.body).hasClass("f-topbar-fixed")){i-=e.data("height")}e.data("stickyoffset",i);n.addClass("fixed")}else{i=n.offset().top;e.data("stickyoffset",i)}}})},breakpoint:function(){return!matchMedia(Foundation.media_queries["topbar"]).matches},small:function(){return matchMedia(Foundation.media_queries["small"]).matches},medium:function(){return matchMedia(Foundation.media_queries["medium"]).matches},large:function(){return matchMedia(Foundation.media_queries["large"]).matches},assemble:function(e){var r=this,a=e.data(this.attr_name(true)+"-init"),t=r.S("section, .top-bar-section",e);t.detach();r.S(".has-dropdown>a",t).each(function(){var e=r.S(this),t=e.siblings(".dropdown"),n=e.attr("href"),i;if(!t.find(".title.back").length){if(a.mobile_show_parent_link==true&&n){i=s('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-medium-up"><a class="parent-link js-generated" href="'+n+'">'+e.html()+"</a></li>")}else{i=s('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>')}if(a.custom_back_text==true){s("h5>a",i).html(a.back_text)}else{s("h5>a",i).html("&laquo; "+e.html())}t.prepend(i)}});t.appendTo(e);this.sticky();this.assembled(e)},assembled:function(e){e.data(this.attr_name(true),s.extend({},e.data(this.attr_name(true)),{assembled:true}))},height:function(e){var t=0,n=this;s("> li",e).each(function(){t+=n.S(this).outerHeight(true)});return t},sticky:function(){var e=this;this.S(a).on("scroll",function(){e.update_sticky_positioning()})},update_sticky_positioning:function(){var e="."+this.settings.sticky_class,t=this.S(a),n=this;if(n.settings.sticky_topbar&&n.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var i=this.settings.sticky_topbar.data("stickyoffset")+this.settings.start_offset;if(!n.S(e).hasClass("expanded")){if(t.scrollTop()>i){if(!n.S(e).hasClass("fixed")){n.S(e).addClass("fixed");n.S("body").addClass("f-topbar-fixed")}}else if(t.scrollTop()<=i){if(n.S(e).hasClass("fixed")){n.S(e).removeClass("fixed");n.S("body").removeClass("f-topbar-fixed")}}}}},off:function(){this.S(this.scope).off(".fndtn.topbar");this.S(a).off(".fndtn.topbar")},reflow:function(){}}})(jQuery,window,window.document)}.apply(e,arguments)})})(this);(function(e){define("foundation/foundation.alert",["foundation/foundation"],function(){return function(){(function(e,t,n,i){"use strict";Foundation.libs.alert={name:"alert",version:"5.5.3",settings:{callback:function(){}},init:function(e,t,n){this.bindings(t,n)},events:function(){var i=this,r=this.S;e(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] .close",function(e){var t=r(this).closest("["+i.attr_name()+"]"),n=t.data(i.attr_name(true)+"-init")||i.settings;e.preventDefault();if(Modernizr.csstransitions){t.addClass("alert-close");t.on("transitionend webkitTransitionEnd oTransitionEnd",function(e){r(this).trigger("close.fndtn.alert").remove();n.callback()})}else{t.fadeOut(300,function(){r(this).trigger("close.fndtn.alert").remove();n.callback()})}})},reflow:function(){}}})(jQuery,window,window.document)}.apply(e,arguments)})})(this);require(["jquery","foundation/foundation","underscore","backbone","powa/views/DashboardView","powa/models/Widget","powa/models/Dashboard","powa/models/DataSourceCollection","powa/models/MetricGroup","powa/models/ContentSource","powa/utils/timeurls","powa/utils/message","highlight","popper","tippy","powa/views/LineGraphView","powa/views/BarGraphView","powa/views/PieGraphView","powa/views/GridView","powa/views/ContentView","powa/views/WizardView","powa/models/Graph","powa/models/Grid","powa/models/Content","powa/models/Wizard","powa/models/TabContainer","modernizr","foundation/foundation.tab","foundation/foundation.tooltip","foundation/foundation.dropdown","foundation/foundation.topbar","foundation/foundation.alert"],function(a,e,t,n,i,s,r,o,l,u,c,f,h,d,p){a(function(){var e=["#c05020","#30c020","#6060c0"];var t=o.get_instance();var i=new c({$el:a("#daterangepicker")});var r=[];a('script[type="text/datasources"]').each(function(){var e=JSON.parse(a(this).text());a.each(e,function(){try{if(this.type=="metric_group"){t.add(l.fromJSON(this))}else if(this.type=="content"){t.add(u.fromJSON(this))}}catch(e){console.error("Could not instantiate metric group. Check the metric group definition")}})});a(".dashboard").each(function(){var e=new Backbone.Collection;var n=this;a(this).find('script[type="text/dashboard"]').each(function(){var e=s.fromJSON(JSON.parse(this.text));var t=e.makeView({el:a(n).find(".widgets")});r.push(e);t.listenTo(i,"pickerChanged",t.refreshSources,t);t.refreshSources(i.start_date,i.end_date);i.listenTo(t,"dashboard:updatePeriod",i.updateUrls,i)})});a("#reload_collector").click(function(){a.ajax({url:"/reload_collector/",type:"GET"}).done(function(e){if(e)f.add_message("success","Collector successfully reloaded!");else f.add_message("alert","Could not reload collector.")}).fail(function(e){f.add_message("alert","Error while trying to reload the collector.")})});a(document).foundation()});return{}});define("powa/main",function(){})})();